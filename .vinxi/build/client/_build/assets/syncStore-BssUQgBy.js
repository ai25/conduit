function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/vidstack-audio-C9hhqeWo.js","assets/vidstack-BJhWhebu-B429KQl9.js","assets/vidstack-CpkvFYuN-DVxRo5ek.js","assets/routing-BmD2xUmi.js","assets/Link-Dg-h0Eyu.js","assets/components-BMGKah2q.js","assets/index-BnPmuIsI.js","assets/index-DPECAXpK.js","assets/index-Cb4tY8hP.js","assets/vidstack-video-DJmD_cO0.js","assets/vidstack-dash-BpngTHRU.js","assets/vidstack-hls-BPxS2LG7.js","assets/vidstack-vimeo-B_PzYdDr.js","assets/vidstack-BncYcP_o-IhVZ46WD.js","assets/vidstack-BTBUzdbF-g1Q0NaiI.js","assets/vidstack-youtube-AdLmryUR.js","assets/vidstack-DscYSLiW-DtyQKGjb.js","assets/vidstack-BcOhbc0p-UEWb2pYX.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{D as ce,B as ue,j as G,e as L,a6 as yi,a4 as Ml,k as bt,A as tt,L as ie,a as dt,a0 as Sb,u as Fs,f as nh,v as ft,o as Ye,E as mn,C as $t,_ as Ja,c as ff,S as Et,G as pf,J as Bs,a2 as gf,P as ca,r as Z,M as on,y as it,Q as ua,T as zn,t as mf,w as Q,x as Po,F as bf,l as yf,g as ne,W as xc,N as vn,O as Bi,K as ht,I as Tc,H as Cc,X as xb,a7 as Tb}from"./routing-BmD2xUmi.js";import{c as Hs,p as Cb,r as ih,u as ha,L as Oo}from"./Link-Dg-h0Eyu.js";import{d as vf,F as $b,e as kb,x as Ab,y as Pb,z as Ob,m as Lb,u as Ib,v as Db,s as Rb,o as Mb,A as Nb,B as Fb,C as Bb}from"./index-BnPmuIsI.js";import{c as Hb,h as Ub,i as Vb}from"./index-Cb4tY8hP.js";const jb="modulepreload",Kb=function(e){return"/_build/"+e},sh={},j=function(t,n,i){let s=Promise.resolve();if(n&&n.length>0){const r=document.getElementsByTagName("link"),o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");s=Promise.all(n.map(l=>{if(l=Kb(l),l in sh)return;sh[l]=!0;const c=l.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(!!i)for(let g=r.length-1;g>=0;g--){const p=r[g];if(p.href===l&&(!c||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${h}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":jb,c||(f.as="script",f.crossOrigin=""),f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),c)return new Promise((g,p)=>{f.addEventListener("load",g),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}return s.then(()=>t()).catch(r=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=r,window.dispatchEvent(o),!o.defaultPrevented)throw r})},wf=ue(null);function qO(e){const t=G();return L(wf.Provider,{value:t,get children(){return e.children}})}const qb=()=>{const e=ce(wf);if(!e)throw new Error("usePlaylist must be used within a PlaylistProvider");return e},Be=()=>new Map,Nl=e=>{const t=Be();return e.forEach((n,i)=>{t.set(i,n)}),t},tn=(e,t,n)=>{let i=e.get(t);return i===void 0&&e.set(t,i=n()),i},Gb=(e,t)=>{const n=[];for(const[i,s]of e)n.push(t(s,i));return n},Wb=(e,t)=>{for(const[n,i]of e)if(t(i,n))return!0;return!1},Si=()=>new Set,Za=e=>e[e.length-1],zb=(e,t)=>{for(let n=0;n<t.length;n++)e.push(t[n])},Zn=Array.from,Yb=Array.isArray;class Xb{constructor(){this._observers=Be()}on(t,n){return tn(this._observers,t,Si).add(n),n}once(t,n){const i=(...s)=>{this.off(t,i),n(...s)};this.on(t,i)}off(t,n){const i=this._observers.get(t);i!==void 0&&(i.delete(n),i.size===0&&this._observers.delete(t))}emit(t,n){return Zn((this._observers.get(t)||Be()).values()).forEach(i=>i(...n))}destroy(){this._observers=Be()}}class da{constructor(){this._observers=Be()}on(t,n){tn(this._observers,t,Si).add(n)}once(t,n){const i=(...s)=>{this.off(t,i),n(...s)};this.on(t,i)}off(t,n){const i=this._observers.get(t);i!==void 0&&(i.delete(n),i.size===0&&this._observers.delete(t))}emit(t,n){return Zn((this._observers.get(t)||Be()).values()).forEach(i=>i(...n))}destroy(){this._observers=Be()}}const Ln=Math.floor,wo=Math.abs,Qb=Math.log10,$c=(e,t)=>e<t?e:t,ts=(e,t)=>e>t?e:t,_f=e=>e!==0?e<0:1/e<0,ti=Date.now,Jb=1200,Zb=2500,Lo=3e4,Fl=e=>{if(e.shouldConnect&&e.ws===null){const t=new WebSocket(e.url),n=e.binaryType;let i=null;n&&(t.binaryType=n),e.ws=t,e.connecting=!0,e.connected=!1,t.onmessage=o=>{e.lastMessageReceived=ti();const a=o.data,l=typeof a=="string"?JSON.parse(a):a;l&&l.type==="pong"&&(clearTimeout(i),i=setTimeout(r,Lo/2)),e.emit("message",[l,e])};const s=o=>{e.ws!==null&&(e.ws=null,e.connecting=!1,e.connected?(e.connected=!1,e.emit("disconnect",[{type:"disconnect",error:o},e])):e.unsuccessfulReconnects++,setTimeout(Fl,$c(Qb(e.unsuccessfulReconnects+1)*Jb,Zb),e)),clearTimeout(i)},r=()=>{e.ws===t&&e.send({type:"ping"})};t.onclose=()=>s(null),t.onerror=o=>s(o),t.onopen=()=>{e.lastMessageReceived=ti(),e.connecting=!1,e.connected=!0,e.unsuccessfulReconnects=0,e.emit("connect",[{type:"connect"},e]),i=setTimeout(r,Lo/2)}}};class ty extends da{constructor(t,{binaryType:n}={}){super(),this.url=t,this.ws=null,this.binaryType=n||null,this.connected=!1,this.connecting=!1,this.unsuccessfulReconnects=0,this.lastMessageReceived=0,this.shouldConnect=!0,this._checkInterval=setInterval(()=>{this.connected&&Lo<ti()-this.lastMessageReceived&&this.ws.close()},Lo/2),Fl(this)}send(t){this.ws&&this.ws.send(JSON.stringify(t))}destroy(){clearInterval(this._checkInterval),this.disconnect(),super.destroy()}disconnect(){this.shouldConnect=!1,this.ws!==null&&this.ws.close()}connect(){this.shouldConnect=!0,!this.connected&&this.ws===null&&Fl(this)}}const In=e=>new Error(e),Pn=()=>{throw In("Method unimplemented")},Dn=()=>{throw In("Unexpected case")},rh=1,oh=2,tl=4,el=8,mr=32,Yn=64,Xe=128,fa=31,Bl=63,Ui=127,ey=2147483647,ny=crypto.getRandomValues.bind(crypto),iy=Math.random,Ef=()=>ny(new Uint32Array(1))[0],sy="10000000-1000-4000-8000"+-1e11,Sf=()=>sy.replace(/[018]/g,e=>(e^Ef()&15>>e/4).toString(16)),xf=Number.MAX_SAFE_INTEGER,ry=Number.isInteger||(e=>typeof e=="number"&&isFinite(e)&&Ln(e)===e),oy=String.fromCharCode,ay=e=>e.toLowerCase(),ly=/^\s*/g,cy=e=>e.replace(ly,""),uy=/([A-Z])/g,ah=(e,t)=>cy(e.replace(uy,n=>`${t}${ay(n)}`)),hy=e=>{const t=unescape(encodeURIComponent(e)),n=t.length,i=new Uint8Array(n);for(let s=0;s<n;s++)i[s]=t.codePointAt(s);return i},br=typeof TextEncoder<"u"?new TextEncoder:null,dy=e=>br.encode(e),Hl=br?dy:hy;let lr=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});lr&&lr.decode(new Uint8Array).length===1&&(lr=null);class Dr{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const _e=()=>new Dr,fy=e=>{let t=e.cpos;for(let n=0;n<e.bufs.length;n++)t+=e.bufs[n].length;return t},Jt=e=>{const t=new Uint8Array(fy(e));let n=0;for(let i=0;i<e.bufs.length;i++){const s=e.bufs[i];t.set(s,n),n+=s.length}return t.set(new Uint8Array(e.cbuf.buffer,0,e.cpos),n),t},py=(e,t)=>{const n=e.cbuf.length;n-e.cpos<t&&(e.bufs.push(new Uint8Array(e.cbuf.buffer,0,e.cpos)),e.cbuf=new Uint8Array(ts(n,t)*2),e.cpos=0)},ye=(e,t)=>{const n=e.cbuf.length;e.cpos===n&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(n*2),e.cpos=0),e.cbuf[e.cpos++]=t},yr=ye,at=(e,t)=>{for(;t>Ui;)ye(e,Xe|Ui&t),t=Ln(t/128);ye(e,Ui&t)},kc=(e,t)=>{const n=_f(t);for(n&&(t=-t),ye(e,(t>Bl?Xe:0)|(n?Yn:0)|Bl&t),t=Ln(t/64);t>0;)ye(e,(t>Ui?Xe:0)|Ui&t),t=Ln(t/128)},Ul=new Uint8Array(3e4),gy=Ul.length/3,my=(e,t)=>{if(t.length<gy){const n=br.encodeInto(t,Ul).written||0;at(e,n);for(let i=0;i<n;i++)ye(e,Ul[i])}else te(e,Hl(t))},by=(e,t)=>{const n=unescape(encodeURIComponent(t)),i=n.length;at(e,i);for(let s=0;s<i;s++)ye(e,n.codePointAt(s))},On=br&&br.encodeInto?my:by,pa=(e,t)=>{const n=e.cbuf.length,i=e.cpos,s=$c(n-i,t.length),r=t.length-s;e.cbuf.set(t.subarray(0,s),i),e.cpos+=s,r>0&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(ts(n*2,r)),e.cbuf.set(t.subarray(s)),e.cpos=r)},te=(e,t)=>{at(e,t.byteLength),pa(e,t)},Ac=(e,t)=>{py(e,t);const n=new DataView(e.cbuf.buffer,e.cpos,t);return e.cpos+=t,n},yy=(e,t)=>Ac(e,4).setFloat32(0,t,!1),vy=(e,t)=>Ac(e,8).setFloat64(0,t,!1),wy=(e,t)=>Ac(e,8).setBigInt64(0,t,!1),lh=new DataView(new ArrayBuffer(4)),_y=e=>(lh.setFloat32(0,e),lh.getFloat32(0)===e),Ss=(e,t)=>{switch(typeof t){case"string":ye(e,119),On(e,t);break;case"number":ry(t)&&wo(t)<=ey?(ye(e,125),kc(e,t)):_y(t)?(ye(e,124),yy(e,t)):(ye(e,123),vy(e,t));break;case"bigint":ye(e,122),wy(e,t);break;case"object":if(t===null)ye(e,126);else if(Yb(t)){ye(e,117),at(e,t.length);for(let n=0;n<t.length;n++)Ss(e,t[n])}else if(t instanceof Uint8Array)ye(e,116),te(e,t);else{ye(e,118);const n=Object.keys(t);at(e,n.length);for(let i=0;i<n.length;i++){const s=n[i];On(e,s),Ss(e,t[s])}}break;case"boolean":ye(e,t?120:121);break;default:ye(e,127)}};class ch extends Dr{constructor(t){super(),this.w=t,this.s=null,this.count=0}write(t){this.s===t?this.count++:(this.count>0&&at(this,this.count-1),this.count=1,this.w(this,t),this.s=t)}}const uh=e=>{e.count>0&&(kc(e.encoder,e.count===1?e.s:-e.s),e.count>1&&at(e.encoder,e.count-2))};class _o{constructor(){this.encoder=new Dr,this.s=0,this.count=0}write(t){this.s===t?this.count++:(uh(this),this.count=1,this.s=t)}toUint8Array(){return uh(this),Jt(this.encoder)}}const hh=e=>{if(e.count>0){const t=e.diff*2+(e.count===1?0:1);kc(e.encoder,t),e.count>1&&at(e.encoder,e.count-2)}};class nl{constructor(){this.encoder=new Dr,this.s=0,this.count=0,this.diff=0}write(t){this.diff===t-this.s?(this.s=t,this.count++):(hh(this),this.count=1,this.diff=t-this.s,this.s=t)}toUint8Array(){return hh(this),Jt(this.encoder)}}class Ey{constructor(){this.sarr=[],this.s="",this.lensE=new _o}write(t){this.s+=t,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(t.length)}toUint8Array(){const t=new Dr;return this.sarr.push(this.s),this.s="",On(t,this.sarr.join("")),pa(t,this.lensE.toUint8Array()),Jt(t)}}const Tf=In("Unexpected end of array"),Cf=In("Integer out of Range");class ga{constructor(t){this.arr=t,this.pos=0}}const Bn=e=>new ga(e),Sy=e=>e.pos!==e.arr.length,xy=(e,t)=>{const n=new Uint8Array(e.arr.buffer,e.pos+e.arr.byteOffset,t);return e.pos+=t,n},ve=e=>xy(e,gt(e)),qi=e=>e.arr[e.pos++],gt=e=>{let t=0,n=1;const i=e.arr.length;for(;e.pos<i;){const s=e.arr[e.pos++];if(t=t+(s&Ui)*n,n*=128,s<Xe)return t;if(t>xf)throw Cf}throw Tf},Pc=e=>{let t=e.arr[e.pos++],n=t&Bl,i=64;const s=(t&Yn)>0?-1:1;if(!(t&Xe))return s*n;const r=e.arr.length;for(;e.pos<r;){if(t=e.arr[e.pos++],n=n+(t&Ui)*i,i*=128,t<Xe)return s*n;if(n>xf)throw Cf}throw Tf},Ty=e=>{let t=gt(e);if(t===0)return"";{let n=String.fromCodePoint(qi(e));if(--t<100)for(;t--;)n+=String.fromCodePoint(qi(e));else for(;t>0;){const i=t<1e4?t:1e4,s=e.arr.subarray(e.pos,e.pos+i);e.pos+=i,n+=String.fromCodePoint.apply(null,s),t-=i}return decodeURIComponent(escape(n))}},Cy=e=>lr.decode(ve(e)),Xn=lr?Cy:Ty,Oc=(e,t)=>{const n=new DataView(e.arr.buffer,e.arr.byteOffset+e.pos,t);return e.pos+=t,n},$y=e=>Oc(e,4).getFloat32(0,!1),ky=e=>Oc(e,8).getFloat64(0,!1),Ay=e=>Oc(e,8).getBigInt64(0,!1),Py=[e=>{},e=>null,Pc,$y,ky,Ay,e=>!1,e=>!0,Xn,e=>{const t=gt(e),n={};for(let i=0;i<t;i++){const s=Xn(e);n[s]=xs(e)}return n},e=>{const t=gt(e),n=[];for(let i=0;i<t;i++)n.push(xs(e));return n},ve],xs=e=>Py[127-qi(e)](e);class dh extends ga{constructor(t,n){super(t),this.reader=n,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),Sy(this)?this.count=gt(this)+1:this.count=-1),this.count--,this.s}}class Eo extends ga{constructor(t){super(t),this.s=0,this.count=0}read(){if(this.count===0){this.s=Pc(this);const t=_f(this.s);this.count=1,t&&(this.s=-this.s,this.count=gt(this)+2)}return this.count--,this.s}}class il extends ga{constructor(t){super(t),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const t=Pc(this),n=t&1;this.diff=Ln(t/2),this.count=1,n&&(this.count=gt(this)+2)}return this.s+=this.diff,this.count--,this.s}}class Oy{constructor(t){this.decoder=new Eo(t),this.str=Xn(this.decoder),this.spos=0}read(){const t=this.spos+this.decoder.read(),n=this.str.slice(this.spos,t);return this.spos=t,n}}const fh=e=>e===void 0?null:e;class Ly{constructor(){this.map=new Map}setItem(t,n){this.map.set(t,n)}getItem(t){return this.map.get(t)}}let $f=new Ly,Lc=!0;try{typeof localStorage<"u"&&localStorage&&($f=localStorage,Lc=!1)}catch{}const kf=$f,Iy=e=>Lc||addEventListener("storage",e),Dy=e=>Lc||removeEventListener("storage",e),Ry=Object.assign,My=Object.keys,Ny=(e,t)=>{for(const n in e)t(e[n],n)},Io=e=>My(e).length,Fy=e=>{for(const t in e)return!1;return!0},By=(e,t)=>{for(const n in e)if(!t(e[n],n))return!1;return!0},Af=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),Hy=(e,t)=>e===t||Io(e)===Io(t)&&By(e,(n,i)=>(n!==void 0||Af(t,i))&&t[i]===n),Ic=(e,t,n=0)=>{try{for(;n<e.length;n++)e[n](...t)}finally{n<e.length&&Ic(e,t,n+1)}},Uy=()=>{},Vy=e=>e,jy=(e,t)=>e===t,cr=(e,t)=>{if(e==null||t==null)return jy(e,t);if(e.constructor!==t.constructor)return!1;if(e===t)return!0;switch(e.constructor){case ArrayBuffer:e=new Uint8Array(e),t=new Uint8Array(t);case Uint8Array:{if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;break}case Set:{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;break}case Map:{if(e.size!==t.size)return!1;for(const n of e.keys())if(!t.has(n)||!cr(e.get(n),t.get(n)))return!1;break}case Object:if(Io(e)!==Io(t))return!1;for(const n in e)if(!Af(e,n)||!cr(e[n],t[n]))return!1;break;case Array:if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!cr(e[n],t[n]))return!1;break;default:return!1}return!0},Ky=(e,t)=>t.includes(e);var Pf={};const Ts=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",Of=typeof window<"u"&&typeof document<"u"&&!Ts;let Cn;const qy=()=>{if(Cn===void 0)if(Ts){Cn=Be();const e=process.argv;let t=null;for(let n=0;n<e.length;n++){const i=e[n];i[0]==="-"?(t!==null&&Cn.set(t,""),t=i):t!==null&&(Cn.set(t,i),t=null)}t!==null&&Cn.set(t,"")}else typeof location=="object"?(Cn=Be(),(location.search||"?").slice(1).split("&").forEach(e=>{if(e.length!==0){const[t,n]=e.split("=");Cn.set(`--${ah(t,"-")}`,n),Cn.set(`-${ah(t,"-")}`,n)}})):Cn=Be();return Cn},Vl=e=>qy().has(e),Do=e=>fh(Ts?Pf[e.toUpperCase()]:kf.getItem(e)),Gy=e=>Vl("--"+e)||Do(e)!==null;Gy("production");const ph=Ts&&Ky(Pf.FORCE_COLOR,["true","1","2"]),Wy=!Vl("no-colors")&&(!Ts||process.stdout.isTTY||ph)&&(!Ts||Vl("color")||ph||Do("COLORTERM")!==null||(Do("TERM")||"").includes("color"));class zy{constructor(t,n){this.left=t,this.right=n}}const jn=(e,t)=>new zy(e,t);typeof DOMParser<"u"&&new DOMParser;const Yy=e=>Gb(e,(t,n)=>`${n}:${t};`).join(""),ri=Symbol,hn=ri(),Gi=ri(),Lf=ri(),Dc=ri(),If=ri(),Df=ri(),Rf=ri(),Rc=ri(),ma=ri(),Xy=e=>{const t=[];let n=0;for(;n<e.length;n++){const i=e[n];i.constructor===String||i.constructor===Number||i.constructor===Object&&t.push(JSON.stringify(i))}return t},gh=[If,Rf,Rc,Lf];let sl=0,mh=ti();const Qy=(e,t)=>{const n=gh[sl],i=Do("log"),s=i!==null&&(i==="*"||i==="true"||new RegExp(i,"gi").test(t));return sl=(sl+1)%gh.length,t+=": ",s?(...r)=>{const o=ti(),a=o-mh;mh=o,e(n,t,ma,...r.map(l=>typeof l=="string"||typeof l=="symbol"?l:JSON.stringify(l)),n," +"+a+"ms")}:Uy},Jy={[hn]:jn("font-weight","bold"),[Gi]:jn("font-weight","normal"),[Lf]:jn("color","blue"),[If]:jn("color","green"),[Dc]:jn("color","grey"),[Df]:jn("color","red"),[Rf]:jn("color","purple"),[Rc]:jn("color","orange"),[ma]:jn("color","black")},Zy=e=>{const t=[],n=[],i=Be();let s=[],r=0;for(;r<e.length;r++){const o=e[r],a=Jy[o];if(a!==void 0)i.set(a.left,a.right);else if(o.constructor===String||o.constructor===Number){const l=Yy(i);r>0||l.length>0?(t.push("%c"+o),n.push(l)):t.push(o)}else break}for(r>0&&(s=n,s.unshift(t.join("")));r<e.length;r++){const o=e[r];o instanceof Symbol||s.push(o)}return s},tv=Wy?Zy:Xy,Mf=(...e)=>{console.log(...tv(e)),ev.forEach(t=>t.print(e))},ev=Si(),nv=e=>Qy(Mf,e),bh=e=>new Promise(e);Promise.all.bind(Promise);const iv=e=>Promise.reject(e),Mc=e=>Promise.resolve(e),Nf=e=>new Uint8Array(e),sv=(e,t,n)=>new Uint8Array(e,t,n),rv=e=>new Uint8Array(e),ov=e=>{let t="";for(let n=0;n<e.byteLength;n++)t+=oy(e[n]);return btoa(t)},av=e=>Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("base64"),lv=e=>{const t=atob(e),n=Nf(t.length);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n},cv=e=>{const t=Buffer.from(e,"base64");return sv(t.buffer,t.byteOffset,t.byteLength)},Ff=Of?ov:av,Bf=Of?lv:cv,uv=e=>{const t=Nf(e.byteLength);return t.set(e),t},Hf=new Map;class hv{constructor(t){this.room=t,this.onmessage=null,this._onChange=n=>n.key===t&&this.onmessage!==null&&this.onmessage({data:Bf(n.newValue||"")}),Iy(this._onChange)}postMessage(t){kf.setItem(this.room,Ff(rv(t)))}close(){Dy(this._onChange)}}const dv=typeof BroadcastChannel>"u"?hv:BroadcastChannel,Nc=e=>tn(Hf,e,()=>{const t=Si(),n=new dv(e);return n.onmessage=i=>t.forEach(s=>s(i.data,"broadcastchannel")),{bc:n,subs:t}}),fv=(e,t)=>(Nc(e).subs.add(t),t),pv=(e,t)=>{const n=Nc(e),i=n.subs.delete(t);return i&&n.subs.size===0&&(n.bc.close(),Hf.delete(e)),i},gv=(e,t,n=null)=>{const i=Nc(e);i.bc.postMessage(t),i.subs.forEach(s=>s(t,n))},mv=()=>{let e=!0;return(t,n)=>{if(e){e=!1;try{t()}finally{e=!0}}else n!==void 0&&n()}},Uf=e=>({[Symbol.iterator](){return this},next:e}),bv=(e,t)=>Uf(()=>{let n;do n=e.next();while(!n.done&&!t(n.value));return n}),rl=(e,t)=>Uf(()=>{const{done:n,value:i}=e.next();return{done:n,value:n?void 0:t(i)}});class Fc{constructor(t,n){this.clock=t,this.len=n}}class Rr{constructor(){this.clients=new Map}}const Vf=(e,t,n)=>t.clients.forEach((i,s)=>{const r=e.doc.store.clients.get(s);for(let o=0;o<i.length;o++){const a=i[o];ip(e,r,a.clock,a.len,n)}}),yv=(e,t)=>{let n=0,i=e.length-1;for(;n<=i;){const s=Ln((n+i)/2),r=e[s],o=r.clock;if(o<=t){if(t<o+r.len)return s;n=s+1}else i=s-1}return null},jf=(e,t)=>{const n=e.clients.get(t.client);return n!==void 0&&yv(n,t.clock)!==null},Bc=e=>{e.clients.forEach(t=>{t.sort((s,r)=>s.clock-r.clock);let n,i;for(n=1,i=1;n<t.length;n++){const s=t[i-1],r=t[n];s.clock+s.len>=r.clock?s.len=ts(s.len,r.clock+r.len-s.clock):(i<n&&(t[i]=r),i++)}t.length=i})},vv=e=>{const t=new Rr;for(let n=0;n<e.length;n++)e[n].clients.forEach((i,s)=>{if(!t.clients.has(s)){const r=i.slice();for(let o=n+1;o<e.length;o++)zb(r,e[o].clients.get(s)||[]);t.clients.set(s,r)}});return Bc(t),t},Ro=(e,t,n,i)=>{tn(e.clients,t,()=>[]).push(new Fc(n,i))},wv=()=>new Rr,_v=e=>{const t=wv();return e.clients.forEach((n,i)=>{const s=[];for(let r=0;r<n.length;r++){const o=n[r];if(o.deleted){const a=o.id.clock;let l=o.length;if(r+1<n.length)for(let c=n[r+1];r+1<n.length&&c.deleted;c=n[++r+1])l+=c.length;s.push(new Fc(a,l))}}s.length>0&&t.clients.set(i,s)}),t},Us=(e,t)=>{at(e.restEncoder,t.clients.size),Zn(t.clients.entries()).sort((n,i)=>i[0]-n[0]).forEach(([n,i])=>{e.resetDsCurVal(),at(e.restEncoder,n);const s=i.length;at(e.restEncoder,s);for(let r=0;r<s;r++){const o=i[r];e.writeDsClock(o.clock),e.writeDsLen(o.len)}})},Hc=e=>{const t=new Rr,n=gt(e.restDecoder);for(let i=0;i<n;i++){e.resetDsCurVal();const s=gt(e.restDecoder),r=gt(e.restDecoder);if(r>0){const o=tn(t.clients,s,()=>[]);for(let a=0;a<r;a++)o.push(new Fc(e.readDsClock(),e.readDsLen()))}}return t},yh=(e,t,n)=>{const i=new Rr,s=gt(e.restDecoder);for(let r=0;r<s;r++){e.resetDsCurVal();const o=gt(e.restDecoder),a=gt(e.restDecoder),l=n.clients.get(o)||[],c=Se(n,o);for(let h=0;h<a;h++){const u=e.readDsClock(),f=u+e.readDsLen();if(u<c){c<f&&Ro(i,o,c,f-c);let g=Rn(l,u),p=l[g];for(!p.deleted&&p.id.clock<u&&(l.splice(g+1,0,Vo(t,p,u-p.id.clock)),g++);g<l.length&&(p=l[g++],p.id.clock<f);)p.deleted||(f<p.id.clock+p.length&&l.splice(g,0,Vo(t,p,f-p.id.clock)),p.delete(t))}else Ro(i,o,u,f-u)}}if(i.clients.size>0){const r=new Wi;return at(r.restEncoder,0),Us(r,i),r.toUint8Array()}return null},Kf=Ef;class oi extends da{constructor({guid:t=Sf(),collectionid:n=null,gc:i=!0,gcFilter:s=()=>!0,meta:r=null,autoLoad:o=!1,shouldLoad:a=!0}={}){super(),this.gc=i,this.gcFilter=s,this.clientID=Kf(),this.guid=t,this.collectionid=n,this.share=new Map,this.store=new ep,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=a,this.autoLoad=o,this.meta=r,this.isLoaded=!1,this.isSynced=!1,this.whenLoaded=bh(c=>{this.on("load",()=>{this.isLoaded=!0,c(this)})});const l=()=>bh(c=>{const h=u=>{(u===void 0||u===!0)&&(this.off("sync",h),c())};this.on("sync",h)});this.on("sync",c=>{c===!1&&this.isSynced&&(this.whenSynced=l()),this.isSynced=c===void 0||c===!0,this.isLoaded||this.emit("load",[])}),this.whenSynced=l()}load(){const t=this._item;t!==null&&!this.shouldLoad&&qt(t.parent.doc,n=>{n.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(Zn(this.subdocs).map(t=>t.guid))}transact(t,n=null){return qt(this,t,n)}get(t,n=$e){const i=tn(this.share,t,()=>{const r=new n;return r._integrate(this,null),r}),s=i.constructor;if(n!==$e&&s!==n)if(s===$e){const r=new n;r._map=i._map,i._map.forEach(o=>{for(;o!==null;o=o.left)o.parent=r}),r._start=i._start;for(let o=r._start;o!==null;o=o.right)o.parent=r;return r._length=i._length,this.share.set(t,r),r._integrate(this,null),r}else throw new Error(`Type with the name ${t} has already been defined with a different constructor`);return i}getArray(t=""){return this.get(t,we)}getText(t=""){return this.get(t,$s)}getMap(t=""){return this.get(t,Ce)}getXmlFragment(t=""){return this.get(t,zi)}toJSON(){const t={};return this.share.forEach((n,i)=>{t[i]=n.toJSON()}),t}destroy(){Zn(this.subdocs).forEach(n=>n.destroy());const t=this._item;if(t!==null){this._item=null;const n=t.content;n.doc=new oi({guid:this.guid,...n.opts,shouldLoad:!1}),n.doc._item=t,qt(t.parent.doc,i=>{const s=n.doc;t.deleted||i.subdocsAdded.add(s),i.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}on(t,n){super.on(t,n)}off(t,n){super.off(t,n)}}class qf{constructor(t){this.restDecoder=t}resetDsCurVal(){}readDsClock(){return gt(this.restDecoder)}readDsLen(){return gt(this.restDecoder)}}class Gf extends qf{readLeftID(){return Ot(gt(this.restDecoder),gt(this.restDecoder))}readRightID(){return Ot(gt(this.restDecoder),gt(this.restDecoder))}readClient(){return gt(this.restDecoder)}readInfo(){return qi(this.restDecoder)}readString(){return Xn(this.restDecoder)}readParentInfo(){return gt(this.restDecoder)===1}readTypeRef(){return gt(this.restDecoder)}readLen(){return gt(this.restDecoder)}readAny(){return xs(this.restDecoder)}readBuf(){return uv(ve(this.restDecoder))}readJSON(){return JSON.parse(Xn(this.restDecoder))}readKey(){return Xn(this.restDecoder)}}class Ev{constructor(t){this.dsCurrVal=0,this.restDecoder=t}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=gt(this.restDecoder),this.dsCurrVal}readDsLen(){const t=gt(this.restDecoder)+1;return this.dsCurrVal+=t,t}}class Cs extends Ev{constructor(t){super(t),this.keys=[],gt(t),this.keyClockDecoder=new il(ve(t)),this.clientDecoder=new Eo(ve(t)),this.leftClockDecoder=new il(ve(t)),this.rightClockDecoder=new il(ve(t)),this.infoDecoder=new dh(ve(t),qi),this.stringDecoder=new Oy(ve(t)),this.parentInfoDecoder=new dh(ve(t),qi),this.typeRefDecoder=new Eo(ve(t)),this.lenDecoder=new Eo(ve(t))}readLeftID(){return new bs(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new bs(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return xs(this.restDecoder)}readBuf(){return ve(this.restDecoder)}readJSON(){return xs(this.restDecoder)}readKey(){const t=this.keyClockDecoder.read();if(t<this.keys.length)return this.keys[t];{const n=this.stringDecoder.read();return this.keys.push(n),n}}}class Wf{constructor(){this.restEncoder=_e()}toUint8Array(){return Jt(this.restEncoder)}resetDsCurVal(){}writeDsClock(t){at(this.restEncoder,t)}writeDsLen(t){at(this.restEncoder,t)}}class Mr extends Wf{writeLeftID(t){at(this.restEncoder,t.client),at(this.restEncoder,t.clock)}writeRightID(t){at(this.restEncoder,t.client),at(this.restEncoder,t.clock)}writeClient(t){at(this.restEncoder,t)}writeInfo(t){yr(this.restEncoder,t)}writeString(t){On(this.restEncoder,t)}writeParentInfo(t){at(this.restEncoder,t?1:0)}writeTypeRef(t){at(this.restEncoder,t)}writeLen(t){at(this.restEncoder,t)}writeAny(t){Ss(this.restEncoder,t)}writeBuf(t){te(this.restEncoder,t)}writeJSON(t){On(this.restEncoder,JSON.stringify(t))}writeKey(t){On(this.restEncoder,t)}}class zf{constructor(){this.restEncoder=_e(),this.dsCurrVal=0}toUint8Array(){return Jt(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(t){const n=t-this.dsCurrVal;this.dsCurrVal=t,at(this.restEncoder,n)}writeDsLen(t){t===0&&Dn(),at(this.restEncoder,t-1),this.dsCurrVal+=t}}class Wi extends zf{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new nl,this.clientEncoder=new _o,this.leftClockEncoder=new nl,this.rightClockEncoder=new nl,this.infoEncoder=new ch(yr),this.stringEncoder=new Ey,this.parentInfoEncoder=new ch(yr),this.typeRefEncoder=new _o,this.lenEncoder=new _o}toUint8Array(){const t=_e();return at(t,0),te(t,this.keyClockEncoder.toUint8Array()),te(t,this.clientEncoder.toUint8Array()),te(t,this.leftClockEncoder.toUint8Array()),te(t,this.rightClockEncoder.toUint8Array()),te(t,Jt(this.infoEncoder)),te(t,this.stringEncoder.toUint8Array()),te(t,Jt(this.parentInfoEncoder)),te(t,this.typeRefEncoder.toUint8Array()),te(t,this.lenEncoder.toUint8Array()),pa(t,Jt(this.restEncoder)),Jt(t)}writeLeftID(t){this.clientEncoder.write(t.client),this.leftClockEncoder.write(t.clock)}writeRightID(t){this.clientEncoder.write(t.client),this.rightClockEncoder.write(t.clock)}writeClient(t){this.clientEncoder.write(t)}writeInfo(t){this.infoEncoder.write(t)}writeString(t){this.stringEncoder.write(t)}writeParentInfo(t){this.parentInfoEncoder.write(t?1:0)}writeTypeRef(t){this.typeRefEncoder.write(t)}writeLen(t){this.lenEncoder.write(t)}writeAny(t){Ss(this.restEncoder,t)}writeBuf(t){te(this.restEncoder,t)}writeJSON(t){Ss(this.restEncoder,t)}writeKey(t){const n=this.keyMap.get(t);n===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(t)):this.keyClockEncoder.write(n)}}const Sv=(e,t,n,i)=>{i=ts(i,t[0].id.clock);const s=Rn(t,i);at(e.restEncoder,t.length-s),e.writeClient(n),at(e.restEncoder,i);const r=t[s];r.write(e,i-r.id.clock);for(let o=s+1;o<t.length;o++)t[o].write(e,0)},Uc=(e,t,n)=>{const i=new Map;n.forEach((s,r)=>{Se(t,r)>s&&i.set(r,s)}),ba(t).forEach((s,r)=>{n.has(r)||i.set(r,0)}),at(e.restEncoder,i.size),Zn(i.entries()).sort((s,r)=>r[0]-s[0]).forEach(([s,r])=>{Sv(e,t.clients.get(s),s,r)})},xv=(e,t)=>{const n=Be(),i=gt(e.restDecoder);for(let s=0;s<i;s++){const r=gt(e.restDecoder),o=new Array(r),a=e.readClient();let l=gt(e.restDecoder);n.set(a,{i:0,refs:o});for(let c=0;c<r;c++){const h=e.readInfo();switch(fa&h){case 0:{const u=e.readLen();o[c]=new ln(Ot(a,l),u),l+=u;break}case 10:{const u=gt(e.restDecoder);o[c]=new cn(Ot(a,l),u),l+=u;break}default:{const u=(h&(Yn|Xe))===0,f=new fe(Ot(a,l),null,(h&Xe)===Xe?e.readLeftID():null,null,(h&Yn)===Yn?e.readRightID():null,u?e.readParentInfo()?t.get(e.readString()):e.readLeftID():null,u&&(h&mr)===mr?e.readString():null,Ep(e,h));o[c]=f,l+=f.length}}}}return n},Tv=(e,t,n)=>{const i=[];let s=Zn(n.keys()).sort((g,p)=>g-p);if(s.length===0)return null;const r=()=>{if(s.length===0)return null;let g=n.get(s[s.length-1]);for(;g.refs.length===g.i;)if(s.pop(),s.length>0)g=n.get(s[s.length-1]);else return null;return g};let o=r();if(o===null&&i.length===0)return null;const a=new ep,l=new Map,c=(g,p)=>{const y=l.get(g);(y==null||y>p)&&l.set(g,p)};let h=o.refs[o.i++];const u=new Map,f=()=>{for(const g of i){const p=g.id.client,y=n.get(p);y?(y.i--,a.clients.set(p,y.refs.slice(y.i)),n.delete(p),y.i=0,y.refs=[]):a.clients.set(p,[g]),s=s.filter(x=>x!==p)}i.length=0};for(;;){if(h.constructor!==cn){const p=tn(u,h.id.client,()=>Se(t,h.id.client))-h.id.clock;if(p<0)i.push(h),c(h.id.client,h.id.clock-1),f();else{const y=h.getMissing(e,t);if(y!==null){i.push(h);const x=n.get(y)||{refs:[],i:0};if(x.refs.length===x.i)c(y,Se(t,y)),f();else{h=x.refs[x.i++];continue}}else(p===0||p<h.length)&&(h.integrate(e,p),u.set(h.id.client,h.id.clock+h.length))}}if(i.length>0)h=i.pop();else if(o!==null&&o.i<o.refs.length)h=o.refs[o.i++];else{if(o=r(),o===null)break;h=o.refs[o.i++]}}if(a.clients.size>0){const g=new Wi;return Uc(g,a,new Map),at(g.restEncoder,0),{missing:l,update:g.toUint8Array()}}return null},Cv=(e,t)=>Uc(e,t.doc.store,t.beforeState),$v=(e,t,n,i=new Cs(e))=>qt(t,s=>{s.local=!1;let r=!1;const o=s.doc,a=o.store,l=xv(i,o),c=Tv(s,a,l),h=a.pendingStructs;if(h){for(const[f,g]of h.missing)if(g<Se(a,f)){r=!0;break}if(c){for(const[f,g]of c.missing){const p=h.missing.get(f);(p==null||p>g)&&h.missing.set(f,g)}h.update=Mo([h.update,c.update])}}else a.pendingStructs=c;const u=yh(i,s,a);if(a.pendingDs){const f=new Cs(Bn(a.pendingDs));gt(f.restDecoder);const g=yh(f,s,a);u&&g?a.pendingDs=Mo([u,g]):a.pendingDs=u||g}else a.pendingDs=u;if(r){const f=a.pendingStructs.update;a.pendingStructs=null,Yf(s.doc,f)}},n,!1),Yf=(e,t,n,i=Cs)=>{const s=Bn(t);$v(s,e,n,new i(s))},Xf=(e,t,n)=>Yf(e,t,n,Gf),kv=(e,t,n=new Map)=>{Uc(e,t.store,n),Us(e,_v(t.store))},Av=(e,t=new Uint8Array([0]),n=new Wi)=>{const i=Jf(t);kv(n,e,i);const s=[n.toUint8Array()];if(e.store.pendingDs&&s.push(e.store.pendingDs),e.store.pendingStructs&&s.push(Kv(e.store.pendingStructs.update,t)),s.length>1){if(n.constructor===Mr)return Vv(s.map((r,o)=>o===0?r:Gv(r)));if(n.constructor===Wi)return Mo(s)}return s[0]},Qf=(e,t)=>Av(e,t,new Mr),Pv=e=>{const t=new Map,n=gt(e.restDecoder);for(let i=0;i<n;i++){const s=gt(e.restDecoder),r=gt(e.restDecoder);t.set(s,r)}return t},Jf=e=>Pv(new qf(Bn(e))),Zf=(e,t)=>(at(e.restEncoder,t.size),Zn(t.entries()).sort((n,i)=>i[0]-n[0]).forEach(([n,i])=>{at(e.restEncoder,n),at(e.restEncoder,i)}),e),Ov=(e,t)=>Zf(e,ba(t.store)),Lv=(e,t=new zf)=>(e instanceof Map?Zf(t,e):Ov(t,e),t.toUint8Array()),Iv=e=>Lv(e,new Wf);class Dv{constructor(){this.l=[]}}const vh=()=>new Dv,wh=(e,t)=>e.l.push(t),_h=(e,t)=>{const n=e.l,i=n.length;e.l=n.filter(s=>t!==s),i===e.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},tp=(e,t,n)=>Ic(e.l,[t,n]);class bs{constructor(t,n){this.client=t,this.clock=n}}const io=(e,t)=>e===t||e!==null&&t!==null&&e.client===t.client&&e.clock===t.clock,Ot=(e,t)=>new bs(e,t),Rv=e=>{for(const[t,n]of e.doc.share.entries())if(n===e)return t;throw Dn()},Zs=(e,t)=>t===void 0?!e.deleted:t.sv.has(e.id.client)&&(t.sv.get(e.id.client)||0)>e.id.clock&&!jf(t.ds,e.id),jl=(e,t)=>{const n=tn(e.meta,jl,Si),i=e.doc.store;n.has(t)||(t.sv.forEach((s,r)=>{s<Se(i,r)&&xi(e,Ot(r,s))}),Vf(e,t.ds,s=>{}),n.add(t))};class ep{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const ba=e=>{const t=new Map;return e.clients.forEach((n,i)=>{const s=n[n.length-1];t.set(i,s.id.clock+s.length)}),t},Se=(e,t)=>{const n=e.clients.get(t);if(n===void 0)return 0;const i=n[n.length-1];return i.id.clock+i.length},np=(e,t)=>{let n=e.clients.get(t.id.client);if(n===void 0)n=[],e.clients.set(t.id.client,n);else{const i=n[n.length-1];if(i.id.clock+i.length!==t.id.clock)throw Dn()}n.push(t)},Rn=(e,t)=>{let n=0,i=e.length-1,s=e[i],r=s.id.clock;if(r===t)return i;let o=Ln(t/(r+s.length-1)*i);for(;n<=i;){if(s=e[o],r=s.id.clock,r<=t){if(t<r+s.length)return o;n=o+1}else i=o-1;o=Ln((n+i)/2)}throw Dn()},Mv=(e,t)=>{const n=e.clients.get(t.client);return n[Rn(n,t.clock)]},ol=Mv,Kl=(e,t,n)=>{const i=Rn(t,n),s=t[i];return s.id.clock<n&&s instanceof fe?(t.splice(i+1,0,Vo(e,s,n-s.id.clock)),i+1):i},xi=(e,t)=>{const n=e.doc.store.clients.get(t.client);return n[Kl(e,n,t.clock)]},Eh=(e,t,n)=>{const i=t.clients.get(n.client),s=Rn(i,n.clock),r=i[s];return n.clock!==r.id.clock+r.length-1&&r.constructor!==ln&&i.splice(s+1,0,Vo(e,r,n.clock-r.id.clock+1)),r},Nv=(e,t,n)=>{const i=e.clients.get(t.id.client);i[Rn(i,t.id.clock)]=n},ip=(e,t,n,i,s)=>{if(i===0)return;const r=n+i;let o=Kl(e,t,n),a;do a=t[o++],r<a.id.clock+a.length&&Kl(e,t,r),s(a);while(o<t.length&&t[o].id.clock<r)};class Fv{constructor(t,n,i){this.doc=t,this.deleteSet=new Rr,this.beforeState=ba(t.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=n,this.meta=new Map,this.local=i,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const Sh=(e,t)=>t.deleteSet.clients.size===0&&!Wb(t.afterState,(n,i)=>t.beforeState.get(i)!==n)?!1:(Bc(t.deleteSet),Cv(e,t),Us(e,t.deleteSet),!0),xh=(e,t,n)=>{const i=t._item;(i===null||i.id.clock<(e.beforeState.get(i.id.client)||0)&&!i.deleted)&&tn(e.changed,t,Si).add(n)},So=(e,t)=>{let n=e[t],i=e[t-1],s=t;for(;s>0;n=i,i=e[--s-1]){if(i.deleted===n.deleted&&i.constructor===n.constructor&&i.mergeWith(n)){n instanceof fe&&n.parentSub!==null&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,i);continue}break}const r=t-s;return r&&e.splice(t+1-r,r),r},Bv=(e,t,n)=>{for(const[i,s]of e.clients.entries()){const r=t.clients.get(i);for(let o=s.length-1;o>=0;o--){const a=s[o],l=a.clock+a.len;for(let c=Rn(r,a.clock),h=r[c];c<r.length&&h.id.clock<l;h=r[++c]){const u=r[c];if(a.clock+a.len<=u.id.clock)break;u instanceof fe&&u.deleted&&!u.keep&&n(u)&&u.gc(t,!1)}}}},Hv=(e,t)=>{e.clients.forEach((n,i)=>{const s=t.clients.get(i);for(let r=n.length-1;r>=0;r--){const o=n[r],a=$c(s.length-1,1+Rn(s,o.clock+o.len-1));for(let l=a,c=s[l];l>0&&c.id.clock>=o.clock;c=s[l])l-=1+So(s,l)}})},sp=(e,t)=>{if(t<e.length){const n=e[t],i=n.doc,s=i.store,r=n.deleteSet,o=n._mergeStructs;try{Bc(r),n.afterState=ba(n.doc.store),i.emit("beforeObserverCalls",[n,i]);const a=[];n.changed.forEach((l,c)=>a.push(()=>{(c._item===null||!c._item.deleted)&&c._callObserver(n,l)})),a.push(()=>{n.changedParentTypes.forEach((l,c)=>{c._dEH.l.length>0&&(c._item===null||!c._item.deleted)&&(l=l.filter(h=>h.target._item===null||!h.target._item.deleted),l.forEach(h=>{h.currentTarget=c,h._path=null}),l.sort((h,u)=>h.path.length-u.path.length),tp(c._dEH,l,n))})}),a.push(()=>i.emit("afterTransaction",[n,i])),Ic(a,[]),n._needFormattingCleanup&&r0(n)}finally{i.gc&&Bv(r,s,i.gcFilter),Hv(r,s),n.afterState.forEach((h,u)=>{const f=n.beforeState.get(u)||0;if(f!==h){const g=s.clients.get(u),p=ts(Rn(g,f),1);for(let y=g.length-1;y>=p;)y-=1+So(g,y)}});for(let h=o.length-1;h>=0;h--){const{client:u,clock:f}=o[h].id,g=s.clients.get(u),p=Rn(g,f);p+1<g.length&&So(g,p+1)>1||p>0&&So(g,p)}if(!n.local&&n.afterState.get(i.clientID)!==n.beforeState.get(i.clientID)&&(Mf(Rc,hn,"[yjs] ",Gi,Df,"Changed the client-id because another client seems to be using it."),i.clientID=Kf()),i.emit("afterTransactionCleanup",[n,i]),i._observers.has("update")){const h=new Mr;Sh(h,n)&&i.emit("update",[h.toUint8Array(),n.origin,i,n])}if(i._observers.has("updateV2")){const h=new Wi;Sh(h,n)&&i.emit("updateV2",[h.toUint8Array(),n.origin,i,n])}const{subdocsAdded:a,subdocsLoaded:l,subdocsRemoved:c}=n;(a.size>0||c.size>0||l.size>0)&&(a.forEach(h=>{h.clientID=i.clientID,h.collectionid==null&&(h.collectionid=i.collectionid),i.subdocs.add(h)}),c.forEach(h=>i.subdocs.delete(h)),i.emit("subdocs",[{loaded:l,added:a,removed:c},i,n]),c.forEach(h=>h.destroy())),e.length<=t+1?(i._transactionCleanups=[],i.emit("afterAllTransactions",[i,e])):sp(e,t+1)}}},qt=(e,t,n=null,i=!0)=>{const s=e._transactionCleanups;let r=!1,o=null;e._transaction===null&&(r=!0,e._transaction=new Fv(e,n,i),s.push(e._transaction),s.length===1&&e.emit("beforeAllTransactions",[e]),e.emit("beforeTransaction",[e._transaction,e]));try{o=t(e._transaction)}finally{if(r){const a=e._transaction===s[0];e._transaction=null,a&&sp(s,0)}}return o};function*Uv(e){const t=gt(e.restDecoder);for(let n=0;n<t;n++){const i=gt(e.restDecoder),s=e.readClient();let r=gt(e.restDecoder);for(let o=0;o<i;o++){const a=e.readInfo();if(a===10){const l=gt(e.restDecoder);yield new cn(Ot(s,r),l),r+=l}else if(fa&a){const l=(a&(Yn|Xe))===0,c=new fe(Ot(s,r),null,(a&Xe)===Xe?e.readLeftID():null,null,(a&Yn)===Yn?e.readRightID():null,l?e.readParentInfo()?e.readString():e.readLeftID():null,l&&(a&mr)===mr?e.readString():null,Ep(e,a));yield c,r+=c.length}else{const l=e.readLen();yield new ln(Ot(s,r),l),r+=l}}}}class Vc{constructor(t,n){this.gen=Uv(t),this.curr=null,this.done=!1,this.filterSkips=n,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===cn);return this.curr}}class jc{constructor(t){this.currClient=0,this.startClock=0,this.written=0,this.encoder=t,this.clientStructs=[]}}const Vv=e=>Mo(e,Gf,Mr),jv=(e,t)=>{if(e.constructor===ln){const{client:n,clock:i}=e.id;return new ln(Ot(n,i+t),e.length-t)}else if(e.constructor===cn){const{client:n,clock:i}=e.id;return new cn(Ot(n,i+t),e.length-t)}else{const n=e,{client:i,clock:s}=n.id;return new fe(Ot(i,s+t),null,Ot(i,s+t-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(t))}},Mo=(e,t=Cs,n=Wi)=>{if(e.length===1)return e[0];const i=e.map(h=>new t(Bn(h)));let s=i.map(h=>new Vc(h,!0)),r=null;const o=new n,a=new jc(o);for(;s=s.filter(f=>f.curr!==null),s.sort((f,g)=>{if(f.curr.id.client===g.curr.id.client){const p=f.curr.id.clock-g.curr.id.clock;return p===0?f.curr.constructor===g.curr.constructor?0:f.curr.constructor===cn?1:-1:p}else return g.curr.id.client-f.curr.id.client}),s.length!==0;){const h=s[0],u=h.curr.id.client;if(r!==null){let f=h.curr,g=!1;for(;f!==null&&f.id.clock+f.length<=r.struct.id.clock+r.struct.length&&f.id.client>=r.struct.id.client;)f=h.next(),g=!0;if(f===null||f.id.client!==u||g&&f.id.clock>r.struct.id.clock+r.struct.length)continue;if(u!==r.struct.id.client)vi(a,r.struct,r.offset),r={struct:f,offset:0},h.next();else if(r.struct.id.clock+r.struct.length<f.id.clock)if(r.struct.constructor===cn)r.struct.length=f.id.clock+f.length-r.struct.id.clock;else{vi(a,r.struct,r.offset);const p=f.id.clock-r.struct.id.clock-r.struct.length;r={struct:new cn(Ot(u,r.struct.id.clock+r.struct.length),p),offset:0}}else{const p=r.struct.id.clock+r.struct.length-f.id.clock;p>0&&(r.struct.constructor===cn?r.struct.length-=p:f=jv(f,p)),r.struct.mergeWith(f)||(vi(a,r.struct,r.offset),r={struct:f,offset:0},h.next())}}else r={struct:h.curr,offset:0},h.next();for(let f=h.curr;f!==null&&f.id.client===u&&f.id.clock===r.struct.id.clock+r.struct.length&&f.constructor!==cn;f=h.next())vi(a,r.struct,r.offset),r={struct:f,offset:0}}r!==null&&(vi(a,r.struct,r.offset),r=null),Kc(a);const l=i.map(h=>Hc(h)),c=vv(l);return Us(o,c),o.toUint8Array()},Kv=(e,t,n=Cs,i=Wi)=>{const s=Jf(t),r=new i,o=new jc(r),a=new n(Bn(e)),l=new Vc(a,!1);for(;l.curr;){const h=l.curr,u=h.id.client,f=s.get(u)||0;if(l.curr.constructor===cn){l.next();continue}if(h.id.clock+h.length>f)for(vi(o,h,ts(f-h.id.clock,0)),l.next();l.curr&&l.curr.id.client===u;)vi(o,l.curr,0),l.next();else for(;l.curr&&l.curr.id.client===u&&l.curr.id.clock+l.curr.length<=f;)l.next()}Kc(o);const c=Hc(a);return Us(r,c),r.toUint8Array()},rp=e=>{e.written>0&&(e.clientStructs.push({written:e.written,restEncoder:Jt(e.encoder.restEncoder)}),e.encoder.restEncoder=_e(),e.written=0)},vi=(e,t,n)=>{e.written>0&&e.currClient!==t.id.client&&rp(e),e.written===0&&(e.currClient=t.id.client,e.encoder.writeClient(t.id.client),at(e.encoder.restEncoder,t.id.clock+n)),t.write(e.encoder,n),e.written++},Kc=e=>{rp(e);const t=e.encoder.restEncoder;at(t,e.clientStructs.length);for(let n=0;n<e.clientStructs.length;n++){const i=e.clientStructs[n];at(t,i.written),pa(t,i.restEncoder)}},qv=(e,t,n,i)=>{const s=new n(Bn(e)),r=new Vc(s,!1),o=new i,a=new jc(o);for(let c=r.curr;c!==null;c=r.next())vi(a,t(c),0);Kc(a);const l=Hc(s);return Us(o,l),o.toUint8Array()},Gv=e=>qv(e,Vy,Cs,Mr),Th="You must not compute changes after the event-handler fired.";class ya{constructor(t,n){this.target=t,this.currentTarget=t,this.transaction=n,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=Wv(this.currentTarget,this.target))}deletes(t){return jf(this.transaction.deleteSet,t.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw In(Th);const t=new Map,n=this.target;this.transaction.changed.get(n).forEach(s=>{if(s!==null){const r=n._map.get(s);let o,a;if(this.adds(r)){let l=r.left;for(;l!==null&&this.adds(l);)l=l.left;if(this.deletes(r))if(l!==null&&this.deletes(l))o="delete",a=Za(l.content.getContent());else return;else l!==null&&this.deletes(l)?(o="update",a=Za(l.content.getContent())):(o="add",a=void 0)}else if(this.deletes(r))o="delete",a=Za(r.content.getContent());else return;t.set(s,{action:o,oldValue:a})}}),this._keys=t}return this._keys}get delta(){return this.changes.delta}adds(t){return t.id.clock>=(this.transaction.beforeState.get(t.id.client)||0)}get changes(){let t=this._changes;if(t===null){if(this.transaction.doc._transactionCleanups.length===0)throw In(Th);const n=this.target,i=Si(),s=Si(),r=[];if(t={added:i,deleted:s,delta:r,keys:this.keys},this.transaction.changed.get(n).has(null)){let a=null;const l=()=>{a&&r.push(a)};for(let c=n._start;c!==null;c=c.right)c.deleted?this.deletes(c)&&!this.adds(c)&&((a===null||a.delete===void 0)&&(l(),a={delete:0}),a.delete+=c.length,s.add(c)):this.adds(c)?((a===null||a.insert===void 0)&&(l(),a={insert:[]}),a.insert=a.insert.concat(c.content.getContent()),i.add(c)):((a===null||a.retain===void 0)&&(l(),a={retain:0}),a.retain+=c.length);a!==null&&a.retain===void 0&&l()}this._changes=t}return t}}const Wv=(e,t)=>{const n=[];for(;t._item!==null&&t!==e;){if(t._item.parentSub!==null)n.unshift(t._item.parentSub);else{let i=0,s=t._item.parent._start;for(;s!==t._item&&s!==null;)s.deleted||i++,s=s.right;n.unshift(i)}t=t._item.parent}return n},op=80;let qc=0;class zv{constructor(t,n){t.marker=!0,this.p=t,this.index=n,this.timestamp=qc++}}const Yv=e=>{e.timestamp=qc++},ap=(e,t,n)=>{e.p.marker=!1,e.p=t,t.marker=!0,e.index=n,e.timestamp=qc++},Xv=(e,t,n)=>{if(e.length>=op){const i=e.reduce((s,r)=>s.timestamp<r.timestamp?s:r);return ap(i,t,n),i}else{const i=new zv(t,n);return e.push(i),i}},va=(e,t)=>{if(e._start===null||t===0||e._searchMarker===null)return null;const n=e._searchMarker.length===0?null:e._searchMarker.reduce((r,o)=>wo(t-r.index)<wo(t-o.index)?r:o);let i=e._start,s=0;for(n!==null&&(i=n.p,s=n.index,Yv(n));i.right!==null&&s<t;){if(!i.deleted&&i.countable){if(t<s+i.length)break;s+=i.length}i=i.right}for(;i.left!==null&&s>t;)i=i.left,!i.deleted&&i.countable&&(s-=i.length);for(;i.left!==null&&i.left.id.client===i.id.client&&i.left.id.clock+i.left.length===i.id.clock;)i=i.left,!i.deleted&&i.countable&&(s-=i.length);return n!==null&&wo(n.index-s)<i.parent.length/op?(ap(n,i,s),n):Xv(e._searchMarker,i,s)},vr=(e,t,n)=>{for(let i=e.length-1;i>=0;i--){const s=e[i];if(n>0){let r=s.p;for(r.marker=!1;r&&(r.deleted||!r.countable);)r=r.left,r&&!r.deleted&&r.countable&&(s.index-=r.length);if(r===null||r.marker===!0){e.splice(i,1);continue}s.p=r,r.marker=!0}(t<s.index||n>0&&t===s.index)&&(s.index=ts(t,s.index+n))}},wa=(e,t,n)=>{const i=e,s=t.changedParentTypes;for(;tn(s,e,()=>[]).push(n),e._item!==null;)e=e._item.parent;tp(i._eH,n,t)};class $e{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=vh(),this._dEH=vh(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(t,n){this.doc=t,this._item=n}_copy(){throw Pn()}clone(){throw Pn()}_write(t){}get _first(){let t=this._start;for(;t!==null&&t.deleted;)t=t.right;return t}_callObserver(t,n){!t.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(t){wh(this._eH,t)}observeDeep(t){wh(this._dEH,t)}unobserve(t){_h(this._eH,t)}unobserveDeep(t){_h(this._dEH,t)}toJSON(){}}const lp=(e,t,n)=>{t<0&&(t=e._length+t),n<0&&(n=e._length+n);let i=n-t;const s=[];let r=e._start;for(;r!==null&&i>0;){if(r.countable&&!r.deleted){const o=r.content.getContent();if(o.length<=t)t-=o.length;else{for(let a=t;a<o.length&&i>0;a++)s.push(o[a]),i--;t=0}}r=r.right}return s},cp=e=>{const t=[];let n=e._start;for(;n!==null;){if(n.countable&&!n.deleted){const i=n.content.getContent();for(let s=0;s<i.length;s++)t.push(i[s])}n=n.right}return t},wr=(e,t)=>{let n=0,i=e._start;for(;i!==null;){if(i.countable&&!i.deleted){const s=i.content.getContent();for(let r=0;r<s.length;r++)t(s[r],n++,e)}i=i.right}},up=(e,t)=>{const n=[];return wr(e,(i,s)=>{n.push(t(i,s,e))}),n},Qv=e=>{let t=e._start,n=null,i=0;return{[Symbol.iterator](){return this},next:()=>{if(n===null){for(;t!==null&&t.deleted;)t=t.right;if(t===null)return{done:!0,value:void 0};n=t.content.getContent(),i=0,t=t.right}const s=n[i++];return n.length<=i&&(n=null),{done:!1,value:s}}}},hp=(e,t)=>{const n=va(e,t);let i=e._start;for(n!==null&&(i=n.p,t-=n.index);i!==null;i=i.right)if(!i.deleted&&i.countable){if(t<i.length)return i.content.getContent()[t];t-=i.length}},No=(e,t,n,i)=>{let s=n;const r=e.doc,o=r.clientID,a=r.store,l=n===null?t._start:n.right;let c=[];const h=()=>{c.length>0&&(s=new fe(Ot(o,Se(a,o)),s,s&&s.lastId,l,l&&l.id,t,null,new Yi(c)),s.integrate(e,0),c=[])};i.forEach(u=>{if(u===null)c.push(u);else switch(u.constructor){case Number:case Object:case Boolean:case Array:case String:c.push(u);break;default:switch(h(),u.constructor){case Uint8Array:case ArrayBuffer:s=new fe(Ot(o,Se(a,o)),s,s&&s.lastId,l,l&&l.id,t,null,new Nr(new Uint8Array(u))),s.integrate(e,0);break;case oi:s=new fe(Ot(o,Se(a,o)),s,s&&s.lastId,l,l&&l.id,t,null,new Fr(u)),s.integrate(e,0);break;default:if(u instanceof $e)s=new fe(Ot(o,Se(a,o)),s,s&&s.lastId,l,l&&l.id,t,null,new ai(u)),s.integrate(e,0);else throw new Error("Unexpected content type in insert operation")}}}),h()},dp=()=>In("Length exceeded!"),fp=(e,t,n,i)=>{if(n>t._length)throw dp();if(n===0)return t._searchMarker&&vr(t._searchMarker,n,i.length),No(e,t,null,i);const s=n,r=va(t,n);let o=t._start;for(r!==null&&(o=r.p,n-=r.index,n===0&&(o=o.prev,n+=o&&o.countable&&!o.deleted?o.length:0));o!==null;o=o.right)if(!o.deleted&&o.countable){if(n<=o.length){n<o.length&&xi(e,Ot(o.id.client,o.id.clock+n));break}n-=o.length}return t._searchMarker&&vr(t._searchMarker,s,i.length),No(e,t,o,i)},Jv=(e,t,n)=>{let s=(t._searchMarker||[]).reduce((r,o)=>o.index>r.index?o:r,{index:0,p:t._start}).p;if(s)for(;s.right;)s=s.right;return No(e,t,s,n)},pp=(e,t,n,i)=>{if(i===0)return;const s=n,r=i,o=va(t,n);let a=t._start;for(o!==null&&(a=o.p,n-=o.index);a!==null&&n>0;a=a.right)!a.deleted&&a.countable&&(n<a.length&&xi(e,Ot(a.id.client,a.id.clock+n)),n-=a.length);for(;i>0&&a!==null;)a.deleted||(i<a.length&&xi(e,Ot(a.id.client,a.id.clock+i)),a.delete(e),i-=a.length),a=a.right;if(i>0)throw dp();t._searchMarker&&vr(t._searchMarker,s,-r+i)},Fo=(e,t,n)=>{const i=t._map.get(n);i!==void 0&&i.delete(e)},Gc=(e,t,n,i)=>{const s=t._map.get(n)||null,r=e.doc,o=r.clientID;let a;if(i==null)a=new Yi([i]);else switch(i.constructor){case Number:case Object:case Boolean:case Array:case String:a=new Yi([i]);break;case Uint8Array:a=new Nr(i);break;case oi:a=new Fr(i);break;default:if(i instanceof $e)a=new ai(i);else throw new Error("Unexpected content type")}new fe(Ot(o,Se(r.store,o)),s,s&&s.lastId,null,null,t,n,a).integrate(e,0)},Wc=(e,t)=>{const n=e._map.get(t);return n!==void 0&&!n.deleted?n.content.getContent()[n.length-1]:void 0},gp=e=>{const t={};return e._map.forEach((n,i)=>{n.deleted||(t[i]=n.content.getContent()[n.length-1])}),t},mp=(e,t)=>{const n=e._map.get(t);return n!==void 0&&!n.deleted},so=e=>bv(e.entries(),t=>!t[1].deleted);class Zv extends ya{constructor(t,n){super(t,n),this._transaction=n}}class we extends $e{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(t){const n=new we;return n.push(t),n}_integrate(t,n){super._integrate(t,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new we}clone(){const t=new we;return t.insert(0,this.toArray().map(n=>n instanceof $e?n.clone():n)),t}get length(){return this._prelimContent===null?this._length:this._prelimContent.length}_callObserver(t,n){super._callObserver(t,n),wa(this,t,new Zv(this,t))}insert(t,n){this.doc!==null?qt(this.doc,i=>{fp(i,this,t,n)}):this._prelimContent.splice(t,0,...n)}push(t){this.doc!==null?qt(this.doc,n=>{Jv(n,this,t)}):this._prelimContent.push(...t)}unshift(t){this.insert(0,t)}delete(t,n=1){this.doc!==null?qt(this.doc,i=>{pp(i,this,t,n)}):this._prelimContent.splice(t,n)}get(t){return hp(this,t)}toArray(){return cp(this)}slice(t=0,n=this.length){return lp(this,t,n)}toJSON(){return this.map(t=>t instanceof $e?t.toJSON():t)}map(t){return up(this,t)}forEach(t){wr(this,t)}[Symbol.iterator](){return Qv(this)}_write(t){t.writeTypeRef(S0)}}const t0=e=>new we;class e0 extends ya{constructor(t,n,i){super(t,n),this.keysChanged=i}}class Ce extends $e{constructor(t){super(),this._prelimContent=null,t===void 0?this._prelimContent=new Map:this._prelimContent=new Map(t)}_integrate(t,n){super._integrate(t,n),this._prelimContent.forEach((i,s)=>{this.set(s,i)}),this._prelimContent=null}_copy(){return new Ce}clone(){const t=new Ce;return this.forEach((n,i)=>{t.set(i,n instanceof $e?n.clone():n)}),t}_callObserver(t,n){wa(this,t,new e0(this,t,n))}toJSON(){const t={};return this._map.forEach((n,i)=>{if(!n.deleted){const s=n.content.getContent()[n.length-1];t[i]=s instanceof $e?s.toJSON():s}}),t}get size(){return[...so(this._map)].length}keys(){return rl(so(this._map),t=>t[0])}values(){return rl(so(this._map),t=>t[1].content.getContent()[t[1].length-1])}entries(){return rl(so(this._map),t=>[t[0],t[1].content.getContent()[t[1].length-1]])}forEach(t){this._map.forEach((n,i)=>{n.deleted||t(n.content.getContent()[n.length-1],i,this)})}[Symbol.iterator](){return this.entries()}delete(t){this.doc!==null?qt(this.doc,n=>{Fo(n,this,t)}):this._prelimContent.delete(t)}set(t,n){return this.doc!==null?qt(this.doc,i=>{Gc(i,this,t,n)}):this._prelimContent.set(t,n),n}get(t){return Wc(this,t)}has(t){return mp(this,t)}clear(){this.doc!==null?qt(this.doc,t=>{this.forEach(function(n,i,s){Fo(t,s,i)})}):this._prelimContent.clear()}_write(t){t.writeTypeRef(x0)}}const n0=e=>new Ce,_i=(e,t)=>e===t||typeof e=="object"&&typeof t=="object"&&e&&t&&Hy(e,t);class ql{constructor(t,n,i,s){this.left=t,this.right=n,this.index=i,this.currentAttributes=s}forward(){switch(this.right===null&&Dn(),this.right.content.constructor){case ge:this.right.deleted||Vs(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const Ch=(e,t,n)=>{for(;t.right!==null&&n>0;){switch(t.right.content.constructor){case ge:t.right.deleted||Vs(t.currentAttributes,t.right.content);break;default:t.right.deleted||(n<t.right.length&&xi(e,Ot(t.right.id.client,t.right.id.clock+n)),t.index+=t.right.length,n-=t.right.length);break}t.left=t.right,t.right=t.right.right}return t},ro=(e,t,n)=>{const i=new Map,s=va(t,n);if(s){const r=new ql(s.p.left,s.p,s.index,i);return Ch(e,r,n-s.index)}else{const r=new ql(null,t._start,0,i);return Ch(e,r,n)}},bp=(e,t,n,i)=>{for(;n.right!==null&&(n.right.deleted===!0||n.right.content.constructor===ge&&_i(i.get(n.right.content.key),n.right.content.value));)n.right.deleted||i.delete(n.right.content.key),n.forward();const s=e.doc,r=s.clientID;i.forEach((o,a)=>{const l=n.left,c=n.right,h=new fe(Ot(r,Se(s.store,r)),l,l&&l.lastId,c,c&&c.id,t,null,new ge(a,o));h.integrate(e,0),n.right=h,n.forward()})},Vs=(e,t)=>{const{key:n,value:i}=t;i===null?e.delete(n):e.set(n,i)},yp=(e,t)=>{for(;e.right!==null;){if(!(e.right.deleted||e.right.content.constructor===ge&&_i(t[e.right.content.key]||null,e.right.content.value)))break;e.forward()}},vp=(e,t,n,i)=>{const s=e.doc,r=s.clientID,o=new Map;for(const a in i){const l=i[a],c=n.currentAttributes.get(a)||null;if(!_i(c,l)){o.set(a,c);const{left:h,right:u}=n;n.right=new fe(Ot(r,Se(s.store,r)),h,h&&h.lastId,u,u&&u.id,t,null,new ge(a,l)),n.right.integrate(e,0),n.forward()}}return o},al=(e,t,n,i,s)=>{n.currentAttributes.forEach((f,g)=>{s[g]===void 0&&(s[g]=null)});const r=e.doc,o=r.clientID;yp(n,s);const a=vp(e,t,n,s),l=i.constructor===String?new Mn(i):i instanceof $e?new ai(i):new es(i);let{left:c,right:h,index:u}=n;t._searchMarker&&vr(t._searchMarker,n.index,l.getLength()),h=new fe(Ot(o,Se(r.store,o)),c,c&&c.lastId,h,h&&h.id,t,null,l),h.integrate(e,0),n.right=h,n.index=u,n.forward(),bp(e,t,n,a)},$h=(e,t,n,i,s)=>{const r=e.doc,o=r.clientID;yp(n,s);const a=vp(e,t,n,s);t:for(;n.right!==null&&(i>0||a.size>0&&(n.right.deleted||n.right.content.constructor===ge));){if(!n.right.deleted)switch(n.right.content.constructor){case ge:{const{key:l,value:c}=n.right.content,h=s[l];if(h!==void 0){if(_i(h,c))a.delete(l);else{if(i===0)break t;a.set(l,c)}n.right.delete(e)}else n.currentAttributes.set(l,c);break}default:i<n.right.length&&xi(e,Ot(n.right.id.client,n.right.id.clock+i)),i-=n.right.length;break}n.forward()}if(i>0){let l="";for(;i>0;i--)l+=`
`;n.right=new fe(Ot(o,Se(r.store,o)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,t,null,new Mn(l)),n.right.integrate(e,0),n.forward()}bp(e,t,n,a)},wp=(e,t,n,i,s)=>{let r=t;const o=Be();for(;r&&(!r.countable||r.deleted);){if(!r.deleted&&r.content.constructor===ge){const c=r.content;o.set(c.key,c)}r=r.right}let a=0,l=!1;for(;t!==r;){if(n===t&&(l=!0),!t.deleted){const c=t.content;switch(c.constructor){case ge:{const{key:h,value:u}=c,f=i.get(h)||null;(o.get(h)!==c||f===u)&&(t.delete(e),a++,!l&&(s.get(h)||null)===u&&f!==u&&(f===null?s.delete(h):s.set(h,f))),!l&&!t.deleted&&Vs(s,c);break}}}t=t.right}return a},i0=(e,t)=>{for(;t&&t.right&&(t.right.deleted||!t.right.countable);)t=t.right;const n=new Set;for(;t&&(t.deleted||!t.countable);){if(!t.deleted&&t.content.constructor===ge){const i=t.content.key;n.has(i)?t.delete(e):n.add(i)}t=t.left}},s0=e=>{let t=0;return qt(e.doc,n=>{let i=e._start,s=e._start,r=Be();const o=Nl(r);for(;s;){if(s.deleted===!1)switch(s.content.constructor){case ge:Vs(o,s.content);break;default:t+=wp(n,i,s,r,o),r=Nl(o),i=s;break}s=s.right}}),t},r0=e=>{const t=new Set,n=e.doc;for(const[i,s]of e.afterState.entries()){const r=e.beforeState.get(i)||0;s!==r&&ip(e,n.store.clients.get(i),r,s,o=>{!o.deleted&&o.content.constructor===ge&&o.constructor!==ln&&t.add(o.parent)})}qt(n,i=>{Vf(e,e.deleteSet,s=>{if(s instanceof ln||!s.parent._hasFormatting||t.has(s.parent))return;const r=s.parent;s.content.constructor===ge?t.add(r):i0(i,s)});for(const s of t)s0(s)})},kh=(e,t,n)=>{const i=n,s=Nl(t.currentAttributes),r=t.right;for(;n>0&&t.right!==null;){if(t.right.deleted===!1)switch(t.right.content.constructor){case ai:case es:case Mn:n<t.right.length&&xi(e,Ot(t.right.id.client,t.right.id.clock+n)),n-=t.right.length,t.right.delete(e);break}t.forward()}r&&wp(e,r,t.right,s,t.currentAttributes);const o=(t.left||t.right).parent;return o._searchMarker&&vr(o._searchMarker,t.index,-i+n),t};class o0 extends ya{constructor(t,n,i){super(t,n),this.childListChanged=!1,this.keysChanged=new Set,i.forEach(s=>{s===null?this.childListChanged=!0:this.keysChanged.add(s)})}get changes(){if(this._changes===null){const t={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=t}return this._changes}get delta(){if(this._delta===null){const t=this.target.doc,n=[];qt(t,i=>{const s=new Map,r=new Map;let o=this.target._start,a=null;const l={};let c="",h=0,u=0;const f=()=>{if(a!==null){let g=null;switch(a){case"delete":u>0&&(g={delete:u}),u=0;break;case"insert":(typeof c=="object"||c.length>0)&&(g={insert:c},s.size>0&&(g.attributes={},s.forEach((p,y)=>{p!==null&&(g.attributes[y]=p)}))),c="";break;case"retain":h>0&&(g={retain:h},Fy(l)||(g.attributes=Ry({},l))),h=0;break}g&&n.push(g),a=null}};for(;o!==null;){switch(o.content.constructor){case ai:case es:this.adds(o)?this.deletes(o)||(f(),a="insert",c=o.content.getContent()[0],f()):this.deletes(o)?(a!=="delete"&&(f(),a="delete"),u+=1):o.deleted||(a!=="retain"&&(f(),a="retain"),h+=1);break;case Mn:this.adds(o)?this.deletes(o)||(a!=="insert"&&(f(),a="insert"),c+=o.content.str):this.deletes(o)?(a!=="delete"&&(f(),a="delete"),u+=o.length):o.deleted||(a!=="retain"&&(f(),a="retain"),h+=o.length);break;case ge:{const{key:g,value:p}=o.content;if(this.adds(o)){if(!this.deletes(o)){const y=s.get(g)||null;_i(y,p)?p!==null&&o.delete(i):(a==="retain"&&f(),_i(p,r.get(g)||null)?delete l[g]:l[g]=p)}}else if(this.deletes(o)){r.set(g,p);const y=s.get(g)||null;_i(y,p)||(a==="retain"&&f(),l[g]=y)}else if(!o.deleted){r.set(g,p);const y=l[g];y!==void 0&&(_i(y,p)?y!==null&&o.delete(i):(a==="retain"&&f(),p===null?delete l[g]:l[g]=p))}o.deleted||(a==="insert"&&f(),Vs(s,o.content));break}}o=o.right}for(f();n.length>0;){const g=n[n.length-1];if(g.retain!==void 0&&g.attributes===void 0)n.pop();else break}}),this._delta=n}return this._delta}}class $s extends $e{constructor(t){super(),this._pending=t!==void 0?[()=>this.insert(0,t)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this._length}_integrate(t,n){super._integrate(t,n);try{this._pending.forEach(i=>i())}catch(i){console.error(i)}this._pending=null}_copy(){return new $s}clone(){const t=new $s;return t.applyDelta(this.toDelta()),t}_callObserver(t,n){super._callObserver(t,n);const i=new o0(this,t,n);wa(this,t,i),!t.local&&this._hasFormatting&&(t._needFormattingCleanup=!0)}toString(){let t="",n=this._start;for(;n!==null;)!n.deleted&&n.countable&&n.content.constructor===Mn&&(t+=n.content.str),n=n.right;return t}toJSON(){return this.toString()}applyDelta(t,{sanitize:n=!0}={}){this.doc!==null?qt(this.doc,i=>{const s=new ql(null,this._start,0,new Map);for(let r=0;r<t.length;r++){const o=t[r];if(o.insert!==void 0){const a=!n&&typeof o.insert=="string"&&r===t.length-1&&s.right===null&&o.insert.slice(-1)===`
`?o.insert.slice(0,-1):o.insert;(typeof a!="string"||a.length>0)&&al(i,this,s,a,o.attributes||{})}else o.retain!==void 0?$h(i,this,s,o.retain,o.attributes||{}):o.delete!==void 0&&kh(i,s,o.delete)}}):this._pending.push(()=>this.applyDelta(t))}toDelta(t,n,i){const s=[],r=new Map,o=this.doc;let a="",l=this._start;function c(){if(a.length>0){const u={};let f=!1;r.forEach((p,y)=>{f=!0,u[y]=p});const g={insert:a};f&&(g.attributes=u),s.push(g),a=""}}const h=()=>{for(;l!==null;){if(Zs(l,t)||n!==void 0&&Zs(l,n))switch(l.content.constructor){case Mn:{const u=r.get("ychange");t!==void 0&&!Zs(l,t)?(u===void 0||u.user!==l.id.client||u.type!=="removed")&&(c(),r.set("ychange",i?i("removed",l.id):{type:"removed"})):n!==void 0&&!Zs(l,n)?(u===void 0||u.user!==l.id.client||u.type!=="added")&&(c(),r.set("ychange",i?i("added",l.id):{type:"added"})):u!==void 0&&(c(),r.delete("ychange")),a+=l.content.str;break}case ai:case es:{c();const u={insert:l.content.getContent()[0]};if(r.size>0){const f={};u.attributes=f,r.forEach((g,p)=>{f[p]=g})}s.push(u);break}case ge:Zs(l,t)&&(c(),Vs(r,l.content));break}l=l.right}c()};return t||n?qt(o,u=>{t&&jl(u,t),n&&jl(u,n),h()},"cleanup"):h(),s}insert(t,n,i){if(n.length<=0)return;const s=this.doc;s!==null?qt(s,r=>{const o=ro(r,this,t);i||(i={},o.currentAttributes.forEach((a,l)=>{i[l]=a})),al(r,this,o,n,i)}):this._pending.push(()=>this.insert(t,n,i))}insertEmbed(t,n,i={}){const s=this.doc;s!==null?qt(s,r=>{const o=ro(r,this,t);al(r,this,o,n,i)}):this._pending.push(()=>this.insertEmbed(t,n,i))}delete(t,n){if(n===0)return;const i=this.doc;i!==null?qt(i,s=>{kh(s,ro(s,this,t),n)}):this._pending.push(()=>this.delete(t,n))}format(t,n,i){if(n===0)return;const s=this.doc;s!==null?qt(s,r=>{const o=ro(r,this,t);o.right!==null&&$h(r,this,o,n,i)}):this._pending.push(()=>this.format(t,n,i))}removeAttribute(t){this.doc!==null?qt(this.doc,n=>{Fo(n,this,t)}):this._pending.push(()=>this.removeAttribute(t))}setAttribute(t,n){this.doc!==null?qt(this.doc,i=>{Gc(i,this,t,n)}):this._pending.push(()=>this.setAttribute(t,n))}getAttribute(t){return Wc(this,t)}getAttributes(){return gp(this)}_write(t){t.writeTypeRef(T0)}}const a0=e=>new $s;class ll{constructor(t,n=()=>!0){this._filter=n,this._root=t,this._currentNode=t._start,this._firstCall=!0}[Symbol.iterator](){return this}next(){let t=this._currentNode,n=t&&t.content&&t.content.type;if(t!==null&&(!this._firstCall||t.deleted||!this._filter(n)))do if(n=t.content.type,!t.deleted&&(n.constructor===_r||n.constructor===zi)&&n._start!==null)t=n._start;else for(;t!==null;)if(t.right!==null){t=t.right;break}else t.parent===this._root?t=null:t=t.parent._item;while(t!==null&&(t.deleted||!this._filter(t.content.type)));return this._firstCall=!1,t===null?{value:void 0,done:!0}:(this._currentNode=t,{value:t.content.type,done:!1})}}class zi extends $e{constructor(){super(),this._prelimContent=[]}get firstChild(){const t=this._first;return t?t.content.getContent()[0]:null}_integrate(t,n){super._integrate(t,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new zi}clone(){const t=new zi;return t.insert(0,this.toArray().map(n=>n instanceof $e?n.clone():n)),t}get length(){return this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(t){return new ll(this,t)}querySelector(t){t=t.toUpperCase();const i=new ll(this,s=>s.nodeName&&s.nodeName.toUpperCase()===t).next();return i.done?null:i.value}querySelectorAll(t){return t=t.toUpperCase(),Zn(new ll(this,n=>n.nodeName&&n.nodeName.toUpperCase()===t))}_callObserver(t,n){wa(this,t,new u0(this,n,t))}toString(){return up(this,t=>t.toString()).join("")}toJSON(){return this.toString()}toDOM(t=document,n={},i){const s=t.createDocumentFragment();return i!==void 0&&i._createAssociation(s,this),wr(this,r=>{s.insertBefore(r.toDOM(t,n,i),null)}),s}insert(t,n){this.doc!==null?qt(this.doc,i=>{fp(i,this,t,n)}):this._prelimContent.splice(t,0,...n)}insertAfter(t,n){if(this.doc!==null)qt(this.doc,i=>{const s=t&&t instanceof $e?t._item:t;No(i,this,s,n)});else{const i=this._prelimContent,s=t===null?0:i.findIndex(r=>r===t)+1;if(s===0&&t!==null)throw In("Reference item not found");i.splice(s,0,...n)}}delete(t,n=1){this.doc!==null?qt(this.doc,i=>{pp(i,this,t,n)}):this._prelimContent.splice(t,n)}toArray(){return cp(this)}push(t){this.insert(this.length,t)}unshift(t){this.insert(0,t)}get(t){return hp(this,t)}slice(t=0,n=this.length){return lp(this,t,n)}forEach(t){wr(this,t)}_write(t){t.writeTypeRef($0)}}const l0=e=>new zi;class _r extends zi{constructor(t="UNDEFINED"){super(),this.nodeName=t,this._prelimAttrs=new Map}get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_integrate(t,n){super._integrate(t,n),this._prelimAttrs.forEach((i,s)=>{this.setAttribute(s,i)}),this._prelimAttrs=null}_copy(){return new _r(this.nodeName)}clone(){const t=new _r(this.nodeName),n=this.getAttributes();return Ny(n,(i,s)=>{typeof i=="string"&&t.setAttribute(s,i)}),t.insert(0,this.toArray().map(i=>i instanceof $e?i.clone():i)),t}toString(){const t=this.getAttributes(),n=[],i=[];for(const a in t)i.push(a);i.sort();const s=i.length;for(let a=0;a<s;a++){const l=i[a];n.push(l+'="'+t[l]+'"')}const r=this.nodeName.toLocaleLowerCase(),o=n.length>0?" "+n.join(" "):"";return`<${r}${o}>${super.toString()}</${r}>`}removeAttribute(t){this.doc!==null?qt(this.doc,n=>{Fo(n,this,t)}):this._prelimAttrs.delete(t)}setAttribute(t,n){this.doc!==null?qt(this.doc,i=>{Gc(i,this,t,n)}):this._prelimAttrs.set(t,n)}getAttribute(t){return Wc(this,t)}hasAttribute(t){return mp(this,t)}getAttributes(){return gp(this)}toDOM(t=document,n={},i){const s=t.createElement(this.nodeName),r=this.getAttributes();for(const o in r){const a=r[o];typeof a=="string"&&s.setAttribute(o,a)}return wr(this,o=>{s.appendChild(o.toDOM(t,n,i))}),i!==void 0&&i._createAssociation(s,this),s}_write(t){t.writeTypeRef(C0),t.writeKey(this.nodeName)}}const c0=e=>new _r(e.readKey());class u0 extends ya{constructor(t,n,i){super(t,i),this.childListChanged=!1,this.attributesChanged=new Set,n.forEach(s=>{s===null?this.childListChanged=!0:this.attributesChanged.add(s)})}}class Bo extends Ce{constructor(t){super(),this.hookName=t}_copy(){return new Bo(this.hookName)}clone(){const t=new Bo(this.hookName);return this.forEach((n,i)=>{t.set(i,n)}),t}toDOM(t=document,n={},i){const s=n[this.hookName];let r;return s!==void 0?r=s.createDom(this):r=document.createElement(this.hookName),r.setAttribute("data-yjs-hook",this.hookName),i!==void 0&&i._createAssociation(r,this),r}_write(t){t.writeTypeRef(k0),t.writeKey(this.hookName)}}const h0=e=>new Bo(e.readKey());class Ho extends $s{get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_copy(){return new Ho}clone(){const t=new Ho;return t.applyDelta(this.toDelta()),t}toDOM(t=document,n,i){const s=t.createTextNode(this.toString());return i!==void 0&&i._createAssociation(s,this),s}toString(){return this.toDelta().map(t=>{const n=[];for(const s in t.attributes){const r=[];for(const o in t.attributes[s])r.push({key:o,value:t.attributes[s][o]});r.sort((o,a)=>o.key<a.key?-1:1),n.push({nodeName:s,attrs:r})}n.sort((s,r)=>s.nodeName<r.nodeName?-1:1);let i="";for(let s=0;s<n.length;s++){const r=n[s];i+=`<${r.nodeName}`;for(let o=0;o<r.attrs.length;o++){const a=r.attrs[o];i+=` ${a.key}="${a.value}"`}i+=">"}i+=t.insert;for(let s=n.length-1;s>=0;s--)i+=`</${n[s].nodeName}>`;return i}).join("")}toJSON(){return this.toString()}_write(t){t.writeTypeRef(A0)}}const d0=e=>new Ho;class zc{constructor(t,n){this.id=t,this.length=n}get deleted(){throw Pn()}mergeWith(t){return!1}write(t,n,i){throw Pn()}integrate(t,n){throw Pn()}}const f0=0;class ln extends zc{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor!==t.constructor?!1:(this.length+=t.length,!0)}integrate(t,n){n>0&&(this.id.clock+=n,this.length-=n),np(t.doc.store,this)}write(t,n){t.writeInfo(f0),t.writeLen(this.length-n)}getMissing(t,n){return null}}class Nr{constructor(t){this.content=t}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new Nr(this.content)}splice(t){throw Pn()}mergeWith(t){return!1}integrate(t,n){}delete(t){}gc(t){}write(t,n){t.writeBuf(this.content)}getRef(){return 3}}const p0=e=>new Nr(e.readBuf());class Er{constructor(t){this.len=t}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new Er(this.len)}splice(t){const n=new Er(this.len-t);return this.len=t,n}mergeWith(t){return this.len+=t.len,!0}integrate(t,n){Ro(t.deleteSet,n.id.client,n.id.clock,this.len),n.markDeleted()}delete(t){}gc(t){}write(t,n){t.writeLen(this.len-n)}getRef(){return 1}}const g0=e=>new Er(e.readLen()),_p=(e,t)=>new oi({guid:e,...t,shouldLoad:t.shouldLoad||t.autoLoad||!1});class Fr{constructor(t){t._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=t;const n={};this.opts=n,t.gc||(n.gc=!1),t.autoLoad&&(n.autoLoad=!0),t.meta!==null&&(n.meta=t.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new Fr(_p(this.doc.guid,this.opts))}splice(t){throw Pn()}mergeWith(t){return!1}integrate(t,n){this.doc._item=n,t.subdocsAdded.add(this.doc),this.doc.shouldLoad&&t.subdocsLoaded.add(this.doc)}delete(t){t.subdocsAdded.has(this.doc)?t.subdocsAdded.delete(this.doc):t.subdocsRemoved.add(this.doc)}gc(t){}write(t,n){t.writeString(this.doc.guid),t.writeAny(this.opts)}getRef(){return 9}}const m0=e=>new Fr(_p(e.readString(),e.readAny()));class es{constructor(t){this.embed=t}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new es(this.embed)}splice(t){throw Pn()}mergeWith(t){return!1}integrate(t,n){}delete(t){}gc(t){}write(t,n){t.writeJSON(this.embed)}getRef(){return 5}}const b0=e=>new es(e.readJSON());class ge{constructor(t,n){this.key=t,this.value=n}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new ge(this.key,this.value)}splice(t){throw Pn()}mergeWith(t){return!1}integrate(t,n){const i=n.parent;i._searchMarker=null,i._hasFormatting=!0}delete(t){}gc(t){}write(t,n){t.writeKey(this.key),t.writeJSON(this.value)}getRef(){return 6}}const y0=e=>new ge(e.readKey(),e.readJSON());class Uo{constructor(t){this.arr=t}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Uo(this.arr)}splice(t){const n=new Uo(this.arr.slice(t));return this.arr=this.arr.slice(0,t),n}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,n){}delete(t){}gc(t){}write(t,n){const i=this.arr.length;t.writeLen(i-n);for(let s=n;s<i;s++){const r=this.arr[s];t.writeString(r===void 0?"undefined":JSON.stringify(r))}}getRef(){return 2}}const v0=e=>{const t=e.readLen(),n=[];for(let i=0;i<t;i++){const s=e.readString();s==="undefined"?n.push(void 0):n.push(JSON.parse(s))}return new Uo(n)};class Yi{constructor(t){this.arr=t}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Yi(this.arr)}splice(t){const n=new Yi(this.arr.slice(t));return this.arr=this.arr.slice(0,t),n}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,n){}delete(t){}gc(t){}write(t,n){const i=this.arr.length;t.writeLen(i-n);for(let s=n;s<i;s++){const r=this.arr[s];t.writeAny(r)}}getRef(){return 8}}const w0=e=>{const t=e.readLen(),n=[];for(let i=0;i<t;i++)n.push(e.readAny());return new Yi(n)};class Mn{constructor(t){this.str=t}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new Mn(this.str)}splice(t){const n=new Mn(this.str.slice(t));this.str=this.str.slice(0,t);const i=this.str.charCodeAt(t-1);return i>=55296&&i<=56319&&(this.str=this.str.slice(0,t-1)+"",n.str=""+n.str.slice(1)),n}mergeWith(t){return this.str+=t.str,!0}integrate(t,n){}delete(t){}gc(t){}write(t,n){t.writeString(n===0?this.str:this.str.slice(n))}getRef(){return 4}}const _0=e=>new Mn(e.readString()),E0=[t0,n0,a0,c0,l0,h0,d0],S0=0,x0=1,T0=2,C0=3,$0=4,k0=5,A0=6;class ai{constructor(t){this.type=t}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new ai(this.type._copy())}splice(t){throw Pn()}mergeWith(t){return!1}integrate(t,n){this.type._integrate(t.doc,n)}delete(t){let n=this.type._start;for(;n!==null;)n.deleted?n.id.clock<(t.beforeState.get(n.id.client)||0)&&t._mergeStructs.push(n):n.delete(t),n=n.right;this.type._map.forEach(i=>{i.deleted?i.id.clock<(t.beforeState.get(i.id.client)||0)&&t._mergeStructs.push(i):i.delete(t)}),t.changed.delete(this.type)}gc(t){let n=this.type._start;for(;n!==null;)n.gc(t,!0),n=n.right;this.type._start=null,this.type._map.forEach(i=>{for(;i!==null;)i.gc(t,!0),i=i.left}),this.type._map=new Map}write(t,n){this.type._write(t)}getRef(){return 7}}const P0=e=>new ai(E0[e.readTypeRef()](e)),Vo=(e,t,n)=>{const{client:i,clock:s}=t.id,r=new fe(Ot(i,s+n),t,Ot(i,s+n-1),t.right,t.rightOrigin,t.parent,t.parentSub,t.content.splice(n));return t.deleted&&r.markDeleted(),t.keep&&(r.keep=!0),t.redone!==null&&(r.redone=Ot(t.redone.client,t.redone.clock+n)),t.right=r,r.right!==null&&(r.right.left=r),e._mergeStructs.push(r),r.parentSub!==null&&r.right===null&&r.parent._map.set(r.parentSub,r),t.length=n,r};class fe extends zc{constructor(t,n,i,s,r,o,a,l){super(t,l.getLength()),this.origin=i,this.left=n,this.right=s,this.rightOrigin=r,this.parent=o,this.parentSub=a,this.redone=null,this.content=l,this.info=this.content.isCountable()?oh:0}set marker(t){(this.info&el)>0!==t&&(this.info^=el)}get marker(){return(this.info&el)>0}get keep(){return(this.info&rh)>0}set keep(t){this.keep!==t&&(this.info^=rh)}get countable(){return(this.info&oh)>0}get deleted(){return(this.info&tl)>0}set deleted(t){this.deleted!==t&&(this.info^=tl)}markDeleted(){this.info|=tl}getMissing(t,n){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=Se(n,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=Se(n,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===bs&&this.id.client!==this.parent.client&&this.parent.clock>=Se(n,this.parent.client))return this.parent.client;if(this.origin&&(this.left=Eh(t,n,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=xi(t,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===ln||this.right&&this.right.constructor===ln)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===fe&&(this.parent=this.left.parent,this.parentSub=this.left.parentSub),this.right&&this.right.constructor===fe&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===bs){const i=ol(n,this.parent);i.constructor===ln?this.parent=null:this.parent=i.content.type}return null}integrate(t,n){if(n>0&&(this.id.clock+=n,this.left=Eh(t,t.doc.store,Ot(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(n),this.length-=n),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let i=this.left,s;if(i!==null)s=i.right;else if(this.parentSub!==null)for(s=this.parent._map.get(this.parentSub)||null;s!==null&&s.left!==null;)s=s.left;else s=this.parent._start;const r=new Set,o=new Set;for(;s!==null&&s!==this.right;){if(o.add(s),r.add(s),io(this.origin,s.origin)){if(s.id.client<this.id.client)i=s,r.clear();else if(io(this.rightOrigin,s.rightOrigin))break}else if(s.origin!==null&&o.has(ol(t.doc.store,s.origin)))r.has(ol(t.doc.store,s.origin))||(i=s,r.clear());else break;s=s.right}this.left=i}if(this.left!==null){const i=this.left.right;this.right=i,this.left.right=this}else{let i;if(this.parentSub!==null)for(i=this.parent._map.get(this.parentSub)||null;i!==null&&i.left!==null;)i=i.left;else i=this.parent._start,this.parent._start=this;this.right=i}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(t)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),np(t.doc.store,this),this.content.integrate(t,this),xh(t,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(t)}else new ln(this.id,this.length).integrate(t,0)}get next(){let t=this.right;for(;t!==null&&t.deleted;)t=t.right;return t}get prev(){let t=this.left;for(;t!==null&&t.deleted;)t=t.left;return t}get lastId(){return this.length===1?this.id:Ot(this.id.client,this.id.clock+this.length-1)}mergeWith(t){if(this.constructor===t.constructor&&io(t.origin,this.lastId)&&this.right===t&&io(this.rightOrigin,t.rightOrigin)&&this.id.client===t.id.client&&this.id.clock+this.length===t.id.clock&&this.deleted===t.deleted&&this.redone===null&&t.redone===null&&this.content.constructor===t.content.constructor&&this.content.mergeWith(t.content)){const n=this.parent._searchMarker;return n&&n.forEach(i=>{i.p===t&&(i.p=this,!this.deleted&&this.countable&&(i.index-=this.length))}),t.keep&&(this.keep=!0),this.right=t.right,this.right!==null&&(this.right.left=this),this.length+=t.length,!0}return!1}delete(t){if(!this.deleted){const n=this.parent;this.countable&&this.parentSub===null&&(n._length-=this.length),this.markDeleted(),Ro(t.deleteSet,this.id.client,this.id.clock,this.length),xh(t,n,this.parentSub),this.content.delete(t)}}gc(t,n){if(!this.deleted)throw Dn();this.content.gc(t),n?Nv(t,this,new ln(this.id,this.length)):this.content=new Er(this.length)}write(t,n){const i=n>0?Ot(this.id.client,this.id.clock+n-1):this.origin,s=this.rightOrigin,r=this.parentSub,o=this.content.getRef()&fa|(i===null?0:Xe)|(s===null?0:Yn)|(r===null?0:mr);if(t.writeInfo(o),i!==null&&t.writeLeftID(i),s!==null&&t.writeRightID(s),i===null&&s===null){const a=this.parent;if(a._item!==void 0){const l=a._item;if(l===null){const c=Rv(a);t.writeParentInfo(!0),t.writeString(c)}else t.writeParentInfo(!1),t.writeLeftID(l.id)}else a.constructor===String?(t.writeParentInfo(!0),t.writeString(a)):a.constructor===bs?(t.writeParentInfo(!1),t.writeLeftID(a)):Dn();r!==null&&t.writeString(r)}this.content.write(t,n)}}const Ep=(e,t)=>O0[t&fa](e),O0=[()=>{Dn()},g0,v0,p0,_0,b0,y0,P0,w0,m0,()=>{Dn()}],L0=10;class cn extends zc{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor!==t.constructor?!1:(this.length+=t.length,!0)}integrate(t,n){Dn()}write(t,n){t.writeInfo(L0),at(t.restEncoder,this.length-n)}getMissing(t,n){return null}}const Sp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},xp="__ $YJS$ __";Sp[xp]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");Sp[xp]=!0;var yn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Tp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function oo(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Cp={exports:{}};(function(e,t){(function(n){e.exports=n()})(function(){var n=Math.floor,i=Math.abs,s=Math.pow;return function(){function r(o,a,l){function c(f,g){if(!a[f]){if(!o[f]){var p=typeof oo=="function"&&oo;if(!g&&p)return p(f,!0);if(h)return h(f,!0);var y=new Error("Cannot find module '"+f+"'");throw y.code="MODULE_NOT_FOUND",y}var x=a[f]={exports:{}};o[f][0].call(x.exports,function(S){var E=o[f][1][S];return c(E||S)},x,x.exports,r,o,a,l)}return a[f].exports}for(var h=typeof oo=="function"&&oo,u=0;u<l.length;u++)c(l[u]);return c}return r}()({1:[function(r,o,a){function l(_){var w=_.length;if(0<w%4)throw new Error("Invalid string. Length must be a multiple of 4");var T=_.indexOf("=");T===-1&&(T=w);var C=T===w?0:4-T%4;return[T,C]}function c(_,w,T){return 3*(w+T)/4-T}function h(_){var w,T,C=l(_),$=C[0],I=C[1],A=new x(c(_,$,I)),O=0,M=0<I?$-4:$;for(T=0;T<M;T+=4)w=y[_.charCodeAt(T)]<<18|y[_.charCodeAt(T+1)]<<12|y[_.charCodeAt(T+2)]<<6|y[_.charCodeAt(T+3)],A[O++]=255&w>>16,A[O++]=255&w>>8,A[O++]=255&w;return I===2&&(w=y[_.charCodeAt(T)]<<2|y[_.charCodeAt(T+1)]>>4,A[O++]=255&w),I===1&&(w=y[_.charCodeAt(T)]<<10|y[_.charCodeAt(T+1)]<<4|y[_.charCodeAt(T+2)]>>2,A[O++]=255&w>>8,A[O++]=255&w),A}function u(_){return p[63&_>>18]+p[63&_>>12]+p[63&_>>6]+p[63&_]}function f(_,w,T){for(var C,$=[],I=w;I<T;I+=3)C=(16711680&_[I]<<16)+(65280&_[I+1]<<8)+(255&_[I+2]),$.push(u(C));return $.join("")}function g(_){for(var w,T=_.length,C=T%3,$=[],I=16383,A=0,O=T-C;A<O;A+=I)$.push(f(_,A,A+I>O?O:A+I));return C===1?(w=_[T-1],$.push(p[w>>2]+p[63&w<<4]+"==")):C===2&&(w=(_[T-2]<<8)+_[T-1],$.push(p[w>>10]+p[63&w>>4]+p[63&w<<2]+"=")),$.join("")}a.byteLength=function(_){var w=l(_),T=w[0],C=w[1];return 3*(T+C)/4-C},a.toByteArray=h,a.fromByteArray=g;for(var p=[],y=[],x=typeof Uint8Array>"u"?Array:Uint8Array,S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",E=0,b=S.length;E<b;++E)p[E]=S[E],y[S.charCodeAt(E)]=E;y[45]=62,y[95]=63},{}],2:[function(){},{}],3:[function(r,o,a){(function(){(function(){var l=String.fromCharCode,c=Math.min;function h(d){if(2147483647<d)throw new RangeError('The value "'+d+'" is invalid for option "size"');var m=new Uint8Array(d);return m.__proto__=u.prototype,m}function u(d,m,v){if(typeof d=="number"){if(typeof m=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return y(d)}return f(d,m,v)}function f(d,m,v){if(typeof d=="string")return x(d,m);if(ArrayBuffer.isView(d))return S(d);if(d==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof d);if(F(d,ArrayBuffer)||d&&F(d.buffer,ArrayBuffer))return E(d,m,v);if(typeof d=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var P=d.valueOf&&d.valueOf();if(P!=null&&P!==d)return u.from(P,m,v);var R=b(d);if(R)return R;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof d[Symbol.toPrimitive]=="function")return u.from(d[Symbol.toPrimitive]("string"),m,v);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof d)}function g(d){if(typeof d!="number")throw new TypeError('"size" argument must be of type number');if(0>d)throw new RangeError('The value "'+d+'" is invalid for option "size"')}function p(d,m,v){return g(d),0>=d||m===void 0?h(d):typeof v=="string"?h(d).fill(m,v):h(d).fill(m)}function y(d){return g(d),h(0>d?0:0|_(d))}function x(d,m){if((typeof m!="string"||m==="")&&(m="utf8"),!u.isEncoding(m))throw new TypeError("Unknown encoding: "+m);var v=0|w(d,m),P=h(v),R=P.write(d,m);return R!==v&&(P=P.slice(0,R)),P}function S(d){for(var m=0>d.length?0:0|_(d.length),v=h(m),P=0;P<m;P+=1)v[P]=255&d[P];return v}function E(d,m,v){if(0>m||d.byteLength<m)throw new RangeError('"offset" is outside of buffer bounds');if(d.byteLength<m+(v||0))throw new RangeError('"length" is outside of buffer bounds');var P;return P=m===void 0&&v===void 0?new Uint8Array(d):v===void 0?new Uint8Array(d,m):new Uint8Array(d,m,v),P.__proto__=u.prototype,P}function b(d){if(u.isBuffer(d)){var m=0|_(d.length),v=h(m);return v.length===0||d.copy(v,0,0,m),v}return d.length===void 0?d.type==="Buffer"&&Array.isArray(d.data)?S(d.data):void 0:typeof d.length!="number"||H(d.length)?h(0):S(d)}function _(d){if(d>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|d}function w(d,m){if(u.isBuffer(d))return d.length;if(ArrayBuffer.isView(d)||F(d,ArrayBuffer))return d.byteLength;if(typeof d!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof d);var v=d.length,P=2<arguments.length&&arguments[2]===!0;if(!P&&v===0)return 0;for(var R=!1;;)switch(m){case"ascii":case"latin1":case"binary":return v;case"utf8":case"utf-8":return he(d).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*v;case"hex":return v>>>1;case"base64":return oe(d).length;default:if(R)return P?-1:he(d).length;m=(""+m).toLowerCase(),R=!0}}function T(d,m,v){var P=!1;if((m===void 0||0>m)&&(m=0),m>this.length||((v===void 0||v>this.length)&&(v=this.length),0>=v)||(v>>>=0,m>>>=0,v<=m))return"";for(d||(d="utf8");;)switch(d){case"hex":return Qt(this,m,v);case"utf8":case"utf-8":return X(this,m,v);case"ascii":return J(this,m,v);case"latin1":case"binary":return zt(this,m,v);case"base64":return Y(this,m,v);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ut(this,m,v);default:if(P)throw new TypeError("Unknown encoding: "+d);d=(d+"").toLowerCase(),P=!0}}function C(d,m,v){var P=d[m];d[m]=d[v],d[v]=P}function $(d,m,v,P,R){if(d.length===0)return-1;if(typeof v=="string"?(P=v,v=0):2147483647<v?v=2147483647:-2147483648>v&&(v=-2147483648),v=+v,H(v)&&(v=R?0:d.length-1),0>v&&(v=d.length+v),v>=d.length){if(R)return-1;v=d.length-1}else if(0>v)if(R)v=0;else return-1;if(typeof m=="string"&&(m=u.from(m,P)),u.isBuffer(m))return m.length===0?-1:I(d,m,v,P,R);if(typeof m=="number")return m&=255,typeof Uint8Array.prototype.indexOf=="function"?R?Uint8Array.prototype.indexOf.call(d,m,v):Uint8Array.prototype.lastIndexOf.call(d,m,v):I(d,[m],v,P,R);throw new TypeError("val must be string, number or Buffer")}function I(d,m,v,P,R){function U(hi,di){return st===1?hi[di]:hi.readUInt16BE(di*st)}var st=1,xt=d.length,Kt=m.length;if(P!==void 0&&(P=(P+"").toLowerCase(),P==="ucs2"||P==="ucs-2"||P==="utf16le"||P==="utf-16le")){if(2>d.length||2>m.length)return-1;st=2,xt/=2,Kt/=2,v/=2}var Tt;if(R){var _t=-1;for(Tt=v;Tt<xt;Tt++)if(U(d,Tt)!==U(m,_t===-1?0:Tt-_t))_t!==-1&&(Tt-=Tt-_t),_t=-1;else if(_t===-1&&(_t=Tt),Tt-_t+1===Kt)return _t*st}else for(v+Kt>xt&&(v=xt-Kt),Tt=v;0<=Tt;Tt--){for(var ae=!0,Un=0;Un<Kt;Un++)if(U(d,Tt+Un)!==U(m,Un)){ae=!1;break}if(ae)return Tt}return-1}function A(d,m,v,P){v=+v||0;var R=d.length-v;P?(P=+P,P>R&&(P=R)):P=R;var U=m.length;P>U/2&&(P=U/2);for(var st,xt=0;xt<P;++xt){if(st=parseInt(m.substr(2*xt,2),16),H(st))return xt;d[v+xt]=st}return xt}function O(d,m,v,P){return be(he(m,d.length-v),d,v,P)}function M(d,m,v,P){return be(Te(m),d,v,P)}function B(d,m,v,P){return M(d,m,v,P)}function N(d,m,v,P){return be(oe(m),d,v,P)}function K(d,m,v,P){return be(Pe(m,d.length-v),d,v,P)}function Y(d,m,v){return m===0&&v===d.length?q.fromByteArray(d):q.fromByteArray(d.slice(m,v))}function X(d,m,v){v=c(d.length,v);for(var P=[],R=m;R<v;){var U=d[R],st=null,xt=239<U?4:223<U?3:191<U?2:1;if(R+xt<=v){var Kt,Tt,_t,ae;xt===1?128>U&&(st=U):xt===2?(Kt=d[R+1],(192&Kt)==128&&(ae=(31&U)<<6|63&Kt,127<ae&&(st=ae))):xt===3?(Kt=d[R+1],Tt=d[R+2],(192&Kt)==128&&(192&Tt)==128&&(ae=(15&U)<<12|(63&Kt)<<6|63&Tt,2047<ae&&(55296>ae||57343<ae)&&(st=ae))):xt===4&&(Kt=d[R+1],Tt=d[R+2],_t=d[R+3],(192&Kt)==128&&(192&Tt)==128&&(192&_t)==128&&(ae=(15&U)<<18|(63&Kt)<<12|(63&Tt)<<6|63&_t,65535<ae&&1114112>ae&&(st=ae)))}st===null?(st=65533,xt=1):65535<st&&(st-=65536,P.push(55296|1023&st>>>10),st=56320|1023&st),P.push(st),R+=xt}return kt(P)}function kt(d){var m=d.length;if(m<=4096)return l.apply(String,d);for(var v="",P=0;P<m;)v+=l.apply(String,d.slice(P,P+=4096));return v}function J(d,m,v){var P="";v=c(d.length,v);for(var R=m;R<v;++R)P+=l(127&d[R]);return P}function zt(d,m,v){var P="";v=c(d.length,v);for(var R=m;R<v;++R)P+=l(d[R]);return P}function Qt(d,m,v){var P=d.length;(!m||0>m)&&(m=0),(!v||0>v||v>P)&&(v=P);for(var R="",U=m;U<v;++U)R+=re(d[U]);return R}function Ut(d,m,v){for(var P=d.slice(m,v),R="",U=0;U<P.length;U+=2)R+=l(P[U]+256*P[U+1]);return R}function vt(d,m,v){if(d%1!=0||0>d)throw new RangeError("offset is not uint");if(d+m>v)throw new RangeError("Trying to access beyond buffer length")}function z(d,m,v,P,R,U){if(!u.isBuffer(d))throw new TypeError('"buffer" argument must be a Buffer instance');if(m>R||m<U)throw new RangeError('"value" argument is out of bounds');if(v+P>d.length)throw new RangeError("Index out of range")}function Bt(d,m,v,P){if(v+P>d.length)throw new RangeError("Index out of range");if(0>v)throw new RangeError("Index out of range")}function rt(d,m,v,P,R){return m=+m,v>>>=0,R||Bt(d,m,v,4),ot.write(d,m,v,P,23,4),v+4}function St(d,m,v,P,R){return m=+m,v>>>=0,R||Bt(d,m,v,8),ot.write(d,m,v,P,52,8),v+8}function Ae(d){if(d=d.split("=")[0],d=d.trim().replace(k,""),2>d.length)return"";for(;d.length%4!=0;)d+="=";return d}function re(d){return 16>d?"0"+d.toString(16):d.toString(16)}function he(d,m){m=m||1/0;for(var v,P=d.length,R=null,U=[],st=0;st<P;++st){if(v=d.charCodeAt(st),55295<v&&57344>v){if(!R){if(56319<v){-1<(m-=3)&&U.push(239,191,189);continue}else if(st+1===P){-1<(m-=3)&&U.push(239,191,189);continue}R=v;continue}if(56320>v){-1<(m-=3)&&U.push(239,191,189),R=v;continue}v=(R-55296<<10|v-56320)+65536}else R&&-1<(m-=3)&&U.push(239,191,189);if(R=null,128>v){if(0>(m-=1))break;U.push(v)}else if(2048>v){if(0>(m-=2))break;U.push(192|v>>6,128|63&v)}else if(65536>v){if(0>(m-=3))break;U.push(224|v>>12,128|63&v>>6,128|63&v)}else if(1114112>v){if(0>(m-=4))break;U.push(240|v>>18,128|63&v>>12,128|63&v>>6,128|63&v)}else throw new Error("Invalid code point")}return U}function Te(d){for(var m=[],v=0;v<d.length;++v)m.push(255&d.charCodeAt(v));return m}function Pe(d,m){for(var v,P,R,U=[],st=0;st<d.length&&!(0>(m-=2));++st)v=d.charCodeAt(st),P=v>>8,R=v%256,U.push(R),U.push(P);return U}function oe(d){return q.toByteArray(Ae(d))}function be(d,m,v,P){for(var R=0;R<P&&!(R+v>=m.length||R>=d.length);++R)m[R+v]=d[R];return R}function F(d,m){return d instanceof m||d!=null&&d.constructor!=null&&d.constructor.name!=null&&d.constructor.name===m.name}function H(d){return d!==d}var q=r("base64-js"),ot=r("ieee754");a.Buffer=u,a.SlowBuffer=function(d){return+d!=d&&(d=0),u.alloc(+d)},a.INSPECT_MAX_BYTES=50,a.kMaxLength=2147483647,u.TYPED_ARRAY_SUPPORT=function(){try{var d=new Uint8Array(1);return d.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},d.foo()===42}catch{return!1}}(),u.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){return u.isBuffer(this)?this.buffer:void 0}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){return u.isBuffer(this)?this.byteOffset:void 0}}),typeof Symbol<"u"&&Symbol.species!=null&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),u.poolSize=8192,u.from=function(d,m,v){return f(d,m,v)},u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,u.alloc=function(d,m,v){return p(d,m,v)},u.allocUnsafe=function(d){return y(d)},u.allocUnsafeSlow=function(d){return y(d)},u.isBuffer=function(d){return d!=null&&d._isBuffer===!0&&d!==u.prototype},u.compare=function(d,m){if(F(d,Uint8Array)&&(d=u.from(d,d.offset,d.byteLength)),F(m,Uint8Array)&&(m=u.from(m,m.offset,m.byteLength)),!u.isBuffer(d)||!u.isBuffer(m))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(d===m)return 0;for(var v=d.length,P=m.length,R=0,U=c(v,P);R<U;++R)if(d[R]!==m[R]){v=d[R],P=m[R];break}return v<P?-1:P<v?1:0},u.isEncoding=function(d){switch((d+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(d,m){if(!Array.isArray(d))throw new TypeError('"list" argument must be an Array of Buffers');if(d.length===0)return u.alloc(0);var v;if(m===void 0)for(m=0,v=0;v<d.length;++v)m+=d[v].length;var P=u.allocUnsafe(m),R=0;for(v=0;v<d.length;++v){var U=d[v];if(F(U,Uint8Array)&&(U=u.from(U)),!u.isBuffer(U))throw new TypeError('"list" argument must be an Array of Buffers');U.copy(P,R),R+=U.length}return P},u.byteLength=w,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var d=this.length;if(d%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var m=0;m<d;m+=2)C(this,m,m+1);return this},u.prototype.swap32=function(){var d=this.length;if(d%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var m=0;m<d;m+=4)C(this,m,m+3),C(this,m+1,m+2);return this},u.prototype.swap64=function(){var d=this.length;if(d%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var m=0;m<d;m+=8)C(this,m,m+7),C(this,m+1,m+6),C(this,m+2,m+5),C(this,m+3,m+4);return this},u.prototype.toString=function(){var d=this.length;return d===0?"":arguments.length===0?X(this,0,d):T.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(d){if(!u.isBuffer(d))throw new TypeError("Argument must be a Buffer");return this===d||u.compare(this,d)===0},u.prototype.inspect=function(){var d="",m=a.INSPECT_MAX_BYTES;return d=this.toString("hex",0,m).replace(/(.{2})/g,"$1 ").trim(),this.length>m&&(d+=" ... "),"<Buffer "+d+">"},u.prototype.compare=function(d,m,v,P,R){if(F(d,Uint8Array)&&(d=u.from(d,d.offset,d.byteLength)),!u.isBuffer(d))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof d);if(m===void 0&&(m=0),v===void 0&&(v=d?d.length:0),P===void 0&&(P=0),R===void 0&&(R=this.length),0>m||v>d.length||0>P||R>this.length)throw new RangeError("out of range index");if(P>=R&&m>=v)return 0;if(P>=R)return-1;if(m>=v)return 1;if(m>>>=0,v>>>=0,P>>>=0,R>>>=0,this===d)return 0;for(var U=R-P,st=v-m,xt=c(U,st),Kt=this.slice(P,R),Tt=d.slice(m,v),_t=0;_t<xt;++_t)if(Kt[_t]!==Tt[_t]){U=Kt[_t],st=Tt[_t];break}return U<st?-1:st<U?1:0},u.prototype.includes=function(d,m,v){return this.indexOf(d,m,v)!==-1},u.prototype.indexOf=function(d,m,v){return $(this,d,m,v,!0)},u.prototype.lastIndexOf=function(d,m,v){return $(this,d,m,v,!1)},u.prototype.write=function(d,m,v,P){if(m===void 0)P="utf8",v=this.length,m=0;else if(v===void 0&&typeof m=="string")P=m,v=this.length,m=0;else if(isFinite(m))m>>>=0,isFinite(v)?(v>>>=0,P===void 0&&(P="utf8")):(P=v,v=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var R=this.length-m;if((v===void 0||v>R)&&(v=R),0<d.length&&(0>v||0>m)||m>this.length)throw new RangeError("Attempt to write outside buffer bounds");P||(P="utf8");for(var U=!1;;)switch(P){case"hex":return A(this,d,m,v);case"utf8":case"utf-8":return O(this,d,m,v);case"ascii":return M(this,d,m,v);case"latin1":case"binary":return B(this,d,m,v);case"base64":return N(this,d,m,v);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return K(this,d,m,v);default:if(U)throw new TypeError("Unknown encoding: "+P);P=(""+P).toLowerCase(),U=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},u.prototype.slice=function(d,m){var v=this.length;d=~~d,m=m===void 0?v:~~m,0>d?(d+=v,0>d&&(d=0)):d>v&&(d=v),0>m?(m+=v,0>m&&(m=0)):m>v&&(m=v),m<d&&(m=d);var P=this.subarray(d,m);return P.__proto__=u.prototype,P},u.prototype.readUIntLE=function(d,m,v){d>>>=0,m>>>=0,v||vt(d,m,this.length);for(var P=this[d],R=1,U=0;++U<m&&(R*=256);)P+=this[d+U]*R;return P},u.prototype.readUIntBE=function(d,m,v){d>>>=0,m>>>=0,v||vt(d,m,this.length);for(var P=this[d+--m],R=1;0<m&&(R*=256);)P+=this[d+--m]*R;return P},u.prototype.readUInt8=function(d,m){return d>>>=0,m||vt(d,1,this.length),this[d]},u.prototype.readUInt16LE=function(d,m){return d>>>=0,m||vt(d,2,this.length),this[d]|this[d+1]<<8},u.prototype.readUInt16BE=function(d,m){return d>>>=0,m||vt(d,2,this.length),this[d]<<8|this[d+1]},u.prototype.readUInt32LE=function(d,m){return d>>>=0,m||vt(d,4,this.length),(this[d]|this[d+1]<<8|this[d+2]<<16)+16777216*this[d+3]},u.prototype.readUInt32BE=function(d,m){return d>>>=0,m||vt(d,4,this.length),16777216*this[d]+(this[d+1]<<16|this[d+2]<<8|this[d+3])},u.prototype.readIntLE=function(d,m,v){d>>>=0,m>>>=0,v||vt(d,m,this.length);for(var P=this[d],R=1,U=0;++U<m&&(R*=256);)P+=this[d+U]*R;return R*=128,P>=R&&(P-=s(2,8*m)),P},u.prototype.readIntBE=function(d,m,v){d>>>=0,m>>>=0,v||vt(d,m,this.length);for(var P=m,R=1,U=this[d+--P];0<P&&(R*=256);)U+=this[d+--P]*R;return R*=128,U>=R&&(U-=s(2,8*m)),U},u.prototype.readInt8=function(d,m){return d>>>=0,m||vt(d,1,this.length),128&this[d]?-1*(255-this[d]+1):this[d]},u.prototype.readInt16LE=function(d,m){d>>>=0,m||vt(d,2,this.length);var v=this[d]|this[d+1]<<8;return 32768&v?4294901760|v:v},u.prototype.readInt16BE=function(d,m){d>>>=0,m||vt(d,2,this.length);var v=this[d+1]|this[d]<<8;return 32768&v?4294901760|v:v},u.prototype.readInt32LE=function(d,m){return d>>>=0,m||vt(d,4,this.length),this[d]|this[d+1]<<8|this[d+2]<<16|this[d+3]<<24},u.prototype.readInt32BE=function(d,m){return d>>>=0,m||vt(d,4,this.length),this[d]<<24|this[d+1]<<16|this[d+2]<<8|this[d+3]},u.prototype.readFloatLE=function(d,m){return d>>>=0,m||vt(d,4,this.length),ot.read(this,d,!0,23,4)},u.prototype.readFloatBE=function(d,m){return d>>>=0,m||vt(d,4,this.length),ot.read(this,d,!1,23,4)},u.prototype.readDoubleLE=function(d,m){return d>>>=0,m||vt(d,8,this.length),ot.read(this,d,!0,52,8)},u.prototype.readDoubleBE=function(d,m){return d>>>=0,m||vt(d,8,this.length),ot.read(this,d,!1,52,8)},u.prototype.writeUIntLE=function(d,m,v,P){if(d=+d,m>>>=0,v>>>=0,!P){var R=s(2,8*v)-1;z(this,d,m,v,R,0)}var U=1,st=0;for(this[m]=255&d;++st<v&&(U*=256);)this[m+st]=255&d/U;return m+v},u.prototype.writeUIntBE=function(d,m,v,P){if(d=+d,m>>>=0,v>>>=0,!P){var R=s(2,8*v)-1;z(this,d,m,v,R,0)}var U=v-1,st=1;for(this[m+U]=255&d;0<=--U&&(st*=256);)this[m+U]=255&d/st;return m+v},u.prototype.writeUInt8=function(d,m,v){return d=+d,m>>>=0,v||z(this,d,m,1,255,0),this[m]=255&d,m+1},u.prototype.writeUInt16LE=function(d,m,v){return d=+d,m>>>=0,v||z(this,d,m,2,65535,0),this[m]=255&d,this[m+1]=d>>>8,m+2},u.prototype.writeUInt16BE=function(d,m,v){return d=+d,m>>>=0,v||z(this,d,m,2,65535,0),this[m]=d>>>8,this[m+1]=255&d,m+2},u.prototype.writeUInt32LE=function(d,m,v){return d=+d,m>>>=0,v||z(this,d,m,4,4294967295,0),this[m+3]=d>>>24,this[m+2]=d>>>16,this[m+1]=d>>>8,this[m]=255&d,m+4},u.prototype.writeUInt32BE=function(d,m,v){return d=+d,m>>>=0,v||z(this,d,m,4,4294967295,0),this[m]=d>>>24,this[m+1]=d>>>16,this[m+2]=d>>>8,this[m+3]=255&d,m+4},u.prototype.writeIntLE=function(d,m,v,P){if(d=+d,m>>>=0,!P){var R=s(2,8*v-1);z(this,d,m,v,R-1,-R)}var U=0,st=1,xt=0;for(this[m]=255&d;++U<v&&(st*=256);)0>d&&xt===0&&this[m+U-1]!==0&&(xt=1),this[m+U]=255&(d/st>>0)-xt;return m+v},u.prototype.writeIntBE=function(d,m,v,P){if(d=+d,m>>>=0,!P){var R=s(2,8*v-1);z(this,d,m,v,R-1,-R)}var U=v-1,st=1,xt=0;for(this[m+U]=255&d;0<=--U&&(st*=256);)0>d&&xt===0&&this[m+U+1]!==0&&(xt=1),this[m+U]=255&(d/st>>0)-xt;return m+v},u.prototype.writeInt8=function(d,m,v){return d=+d,m>>>=0,v||z(this,d,m,1,127,-128),0>d&&(d=255+d+1),this[m]=255&d,m+1},u.prototype.writeInt16LE=function(d,m,v){return d=+d,m>>>=0,v||z(this,d,m,2,32767,-32768),this[m]=255&d,this[m+1]=d>>>8,m+2},u.prototype.writeInt16BE=function(d,m,v){return d=+d,m>>>=0,v||z(this,d,m,2,32767,-32768),this[m]=d>>>8,this[m+1]=255&d,m+2},u.prototype.writeInt32LE=function(d,m,v){return d=+d,m>>>=0,v||z(this,d,m,4,2147483647,-2147483648),this[m]=255&d,this[m+1]=d>>>8,this[m+2]=d>>>16,this[m+3]=d>>>24,m+4},u.prototype.writeInt32BE=function(d,m,v){return d=+d,m>>>=0,v||z(this,d,m,4,2147483647,-2147483648),0>d&&(d=4294967295+d+1),this[m]=d>>>24,this[m+1]=d>>>16,this[m+2]=d>>>8,this[m+3]=255&d,m+4},u.prototype.writeFloatLE=function(d,m,v){return rt(this,d,m,!0,v)},u.prototype.writeFloatBE=function(d,m,v){return rt(this,d,m,!1,v)},u.prototype.writeDoubleLE=function(d,m,v){return St(this,d,m,!0,v)},u.prototype.writeDoubleBE=function(d,m,v){return St(this,d,m,!1,v)},u.prototype.copy=function(d,m,v,P){if(!u.isBuffer(d))throw new TypeError("argument should be a Buffer");if(v||(v=0),P||P===0||(P=this.length),m>=d.length&&(m=d.length),m||(m=0),0<P&&P<v&&(P=v),P===v||d.length===0||this.length===0)return 0;if(0>m)throw new RangeError("targetStart out of bounds");if(0>v||v>=this.length)throw new RangeError("Index out of range");if(0>P)throw new RangeError("sourceEnd out of bounds");P>this.length&&(P=this.length),d.length-m<P-v&&(P=d.length-m+v);var R=P-v;if(this===d&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(m,v,P);else if(this===d&&v<m&&m<P)for(var U=R-1;0<=U;--U)d[U+m]=this[U+v];else Uint8Array.prototype.set.call(d,this.subarray(v,P),m);return R},u.prototype.fill=function(d,m,v,P){if(typeof d=="string"){if(typeof m=="string"?(P=m,m=0,v=this.length):typeof v=="string"&&(P=v,v=this.length),P!==void 0&&typeof P!="string")throw new TypeError("encoding must be a string");if(typeof P=="string"&&!u.isEncoding(P))throw new TypeError("Unknown encoding: "+P);if(d.length===1){var R=d.charCodeAt(0);(P==="utf8"&&128>R||P==="latin1")&&(d=R)}}else typeof d=="number"&&(d&=255);if(0>m||this.length<m||this.length<v)throw new RangeError("Out of range index");if(v<=m)return this;m>>>=0,v=v===void 0?this.length:v>>>0,d||(d=0);var U;if(typeof d=="number")for(U=m;U<v;++U)this[U]=d;else{var st=u.isBuffer(d)?d:u.from(d,P),xt=st.length;if(xt===0)throw new TypeError('The value "'+d+'" is invalid for argument "value"');for(U=0;U<v-m;++U)this[U+m]=st[U%xt]}return this};var k=/[^+/0-9A-Za-z-_]/g}).call(this)}).call(this,r("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:9}],4:[function(r,o,a){(function(l){(function(){function c(){let u;try{u=a.storage.getItem("debug")}catch{}return!u&&typeof l<"u"&&"env"in l&&(u=l.env.DEBUG),u}a.formatArgs=function(u){if(u[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+u[0]+(this.useColors?"%c ":" ")+"+"+o.exports.humanize(this.diff),!this.useColors)return;const f="color: "+this.color;u.splice(1,0,f,"color: inherit");let g=0,p=0;u[0].replace(/%[a-zA-Z%]/g,y=>{y==="%%"||(g++,y==="%c"&&(p=g))}),u.splice(p,0,f)},a.save=function(u){try{u?a.storage.setItem("debug",u):a.storage.removeItem("debug")}catch{}},a.load=c,a.useColors=function(){return!!(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))||!(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},a.storage=function(){try{return localStorage}catch{}}(),a.destroy=(()=>{let u=!1;return()=>{u||(u=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),a.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],a.log=console.debug||console.log||(()=>{}),o.exports=r("./common")(a);const{formatters:h}=o.exports;h.j=function(u){try{return JSON.stringify(u)}catch(f){return"[UnexpectedJSONParseError]: "+f.message}}}).call(this)}).call(this,r("_process"))},{"./common":5,_process:12}],5:[function(r,o){o.exports=function(a){function l(u){function f(...y){if(!f.enabled)return;const x=f,S=+new Date,E=S-(g||S);x.diff=E,x.prev=g,x.curr=S,g=S,y[0]=l.coerce(y[0]),typeof y[0]!="string"&&y.unshift("%O");let b=0;y[0]=y[0].replace(/%([a-zA-Z%])/g,(w,T)=>{if(w==="%%")return"%";b++;const C=l.formatters[T];if(typeof C=="function"){const $=y[b];w=C.call(x,$),y.splice(b,1),b--}return w}),l.formatArgs.call(x,y),(x.log||l.log).apply(x,y)}let g,p=null;return f.namespace=u,f.useColors=l.useColors(),f.color=l.selectColor(u),f.extend=c,f.destroy=l.destroy,Object.defineProperty(f,"enabled",{enumerable:!0,configurable:!1,get:()=>p===null?l.enabled(u):p,set:y=>{p=y}}),typeof l.init=="function"&&l.init(f),f}function c(u,f){const g=l(this.namespace+(typeof f>"u"?":":f)+u);return g.log=this.log,g}function h(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}return l.debug=l,l.default=l,l.coerce=function(u){return u instanceof Error?u.stack||u.message:u},l.disable=function(){const u=[...l.names.map(h),...l.skips.map(h).map(f=>"-"+f)].join(",");return l.enable(""),u},l.enable=function(u){l.save(u),l.names=[],l.skips=[];let f;const g=(typeof u=="string"?u:"").split(/[\s,]+/),p=g.length;for(f=0;f<p;f++)g[f]&&(u=g[f].replace(/\*/g,".*?"),u[0]==="-"?l.skips.push(new RegExp("^"+u.substr(1)+"$")):l.names.push(new RegExp("^"+u+"$")))},l.enabled=function(u){if(u[u.length-1]==="*")return!0;let f,g;for(f=0,g=l.skips.length;f<g;f++)if(l.skips[f].test(u))return!1;for(f=0,g=l.names.length;f<g;f++)if(l.names[f].test(u))return!0;return!1},l.humanize=r("ms"),l.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(a).forEach(u=>{l[u]=a[u]}),l.names=[],l.skips=[],l.formatters={},l.selectColor=function(u){let f=0;for(let g=0;g<u.length;g++)f=(f<<5)-f+u.charCodeAt(g),f|=0;return l.colors[i(f)%l.colors.length]},l.enable(l.load()),l}},{ms:11}],6:[function(r,o){function a(l,c){for(const h in c)Object.defineProperty(l,h,{value:c[h],enumerable:!0,configurable:!0});return l}o.exports=function(l,c,h){if(!l||typeof l=="string")throw new TypeError("Please pass an Error to err-code");h||(h={}),typeof c=="object"&&(h=c,c=""),c&&(h.code=c);try{return a(l,h)}catch{h.message=l.message,h.stack=l.stack;const f=function(){};return f.prototype=Object.create(Object.getPrototypeOf(l)),a(new f,h)}}},{}],7:[function(r,o){function a(A){console&&console.warn&&console.warn(A)}function l(){l.init.call(this)}function c(A){if(typeof A!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof A)}function h(A){return A._maxListeners===void 0?l.defaultMaxListeners:A._maxListeners}function u(A,O,M,B){var N,K,Y;if(c(M),K=A._events,K===void 0?(K=A._events=Object.create(null),A._eventsCount=0):(K.newListener!==void 0&&(A.emit("newListener",O,M.listener?M.listener:M),K=A._events),Y=K[O]),Y===void 0)Y=K[O]=M,++A._eventsCount;else if(typeof Y=="function"?Y=K[O]=B?[M,Y]:[Y,M]:B?Y.unshift(M):Y.push(M),N=h(A),0<N&&Y.length>N&&!Y.warned){Y.warned=!0;var X=new Error("Possible EventEmitter memory leak detected. "+Y.length+" "+(O+" listeners added. Use emitter.setMaxListeners() to increase limit"));X.name="MaxListenersExceededWarning",X.emitter=A,X.type=O,X.count=Y.length,a(X)}return A}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function g(A,O,M){var B={fired:!1,wrapFn:void 0,target:A,type:O,listener:M},N=f.bind(B);return N.listener=M,B.wrapFn=N,N}function p(A,O,M){var B=A._events;if(B===void 0)return[];var N=B[O];return N===void 0?[]:typeof N=="function"?M?[N.listener||N]:[N]:M?E(N):x(N,N.length)}function y(A){var O=this._events;if(O!==void 0){var M=O[A];if(typeof M=="function")return 1;if(M!==void 0)return M.length}return 0}function x(A,O){for(var M=Array(O),B=0;B<O;++B)M[B]=A[B];return M}function S(A,O){for(;O+1<A.length;O++)A[O]=A[O+1];A.pop()}function E(A){for(var O=Array(A.length),M=0;M<O.length;++M)O[M]=A[M].listener||A[M];return O}function b(A,O,M){typeof A.on=="function"&&_(A,"error",O,M)}function _(A,O,M,B){if(typeof A.on=="function")B.once?A.once(O,M):A.on(O,M);else if(typeof A.addEventListener=="function")A.addEventListener(O,function N(K){B.once&&A.removeEventListener(O,N),M(K)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof A)}var w,T=typeof Reflect=="object"?Reflect:null,C=T&&typeof T.apply=="function"?T.apply:function(A,O,M){return Function.prototype.apply.call(A,O,M)};w=T&&typeof T.ownKeys=="function"?T.ownKeys:Object.getOwnPropertySymbols?function(A){return Object.getOwnPropertyNames(A).concat(Object.getOwnPropertySymbols(A))}:function(A){return Object.getOwnPropertyNames(A)};var $=Number.isNaN||function(A){return A!==A};o.exports=l,o.exports.once=function(A,O){return new Promise(function(M,B){function N(Y){A.removeListener(O,K),B(Y)}function K(){typeof A.removeListener=="function"&&A.removeListener("error",N),M([].slice.call(arguments))}_(A,O,K,{once:!0}),O!=="error"&&b(A,N,{once:!0})})},l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var I=10;Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return I},set:function(A){if(typeof A!="number"||0>A||$(A))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+A+".");I=A}}),l.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(A){if(typeof A!="number"||0>A||$(A))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+A+".");return this._maxListeners=A,this},l.prototype.getMaxListeners=function(){return h(this)},l.prototype.emit=function(A){for(var O=[],M=1;M<arguments.length;M++)O.push(arguments[M]);var B=A==="error",N=this._events;if(N!==void 0)B=B&&N.error===void 0;else if(!B)return!1;if(B){var K;if(0<O.length&&(K=O[0]),K instanceof Error)throw K;var Y=new Error("Unhandled error."+(K?" ("+K.message+")":""));throw Y.context=K,Y}var X=N[A];if(X===void 0)return!1;if(typeof X=="function")C(X,this,O);else for(var kt=X.length,J=x(X,kt),M=0;M<kt;++M)C(J[M],this,O);return!0},l.prototype.addListener=function(A,O){return u(this,A,O,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(A,O){return u(this,A,O,!0)},l.prototype.once=function(A,O){return c(O),this.on(A,g(this,A,O)),this},l.prototype.prependOnceListener=function(A,O){return c(O),this.prependListener(A,g(this,A,O)),this},l.prototype.removeListener=function(A,O){var M,B,N,K,Y;if(c(O),B=this._events,B===void 0)return this;if(M=B[A],M===void 0)return this;if(M===O||M.listener===O)--this._eventsCount==0?this._events=Object.create(null):(delete B[A],B.removeListener&&this.emit("removeListener",A,M.listener||O));else if(typeof M!="function"){for(N=-1,K=M.length-1;0<=K;K--)if(M[K]===O||M[K].listener===O){Y=M[K].listener,N=K;break}if(0>N)return this;N===0?M.shift():S(M,N),M.length===1&&(B[A]=M[0]),B.removeListener!==void 0&&this.emit("removeListener",A,Y||O)}return this},l.prototype.off=l.prototype.removeListener,l.prototype.removeAllListeners=function(A){var O,M,B;if(M=this._events,M===void 0)return this;if(M.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):M[A]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete M[A]),this;if(arguments.length===0){var N,K=Object.keys(M);for(B=0;B<K.length;++B)N=K[B],N!=="removeListener"&&this.removeAllListeners(N);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(O=M[A],typeof O=="function")this.removeListener(A,O);else if(O!==void 0)for(B=O.length-1;0<=B;B--)this.removeListener(A,O[B]);return this},l.prototype.listeners=function(A){return p(this,A,!0)},l.prototype.rawListeners=function(A){return p(this,A,!1)},l.listenerCount=function(A,O){return typeof A.listenerCount=="function"?A.listenerCount(O):y.call(A,O)},l.prototype.listenerCount=y,l.prototype.eventNames=function(){return 0<this._eventsCount?w(this._events):[]}},{}],8:[function(r,o){o.exports=function(){if(typeof globalThis>"u")return null;var a={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return a.RTCPeerConnection?a:null}},{}],9:[function(r,o,a){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */a.read=function(l,c,h,u,f){var g,p,y=8*f-u-1,x=(1<<y)-1,S=x>>1,E=-7,b=h?f-1:0,_=h?-1:1,w=l[c+b];for(b+=_,g=w&(1<<-E)-1,w>>=-E,E+=y;0<E;g=256*g+l[c+b],b+=_,E-=8);for(p=g&(1<<-E)-1,g>>=-E,E+=u;0<E;p=256*p+l[c+b],b+=_,E-=8);if(g===0)g=1-S;else{if(g===x)return p?NaN:(w?-1:1)*(1/0);p+=s(2,u),g-=S}return(w?-1:1)*p*s(2,g-u)},a.write=function(l,c,h,u,f,g){var p,y,x,S=Math.LN2,E=Math.log,b=8*g-f-1,_=(1<<b)-1,w=_>>1,T=f===23?s(2,-24)-s(2,-77):0,C=u?0:g-1,$=u?1:-1,I=0>c||c===0&&0>1/c?1:0;for(c=i(c),isNaN(c)||c===1/0?(y=isNaN(c)?1:0,p=_):(p=n(E(c)/S),1>c*(x=s(2,-p))&&(p--,x*=2),c+=1<=p+w?T/x:T*s(2,1-w),2<=c*x&&(p++,x/=2),p+w>=_?(y=0,p=_):1<=p+w?(y=(c*x-1)*s(2,f),p+=w):(y=c*s(2,w-1)*s(2,f),p=0));8<=f;l[h+C]=255&y,C+=$,y/=256,f-=8);for(p=p<<f|y,b+=f;0<b;l[h+C]=255&p,C+=$,p/=256,b-=8);l[h+C-$]|=128*I}},{}],10:[function(r,o){o.exports=typeof Object.create=="function"?function(a,l){l&&(a.super_=l,a.prototype=Object.create(l.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}))}:function(a,l){if(l){a.super_=l;var c=function(){};c.prototype=l.prototype,a.prototype=new c,a.prototype.constructor=a}}},{}],11:[function(r,o){var a=Math.round;function l(f){if(f+="",!(100<f.length)){var g=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(f);if(g){var p=parseFloat(g[1]),y=(g[2]||"ms").toLowerCase();return y==="years"||y==="year"||y==="yrs"||y==="yr"||y==="y"?315576e5*p:y==="weeks"||y==="week"||y==="w"?6048e5*p:y==="days"||y==="day"||y==="d"?864e5*p:y==="hours"||y==="hour"||y==="hrs"||y==="hr"||y==="h"?36e5*p:y==="minutes"||y==="minute"||y==="mins"||y==="min"||y==="m"?6e4*p:y==="seconds"||y==="second"||y==="secs"||y==="sec"||y==="s"?1e3*p:y==="milliseconds"||y==="millisecond"||y==="msecs"||y==="msec"||y==="ms"?p:void 0}}}function c(f){var g=i(f);return 864e5<=g?a(f/864e5)+"d":36e5<=g?a(f/36e5)+"h":6e4<=g?a(f/6e4)+"m":1e3<=g?a(f/1e3)+"s":f+"ms"}function h(f){var g=i(f);return 864e5<=g?u(f,g,864e5,"day"):36e5<=g?u(f,g,36e5,"hour"):6e4<=g?u(f,g,6e4,"minute"):1e3<=g?u(f,g,1e3,"second"):f+" ms"}function u(f,g,p,y){return a(f/p)+" "+y+(g>=1.5*p?"s":"")}o.exports=function(f,g){g=g||{};var p=typeof f;if(p=="string"&&0<f.length)return l(f);if(p==="number"&&isFinite(f))return g.long?h(f):c(f);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(f))}},{}],12:[function(r,o){function a(){throw new Error("setTimeout has not been defined")}function l(){throw new Error("clearTimeout has not been defined")}function c(T){if(y===setTimeout)return setTimeout(T,0);if((y===a||!y)&&setTimeout)return y=setTimeout,setTimeout(T,0);try{return y(T,0)}catch{try{return y.call(null,T,0)}catch{return y.call(this,T,0)}}}function h(T){if(x===clearTimeout)return clearTimeout(T);if((x===l||!x)&&clearTimeout)return x=clearTimeout,clearTimeout(T);try{return x(T)}catch{try{return x.call(null,T)}catch{return x.call(this,T)}}}function u(){_&&E&&(_=!1,E.length?b=E.concat(b):w=-1,b.length&&f())}function f(){if(!_){var T=c(u);_=!0;for(var C=b.length;C;){for(E=b,b=[];++w<C;)E&&E[w].run();w=-1,C=b.length}E=null,_=!1,h(T)}}function g(T,C){this.fun=T,this.array=C}function p(){}var y,x,S=o.exports={};(function(){try{y=typeof setTimeout=="function"?setTimeout:a}catch{y=a}try{x=typeof clearTimeout=="function"?clearTimeout:l}catch{x=l}})();var E,b=[],_=!1,w=-1;S.nextTick=function(T){var C=Array(arguments.length-1);if(1<arguments.length)for(var $=1;$<arguments.length;$++)C[$-1]=arguments[$];b.push(new g(T,C)),b.length!==1||_||c(f)},g.prototype.run=function(){this.fun.apply(null,this.array)},S.title="browser",S.browser=!0,S.env={},S.argv=[],S.version="",S.versions={},S.on=p,S.addListener=p,S.once=p,S.off=p,S.removeListener=p,S.removeAllListeners=p,S.emit=p,S.prependListener=p,S.prependOnceListener=p,S.listeners=function(){return[]},S.binding=function(){throw new Error("process.binding is not supported")},S.cwd=function(){return"/"},S.chdir=function(){throw new Error("process.chdir is not supported")},S.umask=function(){return 0}},{}],13:[function(r,o){(function(a){(function(){/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let l;o.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window>"u"?a:window):c=>(l||(l=Promise.resolve())).then(c).catch(h=>setTimeout(()=>{throw h},0))}).call(this)}).call(this,typeof yn>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:yn)},{}],14:[function(r,o){(function(a,l){(function(){var c=r("safe-buffer").Buffer,h=l.crypto||l.msCrypto;o.exports=h&&h.getRandomValues?function(u,f){if(u>4294967295)throw new RangeError("requested too many random bytes");var g=c.allocUnsafe(u);if(0<u)if(65536<u)for(var p=0;p<u;p+=65536)h.getRandomValues(g.slice(p,p+65536));else h.getRandomValues(g);return typeof f=="function"?a.nextTick(function(){f(null,g)}):g}:function(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}}).call(this)}).call(this,r("_process"),typeof yn>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:yn)},{_process:12,"safe-buffer":30}],15:[function(r,o){function a(p,y){p.prototype=Object.create(y.prototype),p.prototype.constructor=p,p.__proto__=y}function l(p,y,x){function S(b,_,w){return typeof y=="string"?y:y(b,_,w)}x||(x=Error);var E=function(b){function _(w,T,C){return b.call(this,S(w,T,C))||this}return a(_,b),_}(x);E.prototype.name=x.name,E.prototype.code=p,g[p]=E}function c(p,y){if(Array.isArray(p)){var x=p.length;return p=p.map(function(S){return S+""}),2<x?"one of ".concat(y," ").concat(p.slice(0,x-1).join(", "),", or ")+p[x-1]:x===2?"one of ".concat(y," ").concat(p[0]," or ").concat(p[1]):"of ".concat(y," ").concat(p[0])}return"of ".concat(y," ").concat(p+"")}function h(p,y,x){return p.substr(!x||0>x?0:+x,y.length)===y}function u(p,y,x){return(x===void 0||x>p.length)&&(x=p.length),p.substring(x-y.length,x)===y}function f(p,y,x){return typeof x!="number"&&(x=0),!(x+y.length>p.length)&&p.indexOf(y,x)!==-1}var g={};l("ERR_INVALID_OPT_VALUE",function(p,y){return'The value "'+y+'" is invalid for option "'+p+'"'},TypeError),l("ERR_INVALID_ARG_TYPE",function(p,y,x){var S;typeof y=="string"&&h(y,"not ")?(S="must not be",y=y.replace(/^not /,"")):S="must be";var E;if(u(p," argument"))E="The ".concat(p," ").concat(S," ").concat(c(y,"type"));else{var b=f(p,".")?"property":"argument";E='The "'.concat(p,'" ').concat(b," ").concat(S," ").concat(c(y,"type"))}return E+=". Received type ".concat(typeof x),E},TypeError),l("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),l("ERR_METHOD_NOT_IMPLEMENTED",function(p){return"The "+p+" method is not implemented"}),l("ERR_STREAM_PREMATURE_CLOSE","Premature close"),l("ERR_STREAM_DESTROYED",function(p){return"Cannot call "+p+" after a stream was destroyed"}),l("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),l("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),l("ERR_STREAM_WRITE_AFTER_END","write after end"),l("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),l("ERR_UNKNOWN_ENCODING",function(p){return"Unknown encoding: "+p},TypeError),l("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),o.exports.codes=g},{}],16:[function(r,o){(function(a){(function(){function l(S){return this instanceof l?(f.call(this,S),g.call(this,S),this.allowHalfOpen=!0,void(S&&(S.readable===!1&&(this.readable=!1),S.writable===!1&&(this.writable=!1),S.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",c))))):new l(S)}function c(){this._writableState.ended||a.nextTick(h,this)}function h(S){S.end()}var u=Object.keys||function(S){var E=[];for(var b in S)E.push(b);return E};o.exports=l;var f=r("./_stream_readable"),g=r("./_stream_writable");r("inherits")(l,f);for(var p,y=u(g.prototype),x=0;x<y.length;x++)p=y[x],l.prototype[p]||(l.prototype[p]=g.prototype[p]);Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(S){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=S,this._writableState.destroyed=S)}})}).call(this)}).call(this,r("_process"))},{"./_stream_readable":18,"./_stream_writable":20,_process:12,inherits:10}],17:[function(r,o){function a(c){return this instanceof a?void l.call(this,c):new a(c)}o.exports=a;var l=r("./_stream_transform");r("inherits")(a,l),a.prototype._transform=function(c,h,u){u(null,c)}},{"./_stream_transform":19,inherits:10}],18:[function(r,o){(function(a,l){(function(){function c(k){return Ut.from(k)}function h(k){return Ut.isBuffer(k)||k instanceof vt}function u(k,d,m){return typeof k.prependListener=="function"?k.prependListener(d,m):void(k._events&&k._events[d]?Array.isArray(k._events[d])?k._events[d].unshift(m):k._events[d]=[m,k._events[d]]:k.on(d,m))}function f(k,d,m){kt=kt||r("./_stream_duplex"),k=k||{},typeof m!="boolean"&&(m=d instanceof kt),this.objectMode=!!k.objectMode,m&&(this.objectMode=this.objectMode||!!k.readableObjectMode),this.highWaterMark=Te(this,k,"readableHighWaterMark",m),this.buffer=new Ae,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=k.emitClose!==!1,this.autoDestroy=!!k.autoDestroy,this.destroyed=!1,this.defaultEncoding=k.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,k.encoding&&(!Bt&&(Bt=r("string_decoder/").StringDecoder),this.decoder=new Bt(k.encoding),this.encoding=k.encoding)}function g(k){if(kt=kt||r("./_stream_duplex"),!(this instanceof g))return new g(k);var d=this instanceof kt;this._readableState=new f(k,this,d),this.readable=!0,k&&(typeof k.read=="function"&&(this._read=k.read),typeof k.destroy=="function"&&(this._destroy=k.destroy)),Qt.call(this)}function p(k,d,m,v,P){J("readableAddChunk",d);var R=k._readableState;if(d===null)R.reading=!1,b(k,R);else{var U;if(P||(U=x(R,d)),U)q(k,U);else if(!(R.objectMode||d&&0<d.length))v||(R.reading=!1,T(k,R));else if(typeof d=="string"||R.objectMode||Object.getPrototypeOf(d)===Ut.prototype||(d=c(d)),v)R.endEmitted?q(k,new H):y(k,R,d,!0);else if(R.ended)q(k,new be);else{if(R.destroyed)return!1;R.reading=!1,R.decoder&&!m?(d=R.decoder.write(d),R.objectMode||d.length!==0?y(k,R,d,!1):T(k,R)):y(k,R,d,!1)}}return!R.ended&&(R.length<R.highWaterMark||R.length===0)}function y(k,d,m,v){d.flowing&&d.length===0&&!d.sync?(d.awaitDrain=0,k.emit("data",m)):(d.length+=d.objectMode?1:m.length,v?d.buffer.unshift(m):d.buffer.push(m),d.needReadable&&_(k)),T(k,d)}function x(k,d){var m;return h(d)||typeof d=="string"||d===void 0||k.objectMode||(m=new oe("chunk",["string","Buffer","Uint8Array"],d)),m}function S(k){return 1073741824<=k?k=1073741824:(k--,k|=k>>>1,k|=k>>>2,k|=k>>>4,k|=k>>>8,k|=k>>>16,k++),k}function E(k,d){return 0>=k||d.length===0&&d.ended?0:d.objectMode?1:k===k?(k>d.highWaterMark&&(d.highWaterMark=S(k)),k<=d.length?k:d.ended?d.length:(d.needReadable=!0,0)):d.flowing&&d.length?d.buffer.head.data.length:d.length}function b(k,d){if(J("onEofChunk"),!d.ended){if(d.decoder){var m=d.decoder.end();m&&m.length&&(d.buffer.push(m),d.length+=d.objectMode?1:m.length)}d.ended=!0,d.sync?_(k):(d.needReadable=!1,!d.emittedReadable&&(d.emittedReadable=!0,w(k)))}}function _(k){var d=k._readableState;J("emitReadable",d.needReadable,d.emittedReadable),d.needReadable=!1,d.emittedReadable||(J("emitReadable",d.flowing),d.emittedReadable=!0,a.nextTick(w,k))}function w(k){var d=k._readableState;J("emitReadable_",d.destroyed,d.length,d.ended),!d.destroyed&&(d.length||d.ended)&&(k.emit("readable"),d.emittedReadable=!1),d.needReadable=!d.flowing&&!d.ended&&d.length<=d.highWaterMark,B(k)}function T(k,d){d.readingMore||(d.readingMore=!0,a.nextTick(C,k,d))}function C(k,d){for(;!d.reading&&!d.ended&&(d.length<d.highWaterMark||d.flowing&&d.length===0);){var m=d.length;if(J("maybeReadMore read 0"),k.read(0),m===d.length)break}d.readingMore=!1}function $(k){return function(){var d=k._readableState;J("pipeOnDrain",d.awaitDrain),d.awaitDrain&&d.awaitDrain--,d.awaitDrain===0&&zt(k,"data")&&(d.flowing=!0,B(k))}}function I(k){var d=k._readableState;d.readableListening=0<k.listenerCount("readable"),d.resumeScheduled&&!d.paused?d.flowing=!0:0<k.listenerCount("data")&&k.resume()}function A(k){J("readable nexttick read 0"),k.read(0)}function O(k,d){d.resumeScheduled||(d.resumeScheduled=!0,a.nextTick(M,k,d))}function M(k,d){J("resume",d.reading),d.reading||k.read(0),d.resumeScheduled=!1,k.emit("resume"),B(k),d.flowing&&!d.reading&&k.read(0)}function B(k){var d=k._readableState;for(J("flow",d.flowing);d.flowing&&k.read()!==null;);}function N(k,d){if(d.length===0)return null;var m;return d.objectMode?m=d.buffer.shift():!k||k>=d.length?(m=d.decoder?d.buffer.join(""):d.buffer.length===1?d.buffer.first():d.buffer.concat(d.length),d.buffer.clear()):m=d.buffer.consume(k,d.decoder),m}function K(k){var d=k._readableState;J("endReadable",d.endEmitted),d.endEmitted||(d.ended=!0,a.nextTick(Y,d,k))}function Y(k,d){if(J("endReadableNT",k.endEmitted,k.length),!k.endEmitted&&k.length===0&&(k.endEmitted=!0,d.readable=!1,d.emit("end"),k.autoDestroy)){var m=d._writableState;(!m||m.autoDestroy&&m.finished)&&d.destroy()}}function X(k,d){for(var m=0,v=k.length;m<v;m++)if(k[m]===d)return m;return-1}o.exports=g;var kt;g.ReadableState=f;var J;r("events").EventEmitter;var zt=function(k,d){return k.listeners(d).length},Qt=r("./internal/streams/stream"),Ut=r("buffer").Buffer,vt=l.Uint8Array||function(){},z=r("util");J=z&&z.debuglog?z.debuglog("stream"):function(){};var Bt,rt,St,Ae=r("./internal/streams/buffer_list"),re=r("./internal/streams/destroy"),he=r("./internal/streams/state"),Te=he.getHighWaterMark,Pe=r("../errors").codes,oe=Pe.ERR_INVALID_ARG_TYPE,be=Pe.ERR_STREAM_PUSH_AFTER_EOF,F=Pe.ERR_METHOD_NOT_IMPLEMENTED,H=Pe.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;r("inherits")(g,Qt);var q=re.errorOrDestroy,ot=["error","close","destroy","pause","resume"];Object.defineProperty(g.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(k){this._readableState&&(this._readableState.destroyed=k)}}),g.prototype.destroy=re.destroy,g.prototype._undestroy=re.undestroy,g.prototype._destroy=function(k,d){d(k)},g.prototype.push=function(k,d){var m,v=this._readableState;return v.objectMode?m=!0:typeof k=="string"&&(d=d||v.defaultEncoding,d!==v.encoding&&(k=Ut.from(k,d),d=""),m=!0),p(this,k,d,!1,m)},g.prototype.unshift=function(k){return p(this,k,null,!0,!1)},g.prototype.isPaused=function(){return this._readableState.flowing===!1},g.prototype.setEncoding=function(k){Bt||(Bt=r("string_decoder/").StringDecoder);var d=new Bt(k);this._readableState.decoder=d,this._readableState.encoding=this._readableState.decoder.encoding;for(var m=this._readableState.buffer.head,v="";m!==null;)v+=d.write(m.data),m=m.next;return this._readableState.buffer.clear(),v!==""&&this._readableState.buffer.push(v),this._readableState.length=v.length,this},g.prototype.read=function(k){J("read",k),k=parseInt(k,10);var d=this._readableState,m=k;if(k!==0&&(d.emittedReadable=!1),k===0&&d.needReadable&&((d.highWaterMark===0?0<d.length:d.length>=d.highWaterMark)||d.ended))return J("read: emitReadable",d.length,d.ended),d.length===0&&d.ended?K(this):_(this),null;if(k=E(k,d),k===0&&d.ended)return d.length===0&&K(this),null;var v=d.needReadable;J("need readable",v),(d.length===0||d.length-k<d.highWaterMark)&&(v=!0,J("length less than watermark",v)),d.ended||d.reading?(v=!1,J("reading or ended",v)):v&&(J("do read"),d.reading=!0,d.sync=!0,d.length===0&&(d.needReadable=!0),this._read(d.highWaterMark),d.sync=!1,!d.reading&&(k=E(m,d)));var P;return P=0<k?N(k,d):null,P===null?(d.needReadable=d.length<=d.highWaterMark,k=0):(d.length-=k,d.awaitDrain=0),d.length===0&&(!d.ended&&(d.needReadable=!0),m!==k&&d.ended&&K(this)),P!==null&&this.emit("data",P),P},g.prototype._read=function(){q(this,new F("_read()"))},g.prototype.pipe=function(k,d){function m(fi,pi){J("onunpipe"),fi===Tt&&pi&&pi.hasUnpiped===!1&&(pi.hasUnpiped=!0,P())}function v(){J("onend"),k.end()}function P(){J("cleanup"),k.removeListener("close",st),k.removeListener("finish",xt),k.removeListener("drain",hi),k.removeListener("error",U),k.removeListener("unpipe",m),Tt.removeListener("end",v),Tt.removeListener("end",Kt),Tt.removeListener("data",R),di=!0,_t.awaitDrain&&(!k._writableState||k._writableState.needDrain)&&hi()}function R(fi){J("ondata");var pi=k.write(fi);J("dest.write",pi),pi===!1&&((_t.pipesCount===1&&_t.pipes===k||1<_t.pipesCount&&X(_t.pipes,k)!==-1)&&!di&&(J("false write response, pause",_t.awaitDrain),_t.awaitDrain++),Tt.pause())}function U(fi){J("onerror",fi),Kt(),k.removeListener("error",U),zt(k,"error")===0&&q(k,fi)}function st(){k.removeListener("finish",xt),Kt()}function xt(){J("onfinish"),k.removeListener("close",st),Kt()}function Kt(){J("unpipe"),Tt.unpipe(k)}var Tt=this,_t=this._readableState;switch(_t.pipesCount){case 0:_t.pipes=k;break;case 1:_t.pipes=[_t.pipes,k];break;default:_t.pipes.push(k)}_t.pipesCount+=1,J("pipe count=%d opts=%j",_t.pipesCount,d);var ae=(!d||d.end!==!1)&&k!==a.stdout&&k!==a.stderr,Un=ae?v:Kt;_t.endEmitted?a.nextTick(Un):Tt.once("end",Un),k.on("unpipe",m);var hi=$(Tt);k.on("drain",hi);var di=!1;return Tt.on("data",R),u(k,"error",U),k.once("close",st),k.once("finish",xt),k.emit("pipe",Tt),_t.flowing||(J("pipe resume"),Tt.resume()),k},g.prototype.unpipe=function(k){var d=this._readableState,m={hasUnpiped:!1};if(d.pipesCount===0)return this;if(d.pipesCount===1)return k&&k!==d.pipes?this:(k||(k=d.pipes),d.pipes=null,d.pipesCount=0,d.flowing=!1,k&&k.emit("unpipe",this,m),this);if(!k){var v=d.pipes,P=d.pipesCount;d.pipes=null,d.pipesCount=0,d.flowing=!1;for(var R=0;R<P;R++)v[R].emit("unpipe",this,{hasUnpiped:!1});return this}var U=X(d.pipes,k);return U===-1?this:(d.pipes.splice(U,1),d.pipesCount-=1,d.pipesCount===1&&(d.pipes=d.pipes[0]),k.emit("unpipe",this,m),this)},g.prototype.on=function(k,d){var m=Qt.prototype.on.call(this,k,d),v=this._readableState;return k==="data"?(v.readableListening=0<this.listenerCount("readable"),v.flowing!==!1&&this.resume()):k=="readable"&&!v.endEmitted&&!v.readableListening&&(v.readableListening=v.needReadable=!0,v.flowing=!1,v.emittedReadable=!1,J("on readable",v.length,v.reading),v.length?_(this):!v.reading&&a.nextTick(A,this)),m},g.prototype.addListener=g.prototype.on,g.prototype.removeListener=function(k,d){var m=Qt.prototype.removeListener.call(this,k,d);return k==="readable"&&a.nextTick(I,this),m},g.prototype.removeAllListeners=function(k){var d=Qt.prototype.removeAllListeners.apply(this,arguments);return(k==="readable"||k===void 0)&&a.nextTick(I,this),d},g.prototype.resume=function(){var k=this._readableState;return k.flowing||(J("resume"),k.flowing=!k.readableListening,O(this,k)),k.paused=!1,this},g.prototype.pause=function(){return J("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(J("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},g.prototype.wrap=function(k){var d=this,m=this._readableState,v=!1;for(var P in k.on("end",function(){if(J("wrapped end"),m.decoder&&!m.ended){var U=m.decoder.end();U&&U.length&&d.push(U)}d.push(null)}),k.on("data",function(U){if(J("wrapped data"),m.decoder&&(U=m.decoder.write(U)),!(m.objectMode&&U==null)&&(m.objectMode||U&&U.length)){var st=d.push(U);st||(v=!0,k.pause())}}),k)this[P]===void 0&&typeof k[P]=="function"&&(this[P]=function(U){return function(){return k[U].apply(k,arguments)}}(P));for(var R=0;R<ot.length;R++)k.on(ot[R],this.emit.bind(this,ot[R]));return this._read=function(U){J("wrapped _read",U),v&&(v=!1,k.resume())},this},typeof Symbol=="function"&&(g.prototype[Symbol.asyncIterator]=function(){return rt===void 0&&(rt=r("./internal/streams/async_iterator")),rt(this)}),Object.defineProperty(g.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(g.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(g.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(k){this._readableState&&(this._readableState.flowing=k)}}),g._fromList=N,Object.defineProperty(g.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(g.from=function(k,d){return St===void 0&&(St=r("./internal/streams/from")),St(g,k,d)})}).call(this)}).call(this,r("_process"),typeof yn>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:yn)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/async_iterator":21,"./internal/streams/buffer_list":22,"./internal/streams/destroy":23,"./internal/streams/from":25,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,events:7,inherits:10,"string_decoder/":31,util:2}],19:[function(r,o){function a(S,E){var b=this._transformState;b.transforming=!1;var _=b.writecb;if(_===null)return this.emit("error",new g);b.writechunk=null,b.writecb=null,E!=null&&this.push(E),_(S);var w=this._readableState;w.reading=!1,(w.needReadable||w.length<w.highWaterMark)&&this._read(w.highWaterMark)}function l(S){return this instanceof l?(x.call(this,S),this._transformState={afterTransform:a.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,S&&(typeof S.transform=="function"&&(this._transform=S.transform),typeof S.flush=="function"&&(this._flush=S.flush)),void this.on("prefinish",c)):new l(S)}function c(){var S=this;typeof this._flush!="function"||this._readableState.destroyed?h(this,null,null):this._flush(function(E,b){h(S,E,b)})}function h(S,E,b){if(E)return S.emit("error",E);if(b!=null&&S.push(b),S._writableState.length)throw new y;if(S._transformState.transforming)throw new p;return S.push(null)}o.exports=l;var u=r("../errors").codes,f=u.ERR_METHOD_NOT_IMPLEMENTED,g=u.ERR_MULTIPLE_CALLBACK,p=u.ERR_TRANSFORM_ALREADY_TRANSFORMING,y=u.ERR_TRANSFORM_WITH_LENGTH_0,x=r("./_stream_duplex");r("inherits")(l,x),l.prototype.push=function(S,E){return this._transformState.needTransform=!1,x.prototype.push.call(this,S,E)},l.prototype._transform=function(S,E,b){b(new f("_transform()"))},l.prototype._write=function(S,E,b){var _=this._transformState;if(_.writecb=b,_.writechunk=S,_.writeencoding=E,!_.transforming){var w=this._readableState;(_.needTransform||w.needReadable||w.length<w.highWaterMark)&&this._read(w.highWaterMark)}},l.prototype._read=function(){var S=this._transformState;S.writechunk===null||S.transforming?S.needTransform=!0:(S.transforming=!0,this._transform(S.writechunk,S.writeencoding,S.afterTransform))},l.prototype._destroy=function(S,E){x.prototype._destroy.call(this,S,function(b){E(b)})}},{"../errors":15,"./_stream_duplex":16,inherits:10}],20:[function(r,o){(function(a,l){(function(){function c(F){var H=this;this.next=null,this.entry=null,this.finish=function(){K(H,F)}}function h(F){return J.from(F)}function u(F){return J.isBuffer(F)||F instanceof zt}function f(){}function g(F,H,q){Y=Y||r("./_stream_duplex"),F=F||{},typeof q!="boolean"&&(q=H instanceof Y),this.objectMode=!!F.objectMode,q&&(this.objectMode=this.objectMode||!!F.writableObjectMode),this.highWaterMark=vt(this,F,"writableHighWaterMark",q),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var ot=F.decodeStrings===!1;this.decodeStrings=!ot,this.defaultEncoding=F.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(k){T(H,k)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=F.emitClose!==!1,this.autoDestroy=!!F.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new c(this)}function p(F){Y=Y||r("./_stream_duplex");var H=this instanceof Y;return H||be.call(p,this)?(this._writableState=new g(F,this,H),this.writable=!0,F&&(typeof F.write=="function"&&(this._write=F.write),typeof F.writev=="function"&&(this._writev=F.writev),typeof F.destroy=="function"&&(this._destroy=F.destroy),typeof F.final=="function"&&(this._final=F.final)),void kt.call(this)):new p(F)}function y(F,H){var q=new Te;oe(F,q),a.nextTick(H,q)}function x(F,H,q,ot){var k;return q===null?k=new he:typeof q!="string"&&!H.objectMode&&(k=new Bt("chunk",["string","Buffer"],q)),!k||(oe(F,k),a.nextTick(ot,k),!1)}function S(F,H,q){return F.objectMode||F.decodeStrings===!1||typeof H!="string"||(H=J.from(H,q)),H}function E(F,H,q,ot,k,d){if(!q){var m=S(H,ot,k);ot!==m&&(q=!0,k="buffer",ot=m)}var v=H.objectMode?1:ot.length;H.length+=v;var P=H.length<H.highWaterMark;if(P||(H.needDrain=!0),H.writing||H.corked){var R=H.lastBufferedRequest;H.lastBufferedRequest={chunk:ot,encoding:k,isBuf:q,callback:d,next:null},R?R.next=H.lastBufferedRequest:H.bufferedRequest=H.lastBufferedRequest,H.bufferedRequestCount+=1}else b(F,H,!1,v,ot,k,d);return P}function b(F,H,q,ot,k,d,m){H.writelen=ot,H.writecb=m,H.writing=!0,H.sync=!0,H.destroyed?H.onwrite(new re("write")):q?F._writev(k,H.onwrite):F._write(k,d,H.onwrite),H.sync=!1}function _(F,H,q,ot,k){--H.pendingcb,q?(a.nextTick(k,ot),a.nextTick(B,F,H),F._writableState.errorEmitted=!0,oe(F,ot)):(k(ot),F._writableState.errorEmitted=!0,oe(F,ot),B(F,H))}function w(F){F.writing=!1,F.writecb=null,F.length-=F.writelen,F.writelen=0}function T(F,H){var q=F._writableState,ot=q.sync,k=q.writecb;if(typeof k!="function")throw new St;if(w(q),H)_(F,q,ot,H,k);else{var d=A(q)||F.destroyed;d||q.corked||q.bufferProcessing||!q.bufferedRequest||I(F,q),ot?a.nextTick(C,F,q,d,k):C(F,q,d,k)}}function C(F,H,q,ot){q||$(F,H),H.pendingcb--,ot(),B(F,H)}function $(F,H){H.length===0&&H.needDrain&&(H.needDrain=!1,F.emit("drain"))}function I(F,H){H.bufferProcessing=!0;var q=H.bufferedRequest;if(F._writev&&q&&q.next){var ot=H.bufferedRequestCount,k=Array(ot),d=H.corkedRequestsFree;d.entry=q;for(var m=0,v=!0;q;)k[m]=q,q.isBuf||(v=!1),q=q.next,m+=1;k.allBuffers=v,b(F,H,!0,H.length,k,"",d.finish),H.pendingcb++,H.lastBufferedRequest=null,d.next?(H.corkedRequestsFree=d.next,d.next=null):H.corkedRequestsFree=new c(H),H.bufferedRequestCount=0}else{for(;q;){var P=q.chunk,R=q.encoding,U=q.callback,st=H.objectMode?1:P.length;if(b(F,H,!1,st,P,R,U),q=q.next,H.bufferedRequestCount--,H.writing)break}q===null&&(H.lastBufferedRequest=null)}H.bufferedRequest=q,H.bufferProcessing=!1}function A(F){return F.ending&&F.length===0&&F.bufferedRequest===null&&!F.finished&&!F.writing}function O(F,H){F._final(function(q){H.pendingcb--,q&&oe(F,q),H.prefinished=!0,F.emit("prefinish"),B(F,H)})}function M(F,H){H.prefinished||H.finalCalled||(typeof F._final!="function"||H.destroyed?(H.prefinished=!0,F.emit("prefinish")):(H.pendingcb++,H.finalCalled=!0,a.nextTick(O,F,H)))}function B(F,H){var q=A(H);if(q&&(M(F,H),H.pendingcb===0&&(H.finished=!0,F.emit("finish"),H.autoDestroy))){var ot=F._readableState;(!ot||ot.autoDestroy&&ot.endEmitted)&&F.destroy()}return q}function N(F,H,q){H.ending=!0,B(F,H),q&&(H.finished?a.nextTick(q):F.once("finish",q)),H.ended=!0,F.writable=!1}function K(F,H,q){var ot=F.entry;for(F.entry=null;ot;){var k=ot.callback;H.pendingcb--,k(q),ot=ot.next}H.corkedRequestsFree.next=F}o.exports=p;var Y;p.WritableState=g;var X={deprecate:r("util-deprecate")},kt=r("./internal/streams/stream"),J=r("buffer").Buffer,zt=l.Uint8Array||function(){},Qt=r("./internal/streams/destroy"),Ut=r("./internal/streams/state"),vt=Ut.getHighWaterMark,z=r("../errors").codes,Bt=z.ERR_INVALID_ARG_TYPE,rt=z.ERR_METHOD_NOT_IMPLEMENTED,St=z.ERR_MULTIPLE_CALLBACK,Ae=z.ERR_STREAM_CANNOT_PIPE,re=z.ERR_STREAM_DESTROYED,he=z.ERR_STREAM_NULL_VALUES,Te=z.ERR_STREAM_WRITE_AFTER_END,Pe=z.ERR_UNKNOWN_ENCODING,oe=Qt.errorOrDestroy;r("inherits")(p,kt),g.prototype.getBuffer=function(){for(var F=this.bufferedRequest,H=[];F;)H.push(F),F=F.next;return H},function(){try{Object.defineProperty(g.prototype,"buffer",{get:X.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var be;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(be=Function.prototype[Symbol.hasInstance],Object.defineProperty(p,Symbol.hasInstance,{value:function(F){return!!be.call(this,F)||this===p&&F&&F._writableState instanceof g}})):be=function(F){return F instanceof this},p.prototype.pipe=function(){oe(this,new Ae)},p.prototype.write=function(F,H,q){var ot=this._writableState,k=!1,d=!ot.objectMode&&u(F);return d&&!J.isBuffer(F)&&(F=h(F)),typeof H=="function"&&(q=H,H=null),d?H="buffer":!H&&(H=ot.defaultEncoding),typeof q!="function"&&(q=f),ot.ending?y(this,q):(d||x(this,ot,F,q))&&(ot.pendingcb++,k=E(this,ot,d,F,H,q)),k},p.prototype.cork=function(){this._writableState.corked++},p.prototype.uncork=function(){var F=this._writableState;F.corked&&(F.corked--,!F.writing&&!F.corked&&!F.bufferProcessing&&F.bufferedRequest&&I(this,F))},p.prototype.setDefaultEncoding=function(F){if(typeof F=="string"&&(F=F.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((F+"").toLowerCase())))throw new Pe(F);return this._writableState.defaultEncoding=F,this},Object.defineProperty(p.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(p.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),p.prototype._write=function(F,H,q){q(new rt("_write()"))},p.prototype._writev=null,p.prototype.end=function(F,H,q){var ot=this._writableState;return typeof F=="function"?(q=F,F=null,H=null):typeof H=="function"&&(q=H,H=null),F!=null&&this.write(F,H),ot.corked&&(ot.corked=1,this.uncork()),ot.ending||N(this,ot,q),this},Object.defineProperty(p.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(p.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(F){this._writableState&&(this._writableState.destroyed=F)}}),p.prototype.destroy=Qt.destroy,p.prototype._undestroy=Qt.undestroy,p.prototype._destroy=function(F,H){H(F)}}).call(this)}).call(this,r("_process"),typeof yn>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:yn)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/destroy":23,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,inherits:10,"util-deprecate":32}],21:[function(r,o){(function(a){(function(){function l($,I,A){return I in $?Object.defineProperty($,I,{value:A,enumerable:!0,configurable:!0,writable:!0}):$[I]=A,$}function c($,I){return{value:$,done:I}}function h($){var I=$[y];if(I!==null){var A=$[w].read();A!==null&&($[b]=null,$[y]=null,$[x]=null,I(c(A,!1)))}}function u($){a.nextTick(h,$)}function f($,I){return function(A,O){$.then(function(){return I[E]?void A(c(void 0,!0)):void I[_](A,O)},O)}}var g,p=r("./end-of-stream"),y=Symbol("lastResolve"),x=Symbol("lastReject"),S=Symbol("error"),E=Symbol("ended"),b=Symbol("lastPromise"),_=Symbol("handlePromise"),w=Symbol("stream"),T=Object.getPrototypeOf(function(){}),C=Object.setPrototypeOf((g={get stream(){return this[w]},next:function(){var $=this,I=this[S];if(I!==null)return Promise.reject(I);if(this[E])return Promise.resolve(c(void 0,!0));if(this[w].destroyed)return new Promise(function(B,N){a.nextTick(function(){$[S]?N($[S]):B(c(void 0,!0))})});var A,O=this[b];if(O)A=new Promise(f(O,this));else{var M=this[w].read();if(M!==null)return Promise.resolve(c(M,!1));A=new Promise(this[_])}return this[b]=A,A}},l(g,Symbol.asyncIterator,function(){return this}),l(g,"return",function(){var $=this;return new Promise(function(I,A){$[w].destroy(null,function(O){return O?void A(O):void I(c(void 0,!0))})})}),g),T);o.exports=function($){var I,A=Object.create(C,(I={},l(I,w,{value:$,writable:!0}),l(I,y,{value:null,writable:!0}),l(I,x,{value:null,writable:!0}),l(I,S,{value:null,writable:!0}),l(I,E,{value:$._readableState.endEmitted,writable:!0}),l(I,_,{value:function(O,M){var B=A[w].read();B?(A[b]=null,A[y]=null,A[x]=null,O(c(B,!1))):(A[y]=O,A[x]=M)},writable:!0}),I));return A[b]=null,p($,function(O){if(O&&O.code!=="ERR_STREAM_PREMATURE_CLOSE"){var M=A[x];return M!==null&&(A[b]=null,A[y]=null,A[x]=null,M(O)),void(A[S]=O)}var B=A[y];B!==null&&(A[b]=null,A[y]=null,A[x]=null,B(c(void 0,!0))),A[E]=!0}),$.on("readable",u.bind(null,A)),A}}).call(this)}).call(this,r("_process"))},{"./end-of-stream":24,_process:12}],22:[function(r,o){function a(b,_){var w=Object.keys(b);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(b);_&&(T=T.filter(function(C){return Object.getOwnPropertyDescriptor(b,C).enumerable})),w.push.apply(w,T)}return w}function l(b){for(var _,w=1;w<arguments.length;w++)_=arguments[w]==null?{}:arguments[w],w%2?a(Object(_),!0).forEach(function(T){c(b,T,_[T])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(_)):a(Object(_)).forEach(function(T){Object.defineProperty(b,T,Object.getOwnPropertyDescriptor(_,T))});return b}function c(b,_,w){return _ in b?Object.defineProperty(b,_,{value:w,enumerable:!0,configurable:!0,writable:!0}):b[_]=w,b}function h(b,_){if(!(b instanceof _))throw new TypeError("Cannot call a class as a function")}function u(b,_){for(var w,T=0;T<_.length;T++)w=_[T],w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(b,w.key,w)}function f(b,_,w){return _&&u(b.prototype,_),w&&u(b,w),b}function g(b,_,w){y.prototype.copy.call(b,_,w)}var p=r("buffer"),y=p.Buffer,x=r("util"),S=x.inspect,E=S&&S.custom||"inspect";o.exports=function(){function b(){h(this,b),this.head=null,this.tail=null,this.length=0}return f(b,[{key:"push",value:function(_){var w={data:_,next:null};0<this.length?this.tail.next=w:this.head=w,this.tail=w,++this.length}},{key:"unshift",value:function(_){var w={data:_,next:this.head};this.length===0&&(this.tail=w),this.head=w,++this.length}},{key:"shift",value:function(){if(this.length!==0){var _=this.head.data;return this.head=this.length===1?this.tail=null:this.head.next,--this.length,_}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(_){if(this.length===0)return"";for(var w=this.head,T=""+w.data;w=w.next;)T+=_+w.data;return T}},{key:"concat",value:function(_){if(this.length===0)return y.alloc(0);for(var w=y.allocUnsafe(_>>>0),T=this.head,C=0;T;)g(T.data,w,C),C+=T.data.length,T=T.next;return w}},{key:"consume",value:function(_,w){var T;return _<this.head.data.length?(T=this.head.data.slice(0,_),this.head.data=this.head.data.slice(_)):_===this.head.data.length?T=this.shift():T=w?this._getString(_):this._getBuffer(_),T}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(_){var w=this.head,T=1,C=w.data;for(_-=C.length;w=w.next;){var $=w.data,I=_>$.length?$.length:_;if(C+=I===$.length?$:$.slice(0,_),_-=I,_===0){I===$.length?(++T,this.head=w.next?w.next:this.tail=null):(this.head=w,w.data=$.slice(I));break}++T}return this.length-=T,C}},{key:"_getBuffer",value:function(_){var w=y.allocUnsafe(_),T=this.head,C=1;for(T.data.copy(w),_-=T.data.length;T=T.next;){var $=T.data,I=_>$.length?$.length:_;if($.copy(w,w.length-_,0,I),_-=I,_===0){I===$.length?(++C,this.head=T.next?T.next:this.tail=null):(this.head=T,T.data=$.slice(I));break}++C}return this.length-=C,w}},{key:E,value:function(_,w){return S(this,l({},w,{depth:0,customInspect:!1}))}}]),b}()},{buffer:3,util:2}],23:[function(r,o){(function(a){(function(){function l(u,f){h(u,f),c(u)}function c(u){u._writableState&&!u._writableState.emitClose||u._readableState&&!u._readableState.emitClose||u.emit("close")}function h(u,f){u.emit("error",f)}o.exports={destroy:function(u,f){var g=this,p=this._readableState&&this._readableState.destroyed,y=this._writableState&&this._writableState.destroyed;return p||y?(f?f(u):u&&(this._writableState?!this._writableState.errorEmitted&&(this._writableState.errorEmitted=!0,a.nextTick(h,this,u)):a.nextTick(h,this,u)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(u||null,function(x){!f&&x?g._writableState?g._writableState.errorEmitted?a.nextTick(c,g):(g._writableState.errorEmitted=!0,a.nextTick(l,g,x)):a.nextTick(l,g,x):f?(a.nextTick(c,g),f(x)):a.nextTick(c,g)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(u,f){var g=u._readableState,p=u._writableState;g&&g.autoDestroy||p&&p.autoDestroy?u.destroy(f):u.emit("error",f)}}}).call(this)}).call(this,r("_process"))},{_process:12}],24:[function(r,o){function a(f){var g=!1;return function(){if(!g){g=!0;for(var p=arguments.length,y=Array(p),x=0;x<p;x++)y[x]=arguments[x];f.apply(this,y)}}}function l(){}function c(f){return f.setHeader&&typeof f.abort=="function"}function h(f,g,p){if(typeof g=="function")return h(f,null,g);g||(g={}),p=a(p||l);var y=g.readable||g.readable!==!1&&f.readable,x=g.writable||g.writable!==!1&&f.writable,S=function(){f.writable||b()},E=f._writableState&&f._writableState.finished,b=function(){x=!1,E=!0,y||p.call(f)},_=f._readableState&&f._readableState.endEmitted,w=function(){y=!1,_=!0,x||p.call(f)},T=function(I){p.call(f,I)},C=function(){var I;return y&&!_?(f._readableState&&f._readableState.ended||(I=new u),p.call(f,I)):x&&!E?(f._writableState&&f._writableState.ended||(I=new u),p.call(f,I)):void 0},$=function(){f.req.on("finish",b)};return c(f)?(f.on("complete",b),f.on("abort",C),f.req?$():f.on("request",$)):x&&!f._writableState&&(f.on("end",S),f.on("close",S)),f.on("end",w),f.on("finish",b),g.error!==!1&&f.on("error",T),f.on("close",C),function(){f.removeListener("complete",b),f.removeListener("abort",C),f.removeListener("request",$),f.req&&f.req.removeListener("finish",b),f.removeListener("end",S),f.removeListener("close",S),f.removeListener("finish",b),f.removeListener("end",w),f.removeListener("error",T),f.removeListener("close",C)}}var u=r("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;o.exports=h},{"../../../errors":15}],25:[function(r,o){o.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],26:[function(r,o){function a(E){var b=!1;return function(){b||(b=!0,E.apply(void 0,arguments))}}function l(E){if(E)throw E}function c(E){return E.setHeader&&typeof E.abort=="function"}function h(E,b,_,w){w=a(w);var T=!1;E.on("close",function(){T=!0}),p===void 0&&(p=r("./end-of-stream")),p(E,{readable:b,writable:_},function($){return $?w($):(T=!0,void w())});var C=!1;return function($){if(!T)return C?void 0:(C=!0,c(E)?E.abort():typeof E.destroy=="function"?E.destroy():void w($||new S("pipe")))}}function u(E){E()}function f(E,b){return E.pipe(b)}function g(E){return E.length&&typeof E[E.length-1]=="function"?E.pop():l}var p,y=r("../../../errors").codes,x=y.ERR_MISSING_ARGS,S=y.ERR_STREAM_DESTROYED;o.exports=function(){for(var E=arguments.length,b=Array(E),_=0;_<E;_++)b[_]=arguments[_];var w=g(b);if(Array.isArray(b[0])&&(b=b[0]),2>b.length)throw new x("streams");var T,C=b.map(function($,I){var A=I<b.length-1;return h($,A,0<I,function(O){T||(T=O),O&&C.forEach(u),A||(C.forEach(u),w(T))})});return b.reduce(f)}},{"../../../errors":15,"./end-of-stream":24}],27:[function(r,o){function a(c,h,u){return c.highWaterMark==null?h?c[u]:null:c.highWaterMark}var l=r("../../../errors").codes.ERR_INVALID_OPT_VALUE;o.exports={getHighWaterMark:function(c,h,u,f){var g=a(h,f,u);if(g!=null){if(!(isFinite(g)&&n(g)===g)||0>g){var p=f?u:"highWaterMark";throw new l(p,g)}return n(g)}return c.objectMode?16:16384}}},{"../../../errors":15}],28:[function(r,o){o.exports=r("events").EventEmitter},{events:7}],29:[function(r,o,a){a=o.exports=r("./lib/_stream_readable.js"),a.Stream=a,a.Readable=a,a.Writable=r("./lib/_stream_writable.js"),a.Duplex=r("./lib/_stream_duplex.js"),a.Transform=r("./lib/_stream_transform.js"),a.PassThrough=r("./lib/_stream_passthrough.js"),a.finished=r("./lib/internal/streams/end-of-stream.js"),a.pipeline=r("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":16,"./lib/_stream_passthrough.js":17,"./lib/_stream_readable.js":18,"./lib/_stream_transform.js":19,"./lib/_stream_writable.js":20,"./lib/internal/streams/end-of-stream.js":24,"./lib/internal/streams/pipeline.js":26}],30:[function(r,o,a){function l(f,g){for(var p in f)g[p]=f[p]}function c(f,g,p){return u(f,g,p)}/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var h=r("buffer"),u=h.Buffer;u.from&&u.alloc&&u.allocUnsafe&&u.allocUnsafeSlow?o.exports=h:(l(h,a),a.Buffer=c),c.prototype=Object.create(u.prototype),l(u,c),c.from=function(f,g,p){if(typeof f=="number")throw new TypeError("Argument must not be a number");return u(f,g,p)},c.alloc=function(f,g,p){if(typeof f!="number")throw new TypeError("Argument must be a number");var y=u(f);return g===void 0?y.fill(0):typeof p=="string"?y.fill(g,p):y.fill(g),y},c.allocUnsafe=function(f){if(typeof f!="number")throw new TypeError("Argument must be a number");return u(f)},c.allocUnsafeSlow=function(f){if(typeof f!="number")throw new TypeError("Argument must be a number");return h.SlowBuffer(f)}},{buffer:3}],31:[function(r,o,a){function l(C){if(!C)return"utf8";for(var $;;)switch(C){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return C;default:if($)return;C=(""+C).toLowerCase(),$=!0}}function c(C){var $=l(C);if(typeof $!="string"&&(w.isEncoding===T||!T(C)))throw new Error("Unknown encoding: "+C);return $||C}function h(C){this.encoding=c(C);var $;switch(this.encoding){case"utf16le":this.text=y,this.end=x,$=4;break;case"utf8":this.fillLast=p,$=4;break;case"base64":this.text=S,this.end=E,$=3;break;default:return this.write=b,void(this.end=_)}this.lastNeed=0,this.lastTotal=0,this.lastChar=w.allocUnsafe($)}function u(C){return 127>=C?0:C>>5==6?2:C>>4==14?3:C>>3==30?4:C>>6==2?-1:-2}function f(C,$,I){var A=$.length-1;if(A<I)return 0;var O=u($[A]);return 0<=O?(0<O&&(C.lastNeed=O-1),O):--A<I||O===-2?0:(O=u($[A]),0<=O?(0<O&&(C.lastNeed=O-2),O):--A<I||O===-2?0:(O=u($[A]),0<=O?(0<O&&(O===2?O=0:C.lastNeed=O-3),O):0))}function g(C,$){if((192&$[0])!=128)return C.lastNeed=0,"";if(1<C.lastNeed&&1<$.length){if((192&$[1])!=128)return C.lastNeed=1,"";if(2<C.lastNeed&&2<$.length&&(192&$[2])!=128)return C.lastNeed=2,""}}function p(C){var $=this.lastTotal-this.lastNeed,I=g(this,C);return I===void 0?this.lastNeed<=C.length?(C.copy(this.lastChar,$,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(C.copy(this.lastChar,$,0,C.length),void(this.lastNeed-=C.length)):I}function y(C,$){if((C.length-$)%2==0){var I=C.toString("utf16le",$);if(I){var A=I.charCodeAt(I.length-1);if(55296<=A&&56319>=A)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=C[C.length-2],this.lastChar[1]=C[C.length-1],I.slice(0,-1)}return I}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=C[C.length-1],C.toString("utf16le",$,C.length-1)}function x(C){var $=C&&C.length?this.write(C):"";if(this.lastNeed){var I=this.lastTotal-this.lastNeed;return $+this.lastChar.toString("utf16le",0,I)}return $}function S(C,$){var I=(C.length-$)%3;return I==0?C.toString("base64",$):(this.lastNeed=3-I,this.lastTotal=3,I==1?this.lastChar[0]=C[C.length-1]:(this.lastChar[0]=C[C.length-2],this.lastChar[1]=C[C.length-1]),C.toString("base64",$,C.length-I))}function E(C){var $=C&&C.length?this.write(C):"";return this.lastNeed?$+this.lastChar.toString("base64",0,3-this.lastNeed):$}function b(C){return C.toString(this.encoding)}function _(C){return C&&C.length?this.write(C):""}var w=r("safe-buffer").Buffer,T=w.isEncoding||function(C){switch(C=""+C,C&&C.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};a.StringDecoder=h,h.prototype.write=function(C){if(C.length===0)return"";var $,I;if(this.lastNeed){if($=this.fillLast(C),$===void 0)return"";I=this.lastNeed,this.lastNeed=0}else I=0;return I<C.length?$?$+this.text(C,I):this.text(C,I):$||""},h.prototype.end=function(C){var $=C&&C.length?this.write(C):"";return this.lastNeed?$+"":$},h.prototype.text=function(C,$){var I=f(this,C,$);if(!this.lastNeed)return C.toString("utf8",$);this.lastTotal=I;var A=C.length-(I-this.lastNeed);return C.copy(this.lastChar,0,A),C.toString("utf8",$,A)},h.prototype.fillLast=function(C){return this.lastNeed<=C.length?(C.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(C.copy(this.lastChar,this.lastTotal-this.lastNeed,0,C.length),void(this.lastNeed-=C.length))}},{"safe-buffer":30}],32:[function(r,o){(function(a){(function(){function l(c){try{if(!a.localStorage)return!1}catch{return!1}var h=a.localStorage[c];return h!=null&&(h+"").toLowerCase()==="true"}o.exports=function(c,h){function u(){if(!f){if(l("throwDeprecation"))throw new Error(h);l("traceDeprecation")?console.trace(h):console.warn(h),f=!0}return c.apply(this,arguments)}if(l("noDeprecation"))return c;var f=!1;return u}}).call(this)}).call(this,typeof yn>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:yn)},{}],"/":[function(r,o){function a(E){return E.replace(/a=ice-options:trickle\s\n/g,"")}function l(E){console.warn(E)}/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */const c=r("debug")("simple-peer"),h=r("get-browser-rtc"),u=r("randombytes"),f=r("readable-stream"),g=r("queue-microtask"),p=r("err-code"),{Buffer:y}=r("buffer"),x=65536;class S extends f.Duplex{constructor(b){if(b=Object.assign({allowHalfOpen:!1},b),super(b),this._id=u(4).toString("hex").slice(0,7),this._debug("new peer %o",b),this.channelName=b.initiator?b.channelName||u(20).toString("hex"):null,this.initiator=b.initiator||!1,this.channelConfig=b.channelConfig||S.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},S.config,b.config),this.offerOptions=b.offerOptions||{},this.answerOptions=b.answerOptions||{},this.sdpTransform=b.sdpTransform||(_=>_),this.streams=b.streams||(b.stream?[b.stream]:[]),this.trickle=b.trickle===void 0||b.trickle,this.allowHalfTrickle=b.allowHalfTrickle!==void 0&&b.allowHalfTrickle,this.iceCompleteTimeout=b.iceCompleteTimeout||5e3,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=b.wrtc&&typeof b.wrtc=="object"?b.wrtc:h(),!this._wrtc)throw p(typeof window>"u"?new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"):new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(_){return void this.destroy(p(_,"ERR_PC_CONSTRUCTOR"))}this._isReactNativeWebrtc=typeof this._pc._peerConnectionId=="number",this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=_=>{this._onIceCandidate(_)},typeof this._pc.peerIdentity=="object"&&this._pc.peerIdentity.catch(_=>{this.destroy(p(_,"ERR_PC_PEER_IDENTITY"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=_=>{this._setupData(_)},this.streams&&this.streams.forEach(_=>{this.addStream(_)}),this._pc.ontrack=_=>{this._onTrack(_)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&this._channel.readyState==="open"}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(b){if(!this.destroying){if(this.destroyed)throw p(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if(typeof b=="string")try{b=JSON.parse(b)}catch{b={}}this._debug("signal()"),b.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),b.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(b.transceiverRequest.kind,b.transceiverRequest.init)),b.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(b.candidate):this._pendingCandidates.push(b.candidate)),b.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(b)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(_=>{this._addIceCandidate(_)}),this._pendingCandidates=[],this._pc.remoteDescription.type==="offer"&&this._createAnswer())}).catch(_=>{this.destroy(p(_,"ERR_SET_REMOTE_DESCRIPTION"))}),b.sdp||b.candidate||b.renegotiate||b.transceiverRequest||this.destroy(p(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(b){const _=new this._wrtc.RTCIceCandidate(b);this._pc.addIceCandidate(_).catch(w=>{!_.address||_.address.endsWith(".local")?l("Ignoring unsupported ICE candidate."):this.destroy(p(w,"ERR_ADD_ICE_CANDIDATE"))})}send(b){if(!this.destroying){if(this.destroyed)throw p(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(b)}}addTransceiver(b,_){if(!this.destroying){if(this.destroyed)throw p(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(b,_),this._needsNegotiation()}catch(w){this.destroy(p(w,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:b,init:_}})}}addStream(b){if(!this.destroying){if(this.destroyed)throw p(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),b.getTracks().forEach(_=>{this.addTrack(_,b)})}}addTrack(b,_){if(this.destroying)return;if(this.destroyed)throw p(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");const w=this._senderMap.get(b)||new Map;let T=w.get(_);if(!T)T=this._pc.addTrack(b,_),w.set(_,T),this._senderMap.set(b,w),this._needsNegotiation();else throw T.removed?p(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):p(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED")}replaceTrack(b,_,w){if(this.destroying)return;if(this.destroyed)throw p(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");const T=this._senderMap.get(b),C=T?T.get(w):null;if(!C)throw p(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");_&&this._senderMap.set(_,T),C.replaceTrack==null?this.destroy(p(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK")):C.replaceTrack(_)}removeTrack(b,_){if(this.destroying)return;if(this.destroyed)throw p(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");const w=this._senderMap.get(b),T=w?w.get(_):null;if(!T)throw p(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{T.removed=!0,this._pc.removeTrack(T)}catch(C){C.name==="NS_ERROR_UNEXPECTED"?this._sendersAwaitingStable.push(T):this.destroy(p(C,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(b){if(!this.destroying){if(this.destroyed)throw p(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),b.getTracks().forEach(_=>{this.removeTrack(_,b)})}}_needsNegotiation(){this._debug("_needsNegotiation"),this._batchedNegotiation||(this._batchedNegotiation=!0,g(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){if(!this.destroying){if(this.destroyed)throw p(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(b){this._destroy(b,()=>{})}_destroy(b,_){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",b&&(b.message||b)),g(()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",b&&(b.message||b)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch{}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch{}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,b&&this.emit("error",b),this.emit("close"),_()}))}_setupData(b){if(!b.channel)return this.destroy(p(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=b.channel,this._channel.binaryType="arraybuffer",typeof this._channel.bufferedAmountLowThreshold=="number"&&(this._channel.bufferedAmountLowThreshold=x),this.channelName=this._channel.label,this._channel.onmessage=w=>{this._onChannelMessage(w)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=w=>{const T=w.error instanceof Error?w.error:new Error(`Datachannel error: ${w.message} ${w.filename}:${w.lineno}:${w.colno}`);this.destroy(p(T,"ERR_DATA_CHANNEL"))};let _=!1;this._closingInterval=setInterval(()=>{this._channel&&this._channel.readyState==="closing"?(_&&this._onChannelClose(),_=!0):_=!1},5e3)}_read(){}_write(b,_,w){if(this.destroyed)return w(p(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(b)}catch(T){return this.destroy(p(T,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>x?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=w):w(null)}else this._debug("write before connect"),this._chunk=b,this._cb=w}_onFinish(){if(!this.destroyed){const b=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?b():this.once("connect",b)}}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(b=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(b.sdp=a(b.sdp)),b.sdp=this.sdpTransform(b.sdp);const _=()=>{if(!this.destroyed){const w=this._pc.localDescription||b;this._debug("signal"),this.emit("signal",{type:w.type,sdp:w.sdp})}};this._pc.setLocalDescription(b).then(()=>{this._debug("createOffer success"),this.destroyed||(this.trickle||this._iceComplete?_():this.once("_iceComplete",_))}).catch(w=>{this.destroy(p(w,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(b=>{this.destroy(p(b,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(b=>{b.mid||!b.sender.track||b.requested||(b.requested=!0,this.addTransceiver(b.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(b=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(b.sdp=a(b.sdp)),b.sdp=this.sdpTransform(b.sdp);const _=()=>{if(!this.destroyed){const w=this._pc.localDescription||b;this._debug("signal"),this.emit("signal",{type:w.type,sdp:w.sdp}),this.initiator||this._requestMissingTransceivers()}};this._pc.setLocalDescription(b).then(()=>{this.destroyed||(this.trickle||this._iceComplete?_():this.once("_iceComplete",_))}).catch(w=>{this.destroy(p(w,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(b=>{this.destroy(p(b,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||this._pc.connectionState==="failed"&&this.destroy(p(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;const b=this._pc.iceConnectionState,_=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",b,_),this.emit("iceStateChange",b,_),(b==="connected"||b==="completed")&&(this._pcReady=!0,this._maybeReady()),b==="failed"&&this.destroy(p(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),b==="closed"&&this.destroy(p(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(b){const _=w=>(Object.prototype.toString.call(w.values)==="[object Array]"&&w.values.forEach(T=>{Object.assign(w,T)}),w);this._pc.getStats.length===0||this._isReactNativeWebrtc?this._pc.getStats().then(w=>{const T=[];w.forEach(C=>{T.push(_(C))}),b(null,T)},w=>b(w)):0<this._pc.getStats.length?this._pc.getStats(w=>{if(this.destroyed)return;const T=[];w.result().forEach(C=>{const $={};C.names().forEach(I=>{$[I]=C.stat(I)}),$.id=C.id,$.type=C.type,$.timestamp=C.timestamp,T.push(_($))}),b(null,T)},w=>b(w)):b(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const b=()=>{this.destroyed||this.getStats((_,w)=>{if(this.destroyed)return;_&&(w=[]);const T={},C={},$={};let I=!1;w.forEach(O=>{(O.type==="remotecandidate"||O.type==="remote-candidate")&&(T[O.id]=O),(O.type==="localcandidate"||O.type==="local-candidate")&&(C[O.id]=O),(O.type==="candidatepair"||O.type==="candidate-pair")&&($[O.id]=O)});const A=O=>{I=!0;let M=C[O.localCandidateId];M&&(M.ip||M.address)?(this.localAddress=M.ip||M.address,this.localPort=+M.port):M&&M.ipAddress?(this.localAddress=M.ipAddress,this.localPort=+M.portNumber):typeof O.googLocalAddress=="string"&&(M=O.googLocalAddress.split(":"),this.localAddress=M[0],this.localPort=+M[1]),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let B=T[O.remoteCandidateId];B&&(B.ip||B.address)?(this.remoteAddress=B.ip||B.address,this.remotePort=+B.port):B&&B.ipAddress?(this.remoteAddress=B.ipAddress,this.remotePort=+B.portNumber):typeof O.googRemoteAddress=="string"&&(B=O.googRemoteAddress.split(":"),this.remoteAddress=B[0],this.remotePort=+B[1]),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(w.forEach(O=>{O.type==="transport"&&O.selectedCandidatePairId&&A($[O.selectedCandidatePairId]),(O.type==="googCandidatePair"&&O.googActiveConnection==="true"||(O.type==="candidatepair"||O.type==="candidate-pair")&&O.selected)&&A(O)}),!I&&(!Object.keys($).length||Object.keys(C).length))return void setTimeout(b,100);if(this._connecting=!1,this._connected=!0,this._chunk){try{this.send(this._chunk)}catch(M){return this.destroy(p(M,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');const O=this._cb;this._cb=null,O(null)}typeof this._channel.bufferedAmountLowThreshold!="number"&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")})};b()}_onInterval(){this._cb&&this._channel&&!(this._channel.bufferedAmount>x)&&this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||(this._pc.signalingState==="stable"&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(b=>{this._pc.removeTrack(b),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(b){this.destroyed||(b.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:b.candidate.candidate,sdpMLineIndex:b.candidate.sdpMLineIndex,sdpMid:b.candidate.sdpMid}}):!b.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),b.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(b){if(this.destroyed)return;let _=b.data;_ instanceof ArrayBuffer&&(_=y.from(_)),this.push(_)}_onChannelBufferedAmountLow(){if(!this.destroyed&&this._cb){this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);const b=this._cb;this._cb=null,b(null)}}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(b){this.destroyed||b.streams.forEach(_=>{this._debug("on track"),this.emit("track",b.track,_),this._remoteTracks.push({track:b.track,stream:_}),this._remoteStreams.some(w=>w.id===_.id)||(this._remoteStreams.push(_),g(()=>{this._debug("on stream"),this.emit("stream",_)}))})}_debug(){const b=[].slice.call(arguments);b[0]="["+this._id+"] "+b[0],c.apply(null,b)}}S.WEBRTC_SUPPORT=!!h(),S.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},S.channelConfig={},o.exports=S},{buffer:3,debug:4,"err-code":6,"get-browser-rtc":8,"queue-microtask":13,randombytes:14,"readable-stream":29}]},{},[])("/")})})(Cp);var I0=Cp.exports;const D0=Tp(I0),Yc=0,Xc=1,$p=2,kp=(e,t)=>{at(e,Yc);const n=Iv(t);te(e,n)},Ap=(e,t,n)=>{at(e,Xc),te(e,Qf(t,n))},R0=(e,t,n)=>Ap(t,n,ve(e)),Pp=(e,t,n)=>{try{Xf(t,ve(e),n)}catch(i){console.error("Caught error while handling a Yjs update",i)}},M0=(e,t)=>{at(e,$p),te(e,t)},N0=Pp,F0=(e,t,n,i)=>{const s=gt(e);switch(s){case Yc:R0(e,t,n);break;case Xc:Pp(e,n,i);break;case $p:N0(e,n,i);break;default:throw new Error("Unknown message type")}return s},cl=3e4;class B0 extends da{constructor(t){super(),this.doc=t,this.clientID=t.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval(()=>{const n=ti();this.getLocalState()!==null&&cl/2<=n-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const i=[];this.meta.forEach((s,r)=>{r!==this.clientID&&cl<=n-s.lastUpdated&&this.states.has(r)&&i.push(r)}),i.length>0&&Gl(this,i,"timeout")},Ln(cl/10)),t.on("destroy",()=>{this.destroy()}),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(t){const n=this.clientID,i=this.meta.get(n),s=i===void 0?0:i.clock+1,r=this.states.get(n);t===null?this.states.delete(n):this.states.set(n,t),this.meta.set(n,{clock:s,lastUpdated:ti()});const o=[],a=[],l=[],c=[];t===null?c.push(n):r==null?t!=null&&o.push(n):(a.push(n),cr(r,t)||l.push(n)),(o.length>0||l.length>0||c.length>0)&&this.emit("change",[{added:o,updated:l,removed:c},"local"]),this.emit("update",[{added:o,updated:a,removed:c},"local"])}setLocalStateField(t,n){const i=this.getLocalState();i!==null&&this.setLocalState({...i,[t]:n})}getStates(){return this.states}}const Gl=(e,t,n)=>{const i=[];for(let s=0;s<t.length;s++){const r=t[s];if(e.states.has(r)){if(e.states.delete(r),r===e.clientID){const o=e.meta.get(r);e.meta.set(r,{clock:o.clock+1,lastUpdated:ti()})}i.push(r)}}i.length>0&&(e.emit("change",[{added:[],updated:[],removed:i},n]),e.emit("update",[{added:[],updated:[],removed:i},n]))},jo=(e,t,n=e.states)=>{const i=t.length,s=_e();at(s,i);for(let r=0;r<i;r++){const o=t[r],a=n.get(o)||null,l=e.meta.get(o).clock;at(s,o),at(s,l),On(s,JSON.stringify(a))}return Jt(s)},H0=(e,t,n)=>{const i=Bn(t),s=ti(),r=[],o=[],a=[],l=[],c=gt(i);for(let h=0;h<c;h++){const u=gt(i);let f=gt(i);const g=JSON.parse(Xn(i)),p=e.meta.get(u),y=e.states.get(u),x=p===void 0?0:p.clock;(x<f||x===f&&g===null&&e.states.has(u))&&(g===null?u===e.clientID&&e.getLocalState()!=null?f++:e.states.delete(u):e.states.set(u,g),e.meta.set(u,{clock:f,lastUpdated:s}),p===void 0&&g!==null?r.push(u):p!==void 0&&g===null?l.push(u):g!==null&&(cr(g,y)||a.push(u),o.push(u)))}(r.length>0||a.length>0||l.length>0)&&e.emit("change",[{added:r,updated:a,removed:l},n]),(r.length>0||o.length>0||l.length>0)&&e.emit("update",[{added:r,updated:o,removed:l},n])},U0=(e,t)=>{const n=Hl(e).buffer,i=Hl(t).buffer;return crypto.subtle.importKey("raw",n,"PBKDF2",!1,["deriveKey"]).then(s=>crypto.subtle.deriveKey({name:"PBKDF2",salt:i,iterations:1e5,hash:"SHA-256"},s,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]))},Op=(e,t)=>{if(!t)return Mc(e);const n=crypto.getRandomValues(new Uint8Array(12));return crypto.subtle.encrypt({name:"AES-GCM",iv:n},t,e).then(i=>{const s=_e();return On(s,"AES-GCM"),te(s,n),te(s,new Uint8Array(i)),Jt(s)})},V0=(e,t)=>{const n=_e();return Ss(n,e),Op(Jt(n),t)},Lp=(e,t)=>{if(!t)return Mc(e);const n=Bn(e);Xn(n)!=="AES-GCM"&&iv(In("Unknown encryption algorithm"));const s=ve(n),r=ve(n);return crypto.subtle.decrypt({name:"AES-GCM",iv:s},t,r).then(o=>new Uint8Array(o))},j0=(e,t)=>Lp(e,t).then(n=>xs(Bn(new Uint8Array(n)))),wn=nv("y-webrtc"),ys=0,Ip=3,Sr=1,Qc=4,Ko=new Map,Vi=new Map,Dp=e=>{let t=!0;e.webrtcConns.forEach(n=>{n.synced||(t=!1)}),(!t&&e.synced||t&&!e.synced)&&(e.synced=t,e.provider.emit("synced",[{synced:t}]),wn("synced ",hn,e.name,Gi," with all peers"))},Rp=(e,t,n)=>{const i=Bn(t),s=_e(),r=gt(i);if(e===void 0)return null;const o=e.awareness,a=e.doc;let l=!1;switch(r){case ys:{at(s,ys);const c=F0(i,s,a,e);c===Xc&&!e.synced&&n(),c===Yc&&(l=!0);break}case Ip:at(s,Sr),te(s,jo(o,Array.from(o.getStates().keys()))),l=!0;break;case Sr:H0(o,ve(i),e);break;case Qc:{const c=qi(i)===1,h=Xn(i);if(h!==e.peerId&&(e.bcConns.has(h)&&!c||!e.bcConns.has(h)&&c)){const u=[],f=[];c?(e.bcConns.add(h),f.push(h)):(e.bcConns.delete(h),u.push(h)),e.provider.emit("peers",[{added:f,removed:u,webrtcPeers:Array.from(e.webrtcConns.keys()),bcPeers:Array.from(e.bcConns)}]),Mp(e)}break}default:return console.error("Unable to compute message"),s}return l?s:null},K0=(e,t)=>{const n=e.room;return wn("received message from ",hn,e.remotePeerId,Dc," (",n.name,")",Gi,ma),Rp(n,t,()=>{e.synced=!0,wn("synced ",hn,n.name,Gi," with ",hn,e.remotePeerId),Dp(n)})},ul=(e,t)=>{wn("send message to ",hn,e.remotePeerId,Gi,Dc," (",e.room.name,")",ma);try{e.peer.send(Jt(t))}catch{}},q0=(e,t)=>{wn("broadcast message in ",hn,e.name,Gi),e.webrtcConns.forEach(n=>{try{n.peer.send(t)}catch{}})};class Ah{constructor(t,n,i,s){wn("establishing connection to ",hn,i),this.room=s,this.remotePeerId=i,this.closed=!1,this.connected=!1,this.synced=!1,this.peer=new D0({initiator:n,...s.provider.peerOpts}),this.peer.on("signal",r=>{Jc(t,s,{to:i,from:s.peerId,type:"signal",signal:r})}),this.peer.on("connect",()=>{wn("connected to ",hn,i),this.connected=!0;const o=s.provider.doc,a=s.awareness,l=_e();at(l,ys),kp(l,o),ul(this,l);const c=a.getStates();if(c.size>0){const h=_e();at(h,Sr),te(h,jo(a,Array.from(c.keys()))),ul(this,h)}}),this.peer.on("close",()=>{this.connected=!1,this.closed=!0,s.webrtcConns.has(this.remotePeerId)&&(s.webrtcConns.delete(this.remotePeerId),s.provider.emit("peers",[{removed:[this.remotePeerId],added:[],webrtcPeers:Array.from(s.webrtcConns.keys()),bcPeers:Array.from(s.bcConns)}])),Dp(s),this.peer.destroy(),wn("closed connection to ",hn,i),Wl(s)}),this.peer.on("error",r=>{wn("Error in connection to ",hn,i,": ",r),Wl(s)}),this.peer.on("data",r=>{const o=K0(this,r);o!==null&&ul(this,o)})}destroy(){this.peer.destroy()}}const bi=(e,t)=>Op(t,e.key).then(n=>e.mux(()=>gv(e.name,n))),Ph=(e,t)=>{e.bcconnected&&bi(e,t),q0(e,t)},Wl=e=>{Ko.forEach(t=>{t.connected&&(t.send({type:"subscribe",topics:[e.name]}),e.webrtcConns.size<e.provider.maxConns&&Jc(t,e,{type:"announce",from:e.peerId}))})},Mp=e=>{if(e.provider.filterBcConns){const t=_e();at(t,Qc),yr(t,1),On(t,e.peerId),bi(e,Jt(t))}};class G0{constructor(t,n,i,s){this.peerId=Sf(),this.doc=t,this.awareness=n.awareness,this.provider=n,this.synced=!1,this.name=i,this.key=s,this.webrtcConns=new Map,this.bcConns=new Set,this.mux=mv(),this.bcconnected=!1,this._bcSubscriber=r=>Lp(new Uint8Array(r),s).then(o=>this.mux(()=>{const a=Rp(this,o,()=>{});a&&bi(this,Jt(a))})),this._docUpdateHandler=(r,o)=>{const a=_e();at(a,ys),M0(a,r),Ph(this,Jt(a))},this._awarenessUpdateHandler=({added:r,updated:o,removed:a},l)=>{const c=r.concat(o).concat(a),h=_e();at(h,Sr),te(h,jo(this.awareness,c)),Ph(this,Jt(h))},this._beforeUnloadHandler=()=>{Gl(this.awareness,[t.clientID],"window unload"),Vi.forEach(r=>{r.disconnect()})},typeof window<"u"?window.addEventListener("beforeunload",this._beforeUnloadHandler):typeof process<"u"&&process.on("exit",this._beforeUnloadHandler)}connect(){this.doc.on("update",this._docUpdateHandler),this.awareness.on("update",this._awarenessUpdateHandler),Wl(this);const t=this.name;fv(t,this._bcSubscriber),this.bcconnected=!0,Mp(this);const n=_e();at(n,ys),kp(n,this.doc),bi(this,Jt(n));const i=_e();at(i,ys),Ap(i,this.doc),bi(this,Jt(i));const s=_e();at(s,Ip),bi(this,Jt(s));const r=_e();at(r,Sr),te(r,jo(this.awareness,[this.doc.clientID])),bi(this,Jt(r))}disconnect(){Ko.forEach(n=>{n.connected&&n.send({type:"unsubscribe",topics:[this.name]})}),Gl(this.awareness,[this.doc.clientID],"disconnect");const t=_e();at(t,Qc),yr(t,0),On(t,this.peerId),bi(this,Jt(t)),pv(this.name,this._bcSubscriber),this.bcconnected=!1,this.doc.off("update",this._docUpdateHandler),this.awareness.off("update",this._awarenessUpdateHandler),this.webrtcConns.forEach(n=>n.destroy())}destroy(){this.disconnect(),typeof window<"u"?window.removeEventListener("beforeunload",this._beforeUnloadHandler):typeof process<"u"&&process.off("exit",this._beforeUnloadHandler)}}const W0=(e,t,n,i)=>{if(Vi.has(n))throw In(`A Yjs Doc connected to room "${n}" already exists!`);const s=new G0(e,t,n,i);return Vi.set(n,s),s},Jc=(e,t,n)=>{t.key?V0(n,t.key).then(i=>{e.send({type:"publish",topic:t.name,data:Ff(i)})}):e.send({type:"publish",topic:t.name,data:n})};class z0 extends ty{constructor(t){super(t),this.providers=new Set,this.on("connect",()=>{wn(`connected (${t})`);const n=Array.from(Vi.keys());this.send({type:"subscribe",topics:n}),Vi.forEach(i=>Jc(this,i,{type:"announce",from:i.peerId}))}),this.on("message",n=>{switch(n.type){case"publish":{const i=n.topic,s=Vi.get(i);if(s==null||typeof i!="string")return;const r=o=>{const a=s.webrtcConns,l=s.peerId;if(o==null||o.from===l||o.to!==void 0&&o.to!==l||s.bcConns.has(o.from))return;const c=a.has(o.from)?()=>{}:()=>s.provider.emit("peers",[{removed:[],added:[o.from],webrtcPeers:Array.from(s.webrtcConns.keys()),bcPeers:Array.from(s.bcConns)}]);switch(o.type){case"announce":a.size<s.provider.maxConns&&(tn(a,o.from,()=>new Ah(this,!0,o.from,s)),c());break;case"signal":o.to===l&&(tn(a,o.from,()=>new Ah(this,!1,o.from,s)).peer.signal(o.signal),c());break}};s.key?typeof n.data=="string"&&j0(Bf(n.data),s.key).then(r):r(n.data)}}}),this.on("disconnect",()=>wn(`disconnect (${t})`))}}class Y0 extends da{constructor(t,n,{signaling:i=["wss://y-webrtc-eu.fly.dev"],password:s=null,awareness:r=new B0(n),maxConns:o=20+Ln(iy()*15),filterBcConns:a=!0,peerOpts:l={}}={}){super(),this.roomName=t,this.doc=n,this.filterBcConns=a,this.awareness=r,this.shouldConnect=!1,this.signalingUrls=i,this.signalingConns=[],this.maxConns=o,this.peerOpts=l,this.key=s?U0(s,t):Mc(null),this.room=null,this.key.then(c=>{this.room=W0(n,this,t,c),this.shouldConnect?this.room.connect():this.room.disconnect()}),this.connect(),this.destroy=this.destroy.bind(this),n.on("destroy",this.destroy)}get connected(){return this.room!==null&&this.shouldConnect}connect(){this.shouldConnect=!0,this.signalingUrls.forEach(t=>{const n=tn(Ko,t,()=>new z0(t));this.signalingConns.push(n),n.providers.add(this)}),this.room&&this.room.connect()}disconnect(){this.shouldConnect=!1,this.signalingConns.forEach(t=>{t.providers.delete(this),t.providers.size===0&&(t.destroy(),Ko.delete(t.url))}),this.room&&this.room.disconnect()}destroy(){this.doc.off("destroy",this.destroy),this.key.then(()=>{this.room.destroy(),Vi.delete(this.roomName)}),super.destroy()}}function X0(e,t,n){const i={added:[],moved:[],deleted:[],dirty:[]};if(e.length===0)i.added=t.map((s,r)=>({index:r,value:s}));else if(t.length===0)i.deleted=e.map((s,r)=>r);else{let s,r,o,a,l,c,h=e.length,u=t.length;for(s=0,r=Math.min(h,u);s<r&&e[s]===t[s];s++);for(r=h-1,o=u-1;r>=s&&o>=s&&e[r]===t[o];r--,o--);let f=new Map,g=new Array(o+1);for(c=o;c>=s;c--)a=t[c],l=f.get(a),g[c]=l===void 0?-1:l,f.set(a,c);for(l=s;l<=r;l++)a=e[l],c=f.get(a),c!==void 0&&c!==-1?(i.moved[c]={oldIndex:l,newIndex:c,value:a},c=g[c],f.set(a,c)):n?.has(l)||i.deleted.push(l);for(c=s;c<=o;c++)c in i.moved||n?.has(c)||i.added.push({index:c,value:t[c]})}return{...i,moved:i.moved.filter(({oldIndex:s,newIndex:r})=>s!==r)}}const Mi=(e,...t)=>{const n=e.map((s,r)=>"%c"+new Array(r).fill(" ").join("")+" %c"+s).join(`
`),i=e.map((s,r)=>["","background: lightgrey; color: black;"]).flat();console.log(n,...i,...t)},Q0=(e,...t)=>{const n=e.map((s,r)=>"%c"+new Array(r).fill(" ").join("")+" %c"+s).join(`
`),i=e.map((s,r)=>["","background: lightgrey; color: black;"]).flat();console.error(n,...i,...t)},Me=(...e)=>console.error("UNEXPECTED CODE REACHED!!!",...e),An=[];let hl=null;const qo=e=>{An.length!==0&&(console.log("executeYjsOperations",An.length),e&&(hl&&clearTimeout(hl),hl=setTimeout(()=>{e.transact(()=>{console.log("ydoc.transact",An.length),An.forEach(t=>{switch(t.type){case"set":t.ymap.set(t.key,t.value);break;case"delete":t.yparent instanceof Ce&&t.key?t.yparent.delete(t.key):t.yparent instanceof we&&t.index&&t.yparent.delete(t.index);break;case"insert":t.yarray.insert(t.index,t.content);break;default:throw Me()}})}),An.length=0},0)))},J0=(e,t,n,i)=>{if(n[yi]){Q0(["setYMap"],"trying to set a solid-proxy inside a yjs-object");return}An.push({type:"set",ymap:e,key:t,value:n}),qo(i)},Z0=(e,t,n,i)=>{e.length>t&&(An.push({type:"delete",yparent:e,index:t}),An.push({type:"insert",yarray:e,index:t,content:[n]}),qo(i))},tw=(e,t,n)=>{e instanceof we&&typeof t=="number"?(An.push({type:"delete",yparent:e,index:t}),qo(n)):e instanceof Ce&&typeof t=="string"?(An.push({type:"delete",yparent:e,key:t}),qo(n)):Me(e,t)},ao=(e,t,n,i)=>{e instanceof we&&typeof t=="number"?Z0(e,t,n,i):(e instanceof Ce||e instanceof oi)&&typeof t=="string"?J0(e,t,n,i):Me(e,t,n)},dl=(e,t)=>{if(t===void 0)return e;if(e instanceof we&&typeof t=="number")return e.get(t);if((e instanceof Ce||e instanceof oi)&&typeof t=="string")return e.get(t);Me(e,t,e[yi])};function Oh(e,...t){return e.concat(...t)}let ew=class{queue=[];start=performance.now();add(t){this.queue.length===0&&(this.start=performance.now(),setTimeout(()=>this.execute(),50)),this.queue.push(t)}execute(){Ml(()=>this.queue.forEach(t=>t())),this.queue=[]}};const Ke=e=>Hs(e)[1],fl=e=>typeof e=="string"||typeof e=="number"||typeof e=="boolean";function nw(e,t,n=!1){const[i,s]=Hs(t),r=new ew,o=new Map,a=(E,b)=>{const _=Oh(E.moved.map(({oldIndex:$})=>$),E.deleted).sort(($,I)=>I-$);n&&Mi(["optimizeMutationOperations","deleted is"],_);const w=[];_.forEach(($,I)=>{I!==0&&$-_[I-1]===1?w[w.length-1].length++:w.push({index:$,length:1})});const T=Oh(E.moved.map(({newIndex:$,oldIndex:I})=>({index:$,value:b.get(I)})),E.added.map(({index:$,value:I})=>({index:$,value:l(I)}))).sort(($,I)=>$.index-I.index);n&&Mi(["optimizeMutationOperations","added is"],T,E.added);const C=[];return T.forEach(({value:$,index:I},A)=>{A!==0&&$.index-T[A-1].index===1?C[C.length-1].values.push($):C.push({index:I,values:[$]})}),{deleted:w,added:C}},l=E=>{if(n&&Mi(["createYjsBranch"],E),fl(E))return E;if(Array.isArray(E)){const b=E.map(w=>l(w)),_=new we;return f(_,E),_.insert(0,b),_}else if(typeof E=="object"){const b=Object.entries(E).map(([w,T])=>{const C=l(T);return[w,C]}),_=new Ce(b);return f(_,E),_}else Me(E,"svalue is not primitive, array or object")},c=(E,b,_,w)=>{if(n&&Mi(["solidToYjs"],E,b,_,w),!b)return Me("sparent is undefined"),!1;if(!E)return Me("yparent is undefined",b),!1;fl(w)?ao(E,_,w,e):w===void 0&&E instanceof Ce?tw(E,_,e):Array.isArray(w)?h(E,b,_,w):typeof w=="object"&&u(E,b,_,w)},h=(E,b,_,w)=>{_&&!(_ in b)&&Ke(b)(_,[]);const T=b[_];let C=dl(E,_);if(C||(C=new we,ao(E,_,C,e)),!(C instanceof we)){Me(C);return}const $=X0(T,w,y.get(T));n&&Mi(["minimumMutationOperations"],$);const{deleted:I,added:A}=a($,C);n&&Mi(["solidArrayToYjs"],$),C.doc?.transact(()=>{I.forEach(({index:O,length:M})=>C.delete(O,M)),A.forEach(({index:O,values:M})=>C.insert(O,M))}),w.length<C.length&&C.delete(w.length,C.length-w.length)},u=(E,b,_,w)=>{_&&!(_ in b)&&Ke(b)(_,{});const T=_?b[_]:b;let C=dl(E,_);if(!C){C=new Ce,ao(E,_,C,e),Object.entries(w).forEach(([$,I])=>{t===void 0?Me():fl(I)?ao(C,$,I,e):($ in T||Ke(T)($,Array.isArray(I)?[]:{}),c(C,T[$],$,I))});return}if(C instanceof Ce){n&&console.info(`be careful: when setting an object in a store, the object gets shallowly merged
(see https://www.solidjs.com/docs/latest/api#createstore).
This can possibly create multiple entry-points of the same reactive value in a store:

const [store, setStore] = createStore({firstEntryPoint: "ok"});
setStore({secondEntryPoint: store.firstEntryPoint});

=> store.secondEntryPoint points at store.firstEntryPoint.

Multiple entry-points are currently not supported in yjsStore.`),T||Ke(b)(_,{}),Object.entries(w).forEach(([$,I])=>c(C,T,$,I));return}Me(C)},f=(E,b)=>{E instanceof we?E.observe(_=>Ml(()=>{if(_.transaction.local)return;let w=0;_.changes.delta.forEach(T=>{if(T.retain)w+=T.retain;else if(T.insert){const C=Array.isArray(T.insert)?T.insert.map($=>typeof $=="object"?$.toJSON():$):[T.insert];r.add(()=>{Ke(b)($=>[...$.slice(0,w),...C,...$.slice(w,$.length)]),w+=C.length,g(E,b)})}else T.delete&&r.add(()=>{Ke(b)(C=>[...C.slice(0,w),...C.slice(w+T.delete,C.length)])})})})):E.observe(_=>Ml(()=>{_.keysChanged.forEach(w=>{const T=dl(E,w);if(!w){Me("keyToUpdate is null",w);return}!T&&w in b?r.add(()=>Ke(b)(w,void 0)):T instanceof we||T instanceof Ce?r.add(()=>{Ke(b)(w,ih(T.toJSON())),f(T,b[w]),g(T,b[w])}):r.add(()=>Ke(b)(w,T))})})),o.set(b,E),o.set(E,b)},g=(E,b)=>{if(!(E instanceof Ce||E instanceof we)){Me(E,b);return}E.forEach((_,w)=>{(_ instanceof Ce||_ instanceof we)&&(b[w]||Ke(b)(w,Array.isArray(t)?[]:{}),f(_,b[w]),g(_,b[w]))})},p=new WeakMap,y=new Map,x={get(E,b){if(n&&console.log("property",b),b===yi)return E;const _=E[b];if(b==="unshift")return E[yi].unshift;let w;return _?.[yi]?p.get(_)||(p.set(_,w=new Proxy(_,x)),w):_},set(E,b,_){return typeof b=="string"&&!isNaN(+b)&&(y.get(E)||y.set(E,new Set),y.get(E).add(Array.isArray(E)?+b:b)),!0},deleteProperty(E,b){return!0}},S=function(...E){[...E];let b=E.pop(),_=E.pop(),w=[[{sparent:i,yparent:e,key:""}]];for(;E.length>0;){const T=E.shift(),C=w[w.length-1];Mi(["_setStore","currentLayer"],C);const $=[];typeof T=="function"?C.forEach(({sparent:I,yparent:A})=>{if(Array.isArray(I)&&A instanceof we){const O=I.map((M,B)=>[M,B]).filter(([M])=>T(M)).map(([M,B])=>({sparent:M,yparent:A.get(B),key:T.toString()}));$.push(...O)}else console.warn(A,I,T),Me(I,A)}):C.forEach(({sparent:I,yparent:A})=>{const O=I[T];let M="get"in A?A.get(T):void 0;M||(console.log("nextYparent is undefined",A,T),A=l(I),M=A.get(T),console.log("nextYparent is now",M,A)),console.log("nextSparent",O,M),O!==void 0&&M?$.push({sparent:O,yparent:M,key:T.toString()}):(console.warn("Failed to access sparent or yparent with key:",T,typeof O),Me())}),w.push($)}n&&console.log("THIS IS HAPPENING"),w[w.length-1].forEach(({sparent:T,yparent:C})=>{let $=b;if(console.log("nextValue",$,C,T),typeof $=="function"){const I=Cb(()=>{}).toString().replace(/\s/g,"");if($.toString().replace(/\s/g,"")===I){y.clear();let O;p.set(T,O=new Proxy(T[_],x)),$(O),n&&console.log("PROXY is ",O,O[yi]),Array.from(y.entries()).forEach(([M,B])=>{const N=o.get(M);B.forEach(K=>{n&&console.log(C,M,K,M[K]),c(N,M,K,M[K])})}),Ke(T)(_,ih(O[yi]))}else $=$(T[_]),c(C,T,_,$),Ke(T)(_,$),C instanceof oi||g(C,T)}else c(C,T,_,$),Ke(T)(_,$)})};return Object.entries(t).forEach(([E,b])=>{if(typeof b=="object"){const _=Array.isArray(b)?e.getArray(E):e.getMap(E);f(_,i[E]),g(_,i[E])}else console.error("currently only arrays and objects are allowed")}),[i,S]}async function WO(e,t,n){if(t){const s=new URL(e);for(const r in t)t.hasOwnProperty(r)&&s.searchParams.set(r,t[r]);e=s.toString()}return(await fetch(e,n)).json()}function zO(e,t,n){if(e[t]===n)return e}function iw(){return new Promise(e=>{setTimeout(e,0)})}function Wn(e){const t=n=>{let i;return n?.includes("/watch?v=")?i=n.split("/watch?v=")[1]:i=n?.match("vi(?:_webp)?/([a-zA-Z0-9_-]{11})")?.[1],i};if(e){if(e.videoId)return e.videoId;if(e.id)return e.id;if(e.url)return t(e.url);if(e.thumbnailUrl)return t(e.thumbnailUrl);if(e.thumbnail)return t(e.thumbnail)}}async function sw(e,t=5,n=1e3,i=6e4){let s=0;if(n>=i)throw new Error("minDelay should be less than maxDelay.");if(t<0)throw new Error("Number of retries should be non-negative.");for(;;)try{return await e()}catch{if(s++,s>t)throw new Error("Maximum retries reached.");const o=Math.min(n*Math.pow(2,s),i);await new Promise(a=>setTimeout(a,o))}}function rw(){return navigator.maxTouchPoints>1&&typeof screen.orientation!==void 0}function ow(e,t){const n=Math.floor((e.getTime()-t.getTime())/1e3),i=60,s=i*60,r=s*24,o=r*30,a=r*365;return n>=a?`${Math.floor(n/a)}y`:n>=o?`${Math.floor(n/o)}mo`:n>=r?`${Math.floor(n/r)}d`:n>=s?`${Math.floor(n/s)}h`:n>=i?`${Math.floor(n/i)}m`:"now"}function YO(e,t){let n=null;return function(...i){const s=this,r=()=>{n=null,e.apply(s,i)};n!==null&&clearTimeout(n),n=setTimeout(r,t)}}const aw=1e3;class Zc extends EventTarget{#e;#n;#o;#a=new BroadcastChannel("SharedService");#t=null;#l=new AbortController;#i;providerCallbacks=new Map;#s=0;#r=[];proxy;constructor(t,n){super(),console.log("SharedService constructor",n),this.#e=t,this.#o=n,this.#n=this.#h(),console.log("SharedService clientId",this.#n),this.#i=this.#c(),this.#a.addEventListener("message",({data:i})=>{i?.type==="provider"&&i?.sharedService===this.#e&&(console.log("SharedService provider change",i),this.#d(this.#i),this.#i=this.#c())},{signal:this.#l.signal}),this.proxy=this.#f()}async activate(t){if(console.log("SharedService activate called"),this.#t){console.warn("SharedService activate called twice");return}this.#t=new AbortController;const n=`SharedService-${this.#e}`;console.log(await navigator.locks.query()),(await navigator.locks.query()).held?.find(s=>s.name===n)&&(console.log("SharedService lock already held"),t());try{await navigator.locks.request(n,{signal:this.#t.signal,mode:"exclusive"},async s=>{console.log("SharedService lock acquired");try{await this.executeLockedSection(t)}catch(r){throw console.error("An error occurred within the lock-acquired section:",r),r}})}catch(s){throw console.error("Error in lock acquisition or execution:",s),s}finally{console.log("SharedService lock released"),this.cleanupResources()}}async executeLockedSection(t){const n=await this.#o();n.start();const i=await this.#n,s=new BroadcastChannel("SharedService");return this.listenForClientRequests(n,s,t),s.postMessage({type:"provider",sharedService:this.#e,providerId:i}),new Promise((r,o)=>{this.#t.signal.addEventListener("abort",async()=>{console.log("Cleanup"),await this.proxy.cleanup(),s.close(),o(this.#t?.signal.reason)})})}listenForClientRequests(t,n,i){n.addEventListener("message",async({data:s})=>{if(s?.type==="request"&&s?.sharedService===this.#e){console.log("SharedService request received",s);const r=await this.getPortForClient(t,s.clientId);console.log("SharedService port obtained",r),this.#u(s,r),i()}},{signal:this.#t.signal})}async getPortForClient(t,n){return console.log("SharedService getPortForClient called",n),new Promise(i=>{t.addEventListener("message",s=>{console.log("SharedService getPortForClient message received",s),i(s.ports[0])},{once:!0}),t.postMessage(n)})}cleanupResources(){this.#t&&(this.#t?.abort(),this.#t=null)}deactivate(){console.log("SharedService deactivate called"),this.#t?.abort(),this.#t=null}close(){console.log("cleanup"),this.deactivate(),this.#l.abort();for(const{reject:t}of this.providerCallbacks.values())t(new Error("SharedService closed"))}async#u(t,n){console.log("SharedService port sent to client",navigator.serviceWorker,t,n),(await navigator.serviceWorker.ready).active?.postMessage(t,[n])}async#h(){let t=null;async function n(){const i=await fetch("/clientId");console.log("SharedService clientId response",i);const s=i.headers.get("content-type");if(i.ok&&s?.startsWith("text/plain"))return i.text();throw new Error("Service worker not ready or other error")}return t=await sw(n,2,1e3,16e3),console.log("Successfully fetched clientId:",t),navigator.serviceWorker.addEventListener("message",i=>{i.data.ports=i.ports,console.log("SharedService message received FROM SERVICEWORKER",i),this.dispatchEvent(new MessageEvent("message",{data:i.data}))}),await Zc.#p(t),t}async#c(){const t=++this.#s;let n=null;const i=await this.#n;for(;!n&&t===this.#s;){const s=Lh();this.#a.postMessage({type:"request",nonce:s,sharedService:this.#e,clientId:i});const r=new Promise(o=>{const a=new AbortController;this.addEventListener("message",l=>{console.log("Provider port received",l),l.data?.nonce===s&&(o(l.data.ports[0]),a.abort())},{signal:a.signal}),this.#r.push(()=>a.abort())});n=await Promise.race([r,new Promise(o=>setTimeout(()=>o(null),aw))]),n||r.then(o=>o?.close())}return n&&t===this.#s?(this.#r.forEach(s=>s()),this.#r=[],n.addEventListener("message",({data:s})=>{const r=this.providerCallbacks.get(s.nonce);s.error?r?.reject(Object.assign(new Error,s.error)):r?.resolve(s.result)}),n.start(),n):(n?.close(),null)}#d(t){t.then(n=>n?.close());for(const{reject:n}of this.providerCallbacks.values())n(new Error("SharedService provider change"))}#f(){return new Proxy({},{get:(t,n)=>async(...i)=>{const s=Lh(),r=await this.#i;return console.log("finally",s,n,i),new Promise((o,a)=>{this.providerCallbacks.set(s,{resolve:o,reject:a}),r?.postMessage({nonce:s,method:n,args:i})}).finally(()=>{this.providerCallbacks.delete(s)})}})}static#p=function(){let t;return function(n){return t||(t=new Promise(i=>{navigator.locks.request(n,()=>new Promise(s=>{i()}))}))}}()}function lw(e){console.log("createSharedServicePort",e);const{port1:t,port2:n}=new MessageChannel;return console.log("Listening to message events on provider port 1",t),t.addEventListener("message",({data:i})=>{const{port1:s,port2:r}=new MessageChannel;console.log("Requesting lock",i),navigator.locks.request(i,()=>{s.close()}),s.addEventListener("message",async({data:o})=>{console.log("service worker received message",o);const a={nonce:o.nonce};try{a.result=await e[o.method](...o.args)}catch(l){const c=l instanceof Error?Object.fromEntries(Object.getOwnPropertyNames(l).map(h=>[h,l[h]])):l;a.error=c}s.postMessage(a)}),s.start(),t.postMessage(null,[r])}),t.start(),n}function Lh(){return Math.random().toString(36).replace("0.","")}function cw(e){let i=2166136261;for(const s of e)i^=s,i*=16777619,i>>>=0;return i.toString(16)}class uw extends Xb{constructor(t,n,i=!1){super(),this.room=t,this.ydoc=n,this.debug=i,this.log("Initializing YOpfsProvider..."),this.worker=new Worker("/OpfsWorker.js"),console.time("OPFS"),this.whenSynced=()=>new Promise(s=>{this.on("synced",()=>{s(this)})}),n.on("update",(s,r)=>{this._storeUpdate(s,r)}),n.on("destroy",()=>{this.destroy()})}worker=null;debug;PREFERRED_TRIM_SIZE=10;_updateCount=0;DEBOUNCE_TIMEOUT=1e3;_destroyed=!1;_storeTimeoutId=null;whenSynced;_sharedService=null;synced=!1;_timerId=null;_getSessionId=()=>{let t=sessionStorage.getItem("sessionId");return t||(t=Math.random().toString(36).substring(2,15),sessionStorage.setItem("sessionId",t)),t};_storeUpdate=async(t,n)=>{if(this.log("Received update from Y.Doc...",t,n),n!==this&&!this._destroyed){this._timerId&&clearTimeout(this._timerId);const i=(await navigator.locks.query()).held?.find(r=>r.name===`SharedService-${this.room}`);if(!this.synced&&!i){this.log("Waiting for sync..."),this._timerId=setTimeout(()=>{this._storeUpdate(t,n)},1e3);return}cw(t);const{updates:s}=await this._sharedService?.proxy.read();if(console.log("updates",s),this.log("Received a local Y.Doc update or an update from another provider.",t,n,this,this._updateCount),this._sharedService?.proxy.write(t),++this._updateCount>=10){this._storeTimeoutId!==null&&clearTimeout(this._storeTimeoutId);const r=Qf(this.ydoc),o=r.byteLength/1024/1024;console.log(`updates size: ${o} MB`),this._storeTimeoutId=setTimeout(()=>{this.log("Trimming updates file..."),this._sharedService?.proxy.trim(r),this._storeTimeoutId=null,this._updateCount=0},this.DEBOUNCE_TIMEOUT)}}};log=(...t)=>{this.debug&&console.log(...t)};sendMessage(t){return new Promise((n,i)=>{if(!this.worker){i("Worker not initialized.");return}const s=o=>{n(o.data),this.worker?.removeEventListener("message",s)},r=o=>{o instanceof ErrorEvent&&i(o),this.worker?.removeEventListener("error",r)};this.worker.onerror=r,this.worker.onmessage=s,this.worker.postMessage(t)})}activateCalled=!1;async sync(){return new Promise(async(t,n)=>{try{this.log("Synchronizing Y.Doc with OPFS..."),console.time("OPFS: getStoredUpdates"),this._sharedService=new Zc(this.room,()=>lw({read:async()=>(console.log("Calling read"),new Promise((i,s)=>{if(!this.worker){s("Worker not initialized.");return}const r=a=>{i(a.data),this.worker?.removeEventListener("message",r)},o=a=>{a instanceof ErrorEvent&&s(a),this.worker?.removeEventListener("error",o)};this.worker.onerror=o,this.worker.onmessage=r,this.worker.postMessage({action:"read",payload:{roomName:this.room}})})),write:async i=>(console.log("Calling write"),this.sendMessage({action:"write",payload:{roomName:this.room,content:i}})),trim:i=>(console.log("Calling trim"),this.sendMessage({action:"trim",payload:{roomName:this.room,content:i}})),cleanup:()=>this.sendMessage({action:"cleanup",payload:{roomName:this.room}})})),console.log("this._sharedService",this._sharedService),await this._sharedService.activate(async()=>{if(console.log("Destroyed?",this._destroyed,"synced?",this.synced),this._destroyed||this.synced||this.activateCalled)return;this.activateCalled=!0;const i=await this._sharedService?.proxy.read();console.log("res",i);const{updates:s}=i;if(console.timeEnd("OPFS: getStoredUpdates"),this.log("Received updates from OPFS.",s.length),this._updateCount=s.length,qt(this.ydoc,()=>{s.forEach(r=>{Xf(this.ydoc,r,this)})},this,!1),this._destroyed)return this;this.emit("synced",[]),this.synced=!0,console.timeEnd("OPFS"),t()})}catch(i){console.error("Error syncing",i),this.destroy(),n(i)}})}destroy(){this.ydoc.off("update",this._storeUpdate),this.ydoc.off("destroy",this.destroy),this._destroyed=!0,this.worker&&this.worker.terminate(),this._sharedService?.deactivate()}}var hw={equals:!1};function tu(e){return(...t)=>{for(const n of e)n&&n(...t)}}function dw(e){return(...t)=>{for(let n=e.length-1;n>=0;n--){const i=e[n];i&&i(...t)}}}var V=e=>typeof e=="function"&&!e.length?e():e,Ih=e=>Array.isArray(e)?e:e?[e]:[];function Np(e,...t){return typeof e=="function"?e(...t):e}var fw=bt;function pw(e,t,n,i){return e.addEventListener(t,n,i),fw(e.removeEventListener.bind(e,t,n,i))}function gw(e,t,n,i){const s=()=>{Ih(V(e)).forEach(r=>{r&&Ih(V(t)).forEach(o=>pw(r,o,n,i))})};typeof e=="function"?tt(s):ie(s)}var pl=Symbol("fallback");function Dh(e){for(const t of e)t.dispose()}function mw(e,t,n,i={}){const s=new Map;return bt(()=>Dh(s.values())),()=>{const o=e()||[];return o[Sb],Fs(()=>{if(!o.length)return Dh(s.values()),s.clear(),i.fallback?[nh(u=>(s.set(pl,{dispose:u}),i.fallback()))]:[];const a=new Array(o.length),l=s.get(pl);if(!s.size||l){l?.dispose(),s.delete(pl);for(let h=0;h<o.length;h++){const u=o[h],f=t(u,h);r(a,u,h,f)}return a}const c=new Set(s.keys());for(let h=0;h<o.length;h++){const u=o[h],f=t(u,h);c.delete(f);const g=s.get(f);g?(a[h]=g.mapped,g.setIndex?.(h),g.setItem(()=>u)):r(a,u,h,f)}for(const h of c)s.get(h)?.dispose(),s.delete(h);return a})};function r(o,a,l,c){nh(h=>{const[u,f]=G(a),g={setItem:f,dispose:h};if(n.length>1){const[p,y]=G(l);g.setIndex=y,g.mapped=n(u,p)}else g.mapped=n(u);s.set(c,g),o[l]=g.mapped})}}function bw(e){const{by:t}=e;return dt(mw(()=>e.each,typeof t=="function"?t:n=>n[t],e.children,"fallback"in e?{fallback:()=>e.fallback}:void 0))}function lo(){return!0}var yw={get(e,t,n){return t===yi?n:e.get(t)},has(e,t){return e.has(t)},set:lo,deleteProperty:lo,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:lo,deleteProperty:lo}},ownKeys(e){return e.keys()}},vw=/((?:--)?(?:\w+-?)+)\s*:\s*([^;]*)/g;function Rh(e){const t={};let n;for(;n=vw.exec(e);)t[n[1]]=n[2];return t}function ww(e,t){if(typeof e=="string"){if(typeof t=="string")return`${e};${t}`;e=Rh(e)}else typeof t=="string"&&(t=Rh(t));return{...e,...t}}var gl=(e,t,n)=>{let i;for(const s of e){const r=V(s)[t];i?r&&(i=n(i,r)):i=r}return i};function _w(...e){const t=Array.isArray(e[0]),n=t?e[0]:e;if(n.length===1)return n[0];const i=t&&e[1]?.reverseEventHandlers?dw:tu,s={};for(const o of n){const a=V(o);for(const l in a)if(l[0]==="o"&&l[1]==="n"&&l[2]){const c=a[l],h=l.toLowerCase(),u=typeof c=="function"?c:Array.isArray(c)?c.length===1?c[0]:c[0].bind(void 0,c[1]):void 0;u?s[h]?s[h].push(u):s[h]=[u]:delete s[h]}}const r=ft(...n);return new Proxy({get(o){if(typeof o!="string")return Reflect.get(r,o);if(o==="style")return gl(n,"style",ww);if(o==="ref"){const a=[];for(const l of n){const c=V(l)[o];typeof c=="function"&&a.push(c)}return i(a)}if(o[0]==="o"&&o[1]==="n"&&o[2]){const a=s[o.toLowerCase()];return a?i(a):Reflect.get(r,o)}return o==="class"||o==="className"?gl(n,o,(a,l)=>`${a} ${l}`):o==="classList"?gl(n,o,(a,l)=>({...a,...l})):Reflect.get(r,o)},has(o){return Reflect.has(r,o)},keys(){return Object.keys(r)}},yw)}function me(...e){return tu(e)}var Mh=e=>e instanceof Element;function zl(e,t){if(t(e))return e;if(typeof e=="function"&&!e.length)return zl(e(),t);if(Array.isArray(e)){const n=[];for(const i of e){const s=zl(i,t);s&&(Array.isArray(s)?n.push.apply(n,s):n.push(s))}return n.length?n:null}return null}function XO(e,t=Mh,n=Mh){const i=dt(e),s=dt(()=>zl(i(),t));return s.toArray=()=>{const r=s();return Array.isArray(r)?r:r?[r]:[]},s}function Ew(e,t,n=-1){return n in e?[...e.slice(0,n),t,...e.slice(n)]:[...e,t]}function Yl(e,t){const n=[...e],i=n.indexOf(t);return i!==-1&&n.splice(i,1),n}function Sw(e){return typeof e=="number"}function xw(e){return Array.isArray(e)}function fs(e){return Object.prototype.toString.call(e)==="[object String]"}function _a(e){return typeof e=="function"}function Hn(e){return t=>`${e()}-${t}`}function Fe(e,t){return e?e===t||e.contains(t):!1}function rr(e,t=!1){const{activeElement:n}=Ue(e);if(!n?.nodeName)return null;if(Fp(n)&&n.contentDocument)return rr(n.contentDocument.body,t);if(t){const i=n.getAttribute("aria-activedescendant");if(i){const s=Ue(n).getElementById(i);if(s)return s}}return n}function eu(e){return Ue(e).defaultView||window}function Ue(e){return e?e.ownerDocument||e:document}function Fp(e){return e.tagName==="IFRAME"}var Bp=(e=>(e.Escape="Escape",e.Enter="Enter",e.Tab="Tab",e.Space=" ",e.ArrowDown="ArrowDown",e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.ArrowUp="ArrowUp",e.End="End",e.Home="Home",e.PageDown="PageDown",e.PageUp="PageUp",e))(Bp||{});function Hp(e){return typeof window>"u"||window.navigator==null?!1:window.navigator.userAgentData?.brands.some(t=>e.test(t.brand))||e.test(window.navigator.userAgent)}function nu(e){return typeof window<"u"&&window.navigator!=null?e.test(window.navigator.userAgentData?.platform||window.navigator.platform):!1}function Br(){return nu(/^Mac/i)}function Tw(){return nu(/^iPhone/i)}function Cw(){return nu(/^iPad/i)||Br()&&navigator.maxTouchPoints>1}function Up(){return Tw()||Cw()}function $w(){return Br()||Up()}function kw(){return Hp(/AppleWebKit/i)&&!Aw()}function Aw(){return Hp(/Chrome/i)}function Dt(e,t){return t&&(_a(t)?t(e):t[0](t[1],e)),e?.defaultPrevented}function ee(e){return t=>{for(const n of e)Dt(t,n)}}function Pw(e){return Br()?e.metaKey&&!e.ctrlKey:e.ctrlKey&&!e.metaKey}function de(e){if(e)if(Ow())e.focus({preventScroll:!0});else{const t=Lw(e);e.focus(),Iw(t)}}var co=null;function Ow(){if(co==null){co=!1;try{document.createElement("div").focus({get preventScroll(){return co=!0,!0}})}catch{}}return co}function Lw(e){let t=e.parentNode;const n=[],i=document.scrollingElement||document.documentElement;for(;t instanceof HTMLElement&&t!==i;)(t.offsetHeight<t.scrollHeight||t.offsetWidth<t.scrollWidth)&&n.push({element:t,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft}),t=t.parentNode;return i instanceof HTMLElement&&n.push({element:i,scrollTop:i.scrollTop,scrollLeft:i.scrollLeft}),n}function Iw(e){for(const{element:t,scrollTop:n,scrollLeft:i}of e)t.scrollTop=n,t.scrollLeft=i}var Vp=["input:not([type='hidden']):not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","a[href]","area[href]","[tabindex]","iframe","object","embed","audio[controls]","video[controls]","[contenteditable]:not([contenteditable='false'])"],Dw=[...Vp,'[tabindex]:not([tabindex="-1"]):not([disabled])'],iu=Vp.join(":not([hidden]),")+",[tabindex]:not([disabled]):not([hidden])",Rw=Dw.join(':not([hidden]):not([tabindex="-1"]),');function jp(e,t){const i=Array.from(e.querySelectorAll(iu)).filter(Nh);return t&&Nh(e)&&i.unshift(e),i.forEach((s,r)=>{if(Fp(s)&&s.contentDocument){const o=s.contentDocument.body,a=jp(o,!1);i.splice(r,1,...a)}}),i}function Nh(e){return Kp(e)&&!Mw(e)}function Kp(e){return e.matches(iu)&&su(e)}function Mw(e){return parseInt(e.getAttribute("tabindex")||"0",10)<0}function su(e,t){return e.nodeName!=="#comment"&&Nw(e)&&Fw(e,t)&&(!e.parentElement||su(e.parentElement,e))}function Nw(e){if(!(e instanceof HTMLElement)&&!(e instanceof SVGElement))return!1;const{display:t,visibility:n}=e.style;let i=t!=="none"&&n!=="hidden"&&n!=="collapse";if(i){if(!e.ownerDocument.defaultView)return i;const{getComputedStyle:s}=e.ownerDocument.defaultView,{display:r,visibility:o}=s(e);i=r!=="none"&&o!=="hidden"&&o!=="collapse"}return i}function Fw(e,t){return!e.hasAttribute("hidden")&&(e.nodeName==="DETAILS"&&t&&t.nodeName!=="SUMMARY"?e.hasAttribute("open"):!0)}function Bw(e,t){return t.some(n=>n.contains(e))}function Hw(e,t,n){const i=t?.tabbable?Rw:iu,s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode(r){return t?.from?.contains(r)?NodeFilter.FILTER_REJECT:r.matches(i)&&su(r)&&(!n||Bw(r,n))&&(!t?.accept||t.accept(r))?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});return t?.from&&(s.currentNode=t.from),s}function Uw(){}function Vw(e){return[e.clientX,e.clientY]}function qp(e,t){const[n,i]=e;let s=!1;const r=t.length;for(let o=r,a=0,l=o-1;a<o;l=a++){const[c,h]=t[a],[u,f]=t[l],[,g]=t[l===0?o-1:l-1]||[0,0],p=(h-f)*(n-c)-(c-u)*(i-h);if(f<h){if(i>=f&&i<h){if(p===0)return!0;p>0&&(i===f?i>g&&(s=!s):s=!s)}}else if(h<f){if(i>h&&i<=f){if(p===0)return!0;p<0&&(i===f?i<g&&(s=!s):s=!s)}}else if(i==h&&(n>=u&&n<=c||n>=c&&n<=u))return!0}return s}function Rt(e,t){return ft(e,t)}var tr=new Map,Fh=new Set;function Bh(){if(typeof window>"u")return;const e=n=>{if(!n.target)return;let i=tr.get(n.target);i||(i=new Set,tr.set(n.target,i),n.target.addEventListener("transitioncancel",t)),i.add(n.propertyName)},t=n=>{if(!n.target)return;const i=tr.get(n.target);if(i&&(i.delete(n.propertyName),i.size===0&&(n.target.removeEventListener("transitioncancel",t),tr.delete(n.target)),tr.size===0)){for(const s of Fh)s();Fh.clear()}};document.body.addEventListener("transitionrun",e),document.body.addEventListener("transitionend",t)}typeof document<"u"&&(document.readyState!=="loading"?Bh():document.addEventListener("DOMContentLoaded",Bh));function Hh(e,t){const n=Uh(e,t,"left"),i=Uh(e,t,"top"),s=t.offsetWidth,r=t.offsetHeight;let o=e.scrollLeft,a=e.scrollTop;const l=o+e.offsetWidth,c=a+e.offsetHeight;n<=o?o=n:n+s>l&&(o+=n+s-l),i<=a?a=i:i+r>c&&(a+=i+r-c),e.scrollLeft=o,e.scrollTop=a}function Uh(e,t,n){const i=n==="left"?"offsetLeft":"offsetTop";let s=0;for(;t.offsetParent&&(s+=t[i],t.offsetParent!==e);){if(t.offsetParent.contains(e)){s-=e[i];break}t=t.offsetParent}return s}var jw={border:"0",clip:"rect(0 0 0 0)","clip-path":"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:"0",position:"absolute",width:"1px","white-space":"nowrap"};function Xl(e){let t=e.startIndex??0;const n=e.startLevel??0,i=[],s=l=>{if(l==null)return"";const c=e.getKey??"key",h=fs(c)?l[c]:c(l);return h!=null?String(h):""},r=l=>{if(l==null)return"";const c=e.getTextValue??"textValue",h=fs(c)?l[c]:c(l);return h!=null?String(h):""},o=l=>{if(l==null)return!1;const c=e.getDisabled??"disabled";return(fs(c)?l[c]:c(l))??!1},a=l=>{if(l!=null)return fs(e.getSectionChildren)?l[e.getSectionChildren]:e.getSectionChildren?.(l)};for(const l of e.dataSource){if(fs(l)||Sw(l)){i.push({type:"item",rawValue:l,key:String(l),textValue:String(l),disabled:o(l),level:n,index:t}),t++;continue}if(a(l)!=null){i.push({type:"section",rawValue:l,key:"",textValue:"",disabled:!1,level:n,index:t}),t++;const c=a(l)??[];if(c.length>0){const h=Xl({dataSource:c,getKey:e.getKey,getTextValue:e.getTextValue,getDisabled:e.getDisabled,getSectionChildren:e.getSectionChildren,startIndex:t,startLevel:n+1});i.push(...h),t+=h.length}}else i.push({type:"item",rawValue:l,key:s(l),textValue:r(l),disabled:o(l),level:n,index:t}),t++}return i}/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/bfce84fee12a027d9cbc38b43e1747e3e4b4b169/packages/@react-stately/collections/src/useCollection.ts
 */function Kw(e,t=[]){const n=Xl({dataSource:V(e.dataSource),getKey:V(e.getKey),getTextValue:V(e.getTextValue),getDisabled:V(e.getDisabled),getSectionChildren:V(e.getSectionChildren)}),[i,s]=G(e.factory(n));return tt(Ye([()=>V(e.dataSource),()=>V(e.getKey),()=>V(e.getTextValue),()=>V(e.getDisabled),()=>V(e.getSectionChildren),()=>e.factory,...t],([r,o,a,l,c,h])=>{const u=Xl({dataSource:r,getKey:o,getTextValue:a,getDisabled:l,getSectionChildren:c});s(()=>h(u))},{defer:!0})),i}/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/22cb32d329e66c60f55d4fc4025d1d44bb015d71/packages/@react-stately/collections/src/getItemCount.ts
 */const Vh=new WeakMap;function qw(e){let t=Vh.get(e);if(t!=null)return t;t=0;for(const n of e)n.type==="item"&&t++;return Vh.set(e,t),t}function ru(e){const[t,n]=G(e.defaultValue?.()),i=dt(()=>e.value?.()!==void 0),s=dt(()=>i()?e.value?.():t());return[s,o=>{Fs(()=>{const a=Np(o,s());return Object.is(a,s())||(i()||n(a),e.onChange?.(a)),a})}]}function Gw(e){const[t,n]=ru(e);return[()=>t()??!1,n]}function Ww(e){const[t,n]=ru(e);return[()=>t()??[],n]}function Hr(e={}){const[t,n]=Gw({value:()=>V(e.open),defaultValue:()=>!!V(e.defaultOpen),onChange:o=>e.onOpenChange?.(o)}),i=()=>{n(!0)},s=()=>{n(!1)};return{isOpen:t,setIsOpen:n,open:i,close:s,toggle:()=>{t()?s():i()}}}function zw(e){const t=n=>{n.key===Bp.Escape&&e.onEscapeKeyDown?.(n)};tt(()=>{if(V(e.isDisabled))return;const n=e.ownerDocument?.()??Ue();n.addEventListener("keydown",t),bt(()=>{n.removeEventListener("keydown",t)})})}/*!
 * Portions of this file are based on code from radix-ui-primitives.
 * MIT Licensed, Copyright (c) 2022 WorkOS.
 *
 * Credits to the Radix UI team:
 * https://github.com/radix-ui/primitives/blob/81b25f4b40c54f72aeb106ca0e64e1e09655153e/packages/react/dismissable-layer/src/DismissableLayer.tsx
 *
 * Portions of this file are based on code from zag.
 * MIT Licensed, Copyright (c) 2021 Chakra UI.
 *
 * Credits to the Chakra UI team:
 * https://github.com/chakra-ui/zag/blob/d1dbf9e240803c9e3ed81ebef363739be4273de0/packages/utilities/dismissable/src/layer-stack.ts
 */const Go="data-kb-top-layer";let Gp,Ql=!1;const ei=[];function xr(e){return ei.findIndex(t=>t.node===e)}function Yw(e){return ei[xr(e)]}function Xw(e){return ei[ei.length-1].node===e}function Wp(){return ei.filter(e=>e.isPointerBlocking)}function Qw(){return[...Wp()].slice(-1)[0]}function ou(){return Wp().length>0}function zp(e){const t=xr(Qw()?.node);return xr(e)<t}function Jw(e){ei.push(e)}function Zw(e){const t=xr(e);t<0||ei.splice(t,1)}function t_(){ei.forEach(({node:e})=>{e.style.pointerEvents=zp(e)?"none":"auto"})}function e_(e){if(ou()&&!Ql){const t=Ue(e);Gp=document.body.style.pointerEvents,t.body.style.pointerEvents="none",Ql=!0}}function n_(e){if(ou())return;const t=Ue(e);t.body.style.pointerEvents=Gp,t.body.style.length===0&&t.body.removeAttribute("style"),Ql=!1}const qe={layers:ei,isTopMostLayer:Xw,hasPointerBlockingLayer:ou,isBelowPointerBlockingLayer:zp,addLayer:Jw,removeLayer:Zw,indexOf:xr,find:Yw,assignPointerEventToLayers:t_,disableBodyPointerEvents:e_,restoreBodyPointerEvents:n_};/*!
 * Portions of this file are based on code from radix-ui-primitives.
 * MIT Licensed, Copyright (c) 2022 WorkOS.
 *
 * Credits to the Radix UI team:
 * https://github.com/radix-ui/primitives/blob/81b25f4b40c54f72aeb106ca0e64e1e09655153e/packages/react/focus-scope/src/FocusScope.tsx
 *
 * Portions of this file are based on code from zag.
 * MIT Licensed, Copyright (c) 2021 Chakra UI.
 *
 * Credits to the Chakra UI team:
 * https://github.com/chakra-ui/zag/blob/d1dbf9e240803c9e3ed81ebef363739be4273de0/packages/utilities/focus-scope/src/focus-on-child-unmount.ts
 * https://github.com/chakra-ui/zag/blob/d1dbf9e240803c9e3ed81ebef363739be4273de0/packages/utilities/focus-scope/src/focus-containment.ts
 */const ml="focusScope.autoFocusOnMount",bl="focusScope.autoFocusOnUnmount",jh={bubbles:!1,cancelable:!0},Kh={stack:[],active(){return this.stack[0]},add(e){e!==this.active()&&this.active()?.pause(),this.stack=Yl(this.stack,e),this.stack.unshift(e)},remove(e){this.stack=Yl(this.stack,e),this.active()?.resume()}};function au(e,t){const[n,i]=G(!1),s={pause(){i(!0)},resume(){i(!1)}};let r=null;const o=p=>e.onMountAutoFocus?.(p),a=p=>e.onUnmountAutoFocus?.(p),l=()=>Ue(t()),c=()=>{const p=l().createElement("span");return p.setAttribute("data-focus-trap",""),p.tabIndex=0,Object.assign(p.style,jw),p},h=()=>{const p=t();return p?jp(p,!0).filter(y=>!y.hasAttribute("data-focus-trap")):[]},u=()=>{const p=h();return p.length>0?p[0]:null},f=()=>{const p=h();return p.length>0?p[p.length-1]:null},g=()=>{const p=t();if(!p)return!1;const y=rr(p);return!y||Fe(p,y)?!1:Kp(y)};tt(()=>{const p=t();if(!p)return;Kh.add(s);const y=rr(p);if(!Fe(p,y)){const S=new CustomEvent(ml,jh);p.addEventListener(ml,o),p.dispatchEvent(S),S.defaultPrevented||setTimeout(()=>{de(u()),rr(p)===y&&de(p)},0)}bt(()=>{p.removeEventListener(ml,o),setTimeout(()=>{const S=new CustomEvent(bl,jh);g()&&S.preventDefault(),p.addEventListener(bl,a),p.dispatchEvent(S),S.defaultPrevented||de(y??l().body),p.removeEventListener(bl,a),Kh.remove(s)},0)})}),tt(()=>{const p=t();if(!p||!V(e.trapFocus)||n())return;const y=S=>{const E=S.target;E?.closest(`[${Go}]`)||(Fe(p,E)?r=E:de(r))},x=S=>{const b=S.relatedTarget??rr(p);b?.closest(`[${Go}]`)||Fe(p,b)||de(r)};l().addEventListener("focusin",y),l().addEventListener("focusout",x),bt(()=>{l().removeEventListener("focusin",y),l().removeEventListener("focusout",x)})}),tt(()=>{const p=t();if(!p||!V(e.trapFocus)||n())return;const y=c();p.insertAdjacentElement("afterbegin",y);const x=c();p.insertAdjacentElement("beforeend",x);function S(b){const _=u(),w=f();b.relatedTarget===_?de(w):de(_)}y.addEventListener("focusin",S),x.addEventListener("focusin",S);const E=new MutationObserver(b=>{for(const _ of b)_.previousSibling===x&&(x.remove(),p.insertAdjacentElement("beforeend",x)),_.nextSibling===y&&(y.remove(),p.insertAdjacentElement("afterbegin",y))});E.observe(p,{childList:!0,subtree:!1}),bt(()=>{y.removeEventListener("focusin",S),x.removeEventListener("focusin",S),y.remove(),x.remove(),E.disconnect()})})}/*!
 * Portions of this file are based on code from zag.
 * MIT Licensed, Copyright (c) 2021 Chakra UI.
 *
 * Credits to the zag team:
 * https://github.com/chakra-ui/zag/blob/c1e6c7689b22bf58741ded7cf224dd9baec2a046/packages/utilities/form-utils/src/form.ts
 */function i_(e,t){tt(Ye(e,n=>{if(n==null)return;const i=s_(n);i!=null&&(i.addEventListener("reset",t,{passive:!0}),bt(()=>{i.removeEventListener("reset",t)}))}))}function s_(e){return r_(e)?e.form:e.closest("form")}function r_(e){return e.matches("textarea, input, select, button")}/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/15e101b74966bd5eb719c6529ce71ce57eaed430/packages/@react-aria/live-announcer/src/LiveAnnouncer.tsx
 */const o_="data-live-announcer";/*!
 * This file is based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/810579b671791f1593108f62cdc1893de3a220e3/packages/@react-aria/overlays/src/ariaHideOutside.ts
 */function lu(e){tt(()=>{V(e.isDisabled)||bt(a_(V(e.targets),V(e.root)))})}const er=new WeakMap,nn=[];function a_(e,t=document.body){const n=new Set(e),i=new Set,s=l=>{for(const f of l.querySelectorAll(`[${o_}], [${Go}]`))n.add(f);const c=f=>{if(n.has(f)||f.parentElement&&i.has(f.parentElement)&&f.parentElement.getAttribute("role")!=="row")return NodeFilter.FILTER_REJECT;for(const g of n)if(f.contains(g))return NodeFilter.FILTER_SKIP;return NodeFilter.FILTER_ACCEPT},h=document.createTreeWalker(l,NodeFilter.SHOW_ELEMENT,{acceptNode:c}),u=c(l);if(u===NodeFilter.FILTER_ACCEPT&&r(l),u!==NodeFilter.FILTER_REJECT){let f=h.nextNode();for(;f!=null;)r(f),f=h.nextNode()}},r=l=>{const c=er.get(l)??0;l.getAttribute("aria-hidden")==="true"&&c===0||(c===0&&l.setAttribute("aria-hidden","true"),i.add(l),er.set(l,c+1))};nn.length&&nn[nn.length-1].disconnect(),s(t);const o=new MutationObserver(l=>{for(const c of l)if(!(c.type!=="childList"||c.addedNodes.length===0)&&![...n,...i].some(h=>h.contains(c.target))){for(const h of c.removedNodes)h instanceof Element&&(n.delete(h),i.delete(h));for(const h of c.addedNodes)(h instanceof HTMLElement||h instanceof SVGElement)&&(h.dataset.liveAnnouncer==="true"||h.dataset.reactAriaTopLayer==="true")?n.add(h):h instanceof Element&&s(h)}});o.observe(t,{childList:!0,subtree:!0});const a={observe(){o.observe(t,{childList:!0,subtree:!0})},disconnect(){o.disconnect()}};return nn.push(a),()=>{o.disconnect();for(const l of i){const c=er.get(l);if(c==null)return;c===1?(l.removeAttribute("aria-hidden"),er.delete(l)):er.set(l,c-1)}a===nn[nn.length-1]?(nn.pop(),nn.length&&nn[nn.length-1].observe()):nn.splice(nn.indexOf(a),1)}}/*!
 * Portions of this file are based on code from radix-ui-primitives.
 * MIT Licensed, Copyright (c) 2022 WorkOS.
 *
 * Credits to the Radix UI team:
 * https://github.com/radix-ui/primitives/blob/81b25f4b40c54f72aeb106ca0e64e1e09655153e/packages/react/dismissable-layer/src/DismissableLayer.tsx
 *
 * Portions of this file are based on code from zag.
 * MIT Licensed, Copyright (c) 2021 Chakra UI.
 *
 * Credits to the Chakra UI team:
 * https://github.com/chakra-ui/zag/blob/d1dbf9e240803c9e3ed81ebef363739be4273de0/packages/utilities/interact-outside/src/index.ts
 */const qh="interactOutside.pointerDownOutside",Gh="interactOutside.focusOutside";function l_(e,t){let n,i=Uw;const s=()=>Ue(t()),r=u=>e.onPointerDownOutside?.(u),o=u=>e.onFocusOutside?.(u),a=u=>e.onInteractOutside?.(u),l=u=>{const f=u.target;return!(f instanceof HTMLElement)||f.closest(`[${Go}]`)||!Fe(s(),f)||Fe(t(),f)?!1:!e.shouldExcludeElement?.(f)},c=u=>{function f(){const g=t(),p=u.target;if(!g||!p||!l(u))return;const y=ee([r,a]);p.addEventListener(qh,y,{once:!0});const x=new CustomEvent(qh,{bubbles:!1,cancelable:!0,detail:{originalEvent:u,isContextMenu:u.button===2||Pw(u)&&u.button===0}});p.dispatchEvent(x)}u.pointerType==="touch"?(s().removeEventListener("click",f),i=f,s().addEventListener("click",f,{once:!0})):f()},h=u=>{const f=t(),g=u.target;if(!f||!g||!l(u))return;const p=ee([o,a]);g.addEventListener(Gh,p,{once:!0});const y=new CustomEvent(Gh,{bubbles:!1,cancelable:!0,detail:{originalEvent:u,isContextMenu:!1}});g.dispatchEvent(y)};tt(()=>{V(e.isDisabled)||(n=window.setTimeout(()=>{s().addEventListener("pointerdown",c,!0)},0),s().addEventListener("focusin",h,!0),bt(()=>{window.clearTimeout(n),s().removeEventListener("click",i),s().removeEventListener("pointerdown",c,!0),s().removeEventListener("focusin",h,!0)}))})}/*!
 * Portions of this file are based on code from radix-ui-primitives.
 * MIT Licensed, Copyright (c) 2022 WorkOS.
 *
 * Credits to the Radix UI team:
 * https://github.com/radix-ui/primitives/blob/21a7c97dc8efa79fecca36428eec49f187294085/packages/react/presence/src/Presence.tsx
 * https://github.com/radix-ui/primitives/blob/21a7c97dc8efa79fecca36428eec49f187294085/packages/react/presence/src/useStateMachine.tsx
 */function ks(e){const[t,n]=G();let i={},s=e(),r="none";const[o,a]=c_(e()?"mounted":"unmounted",{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return tt(Ye(o,l=>{const c=uo(i);r=l==="mounted"?c:"none"})),tt(Ye(e,l=>{if(s===l)return;const c=uo(i);l?a("MOUNT"):i?.display==="none"?a("UNMOUNT"):a(s&&r!==c?"ANIMATION_OUT":"UNMOUNT"),s=l})),tt(Ye(t,l=>{if(l){const c=u=>{const g=uo(i).includes(u.animationName);u.target===l&&g&&a("ANIMATION_END")},h=u=>{u.target===l&&(r=uo(i))};l.addEventListener("animationstart",h),l.addEventListener("animationcancel",c),l.addEventListener("animationend",c),bt(()=>{l.removeEventListener("animationstart",h),l.removeEventListener("animationcancel",c),l.removeEventListener("animationend",c)})}else a("ANIMATION_END")})),{isPresent:()=>["mounted","unmountSuspended"].includes(o()),setRef:l=>{l&&(i=getComputedStyle(l)),n(l)}}}function uo(e){return e?.animationName||"none"}function c_(e,t){const n=(o,a)=>t[o][a]??o,[i,s]=G(e);return[i,o=>{s(a=>n(a,o))}]}/*!
 * Portions of this file are based on code from floating-ui.
 * MIT Licensed, Copyright (c) 2021 Floating UI contributors.
 *
 * Credits to the Floating UI contributors:
 * https://github.com/floating-ui/floating-ui/blob/f7ce9420aa32c150eb45049f12cf3b5506715341/packages/react/src/components/FloatingOverlay.tsx
 *
 * Portions of this file are based on code from ariakit.
 * MIT Licensed, Copyright (c) Diego Haz.
 *
 * Credits to the Ariakit team:
 * https://github.com/ariakit/ariakit/blob/5d8a1f047fcadcf117073c70359663a3946b73bf/packages/ariakit/src/dialog/__utils/use-prevent-body-scroll.ts
 */const yl="data-kb-scroll-lock";function Wh(e,t){if(!e)return()=>{};const n=e.style.cssText;return Object.assign(e.style,t),()=>{e.style.cssText=n}}function u_(e,t,n){if(!e)return()=>{};const i=e.style.getPropertyValue(t);return e.style.setProperty(t,n),()=>{i?e.style.setProperty(t,i):e.style.removeProperty(t)}}function h_(e){const t=e.getBoundingClientRect().left;return Math.round(t)+e.scrollLeft?"paddingLeft":"paddingRight"}function cu(e){tt(()=>{if(!V(e.ownerRef)||V(e.isDisabled))return;const t=Ue(V(e.ownerRef)),n=eu(V(e.ownerRef)),{documentElement:i,body:s}=t;if(s.hasAttribute(yl))return;s.setAttribute(yl,"");const o=n.innerWidth-i.clientWidth,a=()=>u_(i,"--scrollbar-width",`${o}px`),l=h_(i),c=()=>Wh(s,{overflow:"hidden",[l]:`${o}px`}),h=()=>{const{scrollX:f,scrollY:g,visualViewport:p}=n,y=p?.offsetLeft??0,x=p?.offsetTop??0,S=Wh(s,{position:"fixed",overflow:"hidden",top:`${-(g-Math.floor(x))}px`,left:`${-(f-Math.floor(y))}px`,right:"0",[l]:`${o}px`});return()=>{S(),n.scrollTo(f,g)}},u=tu([a(),Up()?h():c()]);bt(()=>{u(),s.removeAttribute(yl)})})}function le(e){return t=>(e(t),()=>e(void 0))}/*!
 * Portions of this file are based on code from ariakit.
 * MIT Licensed, Copyright (c) Diego Haz.
 *
 * Credits to the ariakit team:
 * https://github.com/ariakit/ariakit/blob/8a13899ff807bbf39f3d89d2d5964042ba4d5287/packages/ariakit-react-utils/src/hooks.ts
 */function Yp(e,t){const[n,i]=G(zh(t?.()));return tt(()=>{i(e()?.tagName.toLowerCase()||zh(t?.()))}),n}function zh(e){return fs(e)?e:void 0}/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/70e7caf1946c423bc9aa9cb0e50dbdbe953d239b/packages/@react-aria/label/src/useField.ts
 */const d_=["id","name","validationState","required","disabled","readOnly"];function f_(e){const t=`form-control-${mn()}`;e=Rt({id:t},e);const[n,i]=G(),[s,r]=G(),[o,a]=G(),[l,c]=G(),h=(p,y,x)=>{const S=x!=null||n()!=null;return[x,n(),S&&y!=null?p:void 0].filter(Boolean).join(" ")||void 0},u=p=>[o(),l(),p].filter(Boolean).join(" ")||void 0,f=dt(()=>({"data-valid":V(e.validationState)==="valid"?"":void 0,"data-invalid":V(e.validationState)==="invalid"?"":void 0,"data-required":V(e.required)?"":void 0,"data-disabled":V(e.disabled)?"":void 0,"data-readonly":V(e.readOnly)?"":void 0}));return{formControlContext:{name:()=>V(e.name)??V(e.id),dataset:f,validationState:()=>V(e.validationState),isRequired:()=>V(e.required),isDisabled:()=>V(e.disabled),isReadOnly:()=>V(e.readOnly),labelId:n,fieldId:s,descriptionId:o,errorMessageId:l,getAriaLabelledBy:h,getAriaDescribedBy:u,generateId:Hn(()=>V(e.id)),registerLabel:le(i),registerField:le(r),registerDescription:le(a),registerErrorMessage:le(c)}}}const Xp=ue();function Ea(){const e=ce(Xp);if(e===void 0)throw new Error("[kobalte]: `useFormControlContext` must be used within a `FormControlContext.Provider` component");return e}const p_=["id","aria-label","aria-labelledby","aria-describedby"];function g_(e){const t=Ea();return e=Rt({id:t.generateId("field")},e),tt(()=>bt(t.registerField(V(e.id)))),{fieldProps:{id:()=>V(e.id),ariaLabel:()=>V(e["aria-label"]),ariaLabelledBy:()=>t.getAriaLabelledBy(V(e.id),V(e["aria-label"]),V(e["aria-labelledby"])),ariaDescribedBy:()=>t.getAriaDescribedBy(V(e["aria-describedby"]))}}}function se(e){const[t,n]=$t(e,["asChild","as","children"]);if(!t.asChild)return L(Ja,ft({get component(){return t.as}},n,{get children(){return t.children}}));const i=ff(()=>t.children);if(Yh(i())){const s=Xh(n,i()?.props??{});return L(Ja,s)}if(xw(i())){const s=i().find(Yh);if(s){const r=()=>L(pf,{get each(){return i()},children:a=>L(Et,{when:a===s,fallback:a,get children(){return s.props.children}})}),o=Xh(n,s?.props??{});return L(Ja,ft(o,{children:r}))}}throw new Error("[kobalte]: Component is expected to render `asChild` but no children `As` component was found.")}const m_=Symbol("$$KobalteAsComponent");function Yh(e){return e?.[m_]===!0}function Xh(e,t){return _w([e,t],{reverseEventHandlers:!0})}function b_(e){let t;const n=Ea();e=Rt({id:n.generateId("label")},e);const[i,s]=$t(e,["ref"]),r=Yp(()=>t,()=>"label");return tt(()=>bt(n.registerLabel(s.id))),L(se,ft({as:"label",ref(o){var a=me(l=>t=l,i.ref);typeof a=="function"&&a(o)},get for(){return dt(()=>r()==="label")()?n.fieldId():void 0}},()=>n.dataset(),s))}const y_={"ar-AE":{dismiss:""},"bg-BG":{dismiss:""},"cs-CZ":{dismiss:"Odstranit"},"da-DK":{dismiss:"Luk"},"de-DE":{dismiss:"Schlieen"},"el-GR":{dismiss:""},"en-US":{dismiss:"Dismiss"},"es-ES":{dismiss:"Descartar"},"et-EE":{dismiss:"Lpeta"},"fi-FI":{dismiss:"Hylk"},"fr-FR":{dismiss:"Rejeter"},"he-IL":{dismiss:""},"hr-HR":{dismiss:"Odbaci"},"hu-HU":{dismiss:"Elutasts"},"it-IT":{dismiss:"Ignora"},"ja-JP":{dismiss:""},"ko-KR":{dismiss:""},"lt-LT":{dismiss:"Atmesti"},"lv-LV":{dismiss:"Nerdt"},"nb-NO":{dismiss:"Lukk"},"nl-NL":{dismiss:"Negeren"},"pl-PL":{dismiss:"Zignoruj"},"pt-BR":{dismiss:"Descartar"},"pt-PT":{dismiss:"Dispensar"},"ro-RO":{dismiss:"Revocare"},"ru-RU":{dismiss:""},"sk-SK":{dismiss:"Zrui"},"sl-SI":{dismiss:"Opusti"},"sr-SP":{dismiss:"Odbaci"},"sv-SE":{dismiss:"Avvisa"},"tr-TR":{dismiss:"Kapat"},"uk-UA":{dismiss:""},"zh-CN":{dismiss:""},"zh-TW":{dismiss:""}};/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/b35d5c02fe900badccd0cf1a8f23bb593419f238/packages/@react-aria/i18n/src/utils.ts
 */const v_=new Set(["Avst","Arab","Armi","Syrc","Samr","Mand","Thaa","Mend","Nkoo","Adlm","Rohg","Hebr"]),w_=new Set(["ae","ar","arc","bcc","bqi","ckb","dv","fa","glk","he","ku","mzn","nqo","pnb","ps","sd","ug","ur","yi"]);function __(e){if(Intl.Locale){const n=new Intl.Locale(e).maximize().script??"";return v_.has(n)}const t=e.split("-")[0];return w_.has(t)}function E_(e){return __(e)?"rtl":"ltr"}/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/b35d5c02fe900badccd0cf1a8f23bb593419f238/packages/@react-aria/i18n/src/useDefaultLocale.ts
 */function Qp(){let e=typeof navigator<"u"&&(navigator.language||navigator.userLanguage)||"en-US";try{Intl.DateTimeFormat.supportedLocalesOf([e])}catch{e="en-US"}return{locale:e,direction:E_(e)}}let Jl=Qp();const or=new Set;function Qh(){Jl=Qp();for(const e of or)e(Jl)}function S_(){const[e,t]=G(Jl),n=dt(()=>e());return Bs(()=>{or.size===0&&window.addEventListener("languagechange",Qh),or.add(t),bt(()=>{or.delete(t),or.size===0&&window.removeEventListener("languagechange",Qh)})}),{locale:()=>n().locale,direction:()=>n().direction}}const x_=ue();function Sa(){const e=S_();return ce(x_)||e}/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/b35d5c02fe900badccd0cf1a8f23bb593419f238/packages/@react-aria/i18n/src/useCollator.ts
 */const vl=new Map;function Jp(e){const{locale:t}=Sa(),n=dt(()=>t()+(e?Object.entries(e).sort((i,s)=>i[0]<s[0]?-1:1).join():""));return dt(()=>{const i=n();let s;return vl.has(i)&&(s=vl.get(i)),s||(s=new Intl.Collator(t(),e),vl.set(i,s)),s})}var Zl=function(e,t){return Zl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},Zl(e,t)};function xa(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Zl(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Mt=function(){return Mt=Object.assign||function(t){for(var n,i=1,s=arguments.length;i<s;i++){n=arguments[i];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mt.apply(this,arguments)};function T_(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(n[i[s]]=e[i[s]]);return n}function wl(e,t,n){if(n||arguments.length===2)for(var i=0,s=t.length,r;i<s;i++)(r||!(i in t))&&(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}var At;(function(e){e[e.EXPECT_ARGUMENT_CLOSING_BRACE=1]="EXPECT_ARGUMENT_CLOSING_BRACE",e[e.EMPTY_ARGUMENT=2]="EMPTY_ARGUMENT",e[e.MALFORMED_ARGUMENT=3]="MALFORMED_ARGUMENT",e[e.EXPECT_ARGUMENT_TYPE=4]="EXPECT_ARGUMENT_TYPE",e[e.INVALID_ARGUMENT_TYPE=5]="INVALID_ARGUMENT_TYPE",e[e.EXPECT_ARGUMENT_STYLE=6]="EXPECT_ARGUMENT_STYLE",e[e.INVALID_NUMBER_SKELETON=7]="INVALID_NUMBER_SKELETON",e[e.INVALID_DATE_TIME_SKELETON=8]="INVALID_DATE_TIME_SKELETON",e[e.EXPECT_NUMBER_SKELETON=9]="EXPECT_NUMBER_SKELETON",e[e.EXPECT_DATE_TIME_SKELETON=10]="EXPECT_DATE_TIME_SKELETON",e[e.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE=11]="UNCLOSED_QUOTE_IN_ARGUMENT_STYLE",e[e.EXPECT_SELECT_ARGUMENT_OPTIONS=12]="EXPECT_SELECT_ARGUMENT_OPTIONS",e[e.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE=13]="EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE",e[e.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE=14]="INVALID_PLURAL_ARGUMENT_OFFSET_VALUE",e[e.EXPECT_SELECT_ARGUMENT_SELECTOR=15]="EXPECT_SELECT_ARGUMENT_SELECTOR",e[e.EXPECT_PLURAL_ARGUMENT_SELECTOR=16]="EXPECT_PLURAL_ARGUMENT_SELECTOR",e[e.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT=17]="EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT",e[e.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT=18]="EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT",e[e.INVALID_PLURAL_ARGUMENT_SELECTOR=19]="INVALID_PLURAL_ARGUMENT_SELECTOR",e[e.DUPLICATE_PLURAL_ARGUMENT_SELECTOR=20]="DUPLICATE_PLURAL_ARGUMENT_SELECTOR",e[e.DUPLICATE_SELECT_ARGUMENT_SELECTOR=21]="DUPLICATE_SELECT_ARGUMENT_SELECTOR",e[e.MISSING_OTHER_CLAUSE=22]="MISSING_OTHER_CLAUSE",e[e.INVALID_TAG=23]="INVALID_TAG",e[e.INVALID_TAG_NAME=25]="INVALID_TAG_NAME",e[e.UNMATCHED_CLOSING_TAG=26]="UNMATCHED_CLOSING_TAG",e[e.UNCLOSED_TAG=27]="UNCLOSED_TAG"})(At||(At={}));var Yt;(function(e){e[e.literal=0]="literal",e[e.argument=1]="argument",e[e.number=2]="number",e[e.date=3]="date",e[e.time=4]="time",e[e.select=5]="select",e[e.plural=6]="plural",e[e.pound=7]="pound",e[e.tag=8]="tag"})(Yt||(Yt={}));var As;(function(e){e[e.number=0]="number",e[e.dateTime=1]="dateTime"})(As||(As={}));function Jh(e){return e.type===Yt.literal}function C_(e){return e.type===Yt.argument}function Zp(e){return e.type===Yt.number}function tg(e){return e.type===Yt.date}function eg(e){return e.type===Yt.time}function ng(e){return e.type===Yt.select}function ig(e){return e.type===Yt.plural}function $_(e){return e.type===Yt.pound}function sg(e){return e.type===Yt.tag}function rg(e){return!!(e&&typeof e=="object"&&e.type===As.number)}function tc(e){return!!(e&&typeof e=="object"&&e.type===As.dateTime)}var og=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,k_=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;function A_(e){var t={};return e.replace(k_,function(n){var i=n.length;switch(n[0]){case"G":t.era=i===4?"long":i===5?"narrow":"short";break;case"y":t.year=i===2?"2-digit":"numeric";break;case"Y":case"u":case"U":case"r":throw new RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead");case"q":case"Q":throw new RangeError("`q/Q` (quarter) patterns are not supported");case"M":case"L":t.month=["numeric","2-digit","short","long","narrow"][i-1];break;case"w":case"W":throw new RangeError("`w/W` (week) patterns are not supported");case"d":t.day=["numeric","2-digit"][i-1];break;case"D":case"F":case"g":throw new RangeError("`D/F/g` (day) patterns are not supported, use `d` instead");case"E":t.weekday=i===4?"long":i===5?"narrow":"short";break;case"e":if(i<4)throw new RangeError("`e..eee` (weekday) patterns are not supported");t.weekday=["short","long","narrow","short"][i-4];break;case"c":if(i<4)throw new RangeError("`c..ccc` (weekday) patterns are not supported");t.weekday=["short","long","narrow","short"][i-4];break;case"a":t.hour12=!0;break;case"b":case"B":throw new RangeError("`b/B` (period) patterns are not supported, use `a` instead");case"h":t.hourCycle="h12",t.hour=["numeric","2-digit"][i-1];break;case"H":t.hourCycle="h23",t.hour=["numeric","2-digit"][i-1];break;case"K":t.hourCycle="h11",t.hour=["numeric","2-digit"][i-1];break;case"k":t.hourCycle="h24",t.hour=["numeric","2-digit"][i-1];break;case"j":case"J":case"C":throw new RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead");case"m":t.minute=["numeric","2-digit"][i-1];break;case"s":t.second=["numeric","2-digit"][i-1];break;case"S":case"A":throw new RangeError("`S/A` (second) patterns are not supported, use `s` instead");case"z":t.timeZoneName=i<4?"short":"long";break;case"Z":case"O":case"v":case"V":case"X":case"x":throw new RangeError("`Z/O/v/V/X/x` (timeZone) patterns are not supported, use `z` instead")}return""}),t}var P_=/[\t-\r \x85\u200E\u200F\u2028\u2029]/i;function O_(e){if(e.length===0)throw new Error("Number skeleton cannot be empty");for(var t=e.split(P_).filter(function(f){return f.length>0}),n=[],i=0,s=t;i<s.length;i++){var r=s[i],o=r.split("/");if(o.length===0)throw new Error("Invalid number skeleton");for(var a=o[0],l=o.slice(1),c=0,h=l;c<h.length;c++){var u=h[c];if(u.length===0)throw new Error("Invalid number skeleton")}n.push({stem:a,options:l})}return n}function L_(e){return e.replace(/^(.*?)-/,"")}var Zh=/^\.(?:(0+)(\*)?|(#+)|(0+)(#+))$/g,ag=/^(@+)?(\+|#+)?[rs]?$/g,I_=/(\*)(0+)|(#+)(0+)|(0+)/g,lg=/^(0+)$/;function td(e){var t={};return e[e.length-1]==="r"?t.roundingPriority="morePrecision":e[e.length-1]==="s"&&(t.roundingPriority="lessPrecision"),e.replace(ag,function(n,i,s){return typeof s!="string"?(t.minimumSignificantDigits=i.length,t.maximumSignificantDigits=i.length):s==="+"?t.minimumSignificantDigits=i.length:i[0]==="#"?t.maximumSignificantDigits=i.length:(t.minimumSignificantDigits=i.length,t.maximumSignificantDigits=i.length+(typeof s=="string"?s.length:0)),""}),t}function cg(e){switch(e){case"sign-auto":return{signDisplay:"auto"};case"sign-accounting":case"()":return{currencySign:"accounting"};case"sign-always":case"+!":return{signDisplay:"always"};case"sign-accounting-always":case"()!":return{signDisplay:"always",currencySign:"accounting"};case"sign-except-zero":case"+?":return{signDisplay:"exceptZero"};case"sign-accounting-except-zero":case"()?":return{signDisplay:"exceptZero",currencySign:"accounting"};case"sign-never":case"+_":return{signDisplay:"never"}}}function D_(e){var t;if(e[0]==="E"&&e[1]==="E"?(t={notation:"engineering"},e=e.slice(2)):e[0]==="E"&&(t={notation:"scientific"},e=e.slice(1)),t){var n=e.slice(0,2);if(n==="+!"?(t.signDisplay="always",e=e.slice(2)):n==="+?"&&(t.signDisplay="exceptZero",e=e.slice(2)),!lg.test(e))throw new Error("Malformed concise eng/scientific notation");t.minimumIntegerDigits=e.length}return t}function ed(e){var t={},n=cg(e);return n||t}function R_(e){for(var t={},n=0,i=e;n<i.length;n++){var s=i[n];switch(s.stem){case"percent":case"%":t.style="percent";continue;case"%x100":t.style="percent",t.scale=100;continue;case"currency":t.style="currency",t.currency=s.options[0];continue;case"group-off":case",_":t.useGrouping=!1;continue;case"precision-integer":case".":t.maximumFractionDigits=0;continue;case"measure-unit":case"unit":t.style="unit",t.unit=L_(s.options[0]);continue;case"compact-short":case"K":t.notation="compact",t.compactDisplay="short";continue;case"compact-long":case"KK":t.notation="compact",t.compactDisplay="long";continue;case"scientific":t=Mt(Mt(Mt({},t),{notation:"scientific"}),s.options.reduce(function(l,c){return Mt(Mt({},l),ed(c))},{}));continue;case"engineering":t=Mt(Mt(Mt({},t),{notation:"engineering"}),s.options.reduce(function(l,c){return Mt(Mt({},l),ed(c))},{}));continue;case"notation-simple":t.notation="standard";continue;case"unit-width-narrow":t.currencyDisplay="narrowSymbol",t.unitDisplay="narrow";continue;case"unit-width-short":t.currencyDisplay="code",t.unitDisplay="short";continue;case"unit-width-full-name":t.currencyDisplay="name",t.unitDisplay="long";continue;case"unit-width-iso-code":t.currencyDisplay="symbol";continue;case"scale":t.scale=parseFloat(s.options[0]);continue;case"rounding-mode-floor":t.roundingMode="floor";continue;case"rounding-mode-ceiling":t.roundingMode="ceil";continue;case"rounding-mode-down":t.roundingMode="trunc";continue;case"rounding-mode-up":t.roundingMode="expand";continue;case"rounding-mode-half-even":t.roundingMode="halfEven";continue;case"rounding-mode-half-down":t.roundingMode="halfTrunc";continue;case"rounding-mode-half-up":t.roundingMode="halfExpand";continue;case"integer-width":if(s.options.length>1)throw new RangeError("integer-width stems only accept a single optional option");s.options[0].replace(I_,function(l,c,h,u,f,g){if(c)t.minimumIntegerDigits=h.length;else{if(u&&f)throw new Error("We currently do not support maximum integer digits");if(g)throw new Error("We currently do not support exact integer digits")}return""});continue}if(lg.test(s.stem)){t.minimumIntegerDigits=s.stem.length;continue}if(Zh.test(s.stem)){if(s.options.length>1)throw new RangeError("Fraction-precision stems only accept a single optional option");s.stem.replace(Zh,function(l,c,h,u,f,g){return h==="*"?t.minimumFractionDigits=c.length:u&&u[0]==="#"?t.maximumFractionDigits=u.length:f&&g?(t.minimumFractionDigits=f.length,t.maximumFractionDigits=f.length+g.length):(t.minimumFractionDigits=c.length,t.maximumFractionDigits=c.length),""});var r=s.options[0];r==="w"?t=Mt(Mt({},t),{trailingZeroDisplay:"stripIfInteger"}):r&&(t=Mt(Mt({},t),td(r)));continue}if(ag.test(s.stem)){t=Mt(Mt({},t),td(s.stem));continue}var o=cg(s.stem);o&&(t=Mt(Mt({},t),o));var a=D_(s.stem);a&&(t=Mt(Mt({},t),a))}return t}var ho={"001":["H","h"],AC:["H","h","hb","hB"],AD:["H","hB"],AE:["h","hB","hb","H"],AF:["H","hb","hB","h"],AG:["h","hb","H","hB"],AI:["H","h","hb","hB"],AL:["h","H","hB"],AM:["H","hB"],AO:["H","hB"],AR:["H","h","hB","hb"],AS:["h","H"],AT:["H","hB"],AU:["h","hb","H","hB"],AW:["H","hB"],AX:["H"],AZ:["H","hB","h"],BA:["H","hB","h"],BB:["h","hb","H","hB"],BD:["h","hB","H"],BE:["H","hB"],BF:["H","hB"],BG:["H","hB","h"],BH:["h","hB","hb","H"],BI:["H","h"],BJ:["H","hB"],BL:["H","hB"],BM:["h","hb","H","hB"],BN:["hb","hB","h","H"],BO:["H","hB","h","hb"],BQ:["H"],BR:["H","hB"],BS:["h","hb","H","hB"],BT:["h","H"],BW:["H","h","hb","hB"],BY:["H","h"],BZ:["H","h","hb","hB"],CA:["h","hb","H","hB"],CC:["H","h","hb","hB"],CD:["hB","H"],CF:["H","h","hB"],CG:["H","hB"],CH:["H","hB","h"],CI:["H","hB"],CK:["H","h","hb","hB"],CL:["H","h","hB","hb"],CM:["H","h","hB"],CN:["H","hB","hb","h"],CO:["h","H","hB","hb"],CP:["H"],CR:["H","h","hB","hb"],CU:["H","h","hB","hb"],CV:["H","hB"],CW:["H","hB"],CX:["H","h","hb","hB"],CY:["h","H","hb","hB"],CZ:["H"],DE:["H","hB"],DG:["H","h","hb","hB"],DJ:["h","H"],DK:["H"],DM:["h","hb","H","hB"],DO:["h","H","hB","hb"],DZ:["h","hB","hb","H"],EA:["H","h","hB","hb"],EC:["H","hB","h","hb"],EE:["H","hB"],EG:["h","hB","hb","H"],EH:["h","hB","hb","H"],ER:["h","H"],ES:["H","hB","h","hb"],ET:["hB","hb","h","H"],FI:["H"],FJ:["h","hb","H","hB"],FK:["H","h","hb","hB"],FM:["h","hb","H","hB"],FO:["H","h"],FR:["H","hB"],GA:["H","hB"],GB:["H","h","hb","hB"],GD:["h","hb","H","hB"],GE:["H","hB","h"],GF:["H","hB"],GG:["H","h","hb","hB"],GH:["h","H"],GI:["H","h","hb","hB"],GL:["H","h"],GM:["h","hb","H","hB"],GN:["H","hB"],GP:["H","hB"],GQ:["H","hB","h","hb"],GR:["h","H","hb","hB"],GT:["H","h","hB","hb"],GU:["h","hb","H","hB"],GW:["H","hB"],GY:["h","hb","H","hB"],HK:["h","hB","hb","H"],HN:["H","h","hB","hb"],HR:["H","hB"],HU:["H","h"],IC:["H","h","hB","hb"],ID:["H"],IE:["H","h","hb","hB"],IL:["H","hB"],IM:["H","h","hb","hB"],IN:["h","H"],IO:["H","h","hb","hB"],IQ:["h","hB","hb","H"],IR:["hB","H"],IS:["H"],IT:["H","hB"],JE:["H","h","hb","hB"],JM:["h","hb","H","hB"],JO:["h","hB","hb","H"],JP:["H","K","h"],KE:["hB","hb","H","h"],KG:["H","h","hB","hb"],KH:["hB","h","H","hb"],KI:["h","hb","H","hB"],KM:["H","h","hB","hb"],KN:["h","hb","H","hB"],KP:["h","H","hB","hb"],KR:["h","H","hB","hb"],KW:["h","hB","hb","H"],KY:["h","hb","H","hB"],KZ:["H","hB"],LA:["H","hb","hB","h"],LB:["h","hB","hb","H"],LC:["h","hb","H","hB"],LI:["H","hB","h"],LK:["H","h","hB","hb"],LR:["h","hb","H","hB"],LS:["h","H"],LT:["H","h","hb","hB"],LU:["H","h","hB"],LV:["H","hB","hb","h"],LY:["h","hB","hb","H"],MA:["H","h","hB","hb"],MC:["H","hB"],MD:["H","hB"],ME:["H","hB","h"],MF:["H","hB"],MG:["H","h"],MH:["h","hb","H","hB"],MK:["H","h","hb","hB"],ML:["H"],MM:["hB","hb","H","h"],MN:["H","h","hb","hB"],MO:["h","hB","hb","H"],MP:["h","hb","H","hB"],MQ:["H","hB"],MR:["h","hB","hb","H"],MS:["H","h","hb","hB"],MT:["H","h"],MU:["H","h"],MV:["H","h"],MW:["h","hb","H","hB"],MX:["H","h","hB","hb"],MY:["hb","hB","h","H"],MZ:["H","hB"],NA:["h","H","hB","hb"],NC:["H","hB"],NE:["H"],NF:["H","h","hb","hB"],NG:["H","h","hb","hB"],NI:["H","h","hB","hb"],NL:["H","hB"],NO:["H","h"],NP:["H","h","hB"],NR:["H","h","hb","hB"],NU:["H","h","hb","hB"],NZ:["h","hb","H","hB"],OM:["h","hB","hb","H"],PA:["h","H","hB","hb"],PE:["H","hB","h","hb"],PF:["H","h","hB"],PG:["h","H"],PH:["h","hB","hb","H"],PK:["h","hB","H"],PL:["H","h"],PM:["H","hB"],PN:["H","h","hb","hB"],PR:["h","H","hB","hb"],PS:["h","hB","hb","H"],PT:["H","hB"],PW:["h","H"],PY:["H","h","hB","hb"],QA:["h","hB","hb","H"],RE:["H","hB"],RO:["H","hB"],RS:["H","hB","h"],RU:["H"],RW:["H","h"],SA:["h","hB","hb","H"],SB:["h","hb","H","hB"],SC:["H","h","hB"],SD:["h","hB","hb","H"],SE:["H"],SG:["h","hb","H","hB"],SH:["H","h","hb","hB"],SI:["H","hB"],SJ:["H"],SK:["H"],SL:["h","hb","H","hB"],SM:["H","h","hB"],SN:["H","h","hB"],SO:["h","H"],SR:["H","hB"],SS:["h","hb","H","hB"],ST:["H","hB"],SV:["H","h","hB","hb"],SX:["H","h","hb","hB"],SY:["h","hB","hb","H"],SZ:["h","hb","H","hB"],TA:["H","h","hb","hB"],TC:["h","hb","H","hB"],TD:["h","H","hB"],TF:["H","h","hB"],TG:["H","hB"],TH:["H","h"],TJ:["H","h"],TL:["H","hB","hb","h"],TM:["H","h"],TN:["h","hB","hb","H"],TO:["h","H"],TR:["H","hB"],TT:["h","hb","H","hB"],TW:["hB","hb","h","H"],TZ:["hB","hb","H","h"],UA:["H","hB","h"],UG:["hB","hb","H","h"],UM:["h","hb","H","hB"],US:["h","hb","H","hB"],UY:["H","h","hB","hb"],UZ:["H","hB","h"],VA:["H","h","hB"],VC:["h","hb","H","hB"],VE:["h","H","hB","hb"],VG:["h","hb","H","hB"],VI:["h","hb","H","hB"],VN:["H","h"],VU:["h","H"],WF:["H","hB"],WS:["h","H"],XK:["H","hB","h"],YE:["h","hB","hb","H"],YT:["H","hB"],ZA:["H","h","hb","hB"],ZM:["h","hb","H","hB"],ZW:["H","h"],"af-ZA":["H","h","hB","hb"],"ar-001":["h","hB","hb","H"],"ca-ES":["H","h","hB"],"en-001":["h","hb","H","hB"],"es-BO":["H","h","hB","hb"],"es-BR":["H","h","hB","hb"],"es-EC":["H","h","hB","hb"],"es-ES":["H","h","hB","hb"],"es-GQ":["H","h","hB","hb"],"es-PE":["H","h","hB","hb"],"fr-CA":["H","h","hB"],"gl-ES":["H","h","hB"],"gu-IN":["hB","hb","h","H"],"hi-IN":["hB","h","H"],"it-CH":["H","h","hB"],"it-IT":["H","h","hB"],"kn-IN":["hB","h","H"],"ml-IN":["hB","h","H"],"mr-IN":["hB","hb","h","H"],"pa-IN":["hB","hb","h","H"],"ta-IN":["hB","h","hb","H"],"te-IN":["hB","h","H"],"zu-ZA":["H","hB","hb","h"]};function M_(e,t){for(var n="",i=0;i<e.length;i++){var s=e.charAt(i);if(s==="j"){for(var r=0;i+1<e.length&&e.charAt(i+1)===s;)r++,i++;var o=1+(r&1),a=r<2?1:3+(r>>1),l="a",c=N_(t);for((c=="H"||c=="k")&&(a=0);a-- >0;)n+=l;for(;o-- >0;)n=c+n}else s==="J"?n+="H":n+=s}return n}function N_(e){var t=e.hourCycle;if(t===void 0&&e.hourCycles&&e.hourCycles.length&&(t=e.hourCycles[0]),t)switch(t){case"h24":return"k";case"h23":return"H";case"h12":return"h";case"h11":return"K";default:throw new Error("Invalid hourCycle")}var n=e.language,i;n!=="root"&&(i=e.maximize().region);var s=ho[i||""]||ho[n||""]||ho["".concat(n,"-001")]||ho["001"];return s[0]}var _l,F_=new RegExp("^".concat(og.source,"*")),B_=new RegExp("".concat(og.source,"*$"));function Lt(e,t){return{start:e,end:t}}var H_=!!String.prototype.startsWith&&"_a".startsWith("a",1),U_=!!String.fromCodePoint,V_=!!Object.fromEntries,j_=!!String.prototype.codePointAt,K_=!!String.prototype.trimStart,q_=!!String.prototype.trimEnd,G_=!!Number.isSafeInteger,W_=G_?Number.isSafeInteger:function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e&&Math.abs(e)<=9007199254740991},ec=!0;try{var z_=hg("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");ec=((_l=z_.exec("a"))===null||_l===void 0?void 0:_l[0])==="a"}catch{ec=!1}var nd=H_?function(t,n,i){return t.startsWith(n,i)}:function(t,n,i){return t.slice(i,i+n.length)===n},nc=U_?String.fromCodePoint:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var i="",s=t.length,r=0,o;s>r;){if(o=t[r++],o>1114111)throw RangeError(o+" is not a valid code point");i+=o<65536?String.fromCharCode(o):String.fromCharCode(((o-=65536)>>10)+55296,o%1024+56320)}return i},id=V_?Object.fromEntries:function(t){for(var n={},i=0,s=t;i<s.length;i++){var r=s[i],o=r[0],a=r[1];n[o]=a}return n},ug=j_?function(t,n){return t.codePointAt(n)}:function(t,n){var i=t.length;if(!(n<0||n>=i)){var s=t.charCodeAt(n),r;return s<55296||s>56319||n+1===i||(r=t.charCodeAt(n+1))<56320||r>57343?s:(s-55296<<10)+(r-56320)+65536}},Y_=K_?function(t){return t.trimStart()}:function(t){return t.replace(F_,"")},X_=q_?function(t){return t.trimEnd()}:function(t){return t.replace(B_,"")};function hg(e,t){return new RegExp(e,t)}var ic;if(ec){var sd=hg("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");ic=function(t,n){var i;sd.lastIndex=n;var s=sd.exec(t);return(i=s[1])!==null&&i!==void 0?i:""}}else ic=function(t,n){for(var i=[];;){var s=ug(t,n);if(s===void 0||dg(s)||tE(s))break;i.push(s),n+=s>=65536?2:1}return nc.apply(void 0,i)};var Q_=function(){function e(t,n){n===void 0&&(n={}),this.message=t,this.position={offset:0,line:1,column:1},this.ignoreTag=!!n.ignoreTag,this.locale=n.locale,this.requiresOtherClause=!!n.requiresOtherClause,this.shouldParseSkeletons=!!n.shouldParseSkeletons}return e.prototype.parse=function(){if(this.offset()!==0)throw Error("parser can only be used once");return this.parseMessage(0,"",!1)},e.prototype.parseMessage=function(t,n,i){for(var s=[];!this.isEOF();){var r=this.char();if(r===123){var o=this.parseArgument(t,i);if(o.err)return o;s.push(o.val)}else{if(r===125&&t>0)break;if(r===35&&(n==="plural"||n==="selectordinal")){var a=this.clonePosition();this.bump(),s.push({type:Yt.pound,location:Lt(a,this.clonePosition())})}else if(r===60&&!this.ignoreTag&&this.peek()===47){if(i)break;return this.error(At.UNMATCHED_CLOSING_TAG,Lt(this.clonePosition(),this.clonePosition()))}else if(r===60&&!this.ignoreTag&&sc(this.peek()||0)){var o=this.parseTag(t,n);if(o.err)return o;s.push(o.val)}else{var o=this.parseLiteral(t,n);if(o.err)return o;s.push(o.val)}}}return{val:s,err:null}},e.prototype.parseTag=function(t,n){var i=this.clonePosition();this.bump();var s=this.parseTagName();if(this.bumpSpace(),this.bumpIf("/>"))return{val:{type:Yt.literal,value:"<".concat(s,"/>"),location:Lt(i,this.clonePosition())},err:null};if(this.bumpIf(">")){var r=this.parseMessage(t+1,n,!0);if(r.err)return r;var o=r.val,a=this.clonePosition();if(this.bumpIf("</")){if(this.isEOF()||!sc(this.char()))return this.error(At.INVALID_TAG,Lt(a,this.clonePosition()));var l=this.clonePosition(),c=this.parseTagName();return s!==c?this.error(At.UNMATCHED_CLOSING_TAG,Lt(l,this.clonePosition())):(this.bumpSpace(),this.bumpIf(">")?{val:{type:Yt.tag,value:s,children:o,location:Lt(i,this.clonePosition())},err:null}:this.error(At.INVALID_TAG,Lt(a,this.clonePosition())))}else return this.error(At.UNCLOSED_TAG,Lt(i,this.clonePosition()))}else return this.error(At.INVALID_TAG,Lt(i,this.clonePosition()))},e.prototype.parseTagName=function(){var t=this.offset();for(this.bump();!this.isEOF()&&Z_(this.char());)this.bump();return this.message.slice(t,this.offset())},e.prototype.parseLiteral=function(t,n){for(var i=this.clonePosition(),s="";;){var r=this.tryParseQuote(n);if(r){s+=r;continue}var o=this.tryParseUnquoted(t,n);if(o){s+=o;continue}var a=this.tryParseLeftAngleBracket();if(a){s+=a;continue}break}var l=Lt(i,this.clonePosition());return{val:{type:Yt.literal,value:s,location:l},err:null}},e.prototype.tryParseLeftAngleBracket=function(){return!this.isEOF()&&this.char()===60&&(this.ignoreTag||!J_(this.peek()||0))?(this.bump(),"<"):null},e.prototype.tryParseQuote=function(t){if(this.isEOF()||this.char()!==39)return null;switch(this.peek()){case 39:return this.bump(),this.bump(),"'";case 123:case 60:case 62:case 125:break;case 35:if(t==="plural"||t==="selectordinal")break;return null;default:return null}this.bump();var n=[this.char()];for(this.bump();!this.isEOF();){var i=this.char();if(i===39)if(this.peek()===39)n.push(39),this.bump();else{this.bump();break}else n.push(i);this.bump()}return nc.apply(void 0,n)},e.prototype.tryParseUnquoted=function(t,n){if(this.isEOF())return null;var i=this.char();return i===60||i===123||i===35&&(n==="plural"||n==="selectordinal")||i===125&&t>0?null:(this.bump(),nc(i))},e.prototype.parseArgument=function(t,n){var i=this.clonePosition();if(this.bump(),this.bumpSpace(),this.isEOF())return this.error(At.EXPECT_ARGUMENT_CLOSING_BRACE,Lt(i,this.clonePosition()));if(this.char()===125)return this.bump(),this.error(At.EMPTY_ARGUMENT,Lt(i,this.clonePosition()));var s=this.parseIdentifierIfPossible().value;if(!s)return this.error(At.MALFORMED_ARGUMENT,Lt(i,this.clonePosition()));if(this.bumpSpace(),this.isEOF())return this.error(At.EXPECT_ARGUMENT_CLOSING_BRACE,Lt(i,this.clonePosition()));switch(this.char()){case 125:return this.bump(),{val:{type:Yt.argument,value:s,location:Lt(i,this.clonePosition())},err:null};case 44:return this.bump(),this.bumpSpace(),this.isEOF()?this.error(At.EXPECT_ARGUMENT_CLOSING_BRACE,Lt(i,this.clonePosition())):this.parseArgumentOptions(t,n,s,i);default:return this.error(At.MALFORMED_ARGUMENT,Lt(i,this.clonePosition()))}},e.prototype.parseIdentifierIfPossible=function(){var t=this.clonePosition(),n=this.offset(),i=ic(this.message,n),s=n+i.length;this.bumpTo(s);var r=this.clonePosition(),o=Lt(t,r);return{value:i,location:o}},e.prototype.parseArgumentOptions=function(t,n,i,s){var r,o=this.clonePosition(),a=this.parseIdentifierIfPossible().value,l=this.clonePosition();switch(a){case"":return this.error(At.EXPECT_ARGUMENT_TYPE,Lt(o,l));case"number":case"date":case"time":{this.bumpSpace();var c=null;if(this.bumpIf(",")){this.bumpSpace();var h=this.clonePosition(),u=this.parseSimpleArgStyleIfPossible();if(u.err)return u;var f=X_(u.val);if(f.length===0)return this.error(At.EXPECT_ARGUMENT_STYLE,Lt(this.clonePosition(),this.clonePosition()));var g=Lt(h,this.clonePosition());c={style:f,styleLocation:g}}var p=this.tryParseArgumentClose(s);if(p.err)return p;var y=Lt(s,this.clonePosition());if(c&&nd(c?.style,"::",0)){var x=Y_(c.style.slice(2));if(a==="number"){var u=this.parseNumberSkeletonFromString(x,c.styleLocation);return u.err?u:{val:{type:Yt.number,value:i,location:y,style:u.val},err:null}}else{if(x.length===0)return this.error(At.EXPECT_DATE_TIME_SKELETON,y);var S=x;this.locale&&(S=M_(x,this.locale));var f={type:As.dateTime,pattern:S,location:c.styleLocation,parsedOptions:this.shouldParseSkeletons?A_(S):{}},E=a==="date"?Yt.date:Yt.time;return{val:{type:E,value:i,location:y,style:f},err:null}}}return{val:{type:a==="number"?Yt.number:a==="date"?Yt.date:Yt.time,value:i,location:y,style:(r=c?.style)!==null&&r!==void 0?r:null},err:null}}case"plural":case"selectordinal":case"select":{var b=this.clonePosition();if(this.bumpSpace(),!this.bumpIf(","))return this.error(At.EXPECT_SELECT_ARGUMENT_OPTIONS,Lt(b,Mt({},b)));this.bumpSpace();var _=this.parseIdentifierIfPossible(),w=0;if(a!=="select"&&_.value==="offset"){if(!this.bumpIf(":"))return this.error(At.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,Lt(this.clonePosition(),this.clonePosition()));this.bumpSpace();var u=this.tryParseDecimalInteger(At.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,At.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE);if(u.err)return u;this.bumpSpace(),_=this.parseIdentifierIfPossible(),w=u.val}var T=this.tryParsePluralOrSelectOptions(t,a,n,_);if(T.err)return T;var p=this.tryParseArgumentClose(s);if(p.err)return p;var C=Lt(s,this.clonePosition());return a==="select"?{val:{type:Yt.select,value:i,options:id(T.val),location:C},err:null}:{val:{type:Yt.plural,value:i,options:id(T.val),offset:w,pluralType:a==="plural"?"cardinal":"ordinal",location:C},err:null}}default:return this.error(At.INVALID_ARGUMENT_TYPE,Lt(o,l))}},e.prototype.tryParseArgumentClose=function(t){return this.isEOF()||this.char()!==125?this.error(At.EXPECT_ARGUMENT_CLOSING_BRACE,Lt(t,this.clonePosition())):(this.bump(),{val:!0,err:null})},e.prototype.parseSimpleArgStyleIfPossible=function(){for(var t=0,n=this.clonePosition();!this.isEOF();){var i=this.char();switch(i){case 39:{this.bump();var s=this.clonePosition();if(!this.bumpUntil("'"))return this.error(At.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE,Lt(s,this.clonePosition()));this.bump();break}case 123:{t+=1,this.bump();break}case 125:{if(t>0)t-=1;else return{val:this.message.slice(n.offset,this.offset()),err:null};break}default:this.bump();break}}return{val:this.message.slice(n.offset,this.offset()),err:null}},e.prototype.parseNumberSkeletonFromString=function(t,n){var i=[];try{i=O_(t)}catch{return this.error(At.INVALID_NUMBER_SKELETON,n)}return{val:{type:As.number,tokens:i,location:n,parsedOptions:this.shouldParseSkeletons?R_(i):{}},err:null}},e.prototype.tryParsePluralOrSelectOptions=function(t,n,i,s){for(var r,o=!1,a=[],l=new Set,c=s.value,h=s.location;;){if(c.length===0){var u=this.clonePosition();if(n!=="select"&&this.bumpIf("=")){var f=this.tryParseDecimalInteger(At.EXPECT_PLURAL_ARGUMENT_SELECTOR,At.INVALID_PLURAL_ARGUMENT_SELECTOR);if(f.err)return f;h=Lt(u,this.clonePosition()),c=this.message.slice(u.offset,this.offset())}else break}if(l.has(c))return this.error(n==="select"?At.DUPLICATE_SELECT_ARGUMENT_SELECTOR:At.DUPLICATE_PLURAL_ARGUMENT_SELECTOR,h);c==="other"&&(o=!0),this.bumpSpace();var g=this.clonePosition();if(!this.bumpIf("{"))return this.error(n==="select"?At.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT:At.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT,Lt(this.clonePosition(),this.clonePosition()));var p=this.parseMessage(t+1,n,i);if(p.err)return p;var y=this.tryParseArgumentClose(g);if(y.err)return y;a.push([c,{value:p.val,location:Lt(g,this.clonePosition())}]),l.add(c),this.bumpSpace(),r=this.parseIdentifierIfPossible(),c=r.value,h=r.location}return a.length===0?this.error(n==="select"?At.EXPECT_SELECT_ARGUMENT_SELECTOR:At.EXPECT_PLURAL_ARGUMENT_SELECTOR,Lt(this.clonePosition(),this.clonePosition())):this.requiresOtherClause&&!o?this.error(At.MISSING_OTHER_CLAUSE,Lt(this.clonePosition(),this.clonePosition())):{val:a,err:null}},e.prototype.tryParseDecimalInteger=function(t,n){var i=1,s=this.clonePosition();this.bumpIf("+")||this.bumpIf("-")&&(i=-1);for(var r=!1,o=0;!this.isEOF();){var a=this.char();if(a>=48&&a<=57)r=!0,o=o*10+(a-48),this.bump();else break}var l=Lt(s,this.clonePosition());return r?(o*=i,W_(o)?{val:o,err:null}:this.error(n,l)):this.error(t,l)},e.prototype.offset=function(){return this.position.offset},e.prototype.isEOF=function(){return this.offset()===this.message.length},e.prototype.clonePosition=function(){return{offset:this.position.offset,line:this.position.line,column:this.position.column}},e.prototype.char=function(){var t=this.position.offset;if(t>=this.message.length)throw Error("out of bound");var n=ug(this.message,t);if(n===void 0)throw Error("Offset ".concat(t," is at invalid UTF-16 code unit boundary"));return n},e.prototype.error=function(t,n){return{val:null,err:{kind:t,message:this.message,location:n}}},e.prototype.bump=function(){if(!this.isEOF()){var t=this.char();t===10?(this.position.line+=1,this.position.column=1,this.position.offset+=1):(this.position.column+=1,this.position.offset+=t<65536?1:2)}},e.prototype.bumpIf=function(t){if(nd(this.message,t,this.offset())){for(var n=0;n<t.length;n++)this.bump();return!0}return!1},e.prototype.bumpUntil=function(t){var n=this.offset(),i=this.message.indexOf(t,n);return i>=0?(this.bumpTo(i),!0):(this.bumpTo(this.message.length),!1)},e.prototype.bumpTo=function(t){if(this.offset()>t)throw Error("targetOffset ".concat(t," must be greater than or equal to the current offset ").concat(this.offset()));for(t=Math.min(t,this.message.length);;){var n=this.offset();if(n===t)break;if(n>t)throw Error("targetOffset ".concat(t," is at invalid UTF-16 code unit boundary"));if(this.bump(),this.isEOF())break}},e.prototype.bumpSpace=function(){for(;!this.isEOF()&&dg(this.char());)this.bump()},e.prototype.peek=function(){if(this.isEOF())return null;var t=this.char(),n=this.offset(),i=this.message.charCodeAt(n+(t>=65536?2:1));return i??null},e}();function sc(e){return e>=97&&e<=122||e>=65&&e<=90}function J_(e){return sc(e)||e===47}function Z_(e){return e===45||e===46||e>=48&&e<=57||e===95||e>=97&&e<=122||e>=65&&e<=90||e==183||e>=192&&e<=214||e>=216&&e<=246||e>=248&&e<=893||e>=895&&e<=8191||e>=8204&&e<=8205||e>=8255&&e<=8256||e>=8304&&e<=8591||e>=11264&&e<=12271||e>=12289&&e<=55295||e>=63744&&e<=64975||e>=65008&&e<=65533||e>=65536&&e<=983039}function dg(e){return e>=9&&e<=13||e===32||e===133||e>=8206&&e<=8207||e===8232||e===8233}function tE(e){return e>=33&&e<=35||e===36||e>=37&&e<=39||e===40||e===41||e===42||e===43||e===44||e===45||e>=46&&e<=47||e>=58&&e<=59||e>=60&&e<=62||e>=63&&e<=64||e===91||e===92||e===93||e===94||e===96||e===123||e===124||e===125||e===126||e===161||e>=162&&e<=165||e===166||e===167||e===169||e===171||e===172||e===174||e===176||e===177||e===182||e===187||e===191||e===215||e===247||e>=8208&&e<=8213||e>=8214&&e<=8215||e===8216||e===8217||e===8218||e>=8219&&e<=8220||e===8221||e===8222||e===8223||e>=8224&&e<=8231||e>=8240&&e<=8248||e===8249||e===8250||e>=8251&&e<=8254||e>=8257&&e<=8259||e===8260||e===8261||e===8262||e>=8263&&e<=8273||e===8274||e===8275||e>=8277&&e<=8286||e>=8592&&e<=8596||e>=8597&&e<=8601||e>=8602&&e<=8603||e>=8604&&e<=8607||e===8608||e>=8609&&e<=8610||e===8611||e>=8612&&e<=8613||e===8614||e>=8615&&e<=8621||e===8622||e>=8623&&e<=8653||e>=8654&&e<=8655||e>=8656&&e<=8657||e===8658||e===8659||e===8660||e>=8661&&e<=8691||e>=8692&&e<=8959||e>=8960&&e<=8967||e===8968||e===8969||e===8970||e===8971||e>=8972&&e<=8991||e>=8992&&e<=8993||e>=8994&&e<=9e3||e===9001||e===9002||e>=9003&&e<=9083||e===9084||e>=9085&&e<=9114||e>=9115&&e<=9139||e>=9140&&e<=9179||e>=9180&&e<=9185||e>=9186&&e<=9254||e>=9255&&e<=9279||e>=9280&&e<=9290||e>=9291&&e<=9311||e>=9472&&e<=9654||e===9655||e>=9656&&e<=9664||e===9665||e>=9666&&e<=9719||e>=9720&&e<=9727||e>=9728&&e<=9838||e===9839||e>=9840&&e<=10087||e===10088||e===10089||e===10090||e===10091||e===10092||e===10093||e===10094||e===10095||e===10096||e===10097||e===10098||e===10099||e===10100||e===10101||e>=10132&&e<=10175||e>=10176&&e<=10180||e===10181||e===10182||e>=10183&&e<=10213||e===10214||e===10215||e===10216||e===10217||e===10218||e===10219||e===10220||e===10221||e===10222||e===10223||e>=10224&&e<=10239||e>=10240&&e<=10495||e>=10496&&e<=10626||e===10627||e===10628||e===10629||e===10630||e===10631||e===10632||e===10633||e===10634||e===10635||e===10636||e===10637||e===10638||e===10639||e===10640||e===10641||e===10642||e===10643||e===10644||e===10645||e===10646||e===10647||e===10648||e>=10649&&e<=10711||e===10712||e===10713||e===10714||e===10715||e>=10716&&e<=10747||e===10748||e===10749||e>=10750&&e<=11007||e>=11008&&e<=11055||e>=11056&&e<=11076||e>=11077&&e<=11078||e>=11079&&e<=11084||e>=11085&&e<=11123||e>=11124&&e<=11125||e>=11126&&e<=11157||e===11158||e>=11159&&e<=11263||e>=11776&&e<=11777||e===11778||e===11779||e===11780||e===11781||e>=11782&&e<=11784||e===11785||e===11786||e===11787||e===11788||e===11789||e>=11790&&e<=11798||e===11799||e>=11800&&e<=11801||e===11802||e===11803||e===11804||e===11805||e>=11806&&e<=11807||e===11808||e===11809||e===11810||e===11811||e===11812||e===11813||e===11814||e===11815||e===11816||e===11817||e>=11818&&e<=11822||e===11823||e>=11824&&e<=11833||e>=11834&&e<=11835||e>=11836&&e<=11839||e===11840||e===11841||e===11842||e>=11843&&e<=11855||e>=11856&&e<=11857||e===11858||e>=11859&&e<=11903||e>=12289&&e<=12291||e===12296||e===12297||e===12298||e===12299||e===12300||e===12301||e===12302||e===12303||e===12304||e===12305||e>=12306&&e<=12307||e===12308||e===12309||e===12310||e===12311||e===12312||e===12313||e===12314||e===12315||e===12316||e===12317||e>=12318&&e<=12319||e===12320||e===12336||e===64830||e===64831||e>=65093&&e<=65094}function rc(e){e.forEach(function(t){if(delete t.location,ng(t)||ig(t))for(var n in t.options)delete t.options[n].location,rc(t.options[n].value);else Zp(t)&&rg(t.style)||(tg(t)||eg(t))&&tc(t.style)?delete t.style.location:sg(t)&&rc(t.children)})}function eE(e,t){t===void 0&&(t={}),t=Mt({shouldParseSkeletons:!0,requiresOtherClause:!0},t);var n=new Q_(e,t).parse();if(n.err){var i=SyntaxError(At[n.err.kind]);throw i.location=n.err.location,i.originalMessage=n.err.message,i}return t?.captureLocation||rc(n.val),n.val}function El(e,t){var n=t&&t.cache?t.cache:aE,i=t&&t.serializer?t.serializer:oE,s=t&&t.strategy?t.strategy:iE;return s(e,{cache:n,serializer:i})}function nE(e){return e==null||typeof e=="number"||typeof e=="boolean"}function fg(e,t,n,i){var s=nE(i)?i:n(i),r=t.get(s);return typeof r>"u"&&(r=e.call(this,i),t.set(s,r)),r}function pg(e,t,n){var i=Array.prototype.slice.call(arguments,3),s=n(i),r=t.get(s);return typeof r>"u"&&(r=e.apply(this,i),t.set(s,r)),r}function uu(e,t,n,i,s){return n.bind(t,e,i,s)}function iE(e,t){var n=e.length===1?fg:pg;return uu(e,this,n,t.cache.create(),t.serializer)}function sE(e,t){return uu(e,this,pg,t.cache.create(),t.serializer)}function rE(e,t){return uu(e,this,fg,t.cache.create(),t.serializer)}var oE=function(){return JSON.stringify(arguments)};function hu(){this.cache=Object.create(null)}hu.prototype.get=function(e){return this.cache[e]};hu.prototype.set=function(e,t){this.cache[e]=t};var aE={create:function(){return new hu}},Sl={variadic:sE,monadic:rE},Ps;(function(e){e.MISSING_VALUE="MISSING_VALUE",e.INVALID_VALUE="INVALID_VALUE",e.MISSING_INTL_API="MISSING_INTL_API"})(Ps||(Ps={}));var Ta=function(e){xa(t,e);function t(n,i,s){var r=e.call(this,n)||this;return r.code=i,r.originalMessage=s,r}return t.prototype.toString=function(){return"[formatjs Error: ".concat(this.code,"] ").concat(this.message)},t}(Error),rd=function(e){xa(t,e);function t(n,i,s,r){return e.call(this,'Invalid values for "'.concat(n,'": "').concat(i,'". Options are "').concat(Object.keys(s).join('", "'),'"'),Ps.INVALID_VALUE,r)||this}return t}(Ta),lE=function(e){xa(t,e);function t(n,i,s){return e.call(this,'Value for "'.concat(n,'" must be of type ').concat(i),Ps.INVALID_VALUE,s)||this}return t}(Ta),cE=function(e){xa(t,e);function t(n,i){return e.call(this,'The intl string context variable "'.concat(n,'" was not provided to the string "').concat(i,'"'),Ps.MISSING_VALUE,i)||this}return t}(Ta),Ie;(function(e){e[e.literal=0]="literal",e[e.object=1]="object"})(Ie||(Ie={}));function uE(e){return e.length<2?e:e.reduce(function(t,n){var i=t[t.length-1];return!i||i.type!==Ie.literal||n.type!==Ie.literal?t.push(n):i.value+=n.value,t},[])}function hE(e){return typeof e=="function"}function xo(e,t,n,i,s,r,o){if(e.length===1&&Jh(e[0]))return[{type:Ie.literal,value:e[0].value}];for(var a=[],l=0,c=e;l<c.length;l++){var h=c[l];if(Jh(h)){a.push({type:Ie.literal,value:h.value});continue}if($_(h)){typeof r=="number"&&a.push({type:Ie.literal,value:n.getNumberFormat(t).format(r)});continue}var u=h.value;if(!(s&&u in s))throw new cE(u,o);var f=s[u];if(C_(h)){(!f||typeof f=="string"||typeof f=="number")&&(f=typeof f=="string"||typeof f=="number"?String(f):""),a.push({type:typeof f=="string"?Ie.literal:Ie.object,value:f});continue}if(tg(h)){var g=typeof h.style=="string"?i.date[h.style]:tc(h.style)?h.style.parsedOptions:void 0;a.push({type:Ie.literal,value:n.getDateTimeFormat(t,g).format(f)});continue}if(eg(h)){var g=typeof h.style=="string"?i.time[h.style]:tc(h.style)?h.style.parsedOptions:i.time.medium;a.push({type:Ie.literal,value:n.getDateTimeFormat(t,g).format(f)});continue}if(Zp(h)){var g=typeof h.style=="string"?i.number[h.style]:rg(h.style)?h.style.parsedOptions:void 0;g&&g.scale&&(f=f*(g.scale||1)),a.push({type:Ie.literal,value:n.getNumberFormat(t,g).format(f)});continue}if(sg(h)){var p=h.children,y=h.value,x=s[y];if(!hE(x))throw new lE(y,"function",o);var S=xo(p,t,n,i,s,r),E=x(S.map(function(w){return w.value}));Array.isArray(E)||(E=[E]),a.push.apply(a,E.map(function(w){return{type:typeof w=="string"?Ie.literal:Ie.object,value:w}}))}if(ng(h)){var b=h.options[f]||h.options.other;if(!b)throw new rd(h.value,f,Object.keys(h.options),o);a.push.apply(a,xo(b.value,t,n,i,s));continue}if(ig(h)){var b=h.options["=".concat(f)];if(!b){if(!Intl.PluralRules)throw new Ta(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,Ps.MISSING_INTL_API,o);var _=n.getPluralRules(t,{type:h.pluralType}).select(f-(h.offset||0));b=h.options[_]||h.options.other}if(!b)throw new rd(h.value,f,Object.keys(h.options),o);a.push.apply(a,xo(b.value,t,n,i,s,f-(h.offset||0)));continue}}return uE(a)}function dE(e,t){return t?Mt(Mt(Mt({},e||{}),t||{}),Object.keys(e).reduce(function(n,i){return n[i]=Mt(Mt({},e[i]),t[i]||{}),n},{})):e}function fE(e,t){return t?Object.keys(e).reduce(function(n,i){return n[i]=dE(e[i],t[i]),n},Mt({},e)):e}function xl(e){return{create:function(){return{get:function(t){return e[t]},set:function(t,n){e[t]=n}}}}}function pE(e){return e===void 0&&(e={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:El(function(){for(var t,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return new((t=Intl.NumberFormat).bind.apply(t,wl([void 0],n,!1)))},{cache:xl(e.number),strategy:Sl.variadic}),getDateTimeFormat:El(function(){for(var t,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return new((t=Intl.DateTimeFormat).bind.apply(t,wl([void 0],n,!1)))},{cache:xl(e.dateTime),strategy:Sl.variadic}),getPluralRules:El(function(){for(var t,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return new((t=Intl.PluralRules).bind.apply(t,wl([void 0],n,!1)))},{cache:xl(e.pluralRules),strategy:Sl.variadic})}}var gE=function(){function e(t,n,i,s){var r=this;if(n===void 0&&(n=e.defaultLocale),this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(l){var c=r.formatToParts(l);if(c.length===1)return c[0].value;var h=c.reduce(function(u,f){return!u.length||f.type!==Ie.literal||typeof u[u.length-1]!="string"?u.push(f.value):u[u.length-1]+=f.value,u},[]);return h.length<=1?h[0]||"":h},this.formatToParts=function(l){return xo(r.ast,r.locales,r.formatters,r.formats,l,void 0,r.message)},this.resolvedOptions=function(){var l;return{locale:((l=r.resolvedLocale)===null||l===void 0?void 0:l.toString())||Intl.NumberFormat.supportedLocalesOf(r.locales)[0]}},this.getAst=function(){return r.ast},this.locales=n,this.resolvedLocale=e.resolveLocale(n),typeof t=="string"){if(this.message=t,!e.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");var o=s||{};o.formatters;var a=T_(o,["formatters"]);this.ast=e.__parse(t,Mt(Mt({},a),{locale:this.resolvedLocale}))}else this.ast=t;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=fE(e.formats,i),this.formatters=s&&s.formatters||pE(this.formatterCache)}return Object.defineProperty(e,"defaultLocale",{get:function(){return e.memoizedDefaultLocale||(e.memoizedDefaultLocale=new Intl.NumberFormat().resolvedOptions().locale),e.memoizedDefaultLocale},enumerable:!1,configurable:!0}),e.memoizedDefaultLocale=null,e.resolveLocale=function(t){if(!(typeof Intl.Locale>"u")){var n=Intl.NumberFormat.supportedLocalesOf(t);return n.length>0?new Intl.Locale(n[0]):new Intl.Locale(typeof t=="string"?t:t[0])}},e.__parse=eE,e.formats={number:{integer:{maximumFractionDigits:0},currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},e}();class mE{getStringForLocale(t,n){let i=this.messages[n];i||(i=bE(n,this.messages,this.defaultLocale),this.messages[n]=i);let s=i[t];if(!s)throw new Error(`Could not find intl message ${t} in ${n} locale`);return s}constructor(t,n="en-US"){this.messages={...t},this.defaultLocale=n}}function bE(e,t,n="en-US"){if(t[e])return t[e];let i=yE(e);if(t[i])return t[i];for(let s in t)if(s.startsWith(i+"-"))return t[s];return t[n]}function yE(e){return Intl.Locale?new Intl.Locale(e).language:e.split("-")[0]}class vE{format(t,n){let i=this.cache[t];if(!i){let r=this.messages.getStringForLocale(t,this.locale);if(!r)throw new Error(`Could not find intl message ${t} in ${this.locale} locale`);i=new gE(r,this.locale),this.cache[t]=i}let s;return n&&(s=Object.keys(n).reduce((r,o)=>(r[o]=n[o]==null?!1:n[o],r),{})),i.format(s)}constructor(t,n){this.locale=t,this.messages=n,this.cache={}}}/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/23c3a91e7b87952f07da9da115188bd2abd99d77/packages/@react-aria/i18n/src/useMessageFormatter.ts
 */const od=new WeakMap;function wE(e){let t=od.get(e);return t||(t=new mE(e),od.set(e,t)),t}function gg(e){const{locale:t}=Sa(),n=dt(()=>new vE(t(),wE(V(e))));return dt(()=>({format:(i,s)=>n().format(i,s)}))}/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/bfce84fee12a027d9cbc38b43e1747e3e4b4b169/packages/@react-stately/selection/src/Selection.ts
 * https://github.com/adobe/react-spectrum/blob/bfce84fee12a027d9cbc38b43e1747e3e4b4b169/packages/@react-stately/selection/src/types.ts
 * https://github.com/adobe/react-spectrum/blob/bfce84fee12a027d9cbc38b43e1747e3e4b4b169/packages/@react-types/shared/src/selection.d.ts
 */class an extends Set{anchorKey;currentKey;constructor(t,n,i){super(t),t instanceof an?(this.anchorKey=n||t.anchorKey,this.currentKey=i||t.currentKey):(this.anchorKey=n,this.currentKey=i)}}function _E(e){const[t,n]=ru(e);return[()=>t()??new an,n]}/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/8f2f2acb3d5850382ebe631f055f88c704aa7d17/packages/@react-aria/selection/src/utils.ts
 */function mg(e){return $w()?e.altKey:e.ctrlKey}function ps(e){return Br()?e.metaKey:e.ctrlKey}function ad(e){return new an(e)}function EE(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/bfce84fee12a027d9cbc38b43e1747e3e4b4b169/packages/@react-stately/selection/src/useMultipleSelectionState.ts
 */function SE(e){e=Rt({selectionMode:"none",selectionBehavior:"toggle"},e);const[t,n]=G(!1),[i,s]=G(),r=dt(()=>{const p=V(e.selectedKeys);return p!=null?ad(p):p}),o=dt(()=>{const p=V(e.defaultSelectedKeys);return p!=null?ad(p):new an}),[a,l]=_E({value:r,defaultValue:o,onChange:p=>e.onSelectionChange?.(p)}),[c,h]=G(V(e.selectionBehavior)),u=()=>V(e.selectionMode),f=()=>V(e.disallowEmptySelection)??!1,g=p=>{(V(e.allowDuplicateSelectionEvents)||!EE(p,a()))&&l(p)};return tt(()=>{const p=a();V(e.selectionBehavior)==="replace"&&c()==="toggle"&&typeof p=="object"&&p.size===0&&h("replace")}),tt(()=>{h(V(e.selectionBehavior)??"toggle")}),{selectionMode:u,disallowEmptySelection:f,selectionBehavior:c,setSelectionBehavior:h,isFocused:t,setFocused:n,focusedKey:i,setFocusedKey:s,selectedKeys:a,setSelectedKeys:g}}/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/8f2f2acb3d5850382ebe631f055f88c704aa7d17/packages/@react-aria/selection/src/useTypeSelect.ts
 */function bg(e){const[t,n]=G(""),[i,s]=G(-1);return{typeSelectHandlers:{onKeyDown:o=>{if(V(e.isDisabled))return;const a=V(e.keyboardDelegate),l=V(e.selectionManager);if(!a.getKeyForSearch)return;const c=xE(o.key);if(!c||o.ctrlKey||o.metaKey)return;c===" "&&t().trim().length>0&&(o.preventDefault(),o.stopPropagation());let h=n(f=>f+=c),u=a.getKeyForSearch(h,l.focusedKey())??a.getKeyForSearch(h);u==null&&TE(h)&&(h=h[0],u=a.getKeyForSearch(h,l.focusedKey())??a.getKeyForSearch(h)),u!=null&&(l.setFocusedKey(u),e.onTypeSelect?.(u)),clearTimeout(i()),s(window.setTimeout(()=>n(""),500))}}}}function xE(e){return e.length===1||!/^[A-Z]/i.test(e)?e:""}function TE(e){return e.split("").every(t=>t===e[0])}/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/8f2f2acb3d5850382ebe631f055f88c704aa7d17/packages/@react-aria/selection/src/useSelectableCollection.ts
 */function CE(e,t,n){e=ft({selectOnFocus:()=>V(e.selectionManager).selectionBehavior()==="replace"},e);const s=()=>n?.()??t(),{direction:r}=Sa();let o={top:0,left:0};gw(()=>V(e.isVirtualized)?void 0:s(),"scroll",()=>{const p=s();p&&(o={top:p.scrollTop,left:p.scrollLeft})});const{typeSelectHandlers:a}=bg({isDisabled:()=>V(e.disallowTypeAhead),keyboardDelegate:()=>V(e.keyboardDelegate),selectionManager:()=>V(e.selectionManager)}),l=p=>{Dt(p,a.onKeyDown),p.altKey&&p.key==="Tab"&&p.preventDefault();const y=t();if(!y?.contains(p.target))return;const x=V(e.selectionManager),S=V(e.selectOnFocus),E=T=>{T!=null&&(x.setFocusedKey(T),p.shiftKey&&x.selectionMode()==="multiple"?x.extendSelection(T):S&&!mg(p)&&x.replaceSelection(T))},b=V(e.keyboardDelegate),_=V(e.shouldFocusWrap),w=x.focusedKey();switch(p.key){case"ArrowDown":{if(b.getKeyBelow){p.preventDefault();let T;w!=null?T=b.getKeyBelow(w):T=b.getFirstKey?.(),T==null&&_&&(T=b.getFirstKey?.(w)),E(T)}break}case"ArrowUp":{if(b.getKeyAbove){p.preventDefault();let T;w!=null?T=b.getKeyAbove(w):T=b.getLastKey?.(),T==null&&_&&(T=b.getLastKey?.(w)),E(T)}break}case"ArrowLeft":{if(b.getKeyLeftOf){p.preventDefault();const T=r()==="rtl";let C;w!=null?C=b.getKeyLeftOf(w):C=T?b.getFirstKey?.():b.getLastKey?.(),E(C)}break}case"ArrowRight":{if(b.getKeyRightOf){p.preventDefault();const T=r()==="rtl";let C;w!=null?C=b.getKeyRightOf(w):C=T?b.getLastKey?.():b.getFirstKey?.(),E(C)}break}case"Home":if(b.getFirstKey){p.preventDefault();const T=b.getFirstKey(w,ps(p));T!=null&&(x.setFocusedKey(T),ps(p)&&p.shiftKey&&x.selectionMode()==="multiple"?x.extendSelection(T):S&&x.replaceSelection(T))}break;case"End":if(b.getLastKey){p.preventDefault();const T=b.getLastKey(w,ps(p));T!=null&&(x.setFocusedKey(T),ps(p)&&p.shiftKey&&x.selectionMode()==="multiple"?x.extendSelection(T):S&&x.replaceSelection(T))}break;case"PageDown":if(b.getKeyPageBelow&&w!=null){p.preventDefault();const T=b.getKeyPageBelow(w);E(T)}break;case"PageUp":if(b.getKeyPageAbove&&w!=null){p.preventDefault();const T=b.getKeyPageAbove(w);E(T)}break;case"a":ps(p)&&x.selectionMode()==="multiple"&&V(e.disallowSelectAll)!==!0&&(p.preventDefault(),x.selectAll());break;case"Escape":p.defaultPrevented||(p.preventDefault(),V(e.disallowEmptySelection)||x.clearSelection());break;case"Tab":if(!V(e.allowsTabNavigation)){if(p.shiftKey)y.focus();else{const T=Hw(y,{tabbable:!0});let C,$;do $=T.lastChild(),$&&(C=$);while($);C&&!C.contains(document.activeElement)&&de(C)}break}}},c=p=>{const y=V(e.selectionManager),x=V(e.keyboardDelegate),S=V(e.selectOnFocus);if(y.isFocused()){p.currentTarget.contains(p.target)||y.setFocused(!1);return}if(p.currentTarget.contains(p.target)){if(y.setFocused(!0),y.focusedKey()==null){const E=_=>{_!=null&&(y.setFocusedKey(_),S&&y.replaceSelection(_))},b=p.relatedTarget;b&&p.currentTarget.compareDocumentPosition(b)&Node.DOCUMENT_POSITION_FOLLOWING?E(y.lastSelectedKey()??x.getLastKey?.()):E(y.firstSelectedKey()??x.getFirstKey?.())}else if(!V(e.isVirtualized)){const E=s();if(E){E.scrollTop=o.top,E.scrollLeft=o.left;const b=E.querySelector(`[data-key="${y.focusedKey()}"]`);b&&(de(b),Hh(E,b))}}}},h=p=>{const y=V(e.selectionManager);p.currentTarget.contains(p.relatedTarget)||y.setFocused(!1)},u=p=>{s()===p.target&&p.preventDefault()},f=()=>{const p=V(e.autoFocus);if(!p)return;const y=V(e.selectionManager),x=V(e.keyboardDelegate);let S;p==="first"&&(S=x.getFirstKey?.()),p==="last"&&(S=x.getLastKey?.());const E=y.selectedKeys();E.size&&(S=E.values().next().value),y.setFocused(!0),y.setFocusedKey(S);const b=t();b&&S==null&&!V(e.shouldUseVirtualFocus)&&de(b)};return Bs(()=>{e.deferAutoFocus?setTimeout(f,0):f()}),tt(Ye([s,()=>V(e.isVirtualized),()=>V(e.selectionManager).focusedKey()],p=>{const[y,x,S]=p;if(x)S&&e.scrollToKey?.(S);else if(S&&y){const E=y.querySelector(`[data-key="${S}"]`);E&&Hh(y,E)}})),{tabIndex:dt(()=>{if(!V(e.shouldUseVirtualFocus))return V(e.selectionManager).focusedKey()==null?0:-1}),onKeyDown:l,onMouseDown:u,onFocusIn:c,onFocusOut:h}}/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/8f2f2acb3d5850382ebe631f055f88c704aa7d17/packages/@react-aria/selection/src/useSelectableItem.ts
 */function yg(e,t){const n=()=>V(e.selectionManager),i=()=>V(e.key),s=()=>V(e.shouldUseVirtualFocus),r=E=>{n().selectionMode()!=="none"&&(n().selectionMode()==="single"?n().isSelected(i())&&!n().disallowEmptySelection()?n().toggleSelection(i()):n().replaceSelection(i()):E&&E.shiftKey?n().extendSelection(i()):n().selectionBehavior()==="toggle"||ps(E)||"pointerType"in E&&E.pointerType==="touch"?n().toggleSelection(i()):n().replaceSelection(i()))},o=()=>n().isSelected(i()),a=()=>V(e.disabled)||n().isDisabled(i()),l=()=>!a()&&n().canSelectItem(i());let c=null;const h=E=>{l()&&(c=E.pointerType,E.pointerType==="mouse"&&E.button===0&&!V(e.shouldSelectOnPressUp)&&r(E))},u=E=>{l()&&E.pointerType==="mouse"&&E.button===0&&V(e.shouldSelectOnPressUp)&&V(e.allowsDifferentPressOrigin)&&r(E)},f=E=>{l()&&(V(e.shouldSelectOnPressUp)&&!V(e.allowsDifferentPressOrigin)||c!=="mouse")&&r(E)},g=E=>{!l()||!["Enter"," "].includes(E.key)||(mg(E)?n().toggleSelection(i()):r(E))},p=E=>{a()&&E.preventDefault()},y=E=>{const b=t();s()||a()||!b||E.target===b&&n().setFocusedKey(i())},x=dt(()=>{if(!(s()||a()))return i()===n().focusedKey()?0:-1}),S=dt(()=>V(e.virtualized)?void 0:i());return tt(Ye([t,i,s,()=>n().focusedKey(),()=>n().isFocused()],([E,b,_,w,T])=>{E&&b===w&&T&&!_&&document.activeElement!==E&&(e.focus?e.focus():de(E))})),{isSelected:o,isDisabled:a,allowsSelection:l,tabIndex:x,dataKey:S,onPointerDown:h,onPointerUp:u,onClick:f,onKeyDown:g,onMouseDown:p,onFocus:y}}/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/bfce84fee12a027d9cbc38b43e1747e3e4b4b169/packages/@react-stately/selection/src/SelectionManager.ts
 */class $E{collection;state;constructor(t,n){this.collection=t,this.state=n}selectionMode(){return this.state.selectionMode()}disallowEmptySelection(){return this.state.disallowEmptySelection()}selectionBehavior(){return this.state.selectionBehavior()}setSelectionBehavior(t){this.state.setSelectionBehavior(t)}isFocused(){return this.state.isFocused()}setFocused(t){this.state.setFocused(t)}focusedKey(){return this.state.focusedKey()}setFocusedKey(t){(t==null||this.collection().getItem(t))&&this.state.setFocusedKey(t)}selectedKeys(){return this.state.selectedKeys()}isSelected(t){if(this.state.selectionMode()==="none")return!1;const n=this.getKey(t);return n==null?!1:this.state.selectedKeys().has(n)}isEmpty(){return this.state.selectedKeys().size===0}isSelectAll(){if(this.isEmpty())return!1;const t=this.state.selectedKeys();return this.getAllSelectableKeys().every(n=>t.has(n))}firstSelectedKey(){let t;for(const n of this.state.selectedKeys()){const i=this.collection().getItem(n),s=i?.index!=null&&t?.index!=null&&i.index<t.index;(!t||s)&&(t=i)}return t?.key}lastSelectedKey(){let t;for(const n of this.state.selectedKeys()){const i=this.collection().getItem(n),s=i?.index!=null&&t?.index!=null&&i.index>t.index;(!t||s)&&(t=i)}return t?.key}extendSelection(t){if(this.selectionMode()==="none")return;if(this.selectionMode()==="single"){this.replaceSelection(t);return}const n=this.getKey(t);if(n==null)return;const i=this.state.selectedKeys(),s=i.anchorKey||n,r=new an(i,s,n);for(const o of this.getKeyRange(s,i.currentKey||n))r.delete(o);for(const o of this.getKeyRange(n,s))this.canSelectItem(o)&&r.add(o);this.state.setSelectedKeys(r)}getKeyRange(t,n){const i=this.collection().getItem(t),s=this.collection().getItem(n);return i&&s?i.index!=null&&s.index!=null&&i.index<=s.index?this.getKeyRangeInternal(t,n):this.getKeyRangeInternal(n,t):[]}getKeyRangeInternal(t,n){const i=[];let s=t;for(;s!=null;){const r=this.collection().getItem(s);if(r&&r.type==="item"&&i.push(s),s===n)return i;s=this.collection().getKeyAfter(s)}return[]}getKey(t){const n=this.collection().getItem(t);return n?!n||n.type!=="item"?null:n.key:t}toggleSelection(t){if(this.selectionMode()==="none")return;if(this.selectionMode()==="single"&&!this.isSelected(t)){this.replaceSelection(t);return}const n=this.getKey(t);if(n==null)return;const i=new an(this.state.selectedKeys());i.has(n)?i.delete(n):this.canSelectItem(n)&&(i.add(n),i.anchorKey=n,i.currentKey=n),!(this.disallowEmptySelection()&&i.size===0)&&this.state.setSelectedKeys(i)}replaceSelection(t){if(this.selectionMode()==="none")return;const n=this.getKey(t);if(n==null)return;const i=this.canSelectItem(n)?new an([n],n,n):new an;this.state.setSelectedKeys(i)}setSelectedKeys(t){if(this.selectionMode()==="none")return;const n=new an;for(const i of t){const s=this.getKey(i);if(s!=null&&(n.add(s),this.selectionMode()==="single"))break}this.state.setSelectedKeys(n)}selectAll(){this.selectionMode()==="multiple"&&this.state.setSelectedKeys(new Set(this.getAllSelectableKeys()))}clearSelection(){const t=this.state.selectedKeys();!this.disallowEmptySelection()&&t.size>0&&this.state.setSelectedKeys(new an)}toggleSelectAll(){this.isSelectAll()?this.clearSelection():this.selectAll()}select(t,n){this.selectionMode()!=="none"&&(this.selectionMode()==="single"?this.isSelected(t)&&!this.disallowEmptySelection()?this.toggleSelection(t):this.replaceSelection(t):this.selectionBehavior()==="toggle"||n&&n.pointerType==="touch"?this.toggleSelection(t):this.replaceSelection(t))}isSelectionEqual(t){if(t===this.state.selectedKeys())return!0;const n=this.selectedKeys();if(t.size!==n.size)return!1;for(const i of t)if(!n.has(i))return!1;for(const i of n)if(!t.has(i))return!1;return!0}canSelectItem(t){if(this.state.selectionMode()==="none")return!1;const n=this.collection().getItem(t);return n!=null&&!n.disabled}isDisabled(t){const n=this.collection().getItem(t);return!n||n.disabled}getAllSelectableKeys(){const t=[];return(i=>{for(;i!=null;){if(this.canSelectItem(i)){const s=this.collection().getItem(i);if(!s)continue;s.type==="item"&&t.push(i)}i=this.collection().getKeyAfter(i)}})(this.collection().getFirstKey()),t}}/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/bfce84fee12a027d9cbc38b43e1747e3e4b4b169/packages/@react-stately/list/src/ListCollection.ts
 */class ld{keyMap=new Map;iterable;firstKey;lastKey;constructor(t){this.iterable=t;for(const s of t)this.keyMap.set(s.key,s);if(this.keyMap.size===0)return;let n,i=0;for(const[s,r]of this.keyMap)n?(n.nextKey=s,r.prevKey=n.key):(this.firstKey=s,r.prevKey=void 0),r.type==="item"&&(r.index=i++),n=r,n.nextKey=void 0;this.lastKey=n.key}*[Symbol.iterator](){yield*this.iterable}getSize(){return this.keyMap.size}getKeys(){return this.keyMap.keys()}getKeyBefore(t){return this.keyMap.get(t)?.prevKey}getKeyAfter(t){return this.keyMap.get(t)?.nextKey}getFirstKey(){return this.firstKey}getLastKey(){return this.lastKey}getItem(t){return this.keyMap.get(t)}at(t){const n=[...this.getKeys()];return this.getItem(n[t])}}/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/bfce84fee12a027d9cbc38b43e1747e3e4b4b169/packages/@react-stately/list/src/useListState.ts
 */function du(e){const t=SE(e),i=Kw({dataSource:()=>V(e.dataSource),getKey:()=>V(e.getKey),getTextValue:()=>V(e.getTextValue),getDisabled:()=>V(e.getDisabled),getSectionChildren:()=>V(e.getSectionChildren),factory:r=>e.filter?new ld(e.filter(r)):new ld(r)},[()=>e.filter]),s=new $E(i,t);return gf(()=>{const r=t.focusedKey();r!=null&&!i().getItem(r)&&t.setFocusedKey(void 0)}),{collection:i,selectionManager:()=>s}}/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/8f2f2acb3d5850382ebe631f055f88c704aa7d17/packages/@react-aria/selection/src/ListKeyboardDelegate.ts
 */class vg{collection;ref;collator;constructor(t,n,i){this.collection=t,this.ref=n,this.collator=i}getKeyBelow(t){let n=this.collection().getKeyAfter(t);for(;n!=null;){const i=this.collection().getItem(n);if(i&&i.type==="item"&&!i.disabled)return n;n=this.collection().getKeyAfter(n)}}getKeyAbove(t){let n=this.collection().getKeyBefore(t);for(;n!=null;){const i=this.collection().getItem(n);if(i&&i.type==="item"&&!i.disabled)return n;n=this.collection().getKeyBefore(n)}}getFirstKey(){let t=this.collection().getFirstKey();for(;t!=null;){const n=this.collection().getItem(t);if(n&&n.type==="item"&&!n.disabled)return t;t=this.collection().getKeyAfter(t)}}getLastKey(){let t=this.collection().getLastKey();for(;t!=null;){const n=this.collection().getItem(t);if(n&&n.type==="item"&&!n.disabled)return t;t=this.collection().getKeyBefore(t)}}getItem(t){return this.ref?.()?.querySelector(`[data-key="${t}"]`)??null}getKeyPageAbove(t){const n=this.ref?.();let i=this.getItem(t);if(!n||!i)return;const s=Math.max(0,i.offsetTop+i.offsetHeight-n.offsetHeight);let r=t;for(;r&&i&&i.offsetTop>s;)r=this.getKeyAbove(r),i=r!=null?this.getItem(r):null;return r}getKeyPageBelow(t){const n=this.ref?.();let i=this.getItem(t);if(!n||!i)return;const s=Math.min(n.scrollHeight,i.offsetTop-i.offsetHeight+n.offsetHeight);let r=t;for(;r&&i&&i.offsetTop<s;)r=this.getKeyBelow(r),i=r!=null?this.getItem(r):null;return r}getKeyForSearch(t,n){const i=this.collator?.();if(!i)return;let s=n!=null?this.getKeyBelow(n):this.getFirstKey();for(;s!=null;){const r=this.collection().getItem(s);if(r){const o=r.textValue.slice(0,t.length);if(r.textValue&&i.compare(o,t)===0)return s}s=this.getKeyBelow(s)}}}/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/8f2f2acb3d5850382ebe631f055f88c704aa7d17/packages/@react-aria/selection/src/useSelectableList.ts
 */function wg(e,t,n){const i=Jp({usage:"search",sensitivity:"base"}),s=dt(()=>{const r=V(e.keyboardDelegate);return r||new vg(e.collection,t,i)});return CE({selectionManager:()=>V(e.selectionManager),keyboardDelegate:s,autoFocus:()=>V(e.autoFocus),deferAutoFocus:()=>V(e.deferAutoFocus),shouldFocusWrap:()=>V(e.shouldFocusWrap),disallowEmptySelection:()=>V(e.disallowEmptySelection),selectOnFocus:()=>V(e.selectOnFocus),disallowTypeAhead:()=>V(e.disallowTypeAhead),shouldUseVirtualFocus:()=>V(e.shouldUseVirtualFocus),allowsTabNavigation:()=>V(e.allowsTabNavigation),isVirtualized:()=>V(e.isVirtualized),scrollToKey:r=>V(e.scrollToKey)?.(r)},t,n)}const[fu,Ur]=Hs({toasts:[]});function kE(e){Ur("toasts",t=>[...t,e])}function AE(e){return fu.toasts.find(t=>t.id===e)}function PE(e,t){const n=fu.toasts.findIndex(i=>i.id===e);n!=-1&&Ur("toasts",i=>[...i.slice(0,n),t,...i.slice(n+1)])}function OE(e){Ur("toasts",t=>t.id===e,"dismiss",!0)}function LE(e){Ur("toasts",t=>t.filter(n=>n.id!==e))}function IE(){Ur("toasts",[])}const Os={toasts:()=>fu.toasts,add:kE,get:AE,update:PE,dismiss:OE,remove:LE,clear:IE};let DE=0;function _g(e,t){const n=DE++;return Os.add({id:n,toastComponent:e,dismiss:!1,update:!1,region:t?.region}),n}function oc(e,t){Os.update(e,{id:e,toastComponent:t,dismiss:!1,update:!0})}function RE(e,t,n){const i=_g(s=>t({get toastId(){return s.toastId},state:"pending"}),n);return(_a(e)?e():e).then(s=>oc(i,r=>t({get toastId(){return r.toastId},state:"fulfilled",data:s}))).catch(s=>oc(i,r=>t({get toastId(){return r.toastId},state:"rejected",error:s}))),i}function ME(e){return Os.dismiss(e),e}function NE(){Os.clear()}const js={show:_g,update:oc,promise:RE,dismiss:ME,clear:NE};/*!
 * Portions of this file are based on code from ariakit
 * MIT Licensed, Copyright (c) Diego Haz.
 *
 * Credits to the ariakit team:
 * https://github.com/hope-ui/hope-ui/blob/54125b130195f37161dbeeea0c21dc3b198bc3ac/packages/core/src/button/is-button.ts
 */const FE=["button","color","file","image","reset","submit"];function BE(e){const t=e.tagName.toLowerCase();return t==="button"?!0:t==="input"&&e.type?FE.indexOf(e.type)!==-1:!1}function Vr(e){let t;e=Rt({type:"button"},e);const[n,i]=$t(e,["ref","type","disabled"]),s=Yp(()=>t,()=>"button"),r=dt(()=>{const l=s();return l==null?!1:BE({tagName:l,type:n.type})}),o=dt(()=>s()==="input"),a=dt(()=>s()==="a"&&t?.getAttribute("href")!=null);return L(se,ft({as:"button",ref(l){var c=me(h=>t=h,n.ref);typeof c=="function"&&c(l)},get type(){return r()||o()?n.type:void 0},get role(){return!r()&&!a()?"button":void 0},get tabIndex(){return!r()&&!a()&&!n.disabled?0:void 0},get disabled(){return r()||o()?n.disabled:void 0},get"aria-disabled"(){return!r()&&!o()&&n.disabled?!0:void 0},get"data-disabled"(){return n.disabled?"":void 0}},i))}const Eg=ue();function Sg(){return ce(Eg)}function HE(){const e=Sg();if(e===void 0)throw new Error("[kobalte]: `useDomCollectionContext` must be used within a `DomCollectionProvider` component");return e}/*!
 * Portions of this file are based on code from ariakit.
 * MIT Licensed, Copyright (c) Diego Haz.
 *
 * Credits to the Ariakit team:
 * https://github.com/ariakit/ariakit/blob/da142672eddefa99365773ced72171facc06fdcb/packages/ariakit/src/collection/collection-state.ts
 */function xg(e,t){return!!(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_PRECEDING)}function UE(e,t){const n=t.ref();if(!n)return-1;let i=e.length;if(!i)return-1;for(;i--;){const s=e[i]?.ref();if(s&&xg(s,n))return i+1}return 0}function VE(e){const t=e.map((i,s)=>[s,i]);let n=!1;return t.sort(([i,s],[r,o])=>{const a=s.ref(),l=o.ref();return a===l||!a||!l?0:xg(a,l)?(i>r&&(n=!0),-1):(i<r&&(n=!0),1)}),n?t.map(([i,s])=>s):e}function Tg(e,t){const n=VE(e);e!==n&&t(n)}function jE(e){const t=e[0],n=e[e.length-1]?.ref();let i=t?.ref()?.parentElement;for(;i;){if(n&&i.contains(n))return i;i=i.parentElement}return Ue(i).body}function KE(e,t){tt(()=>{const n=setTimeout(()=>{Tg(e(),t)});bt(()=>clearTimeout(n))})}function qE(e,t){if(typeof IntersectionObserver!="function"){KE(e,t);return}let n=[];tt(()=>{const i=()=>{const o=!!n.length;n=e(),o&&Tg(e(),t)},s=jE(e()),r=new IntersectionObserver(i,{root:s});e().forEach(o=>{const a=o.ref();a&&r.observe(a)}),bt(()=>r.disconnect())})}/*!
 * Portions of this file are based on code from ariakit.
 * MIT Licensed, Copyright (c) Diego Haz.
 *
 * Credits to the Ariakit team:
 * https://github.com/ariakit/ariakit/blob/da142672eddefa99365773ced72171facc06fdcb/packages/ariakit/src/collection/collection.tsx
 * https://github.com/ariakit/ariakit/blob/da142672eddefa99365773ced72171facc06fdcb/packages/ariakit/src/collection/collection-state.ts
 * https://github.com/ariakit/ariakit/blob/da142672eddefa99365773ced72171facc06fdcb/packages/ariakit/src/collection/collection-item.ts
 */function GE(e={}){const[t,n]=Ww({value:()=>V(e.items),onChange:r=>e.onItemsChange?.(r)});qE(t,n);const i=r=>(n(o=>{const a=UE(o,r);return Ew(o,r,a)}),()=>{n(o=>{const a=o.filter(l=>l.ref()!==r.ref());return o.length===a.length?o:a})});return{DomCollectionProvider:r=>L(Eg.Provider,{value:{registerItem:i},get children(){return r.children}})}}function WE(e){const t=HE();e=Rt({shouldRegisterItem:!0},e),tt(()=>{if(!e.shouldRegisterItem)return;const n=t.registerItem(e.getItem());bt(n)})}const Cg=ue();function Ks(){const e=ce(Cg);if(e===void 0)throw new Error("[kobalte]: `useDialogContext` must be used within a `Dialog` component");return e}function zE(e){const t=Ks(),[n,i]=$t(e,["aria-label","onClick"]),s=gg(()=>y_);return L(Vr,ft({get"aria-label"(){return n["aria-label"]||s().format("dismiss")},onClick:o=>{Dt(o,n.onClick),t.close()}},i))}const $g=ue();function YE(){return ce($g)}function Ca(e){let t;const n=YE(),[i,s]=$t(e,["ref","disableOutsidePointerEvents","excludedElements","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss","bypassTopMostLayerCheck"]),r=new Set([]),o=u=>{r.add(u);const f=n?.registerNestedLayer(u);return()=>{r.delete(u),f?.()}};l_({shouldExcludeElement:u=>t?i.excludedElements?.some(f=>Fe(f(),u))||[...r].some(f=>Fe(f,u)):!1,onPointerDownOutside:u=>{!t||qe.isBelowPointerBlockingLayer(t)||!i.bypassTopMostLayerCheck&&!qe.isTopMostLayer(t)||(i.onPointerDownOutside?.(u),i.onInteractOutside?.(u),u.defaultPrevented||i.onDismiss?.())},onFocusOutside:u=>{i.onFocusOutside?.(u),i.onInteractOutside?.(u),u.defaultPrevented||i.onDismiss?.()}},()=>t),zw({ownerDocument:()=>Ue(t),onEscapeKeyDown:u=>{!t||!qe.isTopMostLayer(t)||(i.onEscapeKeyDown?.(u),!u.defaultPrevented&&i.onDismiss&&(u.preventDefault(),i.onDismiss()))}}),Bs(()=>{if(!t)return;qe.addLayer({node:t,isPointerBlocking:i.disableOutsidePointerEvents,dismiss:i.onDismiss});const u=n?.registerNestedLayer(t);qe.assignPointerEventToLayers(),qe.disableBodyPointerEvents(t),bt(()=>{t&&(qe.removeLayer(t),u?.(),qe.assignPointerEventToLayers(),qe.restoreBodyPointerEvents(t))})}),tt(Ye([()=>t,()=>i.disableOutsidePointerEvents],([u,f])=>{if(!u)return;const g=qe.find(u);g&&g.isPointerBlocking!==f&&(g.isPointerBlocking=f,qe.assignPointerEventToLayers()),f&&qe.disableBodyPointerEvents(u),bt(()=>{qe.restoreBodyPointerEvents(u)})},{defer:!0}));const h={registerNestedLayer:o};return L($g.Provider,{value:h,get children(){return L(se,ft({as:"div",ref(u){var f=me(g=>t=g,i.ref);typeof f=="function"&&f(u)}},s))}})}function XE(e){let t;const n=Ks();e=Rt({id:n.generateId("content")},e);const[i,s]=$t(e,["ref","onOpenAutoFocus","onCloseAutoFocus","onPointerDownOutside","onFocusOutside","onInteractOutside"]);let r=!1,o=!1;const a=u=>{i.onPointerDownOutside?.(u),n.modal()&&u.detail.isContextMenu&&u.preventDefault()},l=u=>{i.onFocusOutside?.(u),n.modal()&&u.preventDefault()},c=u=>{i.onInteractOutside?.(u),!n.modal()&&(u.defaultPrevented||(r=!0,u.detail.originalEvent.type==="pointerdown"&&(o=!0)),Fe(n.triggerRef(),u.target)&&u.preventDefault(),u.detail.originalEvent.type==="focusin"&&o&&u.preventDefault())},h=u=>{i.onCloseAutoFocus?.(u),n.modal()?(u.preventDefault(),de(n.triggerRef())):(u.defaultPrevented||(r||de(n.triggerRef()),u.preventDefault()),r=!1,o=!1)};return lu({isDisabled:()=>!(n.isOpen()&&n.modal()),targets:()=>t?[t]:[]}),cu({ownerRef:()=>t,isDisabled:()=>!(n.isOpen()&&(n.modal()||n.preventScroll()))}),au({trapFocus:()=>n.isOpen()&&n.modal(),onMountAutoFocus:i.onOpenAutoFocus,onUnmountAutoFocus:h},()=>t),tt(()=>bt(n.registerContentId(s.id))),L(Et,{get when(){return n.contentPresence.isPresent()},get children(){return L(Ca,ft({ref(u){var f=me(g=>{n.contentPresence.setRef(g),t=g},i.ref);typeof f=="function"&&f(u)},role:"dialog",tabIndex:-1,get disableOutsidePointerEvents(){return dt(()=>!!n.modal())()&&n.isOpen()},get excludedElements(){return[n.triggerRef]},get"aria-labelledby"(){return n.titleId()},get"aria-describedby"(){return n.descriptionId()},get"data-expanded"(){return n.isOpen()?"":void 0},get"data-closed"(){return n.isOpen()?void 0:""},onPointerDownOutside:a,onFocusOutside:l,onInteractOutside:c,get onDismiss(){return n.close}},s))}})}function QE(e){const t=Ks();e=Rt({id:t.generateId("description")},e);const[n,i]=$t(e,["id"]);return tt(()=>bt(t.registerDescriptionId(n.id))),L(se,ft({as:"p",get id(){return n.id}},i))}function JE(e){const t=Ks(),[n,i]=$t(e,["ref","style","onPointerDown"]),s=r=>{Dt(r,n.onPointerDown),r.target===r.currentTarget&&r.preventDefault()};return L(Et,{get when(){return t.overlayPresence.isPresent()},get children(){return L(se,ft({as:"div",ref(r){var o=me(t.overlayPresence.setRef,n.ref);typeof o=="function"&&o(r)},get style(){return{"pointer-events":"auto",...n.style}},get"data-expanded"(){return t.isOpen()?"":void 0},get"data-closed"(){return t.isOpen()?void 0:""},onPointerDown:s},i))}})}function ZE(e){const t=Ks();return L(Et,{get when(){return t.contentPresence.isPresent()||t.overlayPresence.isPresent()},get children(){return L(ca,e)}})}function tS(e){const t=`dialog-${mn()}`;e=Rt({id:t,modal:!0,preventScroll:!1},e);const[n,i]=G(),[s,r]=G(),[o,a]=G(),[l,c]=G(),h=Hr({open:()=>e.open,defaultOpen:()=>e.defaultOpen,onOpenChange:y=>e.onOpenChange?.(y)}),u=()=>e.forceMount||h.isOpen(),f=ks(u),g=ks(u),p={isOpen:h.isOpen,modal:()=>e.modal??!0,preventScroll:()=>e.preventScroll??!1,contentId:n,titleId:s,descriptionId:o,triggerRef:l,overlayPresence:f,contentPresence:g,close:h.close,toggle:h.toggle,setTriggerRef:c,generateId:Hn(()=>e.id),registerContentId:le(i),registerTitleId:le(r),registerDescriptionId:le(a)};return L(Cg.Provider,{value:p,get children(){return e.children}})}function eS(e){const t=Ks();e=Rt({id:t.generateId("title")},e);const[n,i]=$t(e,["id"]);return tt(()=>bt(t.registerTitleId(n.id))),L(se,ft({as:"h2",get id(){return n.id}},i))}const kg=ue();function Ag(){const e=ce(kg);if(e===void 0)throw new Error("[kobalte]: `usePopperContext` must be used within a `Popper` component");return e}var nS=it('<svg display=block viewBox="0 0 30 30"><g><path fill=none d=M23,27.8c1.1,1.2,3.4,2.2,5,2.2h2H0h2c1.7,0,3.9-1,5-2.2l6.6-7.2c0.7-0.8,2-0.8,2.7,0L23,27.8L23,27.8z></path><path stroke=none d=M23,27.8c1.1,1.2,3.4,2.2,5,2.2h2H0h2c1.7,0,3.9-1,5-2.2l6.6-7.2c0.7-0.8,2-0.8,2.7,0L23,27.8L23,27.8z>');const ac=30,cd=ac/2,iS={top:180,right:-90,bottom:0,left:90};function Pg(e){const t=Ag();e=Rt({size:ac},e);const[n,i]=$t(e,["ref","style","children","size"]),s=()=>t.currentPlacement().split("-")[0],r=sS(t.contentRef),o=()=>r()?.getPropertyValue("background-color")||"none",a=()=>r()?.getPropertyValue(`border-${s()}-color`)||"none",l=()=>r()?.getPropertyValue(`border-${s()}-width`)||"0px",c=()=>parseInt(l())*2*(ac/n.size),h=()=>`rotate(${iS[s()]} ${cd} ${cd})`;return L(se,ft({as:"div",ref(u){var f=me(t.setArrowRef,n.ref);typeof f=="function"&&f(u)},"aria-hidden":"true",get style(){return{position:"absolute","font-size":`${n.size}px`,width:"1em",height:"1em","pointer-events":"none",fill:o(),stroke:a(),"stroke-width":c(),...n.style}}},i,{get children(){var u=Z(nS),f=u.firstChild,g=f.firstChild;return g.nextSibling,ie(()=>on(f,"transform",h())),u}}))}function sS(e){const[t,n]=G();return tt(()=>{const i=e();i&&n(eu(i).getComputedStyle(i))}),t}function pu(e){const t=Ag(),[n,i]=$t(e,["ref","style"]);return L(se,ft({as:"div",ref(s){var r=me(t.setPositionerRef,n.ref);typeof r=="function"&&r(s)},"data-popper-positioner":"",get style(){return{position:"absolute",top:0,left:0,"min-width":"max-content",...n.style}}},i))}const rS=["top","right","bottom","left"],Ti=Math.min,ze=Math.max,Wo=Math.round,fo=Math.floor,Ci=e=>({x:e,y:e}),oS={left:"right",right:"left",bottom:"top",top:"bottom"},aS={start:"end",end:"start"};function lc(e,t,n){return ze(e,Ti(t,n))}function ns(e,t){return typeof e=="function"?e(t):e}function $i(e){return e.split("-")[0]}function qs(e){return e.split("-")[1]}function Og(e){return e==="x"?"y":"x"}function gu(e){return e==="y"?"height":"width"}function jr(e){return["top","bottom"].includes($i(e))?"y":"x"}function mu(e){return Og(jr(e))}function lS(e,t,n){n===void 0&&(n=!1);const i=qs(e),s=mu(e),r=gu(s);let o=s==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return t.reference[r]>t.floating[r]&&(o=zo(o)),[o,zo(o)]}function cS(e){const t=zo(e);return[cc(e),t,cc(t)]}function cc(e){return e.replace(/start|end/g,t=>aS[t])}function uS(e,t,n){const i=["left","right"],s=["right","left"],r=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?s:i:t?i:s;case"left":case"right":return t?r:o;default:return[]}}function hS(e,t,n,i){const s=qs(e);let r=uS($i(e),n==="start",i);return s&&(r=r.map(o=>o+"-"+s),t&&(r=r.concat(r.map(cc)))),r}function zo(e){return e.replace(/left|right|bottom|top/g,t=>oS[t])}function dS(e){return{top:0,right:0,bottom:0,left:0,...e}}function Lg(e){return typeof e!="number"?dS(e):{top:e,right:e,bottom:e,left:e}}function Yo(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}function ud(e,t,n){let{reference:i,floating:s}=e;const r=jr(t),o=mu(t),a=gu(o),l=$i(t),c=r==="y",h=i.x+i.width/2-s.width/2,u=i.y+i.height/2-s.height/2,f=i[a]/2-s[a]/2;let g;switch(l){case"top":g={x:h,y:i.y-s.height};break;case"bottom":g={x:h,y:i.y+i.height};break;case"right":g={x:i.x+i.width,y:u};break;case"left":g={x:i.x-s.width,y:u};break;default:g={x:i.x,y:i.y}}switch(qs(t)){case"start":g[o]-=f*(n&&c?-1:1);break;case"end":g[o]+=f*(n&&c?-1:1);break}return g}const fS=async(e,t,n)=>{const{placement:i="bottom",strategy:s="absolute",middleware:r=[],platform:o}=n,a=r.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(t));let c=await o.getElementRects({reference:e,floating:t,strategy:s}),{x:h,y:u}=ud(c,i,l),f=i,g={},p=0;for(let y=0;y<a.length;y++){const{name:x,fn:S}=a[y],{x:E,y:b,data:_,reset:w}=await S({x:h,y:u,initialPlacement:i,placement:f,strategy:s,middlewareData:g,rects:c,platform:o,elements:{reference:e,floating:t}});h=E??h,u=b??u,g={...g,[x]:{...g[x],..._}},w&&p<=50&&(p++,typeof w=="object"&&(w.placement&&(f=w.placement),w.rects&&(c=w.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:s}):w.rects),{x:h,y:u}=ud(c,f,l)),y=-1)}return{x:h,y:u,placement:f,strategy:s,middlewareData:g}};async function Tr(e,t){var n;t===void 0&&(t={});const{x:i,y:s,platform:r,rects:o,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:h="viewport",elementContext:u="floating",altBoundary:f=!1,padding:g=0}=ns(t,e),p=Lg(g),x=a[f?u==="floating"?"reference":"floating":u],S=Yo(await r.getClippingRect({element:(n=await(r.isElement==null?void 0:r.isElement(x)))==null||n?x:x.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(a.floating)),boundary:c,rootBoundary:h,strategy:l})),E=u==="floating"?{...o.floating,x:i,y:s}:o.reference,b=await(r.getOffsetParent==null?void 0:r.getOffsetParent(a.floating)),_=await(r.isElement==null?void 0:r.isElement(b))?await(r.getScale==null?void 0:r.getScale(b))||{x:1,y:1}:{x:1,y:1},w=Yo(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:E,offsetParent:b,strategy:l}):E);return{top:(S.top-w.top+p.top)/_.y,bottom:(w.bottom-S.bottom+p.bottom)/_.y,left:(S.left-w.left+p.left)/_.x,right:(w.right-S.right+p.right)/_.x}}const pS=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:i,placement:s,rects:r,platform:o,elements:a,middlewareData:l}=t,{element:c,padding:h=0}=ns(e,t)||{};if(c==null)return{};const u=Lg(h),f={x:n,y:i},g=mu(s),p=gu(g),y=await o.getDimensions(c),x=g==="y",S=x?"top":"left",E=x?"bottom":"right",b=x?"clientHeight":"clientWidth",_=r.reference[p]+r.reference[g]-f[g]-r.floating[p],w=f[g]-r.reference[g],T=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let C=T?T[b]:0;(!C||!await(o.isElement==null?void 0:o.isElement(T)))&&(C=a.floating[b]||r.floating[p]);const $=_/2-w/2,I=C/2-y[p]/2-1,A=Ti(u[S],I),O=Ti(u[E],I),M=A,B=C-y[p]-O,N=C/2-y[p]/2+$,K=lc(M,N,B),Y=!l.arrow&&qs(s)!=null&&N!==K&&r.reference[p]/2-(N<M?A:O)-y[p]/2<0,X=Y?N<M?N-M:N-B:0;return{[g]:f[g]+X,data:{[g]:K,centerOffset:N-K-X,...Y&&{alignmentOffset:X}},reset:Y}}}),gS=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,i;const{placement:s,middlewareData:r,rects:o,initialPlacement:a,platform:l,elements:c}=t,{mainAxis:h=!0,crossAxis:u=!0,fallbackPlacements:f,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:y=!0,...x}=ns(e,t);if((n=r.arrow)!=null&&n.alignmentOffset)return{};const S=$i(s),E=$i(a)===a,b=await(l.isRTL==null?void 0:l.isRTL(c.floating)),_=f||(E||!y?[zo(a)]:cS(a));!f&&p!=="none"&&_.push(...hS(a,y,p,b));const w=[a,..._],T=await Tr(t,x),C=[];let $=((i=r.flip)==null?void 0:i.overflows)||[];if(h&&C.push(T[S]),u){const M=lS(s,o,b);C.push(T[M[0]],T[M[1]])}if($=[...$,{placement:s,overflows:C}],!C.every(M=>M<=0)){var I,A;const M=(((I=r.flip)==null?void 0:I.index)||0)+1,B=w[M];if(B)return{data:{index:M,overflows:$},reset:{placement:B}};let N=(A=$.filter(K=>K.overflows[0]<=0).sort((K,Y)=>K.overflows[1]-Y.overflows[1])[0])==null?void 0:A.placement;if(!N)switch(g){case"bestFit":{var O;const K=(O=$.map(Y=>[Y.placement,Y.overflows.filter(X=>X>0).reduce((X,kt)=>X+kt,0)]).sort((Y,X)=>Y[1]-X[1])[0])==null?void 0:O[0];K&&(N=K);break}case"initialPlacement":N=a;break}if(s!==N)return{reset:{placement:N}}}return{}}}};function hd(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function dd(e){return rS.some(t=>e[t]>=0)}const mS=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:i="referenceHidden",...s}=ns(e,t);switch(i){case"referenceHidden":{const r=await Tr(t,{...s,elementContext:"reference"}),o=hd(r,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:dd(o)}}}case"escaped":{const r=await Tr(t,{...s,altBoundary:!0}),o=hd(r,n.floating);return{data:{escapedOffsets:o,escaped:dd(o)}}}default:return{}}}}};async function bS(e,t){const{placement:n,platform:i,elements:s}=e,r=await(i.isRTL==null?void 0:i.isRTL(s.floating)),o=$i(n),a=qs(n),l=jr(n)==="y",c=["left","top"].includes(o)?-1:1,h=r&&l?-1:1,u=ns(t,e);let{mainAxis:f,crossAxis:g,alignmentAxis:p}=typeof u=="number"?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...u};return a&&typeof p=="number"&&(g=a==="end"?p*-1:p),l?{x:g*h,y:f*c}:{x:f*c,y:g*h}}const yS=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,i;const{x:s,y:r,placement:o,middlewareData:a}=t,l=await bS(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(i=a.arrow)!=null&&i.alignmentOffset?{}:{x:s+l.x,y:r+l.y,data:{...l,placement:o}}}}},vS=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:i,placement:s}=t,{mainAxis:r=!0,crossAxis:o=!1,limiter:a={fn:x=>{let{x:S,y:E}=x;return{x:S,y:E}}},...l}=ns(e,t),c={x:n,y:i},h=await Tr(t,l),u=jr($i(s)),f=Og(u);let g=c[f],p=c[u];if(r){const x=f==="y"?"top":"left",S=f==="y"?"bottom":"right",E=g+h[x],b=g-h[S];g=lc(E,g,b)}if(o){const x=u==="y"?"top":"left",S=u==="y"?"bottom":"right",E=p+h[x],b=p-h[S];p=lc(E,p,b)}const y=a.fn({...t,[f]:g,[u]:p});return{...y,data:{x:y.x-n,y:y.y-i}}}}},wS=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:i,platform:s,elements:r}=t,{apply:o=()=>{},...a}=ns(e,t),l=await Tr(t,a),c=$i(n),h=qs(n),u=jr(n)==="y",{width:f,height:g}=i.floating;let p,y;c==="top"||c==="bottom"?(p=c,y=h===(await(s.isRTL==null?void 0:s.isRTL(r.floating))?"start":"end")?"left":"right"):(y=c,p=h==="end"?"top":"bottom");const x=g-l[p],S=f-l[y],E=!t.middlewareData.shift;let b=x,_=S;if(u){const T=f-l.left-l.right;_=h||E?Ti(S,T):T}else{const T=g-l.top-l.bottom;b=h||E?Ti(x,T):T}if(E&&!h){const T=ze(l.left,0),C=ze(l.right,0),$=ze(l.top,0),I=ze(l.bottom,0);u?_=f-2*(T!==0||C!==0?T+C:ze(l.left,l.right)):b=g-2*($!==0||I!==0?$+I:ze(l.top,l.bottom))}await o({...t,availableWidth:_,availableHeight:b});const w=await s.getDimensions(r.floating);return f!==w.width||g!==w.height?{reset:{rects:!0}}:{}}}};function ki(e){return Ig(e)?(e.nodeName||"").toLowerCase():"#document"}function Qe(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function li(e){var t;return(t=(Ig(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Ig(e){return e instanceof Node||e instanceof Qe(e).Node}function ni(e){return e instanceof Element||e instanceof Qe(e).Element}function Nn(e){return e instanceof HTMLElement||e instanceof Qe(e).HTMLElement}function fd(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Qe(e).ShadowRoot}function Kr(e){const{overflow:t,overflowX:n,overflowY:i,display:s}=fn(e);return/auto|scroll|overlay|hidden|clip/.test(t+i+n)&&!["inline","contents"].includes(s)}function _S(e){return["table","td","th"].includes(ki(e))}function bu(e){const t=yu(),n=fn(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(i=>(n.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(n.contain||"").includes(i))}function ES(e){let t=Ls(e);for(;Nn(t)&&!$a(t);){if(bu(t))return t;t=Ls(t)}return null}function yu(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function $a(e){return["html","body","#document"].includes(ki(e))}function fn(e){return Qe(e).getComputedStyle(e)}function ka(e){return ni(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Ls(e){if(ki(e)==="html")return e;const t=e.assignedSlot||e.parentNode||fd(e)&&e.host||li(e);return fd(t)?t.host:t}function Dg(e){const t=Ls(e);return $a(t)?e.ownerDocument?e.ownerDocument.body:e.body:Nn(t)&&Kr(t)?t:Dg(t)}function Cr(e,t,n){var i;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=Dg(e),r=s===((i=e.ownerDocument)==null?void 0:i.body),o=Qe(s);return r?t.concat(o,o.visualViewport||[],Kr(s)?s:[],o.frameElement&&n?Cr(o.frameElement):[]):t.concat(s,Cr(s,[],n))}function Rg(e){const t=fn(e);let n=parseFloat(t.width)||0,i=parseFloat(t.height)||0;const s=Nn(e),r=s?e.offsetWidth:n,o=s?e.offsetHeight:i,a=Wo(n)!==r||Wo(i)!==o;return a&&(n=r,i=o),{width:n,height:i,$:a}}function vu(e){return ni(e)?e:e.contextElement}function vs(e){const t=vu(e);if(!Nn(t))return Ci(1);const n=t.getBoundingClientRect(),{width:i,height:s,$:r}=Rg(t);let o=(r?Wo(n.width):n.width)/i,a=(r?Wo(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const SS=Ci(0);function Mg(e){const t=Qe(e);return!yu()||!t.visualViewport?SS:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function xS(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Qe(e)?!1:t}function Xi(e,t,n,i){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),r=vu(e);let o=Ci(1);t&&(i?ni(i)&&(o=vs(i)):o=vs(e));const a=xS(r,n,i)?Mg(r):Ci(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,h=s.width/o.x,u=s.height/o.y;if(r){const f=Qe(r),g=i&&ni(i)?Qe(i):i;let p=f,y=p.frameElement;for(;y&&i&&g!==p;){const x=vs(y),S=y.getBoundingClientRect(),E=fn(y),b=S.left+(y.clientLeft+parseFloat(E.paddingLeft))*x.x,_=S.top+(y.clientTop+parseFloat(E.paddingTop))*x.y;l*=x.x,c*=x.y,h*=x.x,u*=x.y,l+=b,c+=_,p=Qe(y),y=p.frameElement}}return Yo({width:h,height:u,x:l,y:c})}const TS=[":popover-open",":modal"];function Ng(e){return TS.some(t=>{try{return e.matches(t)}catch{return!1}})}function CS(e){let{elements:t,rect:n,offsetParent:i,strategy:s}=e;const r=s==="fixed",o=li(i),a=t?Ng(t.floating):!1;if(i===o||a&&r)return n;let l={scrollLeft:0,scrollTop:0},c=Ci(1);const h=Ci(0),u=Nn(i);if((u||!u&&!r)&&((ki(i)!=="body"||Kr(o))&&(l=ka(i)),Nn(i))){const f=Xi(i);c=vs(i),h.x=f.x+i.clientLeft,h.y=f.y+i.clientTop}return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+h.x,y:n.y*c.y-l.scrollTop*c.y+h.y}}function $S(e){return Array.from(e.getClientRects())}function Fg(e){return Xi(li(e)).left+ka(e).scrollLeft}function kS(e){const t=li(e),n=ka(e),i=e.ownerDocument.body,s=ze(t.scrollWidth,t.clientWidth,i.scrollWidth,i.clientWidth),r=ze(t.scrollHeight,t.clientHeight,i.scrollHeight,i.clientHeight);let o=-n.scrollLeft+Fg(e);const a=-n.scrollTop;return fn(i).direction==="rtl"&&(o+=ze(t.clientWidth,i.clientWidth)-s),{width:s,height:r,x:o,y:a}}function AS(e,t){const n=Qe(e),i=li(e),s=n.visualViewport;let r=i.clientWidth,o=i.clientHeight,a=0,l=0;if(s){r=s.width,o=s.height;const c=yu();(!c||c&&t==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:r,height:o,x:a,y:l}}function PS(e,t){const n=Xi(e,!0,t==="fixed"),i=n.top+e.clientTop,s=n.left+e.clientLeft,r=Nn(e)?vs(e):Ci(1),o=e.clientWidth*r.x,a=e.clientHeight*r.y,l=s*r.x,c=i*r.y;return{width:o,height:a,x:l,y:c}}function pd(e,t,n){let i;if(t==="viewport")i=AS(e,n);else if(t==="document")i=kS(li(e));else if(ni(t))i=PS(t,n);else{const s=Mg(e);i={...t,x:t.x-s.x,y:t.y-s.y}}return Yo(i)}function Bg(e,t){const n=Ls(e);return n===t||!ni(n)||$a(n)?!1:fn(n).position==="fixed"||Bg(n,t)}function OS(e,t){const n=t.get(e);if(n)return n;let i=Cr(e,[],!1).filter(a=>ni(a)&&ki(a)!=="body"),s=null;const r=fn(e).position==="fixed";let o=r?Ls(e):e;for(;ni(o)&&!$a(o);){const a=fn(o),l=bu(o);!l&&a.position==="fixed"&&(s=null),(r?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Kr(o)&&!l&&Bg(e,o))?i=i.filter(h=>h!==o):s=a,o=Ls(o)}return t.set(e,i),i}function LS(e){let{element:t,boundary:n,rootBoundary:i,strategy:s}=e;const o=[...n==="clippingAncestors"?OS(t,this._c):[].concat(n),i],a=o[0],l=o.reduce((c,h)=>{const u=pd(t,h,s);return c.top=ze(u.top,c.top),c.right=Ti(u.right,c.right),c.bottom=Ti(u.bottom,c.bottom),c.left=ze(u.left,c.left),c},pd(t,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function IS(e){const{width:t,height:n}=Rg(e);return{width:t,height:n}}function DS(e,t,n){const i=Nn(t),s=li(t),r=n==="fixed",o=Xi(e,!0,r,t);let a={scrollLeft:0,scrollTop:0};const l=Ci(0);if(i||!i&&!r)if((ki(t)!=="body"||Kr(s))&&(a=ka(t)),i){const u=Xi(t,!0,r,t);l.x=u.x+t.clientLeft,l.y=u.y+t.clientTop}else s&&(l.x=Fg(s));const c=o.left+a.scrollLeft-l.x,h=o.top+a.scrollTop-l.y;return{x:c,y:h,width:o.width,height:o.height}}function gd(e,t){return!Nn(e)||fn(e).position==="fixed"?null:t?t(e):e.offsetParent}function Hg(e,t){const n=Qe(e);if(!Nn(e)||Ng(e))return n;let i=gd(e,t);for(;i&&_S(i)&&fn(i).position==="static";)i=gd(i,t);return i&&(ki(i)==="html"||ki(i)==="body"&&fn(i).position==="static"&&!bu(i))?n:i||ES(e)||n}const RS=async function(e){const t=this.getOffsetParent||Hg,n=this.getDimensions;return{reference:DS(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,...await n(e.floating)}}};function MS(e){return fn(e).direction==="rtl"}const Ug={convertOffsetParentRelativeRectToViewportRelativeRect:CS,getDocumentElement:li,getClippingRect:LS,getOffsetParent:Hg,getElementRects:RS,getClientRects:$S,getDimensions:IS,getScale:vs,isElement:ni,isRTL:MS};function NS(e,t){let n=null,i;const s=li(e);function r(){var a;clearTimeout(i),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),r();const{left:c,top:h,width:u,height:f}=e.getBoundingClientRect();if(a||t(),!u||!f)return;const g=fo(h),p=fo(s.clientWidth-(c+u)),y=fo(s.clientHeight-(h+f)),x=fo(c),E={rootMargin:-g+"px "+-p+"px "+-y+"px "+-x+"px",threshold:ze(0,Ti(1,l))||1};let b=!0;function _(w){const T=w[0].intersectionRatio;if(T!==l){if(!b)return o();T?o(!1,T):i=setTimeout(()=>{o(!1,1e-7)},100)}b=!1}try{n=new IntersectionObserver(_,{...E,root:s.ownerDocument})}catch{n=new IntersectionObserver(_,E)}n.observe(e)}return o(!0),r}function FS(e,t,n,i){i===void 0&&(i={});const{ancestorScroll:s=!0,ancestorResize:r=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,c=vu(e),h=s||r?[...c?Cr(c):[],...Cr(t)]:[];h.forEach(S=>{s&&S.addEventListener("scroll",n,{passive:!0}),r&&S.addEventListener("resize",n)});const u=c&&a?NS(c,n):null;let f=-1,g=null;o&&(g=new ResizeObserver(S=>{let[E]=S;E&&E.target===c&&g&&(g.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var b;(b=g)==null||b.observe(t)})),n()}),c&&!l&&g.observe(c),g.observe(t));let p,y=l?Xi(e):null;l&&x();function x(){const S=Xi(e);y&&(S.x!==y.x||S.y!==y.y||S.width!==y.width||S.height!==y.height)&&n(),y=S,p=requestAnimationFrame(x)}return n(),()=>{var S;h.forEach(E=>{s&&E.removeEventListener("scroll",n),r&&E.removeEventListener("resize",n)}),u?.(),(S=g)==null||S.disconnect(),g=null,l&&cancelAnimationFrame(p)}}const BS=vS,HS=gS,US=wS,VS=mS,jS=pS,KS=(e,t,n)=>{const i=new Map,s={platform:Ug,...n},r={...s.platform,_c:i};return fS(e,t,{...s,platform:r})};function md(e){const{x:t=0,y:n=0,width:i=0,height:s=0}=e??{};if(typeof DOMRect=="function")return new DOMRect(t,n,i,s);const r={x:t,y:n,width:i,height:s,top:n,right:t+i,bottom:n+s,left:t};return{...r,toJSON:()=>r}}function qS(e,t){return{contextElement:e,getBoundingClientRect:()=>{const i=t(e);return i?md(i):e?e.getBoundingClientRect():md()}}}function GS(e){return/^(?:top|bottom|left|right)(?:-(?:start|end))?$/.test(e)}const WS={top:"bottom",right:"left",bottom:"top",left:"right"};function zS(e,t){const[n,i]=e.split("-"),s=WS[n];return i?n==="left"||n==="right"?`${s} ${i==="start"?"top":"bottom"}`:i==="start"?`${s} ${t==="rtl"?"right":"left"}`:`${s} ${t==="rtl"?"left":"right"}`:`${s} center`}function wu(e){e=Rt({getAnchorRect:u=>u?.getBoundingClientRect(),placement:"bottom",gutter:0,shift:0,flip:!0,slide:!0,overlap:!1,sameWidth:!1,fitViewport:!1,hideWhenDetached:!1,detachedPadding:0,arrowPadding:4,overflowPadding:8},e);const[t,n]=G(),[i,s]=G(),[r,o]=G(e.placement),a=()=>qS(e.anchorRef(),e.getAnchorRect),{direction:l}=Sa();async function c(){const u=a(),f=t(),g=i();if(!u||!f)return;const p=(g?.clientHeight||0)/2,y=typeof e.gutter=="number"?e.gutter+p:e.gutter??p;f.style.setProperty("--kb-popper-content-overflow-padding",`${e.overflowPadding}px`),u.getBoundingClientRect();const x=[yS(({placement:w})=>{const T=!!w.split("-")[1];return{mainAxis:y,crossAxis:T?void 0:e.shift,alignmentAxis:e.shift}})];if(e.flip!==!1){const w=typeof e.flip=="string"?e.flip.split(" "):void 0;if(w!==void 0&&!w.every(GS))throw new Error("`flip` expects a spaced-delimited list of placements");x.push(HS({padding:e.overflowPadding,fallbackPlacements:w}))}(e.slide||e.overlap)&&x.push(BS({mainAxis:e.slide,crossAxis:e.overlap,padding:e.overflowPadding})),x.push(US({padding:e.overflowPadding,apply({availableWidth:w,availableHeight:T,rects:C}){const $=Math.round(C.reference.width);w=Math.floor(w),T=Math.floor(T),f.style.setProperty("--kb-popper-anchor-width",`${$}px`),f.style.setProperty("--kb-popper-content-available-width",`${w}px`),f.style.setProperty("--kb-popper-content-available-height",`${T}px`),e.sameWidth&&(f.style.width=`${$}px`),e.fitViewport&&(f.style.maxWidth=`${w}px`,f.style.maxHeight=`${T}px`)}})),e.hideWhenDetached&&x.push(VS({padding:e.detachedPadding})),g&&x.push(jS({element:g,padding:e.arrowPadding}));const S=await KS(u,f,{placement:e.placement,strategy:"absolute",middleware:x,platform:{...Ug,isRTL:()=>l()==="rtl"}});if(o(S.placement),e.onCurrentPlacementChange?.(S.placement),!f)return;f.style.setProperty("--kb-popper-content-transform-origin",zS(S.placement,l()));const E=Math.round(S.x),b=Math.round(S.y);let _;if(e.hideWhenDetached&&(_=S.middlewareData.hide?.referenceHidden?"hidden":"visible"),Object.assign(f.style,{top:"0",left:"0",transform:`translate3d(${E}px, ${b}px, 0)`,visibility:_}),g&&S.middlewareData.arrow){const{x:w,y:T}=S.middlewareData.arrow,C=S.placement.split("-")[0];Object.assign(g.style,{left:w!=null?`${w}px`:"",top:T!=null?`${T}px`:"",[C]:"100%"})}}tt(()=>{const u=a(),f=t();if(!u||!f)return;const g=FS(u,f,c,{elementResize:typeof ResizeObserver=="function"});bt(g)}),tt(()=>{const u=t(),f=e.contentRef();!u||!f||queueMicrotask(()=>{u.style.zIndex=getComputedStyle(f).zIndex})});const h={currentPlacement:r,contentRef:()=>e.contentRef(),setPositionerRef:n,setArrowRef:s};return L(kg.Provider,{value:h,get children(){return e.children}})}const Vg=ue();function YS(){const e=ce(Vg);if(e===void 0)throw new Error("[kobalte]: `useListboxContext` must be used within a `Listbox` component");return e}const jg=ue();function XS(){const e=ce(jg);if(e===void 0)throw new Error("[kobalte]: `useListboxItemContext` must be used within a `Listbox.Item` component");return e}function QS(e){let t;const n=YS(),i=`${n.generateId("item")}-${mn()}`;e=Rt({id:i},e);const[s,r]=$t(e,["ref","item","aria-label","aria-labelledby","aria-describedby","onPointerMove","onPointerDown","onPointerUp","onClick","onKeyDown","onMouseDown","onFocus"]),[o,a]=G(),[l,c]=G(),h=()=>n.listState().selectionManager(),u=()=>h().focusedKey()===s.item.key,f=yg({key:()=>s.item.key,selectionManager:h,shouldSelectOnPressUp:n.shouldSelectOnPressUp,allowsDifferentPressOrigin:()=>n.shouldSelectOnPressUp()&&n.shouldFocusOnHover(),shouldUseVirtualFocus:n.shouldUseVirtualFocus,disabled:()=>s.item.disabled},()=>t),g=()=>{if(h().selectionMode()!=="none")return f.isSelected()},p=dt(()=>!(Br()&&kw())),y=()=>p()?s["aria-label"]:void 0,x=()=>p()?o():void 0,S=()=>p()?l():void 0,E=()=>{if(!n.isVirtualized())return;const C=n.listState().collection().getItem(s.item.key)?.index;return C!=null?C+1:void 0},b=()=>{if(n.isVirtualized())return qw(n.listState().collection())},_=C=>{Dt(C,s.onPointerMove),C.pointerType==="mouse"&&!f.isDisabled()&&n.shouldFocusOnHover()&&(de(C.currentTarget),h().setFocused(!0),h().setFocusedKey(s.item.key))},w=dt(()=>({"data-disabled":f.isDisabled()?"":void 0,"data-selected":f.isSelected()?"":void 0,"data-highlighted":u()?"":void 0})),T={isSelected:f.isSelected,dataset:w,generateId:Hn(()=>r.id),registerLabelId:le(a),registerDescriptionId:le(c)};return L(jg.Provider,{value:T,get children(){return L(se,ft({as:"li",ref(C){var $=me(I=>t=I,s.ref);typeof $=="function"&&$(C)},role:"option",get tabIndex(){return f.tabIndex()},get"aria-disabled"(){return f.isDisabled()},get"aria-selected"(){return g()},get"aria-label"(){return y()},get"aria-labelledby"(){return x()},get"aria-describedby"(){return S()},get"aria-posinset"(){return E()},get"aria-setsize"(){return b()},get"data-key"(){return f.dataKey()},get onPointerDown(){return ee([s.onPointerDown,f.onPointerDown])},get onPointerUp(){return ee([s.onPointerUp,f.onPointerUp])},get onClick(){return ee([s.onClick,f.onClick])},get onKeyDown(){return ee([s.onKeyDown,f.onKeyDown])},get onMouseDown(){return ee([s.onMouseDown,f.onMouseDown])},get onFocus(){return ee([s.onFocus,f.onFocus])},onPointerMove:_},w,r))}})}function JS(e){const t=XS();e=Rt({id:t.generateId("indicator")},e);const[n,i]=$t(e,["forceMount"]);return L(Et,{get when(){return n.forceMount||t.isSelected()},get children(){return L(se,ft({as:"div","aria-hidden":"true"},()=>t.dataset(),i))}})}function ZS(e){let t;const n=`listbox-${mn()}`;e=Rt({id:n,selectionMode:"single",virtualized:!1},e);const[i,s]=$t(e,["ref","children","renderItem","renderSection","value","defaultValue","onChange","options","optionValue","optionTextValue","optionDisabled","optionGroupChildren","state","keyboardDelegate","autoFocus","selectionMode","shouldFocusWrap","shouldUseVirtualFocus","shouldSelectOnPressUp","shouldFocusOnHover","allowDuplicateSelectionEvents","disallowEmptySelection","selectionBehavior","selectOnFocus","disallowTypeAhead","allowsTabNavigation","virtualized","scrollToItem","scrollRef","onKeyDown","onMouseDown","onFocusIn","onFocusOut"]),r=dt(()=>i.state?i.state:du({selectedKeys:()=>i.value,defaultSelectedKeys:()=>i.defaultValue,onSelectionChange:i.onChange,allowDuplicateSelectionEvents:()=>V(i.allowDuplicateSelectionEvents),disallowEmptySelection:()=>V(i.disallowEmptySelection),selectionBehavior:()=>V(i.selectionBehavior),selectionMode:()=>V(i.selectionMode),dataSource:()=>i.options??[],getKey:()=>i.optionValue,getTextValue:()=>i.optionTextValue,getDisabled:()=>i.optionDisabled,getSectionChildren:()=>i.optionGroupChildren})),o=wg({selectionManager:()=>r().selectionManager(),collection:()=>r().collection(),autoFocus:()=>V(i.autoFocus),shouldFocusWrap:()=>V(i.shouldFocusWrap),keyboardDelegate:()=>i.keyboardDelegate,disallowEmptySelection:()=>V(i.disallowEmptySelection),selectOnFocus:()=>V(i.selectOnFocus),disallowTypeAhead:()=>V(i.disallowTypeAhead),shouldUseVirtualFocus:()=>V(i.shouldUseVirtualFocus),allowsTabNavigation:()=>V(i.allowsTabNavigation),isVirtualized:()=>i.virtualized,scrollToKey:()=>i.scrollToItem},()=>t,()=>i.scrollRef?.()),a={listState:r,generateId:Hn(()=>s.id),shouldUseVirtualFocus:()=>e.shouldUseVirtualFocus,shouldSelectOnPressUp:()=>e.shouldSelectOnPressUp,shouldFocusOnHover:()=>e.shouldFocusOnHover,isVirtualized:()=>i.virtualized};return L(Vg.Provider,{value:a,get children(){return L(se,ft({as:"ul",ref(l){var c=me(h=>t=h,i.ref);typeof c=="function"&&c(l)},role:"listbox",get tabIndex(){return o.tabIndex()},get"aria-multiselectable"(){return r().selectionManager().selectionMode()==="multiple"?!0:void 0},get onKeyDown(){return ee([i.onKeyDown,o.onKeyDown])},get onMouseDown(){return ee([i.onMouseDown,o.onMouseDown])},get onFocusIn(){return ee([i.onFocusIn,o.onFocusIn])},get onFocusOut(){return ee([i.onFocusOut,o.onFocusOut])}},s,{get children(){return L(Et,{get when(){return!i.virtualized},get fallback(){return i.children?.(r().collection)},get children(){return L(bw,{get each(){return[...r().collection()]},by:"key",children:l=>L(ua,{get children(){return[L(zn,{get when(){return l().type==="section"},get children(){return i.renderSection?.(l())}}),L(zn,{get when(){return l().type==="item"},get children(){return i.renderItem?.(l())}})]}})})}})}}))}})}const Kg=ue();function qg(){return ce(Kg)}function Gs(){const e=qg();if(e===void 0)throw new Error("[kobalte]: `useMenuContext` must be used within a `Menu` component");return e}const Gg=ue();function is(){const e=ce(Gg);if(e===void 0)throw new Error("[kobalte]: `useMenuRootContext` must be used within a `MenuRoot` component");return e}/*!
 * Portions of this file are based on code from radix-ui-primitives.
 * MIT Licensed, Copyright (c) 2022 WorkOS.
 *
 * Credits to the Radix UI team:
 * https://github.com/radix-ui/primitives/blob/81b25f4b40c54f72aeb106ca0e64e1e09655153e/packages/react/menu/src/Menu.tsx
 */function tx(e,t){return t?qp([e.clientX,e.clientY],t):!1}function ex(e){const t=is(),n=Sg(),i=qg();e=Rt({placement:"bottom-start"},e);const[s,r]=$t(e,["open","defaultOpen","onOpenChange"]);let o=0,a=null,l="right";const[c,h]=G(),[u,f]=G(),[g,p]=G(),[y,x]=G(),[S,E]=G(!0),[b,_]=G(r.placement),[w,T]=G([]),[C,$]=G([]),{DomCollectionProvider:I}=GE({items:C,onItemsChange:$}),A=Hr({open:()=>s.open,defaultOpen:()=>s.defaultOpen,onOpenChange:z=>s.onOpenChange?.(z)}),O=ks(()=>t.forceMount()||A.isOpen()),M=du({selectionMode:"none",dataSource:C}),B=z=>{E(z),A.open()},N=(z=!1)=>{A.close(),z&&i&&i.close(!0)},K=z=>{E(z),A.toggle()},Y=()=>{const z=y();z&&(de(z),M.selectionManager().setFocused(!0),M.selectionManager().setFocusedKey(void 0))},X=z=>{T(rt=>[...rt,z]);const Bt=i?.registerNestedMenu(z);return()=>{T(rt=>Yl(rt,z)),Bt?.()}},kt=z=>l===a?.side&&tx(z,a?.area),J=z=>{kt(z)&&z.preventDefault()},zt=z=>{kt(z)||Y()},Qt=z=>{kt(z)&&z.preventDefault()};lu({isDisabled:()=>!(i==null&&A.isOpen()&&t.isModal()),targets:()=>[y(),...w()].filter(Boolean)}),tt(()=>{const z=y();if(!z||!i)return;const Bt=i.registerNestedMenu(z);bt(()=>{Bt()})});const vt={dataset:dt(()=>({"data-expanded":A.isOpen()?"":void 0,"data-closed":A.isOpen()?void 0:""})),isOpen:A.isOpen,contentPresence:O,currentPlacement:b,pointerGraceTimeoutId:()=>o,autoFocus:S,listState:()=>M,parentMenuContext:()=>i,triggerRef:g,contentRef:y,triggerId:c,contentId:u,setTriggerRef:p,setContentRef:x,open:B,close:N,toggle:K,focusContent:Y,onItemEnter:J,onItemLeave:zt,onTriggerLeave:Qt,setPointerDir:z=>l=z,setPointerGraceTimeoutId:z=>o=z,setPointerGraceIntent:z=>a=z,registerNestedMenu:X,registerItemToParentDomCollection:n?.registerItem,registerTriggerId:le(h),registerContentId:le(f)};return L(I,{get children(){return L(Kg.Provider,{value:vt,get children(){return L(wu,ft({anchorRef:g,contentRef:y,onCurrentPlacementChange:_},r))}})}})}const Wg=ue();function QO(){const e=ce(Wg);if(e===void 0)throw new Error("[kobalte]: `useMenuItemContext` must be used within a `Menu.Item` component");return e}function nx(e){let t;const n=is(),i=Gs();e=Rt({id:n.generateId(`item-${mn()}`)},e);const[s,r]=$t(e,["ref","textValue","disabled","closeOnSelect","checked","indeterminate","onSelect","onPointerMove","onPointerLeave","onPointerDown","onPointerUp","onClick","onKeyDown","onMouseDown","onFocus"]),[o,a]=G(),[l,c]=G(),[h,u]=G(),f=()=>i.listState().selectionManager(),g=()=>r.id,p=()=>f().focusedKey()===g(),y=()=>{s.onSelect?.(),s.closeOnSelect&&i.close(!0)};WE({getItem:()=>({ref:()=>t,type:"item",key:g(),textValue:s.textValue??h()?.textContent??t?.textContent??"",disabled:s.disabled??!1})});const x=yg({key:g,selectionManager:f,shouldSelectOnPressUp:!0,allowsDifferentPressOrigin:!0,disabled:()=>s.disabled},()=>t),S=$=>{Dt($,s.onPointerMove),$.pointerType==="mouse"&&(s.disabled?i.onItemLeave($):(i.onItemEnter($),$.defaultPrevented||(de($.currentTarget),i.listState().selectionManager().setFocused(!0),i.listState().selectionManager().setFocusedKey(g()))))},E=$=>{Dt($,s.onPointerLeave),$.pointerType==="mouse"&&i.onItemLeave($)},b=$=>{Dt($,s.onPointerUp),!s.disabled&&$.button===0&&y()},_=$=>{if(Dt($,s.onKeyDown),!$.repeat&&!s.disabled)switch($.key){case"Enter":case" ":y();break}},w=dt(()=>{if(s.indeterminate)return"mixed";if(s.checked!=null)return s.checked}),T=dt(()=>({"data-indeterminate":s.indeterminate?"":void 0,"data-checked":s.checked&&!s.indeterminate?"":void 0,"data-disabled":s.disabled?"":void 0,"data-highlighted":p()?"":void 0})),C={isChecked:()=>s.checked,dataset:T,setLabelRef:u,generateId:Hn(()=>r.id),registerLabel:le(a),registerDescription:le(c)};return L(Wg.Provider,{value:C,get children(){return L(se,ft({as:"div",ref($){var I=me(A=>t=A,s.ref);typeof I=="function"&&I($)},get tabIndex(){return x.tabIndex()},get"aria-checked"(){return w()},get"aria-disabled"(){return s.disabled},get"aria-labelledby"(){return o()},get"aria-describedby"(){return l()},get"data-key"(){return x.dataKey()},get onPointerDown(){return ee([s.onPointerDown,x.onPointerDown])},get onPointerUp(){return ee([b,x.onPointerUp])},get onClick(){return ee([s.onClick,x.onClick])},get onKeyDown(){return ee([_,x.onKeyDown])},get onMouseDown(){return ee([s.onMouseDown,x.onMouseDown])},get onFocus(){return ee([s.onFocus,x.onFocus])},onPointerMove:S,onPointerLeave:E},T,r))}})}function ix(e){let t;const n=is(),i=Gs();e=Rt({id:n.generateId(`content-${mn()}`)},e);const[s,r]=$t(e,["ref","id","style","onOpenAutoFocus","onCloseAutoFocus","onEscapeKeyDown","onFocusOutside","onPointerEnter","onPointerMove","onKeyDown","onMouseDown","onFocusIn","onFocusOut"]);let o=0;const a=()=>i.parentMenuContext()==null&&n.isModal(),l=wg({selectionManager:i.listState().selectionManager,collection:i.listState().collection,autoFocus:i.autoFocus,deferAutoFocus:!0,shouldFocusWrap:!0,disallowTypeAhead:()=>!i.listState().selectionManager().isFocused()},()=>t);au({trapFocus:()=>a()&&i.isOpen(),onMountAutoFocus:s.onOpenAutoFocus,onUnmountAutoFocus:s.onCloseAutoFocus},()=>t);const c=p=>{Fe(p.currentTarget,p.target)&&p.key==="Tab"&&i.isOpen()&&p.preventDefault()},h=p=>{s.onEscapeKeyDown?.(p),i.close(!0)},u=p=>{s.onFocusOutside?.(p),n.isModal()&&p.preventDefault()},f=p=>{Dt(p,s.onPointerEnter),i.isOpen()&&(i.parentMenuContext()?.listState().selectionManager().setFocused(!1),i.parentMenuContext()?.listState().selectionManager().setFocusedKey(void 0))},g=p=>{if(Dt(p,s.onPointerMove),p.pointerType!=="mouse")return;const y=p.target,x=o!==p.clientX;Fe(p.currentTarget,y)&&x&&(i.setPointerDir(p.clientX>o?"right":"left"),o=p.clientX)};return tt(()=>bt(i.registerContentId(s.id))),L(Et,{get when(){return i.contentPresence.isPresent()},get children(){return L(pu,{get children(){return L(Ca,ft({ref(p){var y=me(x=>{i.setContentRef(x),i.contentPresence.setRef(x),t=x},s.ref);typeof y=="function"&&y(p)},role:"menu",get id(){return s.id},get tabIndex(){return l.tabIndex()},get disableOutsidePointerEvents(){return dt(()=>!!a())()&&i.isOpen()},get excludedElements(){return[i.triggerRef]},bypassTopMostLayerCheck:!0,get style(){return{"--kb-menu-content-transform-origin":"var(--kb-popper-content-transform-origin)",position:"relative",...s.style}},get"aria-labelledby"(){return i.triggerId()},onEscapeKeyDown:h,onFocusOutside:u,get onDismiss(){return i.close},get onKeyDown(){return ee([s.onKeyDown,l.onKeyDown,c])},get onMouseDown(){return ee([s.onMouseDown,l.onMouseDown])},get onFocusIn(){return ee([s.onFocusIn,l.onFocusIn])},get onFocusOut(){return ee([s.onFocusOut,l.onFocusOut])},onPointerEnter:f,onPointerMove:g},()=>i.dataset(),r))}})}})}function sx(e){let t;const n=is(),i=Gs(),[s,r]=$t(e,["ref"]);return cu({ownerRef:()=>t,isDisabled:()=>!(i.isOpen()&&(n.isModal()||n.preventScroll()))}),L(ix,ft({ref(o){var a=me(l=>t=l,s.ref);typeof a=="function"&&a(o)}},r))}const zg=ue();function rx(){const e=ce(zg);if(e===void 0)throw new Error("[kobalte]: `useMenuGroupContext` must be used within a `Menu.Group` component");return e}function ox(e){const t=is();e=Rt({id:t.generateId(`group-${mn()}`)},e);const[n,i]=G(),s={generateId:Hn(()=>e.id),registerLabelId:le(i)};return L(zg.Provider,{value:s,get children(){return L(se,ft({as:"div",role:"group",get"aria-labelledby"(){return n()}},e))}})}function ax(e){const t=rx();e=Rt({id:t.generateId("label")},e);const[n,i]=$t(e,["id"]);return tt(()=>bt(t.registerLabelId(n.id))),L(se,ft({as:"span",get id(){return n.id},"aria-hidden":"true"},i))}function gi(e){return L(nx,ft({role:"menuitem",closeOnSelect:!0},e))}function lx(e){const t=Gs();return L(Et,{get when(){return t.contentPresence.isPresent()},get children(){return L(ca,e)}})}function cx(e){const t=`menu-${mn()}`;e=Rt({id:t,modal:!0,preventScroll:!1},e);const[n,i]=$t(e,["id","modal","preventScroll","forceMount","open","defaultOpen","onOpenChange"]),s=Hr({open:()=>n.open,defaultOpen:()=>n.defaultOpen,onOpenChange:o=>n.onOpenChange?.(o)}),r={isModal:()=>n.modal??!0,preventScroll:()=>n.preventScroll??!1,forceMount:()=>n.forceMount??!1,generateId:Hn(()=>n.id)};return L(Gg.Provider,{value:r,get children(){return L(ex,ft({get open(){return s.isOpen()},get onOpenChange(){return s.setIsOpen}},i))}})}function ux(e){const t=is(),n=Gs();e=Rt({id:t.generateId("trigger")},e);const[i,s]=$t(e,["ref","id","disabled","onPointerDown","onClick","onKeyDown"]),r=l=>{Dt(l,i.onPointerDown),l.currentTarget.dataset.pointerType=l.pointerType,!i.disabled&&l.pointerType!=="touch"&&l.button===0&&n.toggle(!0)},o=l=>{Dt(l,i.onClick),!i.disabled&&l.currentTarget.dataset.pointerType==="touch"&&n.toggle(!0)},a=l=>{if(Dt(l,i.onKeyDown),!i.disabled)switch(l.key){case"Enter":case" ":case"ArrowDown":l.stopPropagation(),l.preventDefault(),n.toggle("first");break;case"ArrowUp":l.stopPropagation(),l.preventDefault(),n.toggle("last");break}};return tt(()=>bt(n.registerTriggerId(i.id))),L(Vr,ft({ref(l){var c=me(n.setTriggerRef,i.ref);typeof c=="function"&&c(l)},get id(){return i.id},get disabled(){return i.disabled},"aria-haspopup":"true",get"aria-expanded"(){return n.isOpen()},get"aria-controls"(){return dt(()=>!!n.isOpen())()?n.contentId():void 0},onPointerDown:r,onClick:o,onKeyDown:a},()=>n.dataset(),s))}function hx(e){const t=is(),n=Gs(),[i,s]=$t(e,["onCloseAutoFocus","onInteractOutside"]);let r=!1;return L(sx,ft({onCloseAutoFocus:l=>{i.onCloseAutoFocus?.(l),r||de(n.triggerRef()),r=!1,l.preventDefault()},onInteractOutside:l=>{i.onInteractOutside?.(l),(!t.isModal()||l.detail.isContextMenu)&&(r=!0)}},s))}function dx(e){const t=`dropdownmenu-${mn()}`;return e=Rt({id:t},e),L(cx,e)}const Yg=ue();function ss(){const e=ce(Yg);if(e===void 0)throw new Error("[kobalte]: `useSelectContext` must be used within a `Select` component");return e}function fx(e){let t;const n=ss(),[i,s]=$t(e,["ref","id","style","onCloseAutoFocus","onFocusOutside"]),r=a=>{n.close()},o=a=>{i.onFocusOutside?.(a),n.isOpen()&&n.isModal()&&a.preventDefault()};return lu({isDisabled:()=>!(n.isOpen()&&n.isModal()),targets:()=>t?[t]:[]}),cu({ownerRef:()=>t,isDisabled:()=>!(n.isOpen()&&(n.isModal()||n.preventScroll()))}),au({trapFocus:()=>n.isOpen()&&n.isModal(),onMountAutoFocus:a=>{a.preventDefault()},onUnmountAutoFocus:a=>{i.onCloseAutoFocus?.(a),a.defaultPrevented||(de(n.triggerRef()),a.preventDefault())}},()=>t),L(Et,{get when(){return n.contentPresence.isPresent()},get children(){return L(pu,{get children(){return L(Ca,ft({ref(a){var l=me(c=>{n.setContentRef(c),n.contentPresence.setRef(c),t=c},i.ref);typeof l=="function"&&l(a)},get disableOutsidePointerEvents(){return dt(()=>!!n.isModal())()&&n.isOpen()},get excludedElements(){return[n.triggerRef]},get style(){return{"--kb-select-content-transform-origin":"var(--kb-popper-content-transform-origin)",position:"relative",...i.style}},onEscapeKeyDown:r,onFocusOutside:o,get onDismiss(){return n.close}},()=>n.dataset(),s))}})}})}function px(e){const t=ss();return e=Rt({children:""},e),L(se,ft({as:"span","aria-hidden":"true"},()=>t.dataset(),e))}function gx(e){const t=ss(),[n,i]=$t(e,["onClick"]);return L(b_,ft({as:"span",onClick:r=>{Dt(r,n.onClick),t.isDisabled()||t.triggerRef()?.focus()}},i))}function mx(e){const t=ss();e=Rt({id:t.generateId("listbox")},e);const[n,i]=$t(e,["ref","id","onKeyDown"]);return tt(()=>bt(t.registerListboxId(n.id))),L(ZS,ft({ref(r){var o=me(t.setListboxRef,n.ref);typeof o=="function"&&o(r)},get id(){return n.id},get state(){return t.listState()},get virtualized(){return t.isVirtualized()},get autoFocus(){return t.autoFocus()},shouldSelectOnPressUp:!0,shouldFocusOnHover:!0,get shouldFocusWrap(){return t.shouldFocusWrap()},get disallowTypeAhead(){return t.disallowTypeAhead()},get"aria-labelledby"(){return t.listboxAriaLabelledBy()},get renderItem(){return t.renderItem},get renderSection(){return t.renderSection},onKeyDown:r=>{Dt(r,n.onKeyDown),r.key==="Escape"&&r.preventDefault()}},i))}function bx(e){const t=ss();return L(Et,{get when(){return t.contentPresence.isPresent()},get children(){return L(ca,e)}})}function yx(e){const t=`select-${mn()}`;e=Rt({id:t,selectionMode:"single",disallowEmptySelection:!1,allowDuplicateSelectionEvents:!0,gutter:8,sameWidth:!0,modal:!1,preventScroll:!1},e);const[n,i,s,r]=$t(e,["itemComponent","sectionComponent","open","defaultOpen","onOpenChange","value","defaultValue","onChange","placeholder","options","optionValue","optionTextValue","optionDisabled","optionGroupChildren","keyboardDelegate","allowDuplicateSelectionEvents","disallowEmptySelection","disallowTypeAhead","shouldFocusWrap","selectionBehavior","selectionMode","virtualized","modal","preventScroll","forceMount"],["getAnchorRect","placement","gutter","shift","flip","slide","overlap","sameWidth","fitViewport","hideWhenDetached","detachedPadding","arrowPadding","overflowPadding"],d_),[o,a]=G(),[l,c]=G(),[h,u]=G(),[f,g]=G(),[p,y]=G(),[x,S]=G(),[E,b]=G(),[_,w]=G(!0),T=rt=>{const St=n.optionValue;return St==null?String(rt):String(_a(St)?St(rt):rt[St])},C=dt(()=>{const rt=n.optionGroupChildren;return rt==null?n.options:n.options.flatMap(St=>St[rt]??St)}),$=dt(()=>C().map(rt=>T(rt))),I=rt=>[...rt].map(St=>C().find(Ae=>T(Ae)===St)).filter(St=>St!=null),A=Hr({open:()=>n.open,defaultOpen:()=>n.defaultOpen,onOpenChange:rt=>n.onOpenChange?.(rt)}),O=du({selectedKeys:()=>n.value!=null?n.value.map(T):n.value,defaultSelectedKeys:()=>n.defaultValue!=null?n.defaultValue.map(T):n.defaultValue,onSelectionChange:rt=>{n.onChange?.(I(rt)),n.selectionMode==="single"&&X()},allowDuplicateSelectionEvents:()=>V(n.allowDuplicateSelectionEvents),disallowEmptySelection:()=>V(n.disallowEmptySelection),selectionBehavior:()=>V(n.selectionBehavior),selectionMode:()=>n.selectionMode,dataSource:()=>n.options??[],getKey:()=>n.optionValue,getTextValue:()=>n.optionTextValue,getDisabled:()=>n.optionDisabled,getSectionChildren:()=>n.optionGroupChildren}),M=dt(()=>I(O.selectionManager().selectedKeys())),B=rt=>{O.selectionManager().toggleSelection(T(rt))},N=ks(()=>n.forceMount||A.isOpen()),K=()=>{const rt=x();rt&&de(rt)},Y=rt=>{if(n.options.length<=0)return;w(rt),A.open();let St=O.selectionManager().firstSelectedKey();St==null&&(rt==="first"?St=O.collection().getFirstKey():rt==="last"&&(St=O.collection().getLastKey())),K(),O.selectionManager().setFocused(!0),O.selectionManager().setFocusedKey(St)},X=()=>{A.close(),O.selectionManager().setFocused(!1),O.selectionManager().setFocusedKey(void 0)},kt=rt=>{A.isOpen()?X():Y(rt)},{formControlContext:J}=f_(s);i_(f,()=>{const rt=n.defaultValue?[...n.defaultValue].map(T):new an;O.selectionManager().setSelectedKeys(rt)});const zt=Jp({usage:"search",sensitivity:"base"}),Qt=dt(()=>{const rt=V(n.keyboardDelegate);return rt||new vg(O.collection,void 0,zt)}),Ut=rt=>n.itemComponent?.({item:rt}),vt=rt=>n.sectionComponent?.({section:rt});tt(Ye([$],([rt])=>{const Ae=[...O.selectionManager().selectedKeys()].filter(re=>rt.includes(re));O.selectionManager().setSelectedKeys(Ae)},{defer:!0}));const z=dt(()=>({"data-expanded":A.isOpen()?"":void 0,"data-closed":A.isOpen()?void 0:""})),Bt={dataset:z,isOpen:A.isOpen,isDisabled:()=>J.isDisabled()??!1,isMultiple:()=>V(n.selectionMode)==="multiple",isVirtualized:()=>n.virtualized??!1,isModal:()=>n.modal??!1,preventScroll:()=>n.preventScroll??!1,disallowTypeAhead:()=>n.disallowTypeAhead??!1,shouldFocusWrap:()=>n.shouldFocusWrap??!1,selectedOptions:M,contentPresence:N,autoFocus:_,triggerRef:f,listState:()=>O,keyboardDelegate:Qt,triggerId:o,valueId:l,listboxId:h,listboxAriaLabelledBy:E,setListboxAriaLabelledBy:b,setTriggerRef:g,setContentRef:y,setListboxRef:S,open:Y,close:X,toggle:kt,placeholder:()=>n.placeholder,renderItem:Ut,renderSection:vt,removeOptionFromSelection:B,generateId:Hn(()=>V(s.id)),registerTriggerId:le(a),registerValueId:le(c),registerListboxId:le(u)};return L(Xp.Provider,{value:J,get children(){return L(Yg.Provider,{value:Bt,get children(){return L(wu,ft({anchorRef:f,contentRef:p},i,{get children(){return L(se,ft({as:"div",role:"group",get id(){return V(s.id)}},()=>J.dataset(),z,r))}}))}})}})}function vx(e){const[t,n]=$t(e,["value","defaultValue","onChange","multiple"]),i=dt(()=>t.value!=null?t.multiple?t.value:[t.value]:t.value),s=dt(()=>t.defaultValue!=null?t.multiple?t.defaultValue:[t.defaultValue]:t.defaultValue);return L(yx,ft({get value(){return i()},get defaultValue(){return s()},onChange:o=>{t.multiple?t.onChange?.(o):t.onChange?.(o[0]??null)},get selectionMode(){return t.multiple?"multiple":"single"}},n))}function wx(e){const t=Ea(),n=ss();e=Rt({id:n.generateId("trigger")},e);const[i,s,r]=$t(e,["ref","disabled","onPointerDown","onClick","onKeyDown","onFocus","onBlur"],p_),o=()=>n.listState().selectionManager(),a=()=>n.keyboardDelegate(),l=()=>i.disabled||n.isDisabled(),{fieldProps:c}=g_(s),{typeSelectHandlers:h}=bg({keyboardDelegate:a,selectionManager:o,onTypeSelect:S=>o().select(S)}),u=()=>[n.listboxAriaLabelledBy(),n.valueId()].filter(Boolean).join(" ")||void 0,f=S=>{Dt(S,i.onPointerDown),S.currentTarget.dataset.pointerType=S.pointerType,!l()&&S.pointerType!=="touch"&&S.button===0&&(S.preventDefault(),n.toggle(!0))},g=S=>{Dt(S,i.onClick),!l()&&S.currentTarget.dataset.pointerType==="touch"&&n.toggle(!0)},p=S=>{if(Dt(S,i.onKeyDown),!l())switch(Dt(S,h.onKeyDown),S.key){case"Enter":case" ":case"ArrowDown":S.stopPropagation(),S.preventDefault(),n.toggle("first");break;case"ArrowUp":S.stopPropagation(),S.preventDefault(),n.toggle("last");break;case"ArrowLeft":{if(S.preventDefault(),n.isMultiple())return;const E=o().firstSelectedKey(),b=E!=null?a().getKeyAbove?.(E):a().getFirstKey?.();b!=null&&o().select(b);break}case"ArrowRight":{if(S.preventDefault(),n.isMultiple())return;const E=o().firstSelectedKey(),b=E!=null?a().getKeyBelow?.(E):a().getFirstKey?.();b!=null&&o().select(b);break}}},y=S=>{Dt(S,i.onFocus),!o().isFocused()&&o().setFocused(!0)},x=S=>{Dt(S,i.onBlur),!n.isOpen()&&o().setFocused(!1)};return tt(()=>bt(n.registerTriggerId(c.id()))),tt(()=>{n.setListboxAriaLabelledBy([c.ariaLabelledBy(),c.ariaLabel()&&!c.ariaLabelledBy()?c.id():null].filter(Boolean).join(" ")||void 0)}),L(Vr,ft({ref(S){var E=me(n.setTriggerRef,i.ref);typeof E=="function"&&E(S)},get id(){return c.id()},get disabled(){return l()},"aria-haspopup":"listbox",get"aria-expanded"(){return n.isOpen()},get"aria-controls"(){return dt(()=>!!n.isOpen())()?n.listboxId():void 0},get"aria-label"(){return c.ariaLabel()},get"aria-labelledby"(){return u()},get"aria-describedby"(){return c.ariaDescribedBy()},onPointerDown:f,onClick:g,onKeyDown:p,onFocus:y,onBlur:x},()=>n.dataset(),()=>t.dataset(),r))}var _x=it("<span>");function Ex(e){const t=Ea(),n=ss();e=Rt({id:n.generateId("value")},e);const[i,s]=$t(e,["id","children"]),r=()=>n.listState().selectionManager(),o=()=>{const a=r().selectedKeys();return a.size===1&&a.has("")?!0:r().isEmpty()};return tt(()=>bt(n.registerValueId(i.id))),(()=>{var a=Z(_x);return mf(a,ft({get id(){return i.id},get"data-placeholder-shown"(){return o()?"":void 0}},()=>t.dataset(),s),!1,!0),Q(a,L(Et,{get when(){return!o()},get fallback(){return n.placeholder()},get children(){return L(Sx,{state:{selectedOption:()=>n.selectedOptions()[0],selectedOptions:()=>n.selectedOptions(),remove:l=>n.removeOptionFromSelection(l),clear:()=>r().clearSelection()},get children(){return i.children}})}})),Po(),a})()}function Sx(e){const t=ff(()=>{const n=e.children;return _a(n)?n(e.state):n});return dt(t)}/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/tree/main/packages/%40react-aria/toast/intl
 */const It="{hotkey}",xx={"ar-AE":{close:"",notifications:`(${It}) `},"bg-BG":{close:"",notifications:` (${It})`},"cs-CZ":{close:"Zavt",notifications:`Upozornn (${It})`},"da-DK":{close:"Luk",notifications:`Pmindelser (${It})`},"de-DE":{close:"Schlieen",notifications:`Benachrichtigungen (${It})`},"el-GR":{close:"",notifications:` (${It})`},"en-US":{close:"Close",notifications:`Notifications (${It})`},"es-ES":{close:"Cerrar",notifications:`Notificaciones (${It})`},"et-EE":{close:"Sule",notifications:`Teated (${It})`},"fi-FI":{close:"Sulje",notifications:`Ilmoitukset (${It})`},"fr-FR":{close:"Fermer",notifications:`Notifications (${It})`},"he-IL":{close:"",notifications:`(${It}) `},"hr-HR":{close:"Zatvori",notifications:`Obavijesti (${It})`},"hu-HU":{close:"Bezrs",notifications:`rtestsek (${It})`},"it-IT":{close:"Chiudi",notifications:`Notifiche (${It})`},"ja-JP":{close:"",notifications:` (${It})`},"ko-KR":{close:"",notifications:` (${It})`},"lt-LT":{close:"Udaryti",notifications:`Praneimai (${It})`},"lv-LV":{close:"Aizvrt",notifications:`Paziojumi (${It})`},"nb-NO":{close:"Lukk",notifications:`Varsler (${It})`},"nl-NL":{close:"Sluiten",notifications:`Meldingen (${It})`},"pl-PL":{close:"Zamknij",notifications:`Powiadomienia (${It})`},"pt-BR":{close:"Fechar",notifications:`Notificaes (${It})`},"pt-PT":{close:"Fechar",notifications:`Notificaes (${It})`},"ro-RO":{close:"nchidei",notifications:`Notificri (${It})`},"ru-RU":{close:"",notifications:` (${It})`},"sk-SK":{close:"Zatvori",notifications:`Oznmenia (${It})`},"sl-SI":{close:"Zapri",notifications:`Obvestila (${It})`},"sr-SP":{close:"Zatvori",notifications:`Obavetenja (${It})`},"sv-SE":{close:"Stng",notifications:`Aviseringar (${It})`},"tr-TR":{close:"Kapat",notifications:`Bildirimler (${It})`},"uk-UA":{close:"",notifications:` (${It})`},"zh-CN":{close:"",notifications:` (${It})`},"zh-TW":{close:"",notifications:` (${It})`}},Xg=ue();function Aa(){const e=ce(Xg);if(e===void 0)throw new Error("[kobalte]: `useToastContext` must be used within a `Toast.Root` component");return e}function Tx(e){const t=Aa(),[n,i]=$t(e,["aria-label","onClick"]),s=gg(()=>xx);return L(Vr,ft({get"aria-label"(){return n["aria-label"]||s().format("close")},onClick:o=>{Dt(o,n.onClick),t.close()}},i))}function Cx(e){const t=Aa();e=Rt({id:t.generateId("description")},e);const[n,i]=$t(e,["id"]);return tt(()=>bt(t.registerDescriptionId(n.id))),L(se,ft({as:"div",get id(){return n.id}},i))}const $x=ue();function Qg(){const e=ce($x);if(e===void 0)throw new Error("[kobalte]: `useToastRegionContext` must be used within a `Toast.Region` component");return e}function kx(e){const t=Qg(),n=Aa(),[i,s]=$t(e,["style"]),[r,o]=G(100);let a=0;return tt(()=>{if(t.isPaused()||n.isPersistent())return;const l=setInterval(()=>{const c=new Date().getTime()-n.closeTimerStartTime()+a,h=Math.trunc(100-c/n.duration()*100);o(h<0?0:h)});bt(()=>{a+=new Date().getTime()-n.closeTimerStartTime(),clearInterval(l)})}),L(se,ft({as:"div",get style(){return{"--kb-toast-progress-fill-width":`${r()}%`,...i.style}}},s))}function Ax(e){return L(se,ft({as:"div","aria-hidden":"true",role:"presentation"},e))}var Px=it("<li role=status tabindex=0 aria-atomic=true>");const Ox="toast.swipeStart",Lx="toast.swipeMove",Ix="toast.swipeCancel",Dx="toast.swipeEnd";function Jg(e){const t=`toast-${mn()}`,n=Qg();e=Rt({id:t,priority:"high"},e);const[i,s]=$t(e,["ref","toastId","style","priority","duration","persistent","onPause","onResume","onSwipeStart","onSwipeMove","onSwipeCancel","onSwipeEnd","onEscapeKeyDown","onKeyDown","onPointerDown","onPointerMove","onPointerUp"]),[r,o]=G(!0),[a,l]=G(),[c,h]=G(),[u,f]=G(!0),g=ks(r),p=dt(()=>i.duration||n.duration());let y,x=0,S=p(),E=null,b=null;const _=()=>{o(!1),f(!0)},w=()=>{Os.remove(i.toastId)},T=N=>{!N||i.persistent||(window.clearTimeout(y),x=new Date().getTime(),y=window.setTimeout(_,N))},C=()=>{T(S),i.onResume?.()},$=()=>{const N=new Date().getTime()-x;S=S-N,window.clearTimeout(y),i.onPause?.()},I=N=>{Dt(N,i.onKeyDown),N.key==="Escape"&&(i.onEscapeKeyDown?.(N),N.defaultPrevented||_())},A=N=>{Dt(N,i.onPointerDown),N.button===0&&(E={x:N.clientX,y:N.clientY})},O=N=>{if(Dt(N,i.onPointerMove),!E)return;const K=N.clientX-E.x,Y=N.clientY-E.y,X=!!b,kt=["left","right"].includes(n.swipeDirection()),J=["left","up"].includes(n.swipeDirection())?Math.min:Math.max,zt=kt?J(0,K):0,Qt=kt?0:J(0,Y),Ut=N.pointerType==="touch"?10:2,vt={x:zt,y:Qt},z={originalEvent:N,delta:vt};if(X){b=vt,po(Lx,i.onSwipeMove,z);const{x:Bt,y:rt}=vt;N.currentTarget.setAttribute("data-swipe","move"),N.currentTarget.style.setProperty("--kb-toast-swipe-move-x",`${Bt}px`),N.currentTarget.style.setProperty("--kb-toast-swipe-move-y",`${rt}px`)}else bd(vt,n.swipeDirection(),Ut)?(b=vt,po(Ox,i.onSwipeStart,z),N.currentTarget.setAttribute("data-swipe","start"),N.target.setPointerCapture(N.pointerId)):(Math.abs(K)>Ut||Math.abs(Y)>Ut)&&(E=null)},M=N=>{Dt(N,i.onPointerUp);const K=b,Y=N.target;if(Y.hasPointerCapture(N.pointerId)&&Y.releasePointerCapture(N.pointerId),b=null,E=null,K){const X=N.currentTarget,kt={originalEvent:N,delta:K};if(bd(K,n.swipeDirection(),n.swipeThreshold())){po(Dx,i.onSwipeEnd,kt);const{x:J,y:zt}=K;N.currentTarget.setAttribute("data-swipe","end"),N.currentTarget.style.removeProperty("--kb-toast-swipe-move-x"),N.currentTarget.style.removeProperty("--kb-toast-swipe-move-y"),N.currentTarget.style.setProperty("--kb-toast-swipe-end-x",`${J}px`),N.currentTarget.style.setProperty("--kb-toast-swipe-end-y",`${zt}px`),_()}else po(Ix,i.onSwipeCancel,kt),N.currentTarget.setAttribute("data-swipe","cancel"),N.currentTarget.style.removeProperty("--kb-toast-swipe-move-x"),N.currentTarget.style.removeProperty("--kb-toast-swipe-move-y"),N.currentTarget.style.removeProperty("--kb-toast-swipe-end-x"),N.currentTarget.style.removeProperty("--kb-toast-swipe-end-y");X.addEventListener("click",J=>J.preventDefault(),{once:!0})}};Bs(()=>{n.toasts().find(N=>N.id===i.toastId&&N.update)&&f(!1)}),tt(Ye(()=>n.isPaused(),N=>{N?$():C()},{defer:!0})),tt(Ye([r,p],([N,K])=>{N&&!n.isPaused()&&T(K)})),tt(Ye(()=>Os.get(i.toastId)?.dismiss,N=>N&&_())),tt(Ye(()=>g.isPresent(),N=>!N&&w()));const B={close:_,duration:p,isPersistent:()=>i.persistent??!1,closeTimerStartTime:()=>x,generateId:Hn(()=>s.id),registerTitleId:le(l),registerDescriptionId:le(h)};return L(Et,{get when(){return g.isPresent()},get children(){return L(Xg.Provider,{value:B,get children(){var N=Z(Px);N.$$pointerup=M,N.$$pointermove=O,N.$$pointerdown=A,N.$$keydown=I;var K=me(g.setRef,i.ref);return typeof K=="function"&&bf(K,N),mf(N,ft({get style(){return{animation:u()?void 0:"none","user-select":"none","touch-action":"none",...i.style}},get"aria-live"(){return i.priority==="high"?"assertive":"polite"},get"aria-labelledby"(){return a()},get"aria-describedby"(){return c()},get"data-opened"(){return r()?"":void 0},get"data-closed"(){return r()?void 0:""},get"data-swipe-direction"(){return n.swipeDirection()}},s),!1,!1),Po(),N}})}})}function bd(e,t,n=0){const i=Math.abs(e.x),s=Math.abs(e.y),r=i>s;return t==="left"||t==="right"?r&&i>n:!r&&s>n}function po(e,t,n){const i=n.originalEvent.currentTarget,s=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),i.dispatchEvent(s)}yf(["keydown","pointerdown","pointermove","pointerup"]);function Rx(e){const t=Aa();e=Rt({id:t.generateId("title")},e);const[n,i]=$t(e,["id"]);return tt(()=>bt(t.registerTitleId(n.id))),L(se,ft({as:"div",get id(){return n.id}},i))}const Zg=ue();function _u(){const e=ce(Zg);if(e===void 0)throw new Error("[kobalte]: `useTooltipContext` must be used within a `Tooltip` component");return e}function Mx(e){const t=_u();e=Rt({id:t.generateId("content")},e);const[n,i]=$t(e,["ref","style"]);return tt(()=>bt(t.registerContentId(i.id))),L(Et,{get when(){return t.contentPresence.isPresent()},get children(){return L(pu,{get children(){return L(Ca,ft({ref(s){var r=me(o=>{t.setContentRef(o),t.contentPresence.setRef(o)},n.ref);typeof r=="function"&&r(s)},role:"tooltip",disableOutsidePointerEvents:!1,get style(){return{"--kb-tooltip-content-transform-origin":"var(--kb-popper-content-transform-origin)",position:"relative",...n.style}},onFocusOutside:s=>s.preventDefault(),onDismiss:()=>t.hideTooltip(!0)},()=>t.dataset(),i))}})}})}function Nx(e){const t=_u();return L(Et,{get when(){return t.contentPresence.isPresent()},get children(){return L(ca,e)}})}/*!
 * Portions of this file are based on code from ariakit.
 * MIT Licensed, Copyright (c) Diego Haz.
 *
 * Credits to the Ariakit team:
 * https://github.com/ariakit/ariakit/blob/84e97943ad637a582c01c9b56d880cd95f595737/packages/ariakit/src/hovercard/__utils/polygon.ts
 * https://github.com/ariakit/ariakit/blob/f2a96973de523d67e41eec983263936c489ef3e2/packages/ariakit/src/hovercard/__utils/debug-polygon.ts
 */function Fx(e,t,n){const i=e.split("-")[0],s=t.getBoundingClientRect(),r=n.getBoundingClientRect(),o=[],a=s.left+s.width/2,l=s.top+s.height/2;switch(i){case"top":o.push([s.left,l]),o.push([r.left,r.bottom]),o.push([r.left,r.top]),o.push([r.right,r.top]),o.push([r.right,r.bottom]),o.push([s.right,l]);break;case"right":o.push([a,s.top]),o.push([r.left,r.top]),o.push([r.right,r.top]),o.push([r.right,r.bottom]),o.push([r.left,r.bottom]),o.push([a,s.bottom]);break;case"bottom":o.push([s.left,l]),o.push([r.left,r.top]),o.push([r.left,r.bottom]),o.push([r.right,r.bottom]),o.push([r.right,r.top]),o.push([s.right,l]);break;case"left":o.push([a,s.top]),o.push([r.right,r.top]),o.push([r.left,r.top]),o.push([r.left,r.bottom]),o.push([r.right,r.bottom]),o.push([a,s.bottom]);break}return o}const Ni={};let Bx=0,ds=!1,Kn,nr;function Hx(e){const t=`tooltip-${mn()}`,n=`${++Bx}`;e=Rt({id:t,openDelay:700,closeDelay:300},e);const[i,s]=$t(e,["id","open","defaultOpen","onOpenChange","disabled","triggerOnFocusOnly","openDelay","closeDelay","ignoreSafeArea","forceMount"]);let r;const[o,a]=G(),[l,c]=G(),[h,u]=G(),[f,g]=G(s.placement),p=Hr({open:()=>i.open,defaultOpen:()=>i.defaultOpen,onOpenChange:B=>i.onOpenChange?.(B)}),y=ks(()=>i.forceMount||p.isOpen()),x=()=>{Ni[n]=E},S=()=>{for(const B in Ni)B!==n&&(Ni[B](!0),delete Ni[B])},E=(B=!1)=>{B||i.closeDelay&&i.closeDelay<=0?(window.clearTimeout(r),r=void 0,p.close()):r||(r=window.setTimeout(()=>{r=void 0,p.close()},i.closeDelay)),window.clearTimeout(Kn),Kn=void 0,ds&&(window.clearTimeout(nr),nr=window.setTimeout(()=>{delete Ni[n],nr=void 0,ds=!1},i.closeDelay))},b=()=>{clearTimeout(r),r=void 0,S(),x(),ds=!0,p.open(),window.clearTimeout(Kn),Kn=void 0,window.clearTimeout(nr),nr=void 0},_=()=>{S(),x(),!p.isOpen()&&!Kn&&!ds?Kn=window.setTimeout(()=>{Kn=void 0,ds=!0,b()},i.openDelay):p.isOpen()||b()},w=(B=!1)=>{!B&&i.openDelay&&i.openDelay>0&&!r?_():b()},T=()=>{window.clearTimeout(Kn),Kn=void 0,ds=!1},C=()=>{window.clearTimeout(r),r=void 0},$=B=>Fe(l(),B)||Fe(h(),B),I=B=>{const N=l(),K=h();if(!(!N||!K))return Fx(B,N,K)},A=B=>{const N=B.target;if($(N)){C();return}if(!i.ignoreSafeArea){const K=I(f());if(K&&qp(Vw(B),K)){C();return}}r||E()};tt(()=>{if(!p.isOpen())return;const B=Ue();B.addEventListener("pointermove",A,!0),bt(()=>{B.removeEventListener("pointermove",A,!0)})}),tt(()=>{const B=l();if(!B||!p.isOpen())return;const N=Y=>{const X=Y.target;Fe(X,B)&&E(!0)},K=eu();K.addEventListener("scroll",N,{capture:!0}),bt(()=>{K.removeEventListener("scroll",N,{capture:!0})})}),bt(()=>{clearTimeout(r),Ni[n]&&delete Ni[n]});const M={dataset:dt(()=>({"data-expanded":p.isOpen()?"":void 0,"data-closed":p.isOpen()?void 0:""})),isOpen:p.isOpen,isDisabled:()=>i.disabled??!1,triggerOnFocusOnly:()=>i.triggerOnFocusOnly??!1,contentId:o,contentPresence:y,openTooltip:w,hideTooltip:E,cancelOpening:T,generateId:Hn(()=>e.id),registerContentId:le(a),isTargetOnTooltip:$,setTriggerRef:c,setContentRef:u};return L(Zg.Provider,{value:M,get children(){return L(wu,ft({anchorRef:l,contentRef:h,onCurrentPlacementChange:g},s))}})}function Ux(e){let t;const n=_u(),[i,s]=$t(e,["ref","onPointerEnter","onPointerLeave","onPointerDown","onClick","onFocus","onBlur","onTouchStart"]);let r=!1,o=!1,a=!1;const l=()=>{r=!1},c=()=>{!n.isOpen()&&(o||a)&&n.openTooltip(a)},h=S=>{n.isOpen()&&!o&&!a&&n.hideTooltip(S)},u=S=>{Dt(S,i.onPointerEnter),!(S.pointerType==="touch"||n.triggerOnFocusOnly()||n.isDisabled()||S.defaultPrevented)&&(o=!0,c())},f=S=>{Dt(S,i.onPointerLeave),S.pointerType!=="touch"&&(o=!1,a=!1,n.isOpen()?h():n.cancelOpening())},g=S=>{Dt(S,i.onPointerDown),r=!0,Ue(t).addEventListener("pointerup",l,{once:!0})},p=S=>{Dt(S,i.onClick),o=!1,a=!1,h(!0)},y=S=>{Dt(S,i.onFocus),!(n.isDisabled()||S.defaultPrevented||r)&&(a=!0,c())},x=S=>{Dt(S,i.onBlur);const E=S.relatedTarget;n.isTargetOnTooltip(E)||(o=!1,a=!1,h(!0))};return bt(()=>{Ue(t).removeEventListener("pointerup",l)}),L(se,ft({as:"button",ref(S){var E=me(b=>{n.setTriggerRef(b),t=b},i.ref);typeof E=="function"&&E(S)},get"aria-describedby"(){return dt(()=>!!n.isOpen())()?n.contentId():void 0},onPointerEnter:u,onPointerLeave:f,onPointerDown:g,onClick:p,onFocus:y,onBlur:x},()=>n.dataset(),s))}const dn=Symbol(0);let Xo=!1,uc=!1,_n=null,ws=null,rn=null,We=0,gs=[],Eu={};const Vx=()=>{},Ws=0,tm=1,$r=2,Pa=3;function jx(){Xo=!0,queueMicrotask(em)}function em(){if(!gs.length){Xo=!1;return}uc=!0;for(let e=0;e<gs.length;e++)gs[e].$st!==Ws&&Kx(gs[e]);gs=[],Xo=!1,uc=!1}function Kx(e){let t=[e];for(;e=e[dn];)e.$e&&e.$st!==Ws&&t.push(e);for(let n=t.length-1;n>=0;n--)Au(t[n])}function qx(e){const t=Qo();return Gr(t,e.length?e.bind(null,qr.bind(t)):e,null)}function W(e){return Gr(_n,e,null)}function Su(e){return Gr(null,e,null)}function Qn(){uc||em()}function Oa(){return _n}function De(e,t){try{return Gr(t,e,null)}catch(n){xu(t,n);return}}function nm(e,t=_n){return t?.$cx[e]}function Gx(e,t,n=_n){n&&(n.$cx={...n.$cx,[e]:t})}function Ct(e){if(!e||!_n)return e||Vx;const t=_n;return t.$d?Array.isArray(t.$d)?t.$d.push(e):t.$d=[t.$d,e]:t.$d=e,function(){t.$st!==Pa&&(e.call(null),La(t.$d)?t.$d=null:Array.isArray(t.$d)&&t.$d.splice(t.$d.indexOf(e),1))}}function qr(e=!0){if(this.$st===Pa)return;let t=e?this.$ps||this[dn]:this,n=this.$ns,i=null;for(;n&&n[dn]===this;)qr.call(n,!0),yd(n),i=n.$ns,n.$ns=null,n=i;e&&yd(this),n&&(n.$ps=e?this.$ps:this),t&&(t.$ns=n)}function yd(e){e.$st=Pa,e.$d&&im(e),e.$s&&To(e,0),e.$ps&&(e.$ps.$ns=null),e[dn]=null,e.$s=null,e.$o=null,e.$ps=null,e.$cx=Eu,e.$eh=null}function im(e){try{if(Array.isArray(e.$d))for(let t=e.$d.length-1;t>=0;t--){const n=e.$d[t];n.call(n)}else e.$d.call(e.$d);e.$d=null}catch(t){xu(e,t)}}function Gr(e,t,n){const i=_n,s=ws;_n=e,ws=n;try{return t.call(e)}finally{_n=i,ws=s}}function xu(e,t){if(!e||!e.$eh)throw t;let n=0,i=e.$eh.length,s=vd(t);for(n=0;n<i;n++)try{e.$eh[n](s);break}catch(r){s=vd(r)}if(n===i)throw s}function vd(e){return e instanceof Error?e:Error(JSON.stringify(e))}function Tu(){return this.$st===Pa?this.$v:(ws&&!this.$e&&(!rn&&ws.$s&&ws.$s[We]==this?We++:rn?rn.push(this):rn=[this]),this.$c&&Au(this),this.$v)}function sm(e){const t=La(e)?e(this.$v):e;if(this.$ch(this.$v,t)&&(this.$v=t,this.$o))for(let n=0;n<this.$o.length;n++)am(this.$o[n],$r);return this.$v}const Cu=function(){this[dn]=null,this.$ns=null,this.$ps=null,_n&&_n.append(this)},rs=Cu.prototype;rs.$cx=Eu;rs.$eh=null;rs.$c=null;rs.$d=null;rs.append=function(e){if(e[dn]=this,e.$ps=this,this.$ns)if(e.$ns){let t=e.$ns;for(;t.$ns;)t=t.$ns;t.$ns=this.$ns,this.$ns.$ps=t}else e.$ns=this.$ns,this.$ns.$ps=e;this.$ns=e,e.$cx=e.$cx===Eu?this.$cx:{...this.$cx,...e.$cx},this.$eh&&(e.$eh=e.$eh?[...e.$eh,...this.$eh]:this.$eh)};rs.dispose=function(){qr.call(this)};function Qo(){return new Cu}const rm=function(t,n,i){Cu.call(this),this.$st=n?$r:Ws,this.$i=!1,this.$e=!1,this.$s=null,this.$o=null,this.$v=t,n&&(this.$c=n),i&&i.dirty&&(this.$ch=i.dirty)},$u=rm.prototype;Object.setPrototypeOf($u,rs);$u.$ch=Wx;$u.call=Tu;function ku(e,t,n){return new rm(e,t,n)}function Wx(e,t){return e!==t}function La(e){return typeof e=="function"}function Au(e){if(e.$st===tm)for(let t=0;t<e.$s.length&&(Au(e.$s[t]),e.$st!==$r);t++);e.$st===$r?om(e):e.$st=Ws}function wd(e){e.$ns&&e.$ns[dn]===e&&qr.call(e,!1),e.$d&&im(e),e.$eh=e[dn]?e[dn].$eh:null}function om(e){let t=rn,n=We;rn=null,We=0;try{wd(e);const i=Gr(e,e.$c,e);if(rn){if(e.$s&&To(e,We),e.$s&&We>0){e.$s.length=We+rn.length;for(let r=0;r<rn.length;r++)e.$s[We+r]=rn[r]}else e.$s=rn;let s;for(let r=We;r<e.$s.length;r++)s=e.$s[r],s.$o?s.$o.push(e):s.$o=[e]}else e.$s&&We<e.$s.length&&(To(e,We),e.$s.length=We);!e.$e&&e.$i?sm.call(e,i):(e.$v=i,e.$i=!0)}catch(i){xu(e,i),e.$st===$r&&(wd(e),e.$s&&To(e,0));return}rn=t,We=n,e.$st=Ws}function am(e,t){if(!(e.$st>=t)&&(e.$e&&e.$st===Ws&&(gs.push(e),Xo||jx()),e.$st=t,e.$o))for(let n=0;n<e.$o.length;n++)am(e.$o[n],tm)}function To(e,t){let n,i;for(let s=t;s<e.$s.length;s++)n=e.$s[s],n.$o&&(i=n.$o.indexOf(e),n.$o[i]=n.$o[n.$o.length-1],n.$o.pop())}function Jo(...e){}function Li(e){return e===null}function Je(e){return typeof e>"u"}function JO(e){return Li(e)||Je(e)}function zx(e){return e?.constructor===Object}function un(e){return typeof e=="number"&&!Number.isNaN(e)}function pt(e){return typeof e=="string"}function Yx(e){return typeof e=="boolean"}function Jn(e){return typeof e=="function"}function Oe(e){return Array.isArray(e)}var _d;const Xx=Event,lm=Symbol("DOM_EVENT");class Gt extends Xx{constructor(t,...n){super(t,n[0]),this[_d]=!0,this.triggers=new Qx,this.detail=n[0]?.detail;const i=n[0]?.trigger;i&&this.triggers.add(i)}static{_d=lm}get trigger(){return this.triggers.source}get originEvent(){return this.triggers.origin}get isOriginTrusted(){return this.triggers.origin?.isTrusted??!1}}class Qx{constructor(){this.chain=[]}get source(){return this.chain[0]}get origin(){return this.chain[this.chain.length-1]}add(t){this.chain.push(t),Jx(t)&&this.chain.push(...t.triggers)}remove(t){return this.chain.splice(this.chain.indexOf(t),1)[0]}has(t){return this.chain.some(n=>n===t)}hasType(t){return!!this.findType(t)}findType(t){return this.chain.find(n=>n.type===t)}walk(t){for(const n of this.chain){const i=t(n);if(i)return[n,i]}}[Symbol.iterator](){return this.chain.values()}}function Jx(e){return!!e?.[lm]}class cm extends EventTarget{addEventListener(t,n,i){return super.addEventListener(t,n,i)}removeEventListener(t,n,i){return super.removeEventListener(t,n,i)}}function nt(e,t,n,i){return e.addEventListener(t,n,i),Ct(()=>e.removeEventListener(t,n,i))}function Ed(e){return!!e?.type.startsWith("pointer")}function Co(e){return!!e?.type.startsWith("touch")}function Zx(e){return/^(click|mouse)/.test(e?.type??"")}function Ia(e){return!!e?.type.startsWith("key")}function tT(e){return Ia(e)&&e.key==="Enter"}function um(e){return Ia(e)&&(e.key==="Enter"||e.key===" ")}function eT(e){return e instanceof Node}function et(e,t,n){if(e)if(!n&&n!==""&&n!==0)e.removeAttribute(t);else{const i=n===!0?"":n+"";e.getAttribute(t)!==i&&e.setAttribute(t,i)}else return}function He(e,t,n){if(e)!n&&n!==0?e.style.removeProperty(t):e.style.setProperty(t,n+"");else return}function mt(e,t){const n=ku(e,null,t),i=Tu.bind(n);return i[dn]=!0,i.set=sm.bind(n),i}function nT(e){return La(e)&&dn in e}function En(e,t){const n=ku(t?.initial,e,t),i=Tu.bind(n);return i[dn]=!0,i}function iT(e,t){const n=ku(null,function(){let s=e();return La(s)&&Ct(s),null},void 0);return n.$e=!0,om(n),qr.bind(n,!0)}function sT(e){return nT(e)&&"set"in e}const D=iT;function ci(e){return{id:Symbol(),provide:e}}function Ve(e,t,n=Oa()){const i=!Je(t);Gx(e.id,i?t:e.provide?.(),n)}function Xt(e){return nm(e.id)}function en(e){return!Je(nm(e.id))}const ur=Symbol(0),hr=Symbol(0),hm=Symbol(0);var Sd;const Tl={};class rT{constructor(t,n,i){this[Sd]=null,this.$el=mt(null),this.a=null,this.d=null,this.f=null,this.g=null,this.e=null,this.o=!1,this.i=Tl,this.b=null,this.c=null,this.l=[],this.m=[],this.j=[],this.n=[],this.d=n,i?.scope&&i.scope.append(n);let s=t.state,r=t.props;if(s&&(this.h=s.create(),this.k=new Proxy(this.h,{get:(o,a)=>this.h[a]()}),Ve(s,this.h)),r&&(this.i=oT(r),i?.props))for(const o of Object.keys(i.props))this.i[o]?.set(i.props[o]);Ct(this.p.bind(this))}static{Sd=hm}w(){De(()=>{for(const t of this.l)t()},this.d)}x(t){this.a||(this.a=t,this.$el.set(t),De(()=>{this.f=Qo(),De(()=>{for(const n of this.m)n(this.a);this.q(),this.r()},this.f)},this.d),t.dispatchEvent(new Event("attached")))}s(){this.f?.dispose(),this.f=null,this.g=null,this.a=null,this.$el.set(null)}y(){!this.a||!this.f||!this.j.length||De(()=>{this.g=Qo(),De(()=>{for(const t of this.j)t(this.a)},this.g)},this.f)}z(){this.g?.dispose(),this.g=null}p(){if(this.o)return;this.o=!0,De(()=>{for(const n of this.n)n(this.a)},this.d);const t=this.a;this.s(),this.d.dispose(),this.l.length=0,this.m.length=0,this.j.length=0,this.n.length=0,this.e=null,this.b=null,this.c=null,this.i=Tl,this.d=null,this.k=Tl,this.h=null,t&&delete t.$}t(t){t.onSetup&&this.l.push(t.onSetup.bind(t)),t.onAttach&&this.m.push(t.onAttach.bind(t)),t.onConnect&&this.j.push(t.onConnect.bind(t)),t.onDestroy&&this.n.push(t.onDestroy.bind(t))}q(){if(this.b)for(const t of Object.keys(this.b))Jn(this.b[t])?D(this.u.bind(this,t)):et(this.a,t,this.b[t])}r(){if(this.c)for(const t of Object.keys(this.c))Jn(this.c[t])?D(this.v.bind(this,t)):He(this.a,t,this.c[t])}u(t){et(this.a,t,this.b[t].call(this.e))}v(t){He(this.a,t,this.c[t].call(this.e))}}function oT(e){const t={};for(const n of Object.keys(e)){const i=e[n];t[n]=mt(i,i)}return t}let dr={$$:null};function aT(e,t){return qx(()=>{dr.$$=new rT(e,Oa(),t);const n=new e;return dr.$$.e=n,dr.$$=null,n})}class bn extends EventTarget{constructor(){super(),dr.$$&&this.attach(dr)}get el(){return this.$$.a}get $el(){return this.$$.$el()}get scope(){return this.$$.d}get attachScope(){return this.$$.f}get connectScope(){return this.$$.g}get $props(){return this.$$.i}get $state(){return this.$$.h}get state(){return this.$$.k}attach({$$:t}){return this.$$=t,t.t(this),this}addEventListener(t,n,i){this.listen(t,n,i)}removeEventListener(t,n,i){this.el?.removeEventListener(t,n,i)}setAttributes(t){this.$$.b||(this.$$.b={}),Object.assign(this.$$.b,t)}setStyles(t){this.$$.c||(this.$$.c={}),Object.assign(this.$$.c,t)}setCSSVars(t){this.setStyles(t)}createEvent(t,...n){return new Gt(t,n[0])}dispatch(t,...n){if(!this.el)return!1;const i=t instanceof Event?t:new Gt(t,n[0]);return Object.defineProperty(i,"target",{get:()=>this.$$.e}),Su(()=>(this.$$[hm]?.(i),this.el.dispatchEvent(i)))}dispatchEvent(t){return this.dispatch(t)}listen(t,n,i){return this.el?nt(this.el,t,n,i):Jo}}class lt extends bn{subscribe(t){return De(()=>D(()=>t(this.state)),this.$$.d)}destroy(){this.$$.p()}}function wt(e,t,n){e[ur]||(e[ur]=new Set),e[ur].add(t)}function Zt(e,t,n){e[hr]||(e[hr]=new Set),e[hr].add(t)}class Ii{constructor(t){this.id=Symbol(0),this.record=t,this.A=Object.getOwnPropertyDescriptors(t)}create(){const t={},n=new Proxy(t,{get:(i,s)=>t[s]()});for(const i of Object.keys(this.record)){const s=this.A[i].get;t[i]=s?En(s.bind(n)):mt(this.record[i])}return t}reset(t,n){for(const i of Object.keys(t))!this.A[i].get&&(!n||n(i))&&t[i].set(this.record[i])}}function zs(e){return Xt(e)}function lT(e,t){for(const n of e)n(t)}function dm(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function cT(e){return e.replace(/-./g,t=>t[1].toUpperCase())}function uT(e){return e.charAt(0).toUpperCase()+e.slice(1)}function Zo(e){return e?"true":"false"}function fm(){const e=new Set;return{add(...t){for(const n of t)e.add(n)},empty(){for(const t of e)t();e.clear()}}}function ZO(){const e=fm();return Ct(e.empty),e}function tL(e){return Object.keys(e)}function hc(){let e,t;return{promise:new Promise((i,s)=>{e=i,t=s}),resolve:e,reject:t}}function hT(e){return new Promise(t=>setTimeout(t,e))}function Ys(e){let t=-1,n;function i(...s){n=s,!(t>=0)&&(t=window.requestAnimationFrame(()=>{e.apply(this,n),t=-1,n=void 0}))}return i}const dT=typeof window<"u"?"requestIdleCallback"in window?window.requestIdleCallback:e=>window.setTimeout(e,1):Jo;function fT(e,t){return new Promise(n=>{dT(i=>{e?.(i),n()},t)})}var Ge={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5,fullscreen:6},xd=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],Td=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],Cd=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"],Ne=typeof window<"u"&&typeof window.document<"u"?window.document:{},sn="fullscreenEnabled"in Ne&&Object.keys(Ge)||xd[0]in Ne&&xd||Td[0]in Ne&&Td||Cd[0]in Ne&&Cd||[],Ei={requestFullscreen:function(e){return e[sn[Ge.requestFullscreen]]()},requestFullscreenFunction:function(e){return e[sn[Ge.requestFullscreen]]},get exitFullscreen(){return Ne[sn[Ge.exitFullscreen]].bind(Ne)},get fullscreenPseudoClass(){return":"+sn[Ge.fullscreen]},addEventListener:function(e,t,n){return Ne.addEventListener(sn[Ge[e]],t,n)},removeEventListener:function(e,t,n){return Ne.removeEventListener(sn[Ge[e]],t,n)},get fullscreenEnabled(){return!!Ne[sn[Ge.fullscreenEnabled]]},set fullscreenEnabled(e){},get fullscreenElement(){return Ne[sn[Ge.fullscreenElement]]},set fullscreenElement(e){},get onfullscreenchange(){return Ne[("on"+sn[Ge.fullscreenchange]).toLowerCase()]},set onfullscreenchange(e){return Ne[("on"+sn[Ge.fullscreenchange]).toLowerCase()]=e},get onfullscreenerror(){return Ne[("on"+sn[Ge.fullscreenerror]).toLowerCase()]},set onfullscreenerror(e){return Ne[("on"+sn[Ge.fullscreenerror]).toLowerCase()]=e}};const ta=Math.min,ji=Math.max,ea=Math.round,go=Math.floor,Ai=e=>({x:e,y:e}),pT={left:"right",right:"left",bottom:"top",top:"bottom"},gT={start:"end",end:"start"};function $d(e,t,n){return ji(e,ta(t,n))}function Pu(e,t){return typeof e=="function"?e(t):e}function Is(e){return e.split("-")[0]}function Ou(e){return e.split("-")[1]}function pm(e){return e==="x"?"y":"x"}function gm(e){return e==="y"?"height":"width"}function Lu(e){return["top","bottom"].includes(Is(e))?"y":"x"}function mm(e){return pm(Lu(e))}function mT(e,t,n){n===void 0&&(n=!1);const i=Ou(e),s=mm(e),r=gm(s);let o=s==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return t.reference[r]>t.floating[r]&&(o=na(o)),[o,na(o)]}function bT(e){const t=na(e);return[dc(e),t,dc(t)]}function dc(e){return e.replace(/start|end/g,t=>gT[t])}function yT(e,t,n){const i=["left","right"],s=["right","left"],r=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?s:i:t?i:s;case"left":case"right":return t?r:o;default:return[]}}function vT(e,t,n,i){const s=Ou(e);let r=yT(Is(e),n==="start",i);return s&&(r=r.map(o=>o+"-"+s),t&&(r=r.concat(r.map(dc)))),r}function na(e){return e.replace(/left|right|bottom|top/g,t=>pT[t])}function wT(e){return{top:0,right:0,bottom:0,left:0,...e}}function _T(e){return typeof e!="number"?wT(e):{top:e,right:e,bottom:e,left:e}}function ia(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}function kd(e,t,n){let{reference:i,floating:s}=e;const r=Lu(t),o=mm(t),a=gm(o),l=Is(t),c=r==="y",h=i.x+i.width/2-s.width/2,u=i.y+i.height/2-s.height/2,f=i[a]/2-s[a]/2;let g;switch(l){case"top":g={x:h,y:i.y-s.height};break;case"bottom":g={x:h,y:i.y+i.height};break;case"right":g={x:i.x+i.width,y:u};break;case"left":g={x:i.x-s.width,y:u};break;default:g={x:i.x,y:i.y}}switch(Ou(t)){case"start":g[o]-=f*(n&&c?-1:1);break;case"end":g[o]+=f*(n&&c?-1:1);break}return g}const ET=async(e,t,n)=>{const{placement:i="bottom",strategy:s="absolute",middleware:r=[],platform:o}=n,a=r.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(t));let c=await o.getElementRects({reference:e,floating:t,strategy:s}),{x:h,y:u}=kd(c,i,l),f=i,g={},p=0;for(let y=0;y<a.length;y++){const{name:x,fn:S}=a[y],{x:E,y:b,data:_,reset:w}=await S({x:h,y:u,initialPlacement:i,placement:f,strategy:s,middlewareData:g,rects:c,platform:o,elements:{reference:e,floating:t}});h=E??h,u=b??u,g={...g,[x]:{...g[x],..._}},w&&p<=50&&(p++,typeof w=="object"&&(w.placement&&(f=w.placement),w.rects&&(c=w.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:s}):w.rects),{x:h,y:u}=kd(c,f,l)),y=-1)}return{x:h,y:u,placement:f,strategy:s,middlewareData:g}};async function bm(e,t){var n;t===void 0&&(t={});const{x:i,y:s,platform:r,rects:o,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:h="viewport",elementContext:u="floating",altBoundary:f=!1,padding:g=0}=Pu(t,e),p=_T(g),x=a[f?u==="floating"?"reference":"floating":u],S=ia(await r.getClippingRect({element:(n=await(r.isElement==null?void 0:r.isElement(x)))==null||n?x:x.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(a.floating)),boundary:c,rootBoundary:h,strategy:l})),E=u==="floating"?{...o.floating,x:i,y:s}:o.reference,b=await(r.getOffsetParent==null?void 0:r.getOffsetParent(a.floating)),_=await(r.isElement==null?void 0:r.isElement(b))?await(r.getScale==null?void 0:r.getScale(b))||{x:1,y:1}:{x:1,y:1},w=ia(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:E,offsetParent:b,strategy:l}):E);return{top:(S.top-w.top+p.top)/_.y,bottom:(w.bottom-S.bottom+p.bottom)/_.y,left:(S.left-w.left+p.left)/_.x,right:(w.right-S.right+p.right)/_.x}}const ST=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,i;const{placement:s,middlewareData:r,rects:o,initialPlacement:a,platform:l,elements:c}=t,{mainAxis:h=!0,crossAxis:u=!0,fallbackPlacements:f,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:y=!0,...x}=Pu(e,t);if((n=r.arrow)!=null&&n.alignmentOffset)return{};const S=Is(s),E=Is(a)===a,b=await(l.isRTL==null?void 0:l.isRTL(c.floating)),_=f||(E||!y?[na(a)]:bT(a));!f&&p!=="none"&&_.push(...vT(a,y,p,b));const w=[a,..._],T=await bm(t,x),C=[];let $=((i=r.flip)==null?void 0:i.overflows)||[];if(h&&C.push(T[S]),u){const M=mT(s,o,b);C.push(T[M[0]],T[M[1]])}if($=[...$,{placement:s,overflows:C}],!C.every(M=>M<=0)){var I,A;const M=(((I=r.flip)==null?void 0:I.index)||0)+1,B=w[M];if(B)return{data:{index:M,overflows:$},reset:{placement:B}};let N=(A=$.filter(K=>K.overflows[0]<=0).sort((K,Y)=>K.overflows[1]-Y.overflows[1])[0])==null?void 0:A.placement;if(!N)switch(g){case"bestFit":{var O;const K=(O=$.map(Y=>[Y.placement,Y.overflows.filter(X=>X>0).reduce((X,kt)=>X+kt,0)]).sort((Y,X)=>Y[1]-X[1])[0])==null?void 0:O[0];K&&(N=K);break}case"initialPlacement":N=a;break}if(s!==N)return{reset:{placement:N}}}return{}}}},xT=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:i,placement:s}=t,{mainAxis:r=!0,crossAxis:o=!1,limiter:a={fn:x=>{let{x:S,y:E}=x;return{x:S,y:E}}},...l}=Pu(e,t),c={x:n,y:i},h=await bm(t,l),u=Lu(Is(s)),f=pm(u);let g=c[f],p=c[u];if(r){const x=f==="y"?"top":"left",S=f==="y"?"bottom":"right",E=g+h[x],b=g-h[S];g=$d(E,g,b)}if(o){const x=u==="y"?"top":"left",S=u==="y"?"bottom":"right",E=p+h[x],b=p-h[S];p=$d(E,p,b)}const y=a.fn({...t,[f]:g,[u]:p});return{...y,data:{x:y.x-n,y:y.y-i}}}}};function Pi(e){return ym(e)?(e.nodeName||"").toLowerCase():"#document"}function Ze(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function ui(e){var t;return(t=(ym(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function ym(e){return e instanceof Node||e instanceof Ze(e).Node}function ii(e){return e instanceof Element||e instanceof Ze(e).Element}function Fn(e){return e instanceof HTMLElement||e instanceof Ze(e).HTMLElement}function Ad(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Ze(e).ShadowRoot}function Wr(e){const{overflow:t,overflowX:n,overflowY:i,display:s}=pn(e);return/auto|scroll|overlay|hidden|clip/.test(t+i+n)&&!["inline","contents"].includes(s)}function TT(e){return["table","td","th"].includes(Pi(e))}function Iu(e){const t=Du(),n=pn(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(i=>(n.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(n.contain||"").includes(i))}function CT(e){let t=Ds(e);for(;Fn(t)&&!Da(t);){if(Iu(t))return t;t=Ds(t)}return null}function Du(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Da(e){return["html","body","#document"].includes(Pi(e))}function pn(e){return Ze(e).getComputedStyle(e)}function Ra(e){return ii(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Ds(e){if(Pi(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Ad(e)&&e.host||ui(e);return Ad(t)?t.host:t}function vm(e){const t=Ds(e);return Da(t)?e.ownerDocument?e.ownerDocument.body:e.body:Fn(t)&&Wr(t)?t:vm(t)}function kr(e,t,n){var i;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=vm(e),r=s===((i=e.ownerDocument)==null?void 0:i.body),o=Ze(s);return r?t.concat(o,o.visualViewport||[],Wr(s)?s:[],o.frameElement&&n?kr(o.frameElement):[]):t.concat(s,kr(s,[],n))}function wm(e){const t=pn(e);let n=parseFloat(t.width)||0,i=parseFloat(t.height)||0;const s=Fn(e),r=s?e.offsetWidth:n,o=s?e.offsetHeight:i,a=ea(n)!==r||ea(i)!==o;return a&&(n=r,i=o),{width:n,height:i,$:a}}function Ru(e){return ii(e)?e:e.contextElement}function _s(e){const t=Ru(e);if(!Fn(t))return Ai(1);const n=t.getBoundingClientRect(),{width:i,height:s,$:r}=wm(t);let o=(r?ea(n.width):n.width)/i,a=(r?ea(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const $T=Ai(0);function _m(e){const t=Ze(e);return!Du()||!t.visualViewport?$T:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function kT(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Ze(e)?!1:t}function Qi(e,t,n,i){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),r=Ru(e);let o=Ai(1);t&&(i?ii(i)&&(o=_s(i)):o=_s(e));const a=kT(r,n,i)?_m(r):Ai(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,h=s.width/o.x,u=s.height/o.y;if(r){const f=Ze(r),g=i&&ii(i)?Ze(i):i;let p=f,y=p.frameElement;for(;y&&i&&g!==p;){const x=_s(y),S=y.getBoundingClientRect(),E=pn(y),b=S.left+(y.clientLeft+parseFloat(E.paddingLeft))*x.x,_=S.top+(y.clientTop+parseFloat(E.paddingTop))*x.y;l*=x.x,c*=x.y,h*=x.x,u*=x.y,l+=b,c+=_,p=Ze(y),y=p.frameElement}}return ia({width:h,height:u,x:l,y:c})}const AT=[":popover-open",":modal"];function Em(e){return AT.some(t=>{try{return e.matches(t)}catch{return!1}})}function PT(e){let{elements:t,rect:n,offsetParent:i,strategy:s}=e;const r=s==="fixed",o=ui(i),a=t?Em(t.floating):!1;if(i===o||a&&r)return n;let l={scrollLeft:0,scrollTop:0},c=Ai(1);const h=Ai(0),u=Fn(i);if((u||!u&&!r)&&((Pi(i)!=="body"||Wr(o))&&(l=Ra(i)),Fn(i))){const f=Qi(i);c=_s(i),h.x=f.x+i.clientLeft,h.y=f.y+i.clientTop}return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+h.x,y:n.y*c.y-l.scrollTop*c.y+h.y}}function OT(e){return Array.from(e.getClientRects())}function Sm(e){return Qi(ui(e)).left+Ra(e).scrollLeft}function LT(e){const t=ui(e),n=Ra(e),i=e.ownerDocument.body,s=ji(t.scrollWidth,t.clientWidth,i.scrollWidth,i.clientWidth),r=ji(t.scrollHeight,t.clientHeight,i.scrollHeight,i.clientHeight);let o=-n.scrollLeft+Sm(e);const a=-n.scrollTop;return pn(i).direction==="rtl"&&(o+=ji(t.clientWidth,i.clientWidth)-s),{width:s,height:r,x:o,y:a}}function IT(e,t){const n=Ze(e),i=ui(e),s=n.visualViewport;let r=i.clientWidth,o=i.clientHeight,a=0,l=0;if(s){r=s.width,o=s.height;const c=Du();(!c||c&&t==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:r,height:o,x:a,y:l}}function DT(e,t){const n=Qi(e,!0,t==="fixed"),i=n.top+e.clientTop,s=n.left+e.clientLeft,r=Fn(e)?_s(e):Ai(1),o=e.clientWidth*r.x,a=e.clientHeight*r.y,l=s*r.x,c=i*r.y;return{width:o,height:a,x:l,y:c}}function Pd(e,t,n){let i;if(t==="viewport")i=IT(e,n);else if(t==="document")i=LT(ui(e));else if(ii(t))i=DT(t,n);else{const s=_m(e);i={...t,x:t.x-s.x,y:t.y-s.y}}return ia(i)}function xm(e,t){const n=Ds(e);return n===t||!ii(n)||Da(n)?!1:pn(n).position==="fixed"||xm(n,t)}function RT(e,t){const n=t.get(e);if(n)return n;let i=kr(e,[],!1).filter(a=>ii(a)&&Pi(a)!=="body"),s=null;const r=pn(e).position==="fixed";let o=r?Ds(e):e;for(;ii(o)&&!Da(o);){const a=pn(o),l=Iu(o);!l&&a.position==="fixed"&&(s=null),(r?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Wr(o)&&!l&&xm(e,o))?i=i.filter(h=>h!==o):s=a,o=Ds(o)}return t.set(e,i),i}function MT(e){let{element:t,boundary:n,rootBoundary:i,strategy:s}=e;const o=[...n==="clippingAncestors"?RT(t,this._c):[].concat(n),i],a=o[0],l=o.reduce((c,h)=>{const u=Pd(t,h,s);return c.top=ji(u.top,c.top),c.right=ta(u.right,c.right),c.bottom=ta(u.bottom,c.bottom),c.left=ji(u.left,c.left),c},Pd(t,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function NT(e){const{width:t,height:n}=wm(e);return{width:t,height:n}}function FT(e,t,n){const i=Fn(t),s=ui(t),r=n==="fixed",o=Qi(e,!0,r,t);let a={scrollLeft:0,scrollTop:0};const l=Ai(0);if(i||!i&&!r)if((Pi(t)!=="body"||Wr(s))&&(a=Ra(t)),i){const u=Qi(t,!0,r,t);l.x=u.x+t.clientLeft,l.y=u.y+t.clientTop}else s&&(l.x=Sm(s));const c=o.left+a.scrollLeft-l.x,h=o.top+a.scrollTop-l.y;return{x:c,y:h,width:o.width,height:o.height}}function Od(e,t){return!Fn(e)||pn(e).position==="fixed"?null:t?t(e):e.offsetParent}function Tm(e,t){const n=Ze(e);if(!Fn(e)||Em(e))return n;let i=Od(e,t);for(;i&&TT(i)&&pn(i).position==="static";)i=Od(i,t);return i&&(Pi(i)==="html"||Pi(i)==="body"&&pn(i).position==="static"&&!Iu(i))?n:i||CT(e)||n}const BT=async function(e){const t=this.getOffsetParent||Tm,n=this.getDimensions;return{reference:FT(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,...await n(e.floating)}}};function HT(e){return pn(e).direction==="rtl"}const UT={convertOffsetParentRelativeRectToViewportRelativeRect:PT,getDocumentElement:ui,getClippingRect:MT,getOffsetParent:Tm,getElementRects:BT,getClientRects:OT,getDimensions:NT,getScale:_s,isElement:ii,isRTL:HT};function VT(e,t){let n=null,i;const s=ui(e);function r(){var a;clearTimeout(i),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),r();const{left:c,top:h,width:u,height:f}=e.getBoundingClientRect();if(a||t(),!u||!f)return;const g=go(h),p=go(s.clientWidth-(c+u)),y=go(s.clientHeight-(h+f)),x=go(c),E={rootMargin:-g+"px "+-p+"px "+-y+"px "+-x+"px",threshold:ji(0,ta(1,l))||1};let b=!0;function _(w){const T=w[0].intersectionRatio;if(T!==l){if(!b)return o();T?o(!1,T):i=setTimeout(()=>{o(!1,1e-7)},100)}b=!1}try{n=new IntersectionObserver(_,{...E,root:s.ownerDocument})}catch{n=new IntersectionObserver(_,E)}n.observe(e)}return o(!0),r}function jT(e,t,n,i){i===void 0&&(i={});const{ancestorScroll:s=!0,ancestorResize:r=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,c=Ru(e),h=s||r?[...c?kr(c):[],...kr(t)]:[];h.forEach(S=>{s&&S.addEventListener("scroll",n,{passive:!0}),r&&S.addEventListener("resize",n)});const u=c&&a?VT(c,n):null;let f=-1,g=null;o&&(g=new ResizeObserver(S=>{let[E]=S;E&&E.target===c&&g&&(g.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var b;(b=g)==null||b.observe(t)})),n()}),c&&!l&&g.observe(c),g.observe(t));let p,y=l?Qi(e):null;l&&x();function x(){const S=Qi(e);y&&(S.x!==y.x||S.y!==y.y||S.width!==y.width||S.height!==y.height)&&n(),y=S,p=requestAnimationFrame(x)}return n(),()=>{var S;h.forEach(E=>{s&&E.removeEventListener("scroll",n),r&&E.removeEventListener("resize",n)}),u?.(),(S=g)==null||S.disconnect(),g=null,l&&cancelAnimationFrame(p)}}const KT=xT,qT=ST,GT=(e,t,n)=>{const i=new Map,s={platform:UT,...n},r={...s.platform,_c:i};return ET(e,t,{...s,platform:r})},Ld=e=>typeof e=="object"&&e!=null&&e.nodeType===1,Id=(e,t)=>(!t||e!=="hidden")&&e!=="visible"&&e!=="clip",Cl=(e,t)=>{if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){const n=getComputedStyle(e,null);return Id(n.overflowY,t)||Id(n.overflowX,t)||(i=>{const s=(r=>{if(!r.ownerDocument||!r.ownerDocument.defaultView)return null;try{return r.ownerDocument.defaultView.frameElement}catch{return null}})(i);return!!s&&(s.clientHeight<i.scrollHeight||s.clientWidth<i.scrollWidth)})(e)}return!1},mo=(e,t,n,i,s,r,o,a)=>r<e&&o>t||r>e&&o<t?0:r<=e&&a<=n||o>=t&&a>=n?r-e-i:o>t&&a<n||r<e&&a>n?o-t+s:0,WT=e=>{const t=e.parentElement;return t??(e.getRootNode().host||null)},zT=(e,t)=>{var n,i,s,r;if(typeof document>"u")return[];const{scrollMode:o,block:a,inline:l,boundary:c,skipOverflowHiddenElements:h}=t,u=typeof c=="function"?c:Y=>Y!==c;if(!Ld(e))throw new TypeError("Invalid target");const f=document.scrollingElement||document.documentElement,g=[];let p=e;for(;Ld(p)&&u(p);){if(p=WT(p),p===f){g.push(p);break}p!=null&&p===document.body&&Cl(p)&&!Cl(document.documentElement)||p!=null&&Cl(p,h)&&g.push(p)}const y=(i=(n=window.visualViewport)==null?void 0:n.width)!=null?i:innerWidth,x=(r=(s=window.visualViewport)==null?void 0:s.height)!=null?r:innerHeight,{scrollX:S,scrollY:E}=window,{height:b,width:_,top:w,right:T,bottom:C,left:$}=e.getBoundingClientRect(),{top:I,right:A,bottom:O,left:M}=(Y=>{const X=window.getComputedStyle(Y);return{top:parseFloat(X.scrollMarginTop)||0,right:parseFloat(X.scrollMarginRight)||0,bottom:parseFloat(X.scrollMarginBottom)||0,left:parseFloat(X.scrollMarginLeft)||0}})(e);let B=a==="start"||a==="nearest"?w-I:a==="end"?C+O:w+b/2-I+O,N=l==="center"?$+_/2-M+A:l==="end"?T+A:$-M;const K=[];for(let Y=0;Y<g.length;Y++){const X=g[Y],{height:kt,width:J,top:zt,right:Qt,bottom:Ut,left:vt}=X.getBoundingClientRect();if(o==="if-needed"&&w>=0&&$>=0&&C<=x&&T<=y&&w>=zt&&C<=Ut&&$>=vt&&T<=Qt)return K;const z=getComputedStyle(X),Bt=parseInt(z.borderLeftWidth,10),rt=parseInt(z.borderTopWidth,10),St=parseInt(z.borderRightWidth,10),Ae=parseInt(z.borderBottomWidth,10);let re=0,he=0;const Te="offsetWidth"in X?X.offsetWidth-X.clientWidth-Bt-St:0,Pe="offsetHeight"in X?X.offsetHeight-X.clientHeight-rt-Ae:0,oe="offsetWidth"in X?X.offsetWidth===0?0:J/X.offsetWidth:0,be="offsetHeight"in X?X.offsetHeight===0?0:kt/X.offsetHeight:0;if(f===X)re=a==="start"?B:a==="end"?B-x:a==="nearest"?mo(E,E+x,x,rt,Ae,E+B,E+B+b,b):B-x/2,he=l==="start"?N:l==="center"?N-y/2:l==="end"?N-y:mo(S,S+y,y,Bt,St,S+N,S+N+_,_),re=Math.max(0,re+E),he=Math.max(0,he+S);else{re=a==="start"?B-zt-rt:a==="end"?B-Ut+Ae+Pe:a==="nearest"?mo(zt,Ut,kt,rt,Ae+Pe,B,B+b,b):B-(zt+kt/2)+Pe/2,he=l==="start"?N-vt-Bt:l==="center"?N-(vt+J/2)+Te/2:l==="end"?N-Qt+St+Te:mo(vt,Qt,J,Bt,St+Te,N,N+_,_);const{scrollLeft:F,scrollTop:H}=X;re=be===0?0:Math.max(0,Math.min(H+re/be,X.scrollHeight-kt/be+Pe)),he=oe===0?0:Math.max(0,Math.min(F+he/oe,X.scrollWidth-J/oe+Te)),B+=H-re,N+=F-he}K.push({el:X,top:re,left:he})}return K},$l=e=>e===null?"":e+"",YT=e=>e===null?null:e+"",XT=e=>e===null?0:Number(e),Cm=e=>e!==null,QT=()=>null,JT=e=>e===null?[]:JSON.parse(e),ZT=e=>e===null?{}:JSON.parse(e);function t1(e){if(e===null)return YT;switch(typeof e){case"undefined":return $l;case"string":return $l;case"boolean":return Cm;case"number":return XT;case"function":return QT;case"object":return Oe(e)?JT:ZT;default:return $l}}const mi=Symbol(0),$m=Symbol(0),Ki=Symbol(0),ar=Symbol(0);function ut(e,t){var n,i,s;class r extends e{constructor(...a){if(super(...a),this[i]=0,this[s]=null,this.keepAlive=!1,this.forwardKeepAlive=!0,this.$=De(()=>aT(t),null),this.$.$$.t(this),t.props){const l=this.$props,c=Object.getOwnPropertyDescriptors(this);for(const h of Object.keys(c))h in t.props&&(l[h].set(this[h]),delete this[h])}}static{this[n]=null}static get observedAttributes(){if(!this[mi]&&t.props){const a=new Map;for(const l of Object.keys(t.props)){let c=this.attrs?.[l],h=pt(c)?c:c&&c?.attr;h!==!1&&(h||(h=dm(l)),a.set(h,{C:l,B:c&&!pt(c)&&c?.converter||t1(t.props[l])}))}this[mi]=a}return this[mi]?Array.from(this[mi].keys()):[]}get scope(){return this.$.$$.d}get attachScope(){return this.$.$$.f}get connectScope(){return this.$.$$.g}get $props(){return this.$.$$.i}get $state(){return this.$.$$.h}get state(){return this.$.state}attributeChangedCallback(a,l,c){const h=this.constructor;if(!h[mi]){super.attributeChangedCallback?.(a,l,c);return}const u=h[mi].get(a);u&&(this[u.C]=u.B(c))}connectedCallback(){const a=this.$?.$$;if(!a||a.o)return;if(this[Ki]!==2){n1.call(this);return}if(!this.isConnected)return;this.hasAttribute("keep-alive")&&(this.keepAlive=!0),a.y(),Oe(this[ar])&&lT(this[ar],this),this[ar]=null;const l=super.connectedCallback;l&&De(()=>l.call(this),this.connectScope)}disconnectedCallback(){const a=this.$?.$$;if(!a||a.o)return;a.z();const l=super.disconnectedCallback;l&&l.call(this),!this.keepAlive&&!this.hasAttribute("keep-alive")&&setTimeout(()=>{requestAnimationFrame(()=>{this.isConnected||a.p()})},0)}[(n=mi,i=Ki,s=ar,$m)](){const a=this.$.$$,l=this.constructor;if(a.o)return;const c=l[mi];if(c)for(const h of this.attributes){let u=c.get(h.name);u&&u.B&&a.i[u.C].set(u.B(this.getAttribute(h.name)))}a.w(),a.x(this),this[Ki]=2,this.connectedCallback()}subscribe(a){return this.$.subscribe(a)}destroy(){this.disconnectedCallback(),this.$.destroy()}}return e1(r,t),r}function e1(e,t){const n=e.prototype,i=t.prototype;if(t.props)for(const s of Object.keys(t.props))Object.defineProperty(n,s,{enumerable:!0,configurable:!0,get(){return this.$props[s]()},set(r){this.$props[s].set(r)}});if(i[ur])for(const s of i[ur])Object.defineProperty(n,s,{enumerable:!0,configurable:!0,get(){return this.$[s]},set(r){this.$[s]=r}});if(i[hr])for(const s of i[hr])n[s]=function(...r){return this.$[s](...r)}}function n1(){if(this[Ki]!==0)return;this[Ki]=1;const e=s1(this),t=e&&window.customElements.get(e.localName),n=e&&e[Ki]===2;if(e&&(!t||!n)){i1.call(this,e);return}km.call(this,e)}async function i1(e){await window.customElements.whenDefined(e.localName),e[Ki]!==2&&await new Promise(t=>(e[ar]??=[]).push(t)),km.call(this,e)}function km(e){if(this.isConnected){if(e){e.keepAlive&&e.forwardKeepAlive&&(this.keepAlive=!0,this.setAttribute("keep-alive",""));const t=this.$.$$.d;t&&e.$.$$.f.append(t)}this[$m]()}}function s1(e){let t=e.parentNode,n=e.localName.split("-",1)[0]+"-";for(;t;){if(t.nodeType===1&&t.localName.startsWith(n))return t;t=t.parentNode}return null}function ct(e,t=!1){(t||!window.customElements.get(e.tagName))&&window.customElements.define(e.tagName,e)}const r1=Symbol(0),o1=Symbol(0),a1=Symbol(0),l1=Symbol(0),c1=Symbol(0),u1=Symbol(0),h1=Symbol(0),d1=Symbol(0),f1=Symbol(0),Nt={oa:r1,Yb:o1,H:a1,pa:l1,Zb:c1,Mc:u1,ne:h1,oe:d1,pe:f1},p1=navigator?.userAgent.toLowerCase()||"",Am=/iphone|ipad|ipod|ios|crios|fxios/i.test(p1),Pm=/(iphone|ipod)/gi.test(navigator?.platform||""),g1=!!window.chrome,eL=!!window.safari||Am;function Om(){return m1()&&Jn(screen.orientation.unlock)}function m1(){return!Je(window.screen.orientation)&&!Je(window.screen.orientation.lock)}function b1(e,t){return e||(e=document.createElement("audio")),e.canPlayType(t).length>0}function y1(e,t){return e||(e=document.createElement("video")),e.canPlayType(t).length>0}function v1(e){return e||(e=document.createElement("video")),e.canPlayType("application/vnd.apple.mpegurl").length>0}function nL(e){return!!document.pictureInPictureEnabled&&!e?.disablePictureInPicture}function iL(e){return Jn(e?.webkitSupportsPresentationMode)&&Jn(e?.webkitSetPresentationMode)}async function w1(){const e=document.createElement("video");return e.volume=.5,await hT(0),e.volume===.5}function _1(){return window?.ManagedMediaSource??window?.MediaSource??window?.WebKitMediaSource}function E1(){return window?.SourceBuffer??window?.WebKitSourceBuffer}function Mu(){const e=_1();if(Je(e))return!1;const t=e&&Jn(e.isTypeSupported)&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),n=E1(),i=Je(n)||!Je(n.prototype)&&Jn(n.prototype.appendBuffer)&&Jn(n.prototype.remove);return!!t&&!!i}function S1(){return Mu()}const x1=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i,T1=new Set(["audio/mpeg","audio/ogg","audio/3gp","audio/mp4","audio/webm","audio/flac"]),C1=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i,$1=new Set(["video/mp4","video/webm","video/3gp","video/ogg","video/avi","video/mpeg"]),k1=/\.(m3u8)($|\?)/i,A1=/\.(mpd)($|\?)/i,P1=new Set(["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"]),O1=new Set(["application/dash+xml"]);function Lm({src:e,type:t}){return pt(e)?x1.test(e)||T1.has(t)||e.startsWith("blob:")&&t==="audio/object":t==="audio/object"}function Im(e){return pt(e.src)?C1.test(e.src)||$1.has(e.type)||e.src.startsWith("blob:")&&e.type==="video/object"||zr(e)&&v1():e.type==="video/object"}function zr({src:e,type:t}){return pt(e)&&k1.test(e)||P1.has(t)}function Nu({src:e,type:t}){return pt(e)&&A1.test(e)||O1.has(t)}function L1(e){return pt(e.src)&&(Lm(e)||Im(e)||zr(e))}function sL(e){return typeof window.MediaStream<"u"&&e instanceof window.MediaStream}class $o{get length(){return this.$.length}constructor(t,n){Oe(t)?this.$=t:!Je(t)&&!Je(n)?this.$=[[t,n]]:this.$=[]}start(t){return this.$[t][0]??1/0}end(t){return this.$[t][1]??1/0}}function fc(e){if(!e.length)return null;let t=e.start(0);for(let n=1;n<e.length;n++){const i=e.start(n);i<t&&(t=i)}return t}function fr(e){if(!e.length)return null;let t=e.end(0);for(let n=1;n<e.length;n++){const i=e.end(n);i>t&&(t=i)}return t}function rL(e,t,n){if(e)return nt(e,t,n)}function Dd(e,t){return eT(t.target)&&e.contains(t.target)}const pc=new Set;window.setInterval(()=>{for(const e of pc)e()},1e3);function I1(e){return pc.add(e),()=>pc.delete(e)}function Ft(e,t,n){e.hasAttribute(t)||e.setAttribute(t,n)}function Di(e,t){if(e.hasAttribute("aria-label")||e.hasAttribute("data-no-label"))return;if(!Jn(t)){et(e,"aria-label",t);return}function n(){et(e,"aria-label",t())}D(n)}function Dm(e){const t=getComputedStyle(e);return t.display!=="none"&&parseInt(t.opacity)>0}function D1(e){return!!e&&("checkVisibility"in e?e.checkVisibility({checkOpacity:!0,checkVisibilityCSS:!0}):Dm(e))}function Rm(e,t){return I1(()=>t(D1(e)))}function Mm(e,t,n){for(;t;){if(t===e)return!0;if(n?.(t))break;t=t.parentElement}return!1}function Oi(e,t){nt(e,"pointerup",n=>{n.button===0&&t(n)}),nt(e,"keydown",n=>{um(n)&&t(n)})}function Fu(e){return Co(e)&&(e.touches.length>1||e.changedTouches.length>1)}function si(e){let t=Oa(),n=window.requestAnimationFrame(()=>{De(e,t),n=-1});return()=>void window.cancelAnimationFrame(n)}function Bu(e,t,n){let i,s=e,r=e.parentElement,o=e.content.firstElementChild,a=[];!o&&e.firstElementChild&&(e.innerHTML=e.firstElementChild.outerHTML,e.firstElementChild.remove(),o=e.content.firstElementChild);for(let l=0;l<t;l++)i=document.importNode(o,!0),n?.(i,l),r.insertBefore(i,s.nextSibling),a.push(i),s=i;return Ct(()=>{for(let l=0;l<a.length;l++)a[l].remove()}),a}function Nm(e){const t=document.createElement("template");return t.innerHTML=e,t.content}function Fm(e){return e.cloneNode(!0).firstElementChild}function Bm(e,t,n,{offsetVarName:i,xOffset:s,yOffset:r,...o}){if(!e)return;const a=n.replace(" ","-").replace("-center","");if(He(e,"visibility",t?null:"hidden"),!t)return;let l=n.includes("top");const c=u=>n.includes("left")?`calc(-1 * ${u})`:u,h=u=>l?`calc(-1 * ${u})`:u;return jT(t,e,()=>{GT(t,e,{placement:a,middleware:[...o.middleware??[],qT({fallbackAxisSideDirection:"start",crossAxis:!1}),KT()],...o}).then(({x:u,y:f,middlewareData:g})=>{const p=!!g.flip?.index;l=n.includes(p?"bottom":"top"),e.setAttribute("data-placement",p?n.startsWith("top")?n.replace("top","bottom"):n.replace("bottom","top"):n),Object.assign(e.style,{top:`calc(${f+"px"} + ${h(r?r+"px":`var(--${i}-y-offset, 0px)`)})`,left:`calc(${u+"px"} + ${c(s?s+"px":`var(--${i}-x-offset, 0px)`)})`})})})}function R1(e){return getComputedStyle(e).animationName!=="none"}function Ji(e){return e instanceof HTMLElement}function oL(e,t){const n=new URLSearchParams;for(const i of Object.keys(t))n.set(i,t[i]+"");return e+"?"+n.toString()}function Yr(e,t="preconnect"){const n=document.querySelector(`link[href="${e}"]`);if(!Li(n))return!0;const i=document.createElement("link");return i.rel=t,i.href=e,i.crossOrigin="true",document.head.append(i),!0}const bo={};function aL(e){if(bo[e])return bo[e].promise;const t=hc(),n=document.querySelector(`script[src="${e}"]`);if(!Li(n))return t.resolve(),t.promise;const i=document.createElement("script");return i.src=e,i.onload=()=>{t.resolve(),delete bo[e]},i.onerror=()=>{t.reject(),delete bo[e]},setTimeout(()=>document.head.append(i),0),t.promise}function pr(e){return e==="use-credentials"?"include":pt(e)?"same-origin":void 0}const M1=Symbol(0),N1=Symbol(0),F1=Symbol(0),B1=Symbol(0),H1=Symbol(0),U1=Symbol(0),V1=Symbol(0),Pt={al:M1,M:N1,Ta:F1,P:B1,Ua:H1,T:U1,te:V1};function gc(e,t){return t>=e.startTime&&t<e.endTime}function Ma(e,t,n){let i=null,s=Oa();function r(){const o=pt(t)?[t]:t,a=e.toArray().find(l=>o.includes(l.kind)&&l.mode==="showing");if(a!==i){if(!a){n(null),i=null;return}a.readyState==2?n(a):(n(null),De(()=>{const l=nt(a,"load",()=>{n(a),l()},{once:!0})},s)),i=a}}return r(),nt(e,"mode-change",r)}function j1(e,t,n){Ma(e,t,i=>{if(!i){n("");return}const s=()=>{const r=i?.activeCues[0];n(r?.text||"")};s(),nt(i,"cue-change",s)})}var Rd,Md,Nd;class sa extends cm{constructor(t){super(),this.id="",this.label="",this.language="",this.default=!1,this.P=!1,this.Va=0,this.I="disabled",this.ue={},this.ac=[],this.J=[],this.Wa=[],this[Rd]=0,this[Md]=null,this[Nd]=null;for(const n of Object.keys(t))this[n]=t[n];this.type||(this.type="vtt"),t.content?this.ap(t):t.src||(this[Pt.M]=2)}static createId(t){return`vds-${t.type}-${t.kind}-${t.src??t.label??"?"}`}get metadata(){return this.ue}get regions(){return this.ac}get cues(){return this.J}get activeCues(){return this.Wa}get readyState(){return this[Pt.M]}get mode(){return this.I}set mode(t){this.setMode(t)}addCue(t,n){let i=0,s=this.J.length;for(i=0;i<s&&!(t.endTime<=this.J[i].startTime);i++);i===s?this.J.push(t):this.J.splice(i,0,t),t instanceof TextTrackCue||this[Pt.T]?.track.addCue(t),this.dispatchEvent(new Gt("add-cue",{detail:t,trigger:n})),gc(t,this.Va)&&this[Pt.Ta](this.Va,n)}removeCue(t,n){const i=this.J.indexOf(t);if(i>=0){const s=this.Wa.includes(t);this.J.splice(i,1),this[Pt.T]?.track.removeCue(t),this.dispatchEvent(new Gt("remove-cue",{detail:t,trigger:n})),s&&this[Pt.Ta](this.Va,n)}}setMode(t,n){this.I!==t&&(this.I=t,t==="disabled"?(this.Wa=[],this.we()):this.readyState===2?this[Pt.Ta](this.Va,n):this.xe(),this.dispatchEvent(new Gt("mode-change",{detail:this,trigger:n})),this[Pt.Ua]?.())}[(Rd=Pt.M,Md=Pt.Ua,Nd=Pt.T,Pt.Ta)](t,n){if(this.Va=t,this.mode==="disabled"||!this.J.length)return;const i=[];for(let r=0,o=this.J.length;r<o;r++){const a=this.J[r];gc(a,t)&&i.push(a)}let s=i.length!==this.Wa.length;if(!s){for(let r=0;r<i.length;r++)if(!this.Wa.includes(i[r])){s=!0;break}}this.Wa=i,s&&this.we(n)}[Pt.P](){this.P=!0,this.I!=="disabled"&&this.xe()}ap(t){j(()=>import("./prod-xF6WKuRG.js").then(n=>n.d),[]).then(({parseText:n,VTTCue:i,VTTRegion:s})=>{!pt(t.content)||t.type==="json"?(this.ve(t.content,i,s),this.readyState!==3&&this.jc()):n(t.content,{type:t.type}).then(({cues:r,regions:o})=>{this.J=r,this.ac=o,this.jc()})})}async xe(){if(!(!this.P||this[Pt.M]>0)){if(this[Pt.M]=1,this.dispatchEvent(new Gt("load-start")),!this.src){this.jc();return}try{const{parseResponse:t,VTTCue:n,VTTRegion:i}=await j(()=>import("./prod-xF6WKuRG.js").then(o=>o.d),[]),s=this[Pt.al]?.(),r=fetch(this.src,{headers:this.type==="json"?{"Content-Type":"application/json"}:void 0,credentials:pr(s)});if(this.type==="json")this.ve(await(await r).text(),n,i);else{const{errors:o,metadata:a,regions:l,cues:c}=await t(r,{type:this.type,encoding:this.encoding});if(o[0]?.code===0)throw o[0];this.ue=a,this.ac=l,this.J=c}this.jc()}catch(t){this.$o(t)}}}jc(){if(this[Pt.M]=2,!this.src||this.type!=="vtt"){const n=this[Pt.T];if(n&&!n.managed)for(const i of this.J)n.track.addCue(i)}const t=new Gt("load");this[Pt.Ta](this.Va,t),this.dispatchEvent(t)}$o(t){this[Pt.M]=3,this.dispatchEvent(new Gt("error",{detail:t}))}ve(t,n,i){try{const{regions:s,cues:r}=q1(t,n,i);this.ac=s,this.J=r}catch(s){this.$o(s)}}we(t){this.dispatchEvent(new Gt("cue-change",{trigger:t}))}}const K1=/captions|subtitles/;function Le(e){return K1.test(e.kind)}function q1(e,t,n){const i=pt(e)?JSON.parse(e):e;let s=[],r=[];return i.regions&&n&&(s=i.regions.map(o=>Object.assign(new n,o))),(i.cues||Oe(i))&&(r=(Oe(i)?i:i.cues).filter(o=>un(o.startTime)&&un(o.endTime)).map(o=>Object.assign(new t(0,0,""),o))),{regions:s,cues:r}}var Fd;class Hm extends cm{constructor(){super(...arguments),this.r=[],this[Fd]=!1}get length(){return this.r.length}get readonly(){return this[Nt.Zb]}indexOf(t){return this.r.indexOf(t)}getById(t){return t===""?null:this.r.find(n=>n.id===t)??null}toArray(){return[...this.r]}[(Fd=Nt.Zb,Symbol.iterator)](){return this.r.values()}[Nt.oa](t,n){const i=this.r.length;""+i in this||Object.defineProperty(this,i,{get(){return this.r[i]}}),!this.r.includes(t)&&(this.r.push(t),this.dispatchEvent(new Gt("add",{detail:t,trigger:n})))}[Nt.Yb](t,n){const i=this.r.indexOf(t);i>=0&&(this[Nt.oe]?.(t,n),this.r.splice(i,1),this.dispatchEvent(new Gt("remove",{detail:t,trigger:n})))}[Nt.H](t){for(const n of[...this.r])this[Nt.Yb](n,t);this.r=[],this[Nt.Mc](!1,t),this[Nt.ne]?.()}[Nt.Mc](t,n){this[Nt.Zb]!==t&&(this[Nt.Zb]=t,this.dispatchEvent(new Gt("readonly-change",{detail:t,trigger:n})))}}const Um=new Ii({artist:"",artwork:null,audioTrack:null,audioTracks:[],autoPlay:!1,autoPlayError:null,audioGain:null,buffered:new $o,canLoad:!1,canLoadPoster:!1,canFullscreen:!1,canOrientScreen:Om(),canPictureInPicture:!1,canPlay:!1,clipStartTime:0,clipEndTime:0,controls:!1,get iOSControls(){return Pm&&this.mediaType==="video"&&(!this.playsInline||!Ei.fullscreenEnabled&&this.fullscreen)},get nativeControls(){return this.controls||this.iOSControls},controlsVisible:!1,get controlsHidden(){return!this.controlsVisible},crossOrigin:null,ended:!1,error:null,fullscreen:!1,get loop(){return this.providedLoop||this.userPrefersLoop},logLevel:"silent",mediaType:"unknown",muted:!1,paused:!0,played:new $o,playing:!1,playsInline:!1,pictureInPicture:!1,preload:"metadata",playbackRate:1,qualities:[],quality:null,autoQuality:!1,canSetQuality:!0,canSetPlaybackRate:!0,canSetVolume:!1,canSetAudioGain:!1,seekable:new $o,seeking:!1,source:{src:"",type:""},sources:[],started:!1,textTracks:[],textTrack:null,get hasCaptions(){return this.textTracks.filter(Le).length>0},volume:1,waiting:!1,realCurrentTime:0,get currentTime(){return this.clipStartTime>0?Math.max(0,Math.min(this.realCurrentTime-this.clipStartTime,this.duration)):this.realCurrentTime},providedDuration:-1,intrinsicDuration:0,get realDuration(){return this.providedDuration>0?this.providedDuration:this.intrinsicDuration},get duration(){return this.clipEndTime>0?this.clipEndTime-this.clipStartTime:Math.max(0,this.realDuration-this.clipStartTime)},get title(){return this.providedTitle||this.inferredTitle},get poster(){return this.providedPoster||this.inferredPoster},get viewType(){return this.providedViewType!=="unknown"?this.providedViewType:this.inferredViewType},get streamType(){return this.providedStreamType!=="unknown"?this.providedStreamType:this.inferredStreamType},get currentSrc(){return this.source},get bufferedStart(){const e=fc(this.buffered)??0;return Math.max(0,e-this.clipStartTime)},get bufferedEnd(){const e=fr(this.buffered)??0;return Math.min(this.duration,Math.max(0,e-this.clipStartTime))},get seekableStart(){const e=fc(this.seekable)??0;return Math.max(0,e-this.clipStartTime)},get seekableEnd(){const e=this.canPlay?fr(this.seekable)??1/0:0;return this.clipEndTime>0?Math.max(this.clipEndTime,Math.max(0,e-this.clipStartTime)):e},get seekableWindow(){return Math.max(0,this.seekableEnd-this.seekableStart)},canAirPlay:!1,canGoogleCast:!1,remotePlaybackState:"disconnected",remotePlaybackType:"none",remotePlaybackLoader:null,remotePlaybackInfo:null,get isAirPlayConnected(){return this.remotePlaybackType==="airplay"&&this.remotePlaybackState==="connected"},get isGoogleCastConnected(){return this.remotePlaybackType==="google-cast"&&this.remotePlaybackState==="connected"},pointer:"fine",orientation:"landscape",width:0,height:0,mediaWidth:0,mediaHeight:0,lastKeyboardAction:null,userBehindLiveEdge:!1,liveEdgeTolerance:10,minLiveDVRWindow:60,get canSeek(){return/unknown|on-demand|:dvr/.test(this.streamType)&&Number.isFinite(this.seekableWindow)&&(!this.live||/:dvr/.test(this.streamType)&&this.seekableWindow>=this.minLiveDVRWindow)},get live(){return this.streamType.includes("live")||!Number.isFinite(this.realDuration)},get liveEdgeStart(){return this.live&&Number.isFinite(this.seekableEnd)?Math.max(0,(this.liveSyncPosition??this.seekableEnd)-this.liveEdgeTolerance):0},get liveEdge(){return this.live&&(!this.canSeek||!this.userBehindLiveEdge&&this.currentTime>=this.liveEdgeStart)},get liveEdgeWindow(){return this.live&&Number.isFinite(this.seekableEnd)?this.seekableEnd-this.liveEdgeStart:0},autoPlaying:!1,providedTitle:"",inferredTitle:"",providedLoop:!1,userPrefersLoop:!1,providedPoster:"",inferredPoster:"",inferredViewType:"unknown",providedViewType:"unknown",providedStreamType:"unknown",inferredStreamType:"unknown",liveSyncPosition:null,savedState:null}),Vm=new Set(["autoPlayError","autoPlaying","buffered","canPlay","error","paused","played","playing","seekable","seeking","waiting"]),G1=new Set([...Vm,"ended","inferredPoster","inferredStreamType","inferredTitle","intrinsicDuration","liveSyncPosition","realCurrentTime","savedState","started","userBehindLiveEdge"]);function Bd(e,t=!1){const n=t?Vm:G1;Um.reset(e,i=>n.has(i)),Qn()}const jm=ci();function yt(){return Xt(jm)}const W1=ci(),z1={clickToPlay:!0,clickToFullscreen:!0,controls:["play-large","play","progress","current-time","mute+volume","captions","settings","pip","airplay","fullscreen"],customIcons:!1,displayDuration:!1,download:null,markers:null,invertTime:!0,thumbnails:null,toggleTime:!0,translations:null,seekTime:10,speed:[.5,.75,1,1.25,1.5,1.75,2,4]};class lL extends lt{static{this.props=z1}onSetup(){this.a=yt(),Ve(W1,{...this.$props,previewTime:mt(0)})}}const Y1=Symbol(0),X1=Symbol(0),$n={Ya:Y1,Za:X1};function kl(e){return e instanceof Error?e:Error(typeof e=="string"?e:JSON.stringify(e))}function qn(e,t){if(!e)throw Error(t||"Assertion failed.")}function xe(e,t=2){return Number(e.toFixed(t))}function Q1(e){return String(e).split(".")[1]?.length??0}function Hu(e,t,n){return Math.max(e,Math.min(n,t))}const mc=Ei.fullscreenEnabled;class J1 extends bn{constructor(){super(...arguments),this.ub=!1,this.Nc=!1}get active(){return this.Nc}get supported(){return mc}onConnect(){nt(Ei,"fullscreenchange",this.Oc.bind(this)),nt(Ei,"fullscreenerror",this._b.bind(this)),Ct(this.ya.bind(this))}async ya(){mc&&await this.exit()}Oc(t){const n=Al(this.el);n!==this.Nc&&(n||(this.ub=!1),this.Nc=n,this.dispatch("fullscreen-change",{detail:n,trigger:t}))}_b(t){this.ub&&(this.dispatch("fullscreen-error",{detail:null,trigger:t}),this.ub=!1)}async enter(){try{return this.ub=!0,!this.el||Al(this.el)?void 0:(Hd(),Ei.requestFullscreen(this.el))}catch(t){throw this.ub=!1,t}}async exit(){if(!(!this.el||!Al(this.el)))return Hd(),Ei.exitFullscreen()}}function Al(e){if(Ei.fullscreenElement===e)return!0;try{return e.matches(Ei.fullscreenPseudoClass)}catch{return!1}}function Hd(){if(!mc)throw Error("[vidstack] no fullscreen API")}class Na extends bn{constructor(){super(...arguments),this.vb=mt(this.qe()),this.Ra=mt(!1)}get type(){return this.vb()}get locked(){return this.Ra()}get portrait(){return this.vb().startsWith("portrait")}get landscape(){return this.vb().startsWith("landscape")}static{this.supported=Om()}get supported(){return Na.supported}onConnect(){if(this.supported)nt(screen.orientation,"change",this.re.bind(this));else{const t=window.matchMedia("(orientation: landscape)");t.onchange=this.re.bind(this),Ct(()=>t.onchange=null)}Ct(this.ya.bind(this))}async ya(){this.supported&&this.Ra()&&await this.unlock()}re(t){this.vb.set(this.qe()),this.dispatch("orientation-change",{detail:{orientation:W(this.vb),lock:this.$b},trigger:t})}async lock(t){W(this.Ra)||this.$b===t||(this.se(),await screen.orientation.lock(t),this.Ra.set(!0),this.$b=t)}async unlock(){W(this.Ra)&&(this.se(),this.$b=void 0,await screen.orientation.unlock(),this.Ra.set(!1))}se(){if(!this.supported)throw Error("[vidstack] no orientation API")}qe(){return this.supported?window.screen.orientation.type:window.innerWidth>=window.innerHeight?"landscape-primary":"portrait-primary"}}function bc(e){return!pt(e)&&"width"in e&&"height"in e&&un(e.width)&&un(e.height)}class Z1{constructor(t=void 0){this.tb=t,this.A=null,this.aa=null,this.Pc=-1}setTarget(t){this.A=t}getPlayer(t){return this.aa?this.aa:((t??this.A)?.dispatchEvent(new Gt("find-media-player",{detail:n=>void(this.aa=n),bubbles:!0,composed:!0})),this.aa)}setPlayer(t){this.aa=t}startLoading(t){this.s("media-start-loading",t)}startLoadingPoster(t){this.s("media-poster-start-loading",t)}requestAirPlay(t){this.s("media-airplay-request",t)}requestGoogleCast(t){this.s("media-google-cast-request",t)}play(t){this.s("media-play-request",t)}pause(t){this.s("media-pause-request",t)}mute(t){this.s("media-mute-request",t)}unmute(t){this.s("media-unmute-request",t)}enterFullscreen(t,n){this.s("media-enter-fullscreen-request",n,t)}exitFullscreen(t,n){this.s("media-exit-fullscreen-request",n,t)}lockScreenOrientation(t,n){this.s("media-orientation-lock-request",n,t)}unlockScreenOrientation(t){this.s("media-orientation-unlock-request",t)}enterPictureInPicture(t){this.s("media-enter-pip-request",t)}exitPictureInPicture(t){this.s("media-exit-pip-request",t)}seeking(t,n){this.s("media-seeking-request",n,t)}seek(t,n){this.s("media-seek-request",n,t)}seekToLiveEdge(t){this.s("media-live-edge-request",t)}changeVolume(t,n){this.s("media-volume-change-request",n,Math.max(0,Math.min(1,t)))}changeAudioTrack(t,n){this.s("media-audio-track-change-request",n,t)}changeQuality(t,n){this.s("media-quality-change-request",n,t)}requestAutoQuality(t){this.changeQuality(-1,t)}changeTextTrackMode(t,n,i){this.s("media-text-track-change-request",i,{index:t,mode:n})}changePlaybackRate(t,n){this.s("media-rate-change-request",n,t)}changeAudioGain(t,n){this.s("media-audio-gain-change-request",n,t)}resumeControls(t){this.s("media-resume-controls-request",t)}pauseControls(t){this.s("media-pause-controls-request",t)}togglePaused(t){const n=this.getPlayer(t?.target);n&&(n.state.paused?this.play(t):this.pause(t))}toggleControls(t){const n=this.getPlayer(t?.target);n&&(n.controls.showing?n.controls.hide(0,t):n.controls.show(0,t))}toggleMuted(t){const n=this.getPlayer(t?.target);n&&(n.state.muted?this.unmute(t):this.mute(t))}toggleFullscreen(t,n){const i=this.getPlayer(n?.target);i&&(i.state.fullscreen?this.exitFullscreen(t,n):this.enterFullscreen(t,n))}togglePictureInPicture(t){const n=this.getPlayer(t?.target);n&&(n.state.pictureInPicture?this.exitPictureInPicture(t):this.enterPictureInPicture(t))}showCaptions(t){const n=this.getPlayer(t?.target);if(!n)return;let i=n.state.textTracks,s=this.Pc;(!i[s]||!Le(i[s]))&&(s=-1),s===-1&&(s=i.findIndex(r=>Le(r)&&r.default)),s===-1&&(s=i.findIndex(r=>Le(r))),s>=0&&this.changeTextTrackMode(s,"showing",t),this.Pc=-1}disableCaptions(t){const n=this.getPlayer(t?.target);if(!n)return;const i=n.state.textTracks,s=n.state.textTrack;if(s){const r=i.indexOf(s);this.changeTextTrackMode(r,"disabled",t),this.Pc=r}}toggleCaptions(t){const n=this.getPlayer(t?.target);n&&(n.state.textTrack?this.disableCaptions():this.showCaptions())}userPrefersLoopChange(t,n){this.s("media-user-loop-change-request",n,t)}s(t,n,i){const s=new Gt(t,{bubbles:!0,composed:!0,cancelable:!0,detail:i,trigger:n});let r=n?.target||null;r&&r instanceof lt&&(r=r.el),r=!r||r===document||r===window||r===document.body||this.aa?.el&&r instanceof Node&&!this.aa.el.contains(r)?this.A??this.getPlayer()?.el:r??this.A,this.aa?t==="media-play-request"&&!this.aa.state.canLoad?r?.dispatchEvent(s):this.aa.canPlayQueue.k(t,()=>r?.dispatchEvent(s)):r?.dispatchEvent(s)}za(t){}}class os extends bn{}class tC extends os{constructor(){super(...arguments),this.Qc=-2,this.Xa=!1,this.ze=mt(!1),this.Rc=mt(!1),this.wb=null,this.Ho=mt(!0),this.defaultDelay=2e3}get canIdle(){return this.Ho()}set canIdle(t){this.Ho.set(t)}get hideOnMouseLeave(){const{hideControlsOnMouseLeave:t}=this.$props;return this.ze()||t()}set hideOnMouseLeave(t){this.ze.set(t)}get showing(){return this.$state.controlsVisible()}show(t=0,n){this.Sc(),this.Xa||this.bc(!0,t,n)}hide(t=this.defaultDelay,n){this.Sc(),this.Xa||this.bc(!1,t,n)}pause(t){this.Xa=!0,this.Sc(),this.bc(!0,0,t)}resume(t){this.Xa=!1,!this.$state.paused()&&this.bc(!1,this.defaultDelay,t)}onConnect(){D(this.Ch.bind(this))}Ch(){const{viewType:t}=this.$state;if(!this.Ho())return;if(t()==="audio"){this.show();return}D(this.bg.bind(this)),D(this.Tc.bind(this));const n=this.xb.bind(this),i=this.Aa.bind(this);this.listen("can-play",s=>this.show(0,s)),this.listen("play",n),this.listen("pause",i),this.listen("auto-play-fail",i)}bg(){const{started:t,pointer:n,paused:i}=this.$state;if(!t()||n()!=="fine")return;const s=this.hideOnMouseLeave;(!s||!this.Rc())&&D(()=>{i()||this.listen("pointermove",this.Ae.bind(this))}),s&&(this.listen("mouseenter",this.cg.bind(this)),this.listen("mouseleave",this.dg.bind(this)))}Tc(){const{paused:t,started:n,autoPlayError:i}=this.$state;if(t()||i()&&!n())return;const s=this.Ae.bind(this);D(()=>{const r=this.$state.pointer(),o=r==="coarse",a=[o?"touchend":"pointerup","keydown"];for(const l of a)this.listen(l,s,{passive:!1})})}xb(t){this.show(0,t),this.hide(void 0,t)}Aa(t){this.show(0,t)}cg(t){this.Rc.set(!1),this.show(0,t),this.hide(void 0,t)}dg(t){this.Rc.set(!0),this.hide(0,t)}Sc(){window.clearTimeout(this.Qc),this.Qc=-1}Ae(t){t.MEDIA_GESTURE||this.Xa||Fu(t)||(Ia(t)&&(t.key==="Escape"?(this.el?.focus(),this.wb=null):this.wb&&(t.preventDefault(),requestAnimationFrame(()=>{this.wb?.focus(),this.wb=null}))),this.show(0,t),this.hide(this.defaultDelay,t))}bc(t,n,i){if(n===0){this.B(t,i);return}this.Qc=window.setTimeout(()=>{this.scope&&this.B(t&&!this.Xa,i)},n)}B(t,n){this.$state.controlsVisible()!==t&&(this.$state.controlsVisible.set(t),!t&&document.activeElement&&this.el?.contains(document.activeElement)&&(this.wb=document.activeElement,requestAnimationFrame(()=>{this.el?.focus({preventScroll:!0})})),this.dispatch("controls-change",{detail:t,trigger:n}))}}var as=eC;function eC(e,t,n){var i=null,s=null,r=n&&n.leading,o=n&&n.trailing;r==null&&(r=!0),o==null&&(o=!r),r==!0&&(o=!1);var a=function(){i&&(clearTimeout(i),i=null)},l=function(){var h=s;a(),h&&h()},c=function(){var h=r&&!i,u=this,f=arguments;if(s=function(){return e.apply(u,f)},i||(i=setTimeout(function(){if(i=null,o)return s()},t)),h)return h=!1,s()};return c.cancel=a,c.flush=l,c}class nC{constructor(){this.playerId="vds-player",this.mediaId=null,this.Qk={volume:null,muted:null,audioGain:null,time:null,lang:null,captions:null,rate:null,quality:null},this.saveTimeThrottled=as(this.saveTime.bind(this),1e3)}async getVolume(){return this.Qk.volume}async setVolume(t){this.Qk.volume=t,this.save()}async getMuted(){return this.Qk.muted}async setMuted(t){this.Qk.muted=t,this.save()}async getTime(){return this.Qk.time}async setTime(t,n){const i=t<0;this.Qk.time=i?null:t,i||n?this.saveTime():this.saveTimeThrottled()}async getLang(){return this.Qk.lang}async setLang(t){this.Qk.lang=t,this.save()}async getCaptions(){return this.Qk.captions}async setCaptions(t){this.Qk.captions=t,this.save()}async getPlaybackRate(){return this.Qk.rate}async setPlaybackRate(t){this.Qk.rate=t,this.save()}async getAudioGain(){return this.Qk.audioGain}async setAudioGain(t){this.Qk.audioGain=t,this.save()}async getVideoQuality(){return this.Qk.quality}async setVideoQuality(t){this.Qk.quality=t,this.save()}onChange(t,n,i="vds-player"){const s=i?localStorage.getItem(i):null,r=n?localStorage.getItem(n):null;this.playerId=i,this.mediaId=n,this.Qk={volume:null,muted:null,audioGain:null,lang:null,captions:null,rate:null,quality:null,...s?JSON.parse(s):{},time:r?+r:null}}save(){if(!this.playerId)return;const t=JSON.stringify({...this.Qk,time:void 0});localStorage.setItem(this.playerId,t)}saveTime(){if(!this.mediaId)return;const t=(this.Qk.time??0).toString();localStorage.setItem(this.mediaId,t)}}class iC{constructor(){this.priority=0,this.Be=!0,this.m=null,this.z=null,this.yb=new Set}canRender(t,n){return!!n}attach(t){this.m=t,t&&(t.textTracks.onchange=this.B.bind(this))}addTrack(t){this.yb.add(t),this.eg(t)}removeTrack(t){t[Pt.T]?.remove?.(),t[Pt.T]=null,this.yb.delete(t)}changeTrack(t){const n=t?.[Pt.T];n&&n.track.mode!=="showing"&&(n.track.mode="showing"),this.z=t}setDisplay(t){this.Be=t,this.B()}detach(){this.m&&(this.m.textTracks.onchange=null);for(const t of this.yb)this.removeTrack(t);this.yb.clear(),this.m=null,this.z=null}eg(t){if(!this.m)return;const n=t[Pt.T]??=this.fg(t);Ji(n)&&(this.m.append(n),n.track.mode=n.default?"showing":"disabled")}fg(t){const n=document.createElement("track"),i=t.default||t.mode==="showing",s=t.src&&t.type==="vtt";return n.id=t.id,n.src=s?t.src:"",n.label=t.label,n.kind=t.kind,n.default=i,t.language&&(n.srclang=t.language),i&&!s&&this.Ce(t,n.track),n}Ce(t,n){if(!(t.src&&t.type==="vtt"||n.cues?.length))for(const i of t.cues)n.addCue(i)}B(t){for(const n of this.yb){const i=n[Pt.T];if(!i)continue;if(!this.Be){i.track.mode=i.managed?"hidden":"disabled";continue}const s=i.track.mode==="showing";s&&this.Ce(n,i.track),n.setMode(s?"showing":"disabled",t)}}}class sC{constructor(t){this.a=t,this.m=null,this.cc=[],this.De=!1,this.ba=null,this.Ba=null;const n=t.textTracks;this.Uc=n,D(this.Vc.bind(this)),Ct(this.Ee.bind(this)),nt(n,"add",this.Wc.bind(this)),nt(n,"remove",this.gg.bind(this)),nt(n,"mode-change",this.ea.bind(this))}Vc(){const{nativeControls:t}=this.a.$state;this.De=t(),this.ea()}add(t){this.cc.push(t),this.ea()}remove(t){t.detach(),this.cc.splice(this.cc.indexOf(t),1),this.ea()}Fe(t){requestAnimationFrame(()=>{if(this.m=t,t){this.ba=new iC,this.ba.attach(t);for(const n of this.Uc)this.Ge(n)}this.ea()})}Ge(t){Le(t)&&this.ba?.addTrack(t)}hg(t){Le(t)&&this.ba?.removeTrack(t)}Wc(t){this.Ge(t.detail)}gg(t){this.hg(t.detail)}ea(){const t=this.Uc.selected;if(this.m&&(this.De||t?.[Pt.te])){this.Ba?.changeTrack(null),this.ba?.setDisplay(!0),this.ba?.changeTrack(t);return}if(this.ba?.setDisplay(!1),this.ba?.changeTrack(null),!t){this.Ba?.changeTrack(null);return}const n=this.cc.sort((i,s)=>i.priority-s.priority).find(i=>i.canRender(t,this.m));this.Ba!==n&&(this.Ba?.detach(),n?.attach(this.m),this.Ba=n??null),n?.changeTrack(t)}Ee(){this.ba?.detach(),this.ba=null,this.Ba?.detach(),this.Ba=null}}var Uu=rC;function rC(e,t,n){var i=null,s=null,r=function(){i&&(clearTimeout(i),s=null,i=null)},o=function(){var l=s;r(),l&&l()},a=function(){if(!t)return e.apply(this,arguments);var l=this,c=arguments,h=n&&!i;if(r(),s=function(){e.apply(l,c)},i=setTimeout(function(){if(i=null,!h){var u=s;return s=null,u()}},t),h)return s()};return a.cancel=r,a.flush=o,a}class oC extends Hm{constructor(){super(),this.P=!1,this.dc={},this.Sk=null,this.Rk=null,this.un=Uu(async()=>{if(!this.P)return;!this.Rk&&this.Sk&&(this.Rk=await this.Sk.getLang());const t=await this.Sk?.getCaptions(),n=[["captions","subtitles"],"chapters","descriptions","metadata"];for(const i of n){const s=this.getByKind(i);if(s.find(c=>c.mode==="showing"))continue;const r=this.Rk?s.find(c=>c.language===this.Rk):null,o=Oe(i)?this.dc[i.find(c=>this.dc[c])||""]:this.dc[i],a=r??o,l=a&&Le(a);a&&(!l||t!==!1)&&(a.mode="showing",l&&this.vn(a))}},300),this.ip=null,this.Je=this.ig.bind(this)}get selected(){return this.r.find(n=>n.mode==="showing"&&Le(n))??null}get selectedIndex(){const t=this.selected;return t?this.indexOf(t):-1}get preferredLang(){return this.Rk}set preferredLang(t){this.Rk=t,this.tn(t)}add(t,n){const i=t instanceof sa,s=i?t:new sa(t),r=t.kind==="captions"||t.kind==="subtitles"?"captions":t.kind;return this.dc[r]&&t.default&&delete t.default,s.addEventListener("mode-change",this.Je),this[Nt.oa](s,n),s[Pt.al]=this[Pt.al],this.P&&s[Pt.P](),t.default&&(this.dc[r]=s),this.un(),this}remove(t,n){if(this.ip=t,!!this.r.includes(t))return t===this.dc[t.kind]&&delete this.dc[t.kind],t.mode="disabled",t[Pt.Ua]=null,t.removeEventListener("mode-change",this.Je),this[Nt.Yb](t,n),this.ip=null,this}clear(t){for(const n of[...this.r])this.remove(n,t);return this}getByKind(t){const n=Array.isArray(t)?t:[t];return this.r.filter(i=>n.includes(i.kind))}[Pt.P](){if(!this.P){for(const t of this.r)t[Pt.P]();this.P=!0,this.un()}}ig(t){const n=t.detail;if(this.Sk&&Le(n)&&n!==this.ip&&this.vn(n),n.mode==="showing"){const i=Le(n)?["captions","subtitles"]:[n.kind];for(const s of this.r)s.mode==="showing"&&s!=n&&i.includes(s.kind)&&(s.mode="disabled")}this.dispatchEvent(new Gt("mode-change",{detail:t.detail,trigger:t}))}vn(t){t.mode!=="disabled"&&this.tn(t.language),this.Sk?.setCaptions?.(t.mode==="showing")}tn(t){this.Sk?.setLang?.(this.Rk=t)}setStorage(t){this.Sk=t}}const ir=Symbol(0);class Km extends Hm{get selected(){return this.r.find(t=>t.selected)??null}get selectedIndex(){return this.r.findIndex(t=>t.selected)}[Nt.oe](t,n){this[Nt.pa](t,!1,n)}[Nt.oa](t,n){t[ir]=!1,Object.defineProperty(t,"selected",{get(){return this[ir]},set:i=>{this.readonly||(this[Nt.pe]?.(),this[Nt.pa](t,i))}}),super[Nt.oa](t,n)}[Nt.pa](t,n,i){if(n===t?.[ir])return;const s=this.selected;t&&(t[ir]=n),(n?s!==t:s===t)&&(s&&(s[ir]=!1),this.dispatchEvent(new Gt("change",{detail:{prev:s,current:this.selected},trigger:i})))}}class aC extends Km{}class lC extends Km{constructor(){super(...arguments),this.fc=!1,this.switch="current"}get auto(){return this.fc||this.readonly}[Nt.pe](){this[$n.Ya](!1)}[Nt.ne](t){this[$n.Za]=void 0,this[$n.Ya](!1,t)}autoSelect(t){this.readonly||this.fc||!this[$n.Za]||(this[$n.Za]?.(t),this[$n.Ya](!0,t))}getBySrc(t){return this.r.find(n=>n.src===t)}[$n.Ya](t,n){this.fc!==t&&(this.fc=t,this.dispatchEvent(new Gt("auto-change",{detail:t,trigger:n})))}}function qm(e,t){return[...e].sort(t?uC:cC)}function cC(e,t){return e.height===t.height?(e.bitrate??0)-(t.bitrate??0):e.height-t.height}function uC(e,t){return t.height===e.height?(t.bitrate??0)-(e.bitrate??0):t.height-e.height}function hC(e){return e?.$$PROVIDER_TYPE==="HLS"}function dC(e){return e instanceof HTMLAudioElement}function fC(e){return e instanceof HTMLVideoElement}function pC(e){return dC(e)||fC(e)}const gC={togglePaused:"k Space",toggleMuted:"m",toggleFullscreen:"f",togglePictureInPicture:"i",toggleCaptions:"c",seekBackward:"j J ArrowLeft",seekForward:"l L ArrowRight",volumeUp:"ArrowUp",volumeDown:"ArrowDown",speedUp:">",slowDown:"<"},Ud=new Set(["Shift","Alt","Meta","Control"]),mC='button, [role="button"]',Vd='input, textarea, select, [contenteditable], [role^="menuitem"], [role="timer"]';class bC extends os{constructor(t){super(),this.a=t,this._a=null}onConnect(){D(this.mg.bind(this))}mg(){const{keyDisabled:t,keyTarget:n}=this.$props;if(t())return;const i=n()==="player"?this.el:document,s=mt(!1);i===this.el?(this.listen("focusin",()=>s.set(!0)),this.listen("focusout",r=>{this.el.contains(r.target)||s.set(!1)})):(W(s)||s.set(document.querySelector("[data-media-player]")===this.el),nt(document,"focusin",r=>{const o=r.composedPath().find(a=>a instanceof Element&&a.localName==="media-player");o!==void 0&&s.set(this.el===o)})),D(()=>{s()&&(nt(i,"keyup",this.zb.bind(this)),nt(i,"keydown",this.Ab.bind(this)),nt(i,"keydown",this.ng.bind(this),{capture:!0}))})}zb(t){const n=document.activeElement;if(!t.key||!this.$state.canSeek()||n?.matches(Vd))return;let{method:i,value:s}=this.Zc(t);if(!pt(s)&&!Oe(s)){s?.onKeyUp?.({event:t,player:this.a.player,remote:this.a.remote}),s?.callback?.(t,this.a.remote);return}i?.startsWith("seek")&&(t.preventDefault(),t.stopPropagation(),this._a?(this.Ne(t,i==="seekForward"),this._a=null):(this.a.remote.seek(this.gc,t),this.gc=void 0)),i?.startsWith("volume")&&this.el.querySelector("[data-media-volume-slider]")?.dispatchEvent(new KeyboardEvent("keyup",{key:i==="volumeUp"?"Up":"Down",shiftKey:t.shiftKey,trigger:t}))}Ab(t){if(!t.key||Ud.has(t.key))return;const n=document.activeElement;if(n?.matches(Vd)||um(t)&&n?.matches(mC))return;let{method:i,value:s}=this.Zc(t),r=!t.metaKey&&/^[0-9]$/.test(t.key);if(!pt(s)&&!Oe(s)&&!r){s?.onKeyDown?.({event:t,player:this.a.player,remote:this.a.remote}),s?.callback?.(t,this.a.remote);return}if(!i&&r){t.preventDefault(),t.stopPropagation(),this.a.remote.seek(this.$state.duration()/10*Number(t.key),t);return}if(i){switch(t.preventDefault(),t.stopPropagation(),i){case"seekForward":case"seekBackward":this.qa(t,i,i==="seekForward");break;case"volumeUp":case"volumeDown":const o=this.el.querySelector("[data-media-volume-slider]");if(o)o.dispatchEvent(new KeyboardEvent("keydown",{key:i==="volumeUp"?"Up":"Down",shiftKey:t.shiftKey,trigger:t}));else{const l=t.shiftKey?.1:.05;this.a.remote.changeVolume(this.$state.volume()+(i==="volumeUp"?+l:-l),t)}break;case"toggleFullscreen":this.a.remote.toggleFullscreen("prefer-media",t);break;case"speedUp":case"slowDown":const a=this.$state.playbackRate();this.a.remote.changePlaybackRate(Math.max(.25,Math.min(2,a+(i==="speedUp"?.25:-.25))),t);break;default:this.a.remote[i]?.(t)}this.$state.lastKeyboardAction.set({action:i,event:t})}}ng(t){pC(t.target)&&this.Zc(t).method&&t.preventDefault()}Zc(t){const n={...this.$props.keyShortcuts(),...this.a.ariaKeys},i=Object.keys(n).find(s=>{const r=n[s],o=Oe(r)?r.join(" "):pt(r)?r:r?.keys;return(Oe(o)?o:o?.split(" "))?.some(a=>vC(a).replace(/Control/g,"Ctrl").split("+").every(l=>Ud.has(l)?t[l.toLowerCase()+"Key"]:t.key===l.replace("Space"," ")))});return{method:i,value:i?n[i]:null}}og(t,n){const i=t.shiftKey?10:5;return this.gc=Math.max(0,Math.min((this.gc??this.$state.currentTime())+(n==="seekForward"?+i:-i),this.$state.duration()))}Ne(t,n){this._a?.dispatchEvent(new KeyboardEvent(t.type,{key:n?"Right":"Left",shiftKey:t.shiftKey,trigger:t}))}qa(t,n,i){this.$state.canSeek()&&(this._a||(this._a=this.el.querySelector("[data-media-time-slider]")),this._a?this.Ne(t,i):this.a.remote.seeking(this.og(t,n),t))}}const yC=["!","@","#","$","%","^","&","*","(",")"];function vC(e){return e.replace(/Shift\+(\d)/g,(t,n)=>yC[n-1])}class wC extends bn{constructor(t){super(),this._c=t}onAttach(t){const{$props:n,ariaKeys:i}=yt(),s=t.getAttribute("aria-keyshortcuts");if(s){i[this._c]=s,Ct(()=>{delete i[this._c]});return}const r=n.keyShortcuts()[this._c];if(r){const o=Oe(r)?r.join(" "):pt(r)?r:r?.keys;t.setAttribute("aria-keyshortcuts",Oe(o)?o.join(" "):o)}}}class _C{constructor(){this.name="audio"}canPlay(t){return Lm(t)?!pt(t.src)||t.type==="?"||b1(this.target,t.type):!1}mediaType(){return"audio"}async load(t){return new(await j(()=>import("./vidstack-audio-C9hhqeWo.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))).AudioProvider(this.target,t)}}class Vu{constructor(){this.name="video"}canPlay(t){return Im(t)?!pt(t.src)||t.type==="?"||y1(this.target,t.type):!1}mediaType(){return"video"}async load(t){return new(await j(()=>import("./vidstack-video-DJmD_cO0.js"),__vite__mapDeps([9,1,2,3,4,5,6,7,8]))).VideoProvider(this.target,t)}}class ju extends Vu{constructor(){super(...arguments),this.name="dash"}static{this.supported=S1()}canPlay(t){return ju.supported&&Nu(t)}async load(t){return new(await j(()=>import("./vidstack-dash-BpngTHRU.js"),__vite__mapDeps([10,9,1,2,3,4,5,6,7,8]))).DASHProvider(this.target,t)}}class Ku extends Vu{constructor(){super(...arguments),this.name="hls"}static{this.supported=Mu()}canPlay(t){return Ku.supported&&zr(t)}async load(t){return new(await j(()=>import("./vidstack-hls-BPxS2LG7.js"),__vite__mapDeps([11,9,1,2,3,4,5,6,7,8]))).HLSProvider(this.target,t)}}class EC{constructor(){this.name="vimeo"}preconnect(){const t=["https://i.vimeocdn.com","https://f.vimeocdn.com","https://fresnel.vimeocdn.com"];for(const n of t)Yr(n)}canPlay(t){return pt(t.src)&&t.type==="video/vimeo"}mediaType(){return"video"}async load(t){return new(await j(()=>import("./vidstack-vimeo-B_PzYdDr.js"),__vite__mapDeps([12,2,13,14,3,4,5,6,7,8]))).VimeoProvider(this.target,t)}async loadPoster(t,n,i){const{resolveVimeoVideoId:s,getVimeoVideoInfo:r}=await j(()=>import("./vidstack-BTBUzdbF-g1Q0NaiI.js"),[]);if(!pt(t.src))return null;const{videoId:o}=s(t.src);return o?r(o,i).then(a=>a?a.poster:null):null}}class SC{constructor(){this.name="youtube"}preconnect(){const t=["https://www.google.com","https://i.ytimg.com","https://googleads.g.doubleclick.net","https://static.doubleclick.net"];for(const n of t)Yr(n)}canPlay(t){return pt(t.src)&&t.type==="video/youtube"}mediaType(){return"video"}async load(t){return new(await j(()=>import("./vidstack-youtube-AdLmryUR.js"),__vite__mapDeps([15,13,16,3,4,5,6,7,8]))).YouTubeProvider(this.target,t)}async loadPoster(t,n,i){const{findYouTubePoster:s,resolveYouTubeVideoId:r}=await j(()=>import("./vidstack-DscYSLiW-DtyQKGjb.js"),[]),o=pt(t.src)&&r(t.src);return o?s(o,i):null}}const Pl=Symbol(0),xC=["autoPlay","canAirPlay","canFullscreen","canGoogleCast","canLoad","canLoadPoster","canPictureInPicture","canPlay","canSeek","ended","fullscreen","isAirPlayConnected","isGoogleCastConnected","live","liveEdge","loop","mediaType","muted","paused","pictureInPicture","playing","playsInline","remotePlaybackState","remotePlaybackType","seeking","started","streamType","viewType","waiting"],TC={artist:"",artwork:null,autoplay:!1,autoPlay:!1,clipStartTime:0,clipEndTime:0,controls:!1,currentTime:0,crossorigin:null,crossOrigin:null,duration:-1,fullscreenOrientation:"landscape",googleCast:{},load:"visible",posterLoad:"visible",logLevel:"silent",loop:!1,muted:!1,paused:!0,playsinline:!1,playsInline:!1,playbackRate:1,poster:"",preload:"metadata",preferNativeHLS:!1,src:"",title:"",controlsDelay:2e3,hideControlsOnMouseLeave:!1,viewType:"unknown",streamType:"unknown",volume:1,liveEdgeTolerance:10,minLiveDVRWindow:60,keyDisabled:!1,keyTarget:"player",keyShortcuts:gC,storage:null};class jd extends os{constructor(t,n){super(),this.vb=t,this.Ca=n}async onAttach(t){const n=this.$props[this.vb]();if(n==="eager")requestAnimationFrame(this.Ca);else if(n==="idle")fT(this.Ca);else if(n==="visible"){let i,s=new IntersectionObserver(r=>{this.scope&&r[0].isIntersecting&&(i?.(),i=void 0,this.Ca())});s.observe(t),i=Ct(()=>s.disconnect())}}}class CC{constructor(t,n){this.X=t,this.a=n,this.c=(i,...s)=>{this.X(new Gt(i,{detail:s?.[0],trigger:s?.[1]}))}}async jc(t,n){return Su(async()=>{this.a;const{autoPlay:i,canPlay:s,started:r,duration:o,seekable:a,buffered:l,remotePlaybackInfo:c,playsInline:h,savedState:u,source:f}=this.a.$state;if(s())return;const g={duration:t?.duration??o(),seekable:t?.seekable??a(),buffered:t?.buffered??l(),provider:this.a.$provider()};this.c("can-play",g,n),Qn();let p=this.a.$provider(),{storage:y,qualities:x}=this.a,{muted:S,volume:E,clipStartTime:b,playbackRate:_}=this.a.$props;await y?.onLoad?.(f());const w=u()?.currentTime,T=u()?.paused,C=await y?.getTime(),$=w??C??b(),I=T||T!==!1&&!r()&&i();if(p){p.setVolume(await y?.getVolume()??E()),p.setMuted(await y?.getMuted()??S());const O=await y?.getAudioGain()??1;O>1&&p.audioGain?.setGain?.(O),p.setPlaybackRate?.(await y?.getPlaybackRate()??_()),p.setPlaysInline?.(h()),$>0&&p.setCurrentTime($)}const A=await y?.getVideoQuality();if(A&&x.length){let O=null,M=1/0;for(const B of x){const N=Math.abs(A.width-B.width)+Math.abs(A.height-B.height)+(A.bitrate?Math.abs(A.bitrate-(B.bitrate??0)):0);N<M&&(O=B,M=N)}O&&(O.selected=!0)}s()&&I?await this.oh(n):C&&C>0&&this.c("started",void 0,n),c.set(null)})}async oh(t){const{player:n,$state:{autoPlaying:i,muted:s}}=this.a;i.set(!0);const r=new Gt("auto-play-attempt",{trigger:t});try{await n.play(r)}catch{}}}class $C{constructor(){this.e=new Map}k(t,n){this.e.set(t,n)}td(t){const n=this.kl(t);return this.e.delete(t),n}kl(t){return this.e.get(t)}qc(t){this.e.delete(t)}pl(){this.e.clear()}}class Gm{constructor(){this.Mb=!1,this.Ed=hc(),this.e=new Map}get ph(){return this.e.size}get Rj(){return this.Mb}async Sj(){this.Mb||await this.Ed.promise}k(t,n){if(this.Mb){n();return}this.e.delete(t),this.e.set(t,n)}td(t){this.e.get(t)?.(),this.e.delete(t)}Bb(){this.jf(),this.Mb=!0,this.e.size>0&&this.jf()}ra(){this.Mb=!1}H(){this.ra(),this.e.clear(),this.kf()}jf(){for(const t of this.e.keys())this.td(t);this.kf()}kf(){this.Ed.resolve(),this.Ed=hc()}}class kC extends os{constructor(t,n,i){super(),this.ga=t,this.f=n,this.a=i,this.vk=new Gm,this.vd=!1,this.uk=i.$provider,this.Ib=new tC,this.rc=new J1,this.ta=new Na}onAttach(){this.listen("fullscreen-change",this.Oc.bind(this))}onConnect(){const t=Object.getOwnPropertyNames(Object.getPrototypeOf(this)),n=this.qh.bind(this);for(const i of t)i.startsWith("media-")&&this.listen(i,n);this.Mk(),D(this.wk.bind(this)),D(this.Gn.bind(this)),D(this.Ln.bind(this)),D(this.Hn.bind(this)),D(this.In.bind(this)),D(this.Jn.bind(this)),D(this.Kn.bind(this))}onDestroy(){this.vk.H()}Mk(){const{load:t}=this.$props,{canLoad:n}=this.$state;if(t()!=="play"||n())return;const i=this.listen("media-play-request",s=>{this.Lk(s),i()})}wk(){const t=this.uk(),n=this.$state.canPlay();return t&&n&&this.vk.Bb(),()=>{this.vk.ra()}}qh(t){t.stopPropagation(),!t.defaultPrevented&&this[t.type]&&(W(this.uk)?this[t.type](t):this.vk.k(t.type,()=>{W(this.uk)&&this[t.type](t)}))}async sc(t){const{canPlay:n,paused:i,autoPlaying:s}=this.$state;if(!this.Lk(t)&&W(i)){t&&this.f.e.k("media-play-request",t);try{const r=W(this.uk);return Ol(r,W(n)),await r.play()}catch(r){const o=this.createEvent("play-fail",{detail:kl(r),trigger:t});throw o.autoPlay=s(),this.ga.X(o),r}}}Lk(t){const{load:n}=this.$props,{canLoad:i}=this.$state;if(n()==="play"&&!i()){const s=this.createEvent("media-start-loading",{trigger:t});return this.dispatchEvent(s),this.vk.k("media-play-request",async()=>{try{await this.sc(s)}catch{}}),!0}return!1}async ud(t){const{canPlay:n,paused:i}=this.$state;if(!W(i)){t&&this.f.e.k("media-pause-request",t);try{const s=W(this.uk);return Ol(s,W(n)),await s.pause()}catch(s){throw this.f.e.qc("media-pause-request"),s}}}gp(t,n){const{audioGain:i,canSetAudioGain:s}=this.$state;if(i()===t)return;const r=this.uk();if(!r?.audioGain||!s())throw Error("[vidstack] audio gain api not available");n&&this.f.e.k("media-audio-gain-change-request",n),r.audioGain.setGain(t)}Ze(t){const{canPlay:n,live:i,liveEdge:s,canSeek:r,liveSyncPosition:o,seekableEnd:a,userBehindLiveEdge:l}=this.$state;if(l.set(!1),W(()=>!i()||s()||!r()))return;const c=W(this.uk);Ol(c,W(n)),t&&this.f.e.k("media-seek-request",t);const h=a()-2;c.setCurrentTime(Math.min(h,o()??h))}async _e(t="prefer-media",n){const i=this.$e(t);if(Kd(t,i),!i.active)return W(this.$state.pictureInPicture)&&(this.vd=!0,await this.wd(n)),n&&this.f.e.k("media-enter-fullscreen-request",n),i.enter()}async af(t="prefer-media",n){const i=this.$e(t);if(Kd(t,i),!!i.active){n&&this.f.e.k("media-exit-fullscreen-request",n);try{const s=await i.exit();return this.vd&&W(this.$state.canPictureInPicture)&&await this.xd(),s}finally{this.vd=!1}}}$e(t){const n=W(this.uk);return t==="prefer-media"&&this.rc.supported||t==="media"?this.rc:n?.fullscreen}async xd(t){if(this.bf(),!this.$state.pictureInPicture())return t&&this.f.e.k("media-enter-pip-request",t),await this.uk().pictureInPicture.enter()}async wd(t){if(this.bf(),!!this.$state.pictureInPicture())return t&&this.f.e.k("media-exit-pip-request",t),await this.uk().pictureInPicture.exit()}bf(){if(!this.$state.canPictureInPicture())throw Error("[vidstack] no pip support")}Gn(){this.Ib.defaultDelay=this.$props.controlsDelay()}Ln(){const{canSetAudioGain:t}=this.$state,n=!!this.uk()?.audioGain?.supported;t.set(n)}Hn(){const{canAirPlay:t}=this.$state,n=!!this.uk()?.airPlay?.supported;t.set(n)}In(){const{canGoogleCast:t,source:n}=this.$state,i=g1&&!Am&&L1(n());t.set(i)}Jn(){const{canFullscreen:t}=this.$state,n=this.rc.supported||!!this.uk()?.fullscreen?.supported;t.set(n)}Kn(){const{canPictureInPicture:t}=this.$state,n=!!this.uk()?.pictureInPicture?.supported;t.set(n)}async"media-airplay-request"(t){try{await this.ol(t)}catch{}}async ol(t){try{const n=this.uk()?.airPlay;if(!n?.supported)throw Error("No AirPlay adapter.");return t&&this.f.e.k("media-airplay-request",t),await n.prompt()}catch(n){throw this.f.e.qc("media-airplay-request"),n}}async"media-google-cast-request"(t){try{await this.ul(t)}catch{}}async ul(t){try{const{canGoogleCast:n}=this.$state;if(!W(n)){const s=Error("Cast not available.");throw s.code="CAST_NOT_AVAILABLE",s}if(Yr("https://www.gstatic.com"),!this.om){const s=await j(()=>import("./vidstack-DZeWSaI_-B-nP6Zb8.js").then(r=>r.v),[]);this.om=new s.GoogleCastLoader}await this.om.prompt(this.a),t&&this.f.e.k("media-google-cast-request",t);const i=W(this.$state.remotePlaybackState)!=="disconnected";i&&this.$state.savedState.set({paused:W(this.$state.paused),currentTime:W(this.$state.currentTime)}),this.$state.remotePlaybackLoader.set(i?this.om:null)}catch(n){throw this.f.e.qc("media-google-cast-request"),n}}"media-audio-track-change-request"(t){const{logger:n,audioTracks:i}=this.a;if(i.readonly)return;const s=t.detail,r=i[s];if(r){const o=t.type;this.f.e.k(o,t),r.selected=!0}}async"media-enter-fullscreen-request"(t){try{await this._e(t.detail,t)}catch(n){this._b(n,t)}}async"media-exit-fullscreen-request"(t){try{await this.af(t.detail,t)}catch(n){this._b(n,t)}}async Oc(t){const n=W(this.$props.fullscreenOrientation),i=t.detail;if(!(Je(n)||n==="none"||!this.ta.supported))if(i){if(this.ta.locked)return;this.dispatch("media-orientation-lock-request",{detail:n,trigger:t})}else this.ta.locked&&this.dispatch("media-orientation-unlock-request",{trigger:t})}_b(t,n){this.ga.X(this.createEvent("fullscreen-error",{detail:kl(t)}))}async"media-orientation-lock-request"(t){const n=t.type;try{this.f.e.k(n,t),await this.ta.lock(t.detail)}catch{this.f.e.qc(n)}}async"media-orientation-unlock-request"(t){const n=t.type;try{this.f.e.k(n,t),await this.ta.unlock()}catch{this.f.e.qc(n)}}async"media-enter-pip-request"(t){try{await this.xd(t)}catch(n){this.cf(n,t)}}async"media-exit-pip-request"(t){try{await this.wd(t)}catch(n){this.cf(n,t)}}cf(t,n){this.ga.X(this.createEvent("picture-in-picture-error",{detail:kl(t)}))}"media-live-edge-request"(t){const{live:n,liveEdge:i,canSeek:s}=this.$state;if(!(!n()||i()||!s())){this.f.e.k("media-seek-request",t);try{this.Ze()}catch{this.f.e.qc("media-seek-request")}}}async"media-loop-request"(t){try{this.f.Ha=!0,this.f.gb=!0,await this.sc(t)}catch{this.f.Ha=!1}}"media-user-loop-change-request"(t){this.$state.userPrefersLoop.set(t.detail)}async"media-pause-request"(t){if(!this.$state.paused())try{await this.ud(t)}catch{}}async"media-play-request"(t){if(this.$state.paused())try{await this.sc(t)}catch{}}"media-rate-change-request"(t){const{playbackRate:n,canSetPlaybackRate:i}=this.$state;if(n()===t.detail||!i())return;const s=this.uk();s?.setPlaybackRate&&(this.f.e.k("media-rate-change-request",t),s.setPlaybackRate(t.detail))}"media-audio-gain-change-request"(t){try{this.gp(t.detail,t)}catch{}}"media-quality-change-request"(t){const{qualities:n,storage:i,logger:s}=this.a;if(n.readonly)return;this.f.e.k("media-quality-change-request",t);const r=t.detail;if(r<0)n.autoSelect(t),t.isOriginTrusted&&i?.setVideoQuality?.(null);else{const o=n[r];o&&(o.selected=!0,t.isOriginTrusted&&i?.setVideoQuality?.({id:o.id,width:o.width,height:o.height,bitrate:o.bitrate}))}}"media-pause-controls-request"(t){const n=t.type;this.f.e.k(n,t),this.Ib.pause(t)}"media-resume-controls-request"(t){const n=t.type;this.f.e.k(n,t),this.Ib.resume(t)}"media-seek-request"(t){const{seekableStart:n,seekableEnd:i,ended:s,canSeek:r,live:o,userBehindLiveEdge:a,clipStartTime:l}=this.$state,c=t.detail;s()&&(this.f.gb=!0);const h=t.type;this.f.qa=!1,this.f.e.qc(h);const u=c+l(),f=Math.floor(u)===Math.floor(i()),g=f?i():Math.min(Math.max(n()+.1,u),i()-.1);!Number.isFinite(g)||!r()||(this.f.e.k(h,t),this.uk().setCurrentTime(g),o()&&t.isOriginTrusted&&Math.abs(i()-g)>=2&&a.set(!0))}"media-seeking-request"(t){const n=t.type;this.f.e.k(n,t),this.$state.seeking.set(!0),this.f.qa=!0}"media-start-loading"(t){if(this.$state.canLoad())return;const n=t.type;this.f.e.k(n,t),this.ga.X(this.createEvent("can-load"))}"media-poster-start-loading"(t){if(this.$state.canLoadPoster())return;const n=t.type;this.f.e.k(n,t),this.ga.X(this.createEvent("can-load-poster"))}"media-text-track-change-request"(t){const{index:n,mode:i}=t.detail,s=this.a.textTracks[n];if(s){const r=t.type;this.f.e.k(r,t),s.setMode(i,t)}}"media-mute-request"(t){if(this.$state.muted())return;const n=t.type;this.f.e.k(n,t),this.uk().setMuted(!0)}"media-unmute-request"(t){const{muted:n,volume:i}=this.$state;if(!n())return;const s=t.type;this.f.e.k(s,t),this.a.$provider().setMuted(!1),i()===0&&(this.f.e.k(s,t),this.uk().setVolume(.25))}"media-volume-change-request"(t){const{muted:n,volume:i}=this.$state,s=t.detail;if(i()===s)return;const r=t.type;this.f.e.k(r,t),this.uk().setVolume(s),s>0&&n()&&(this.f.e.k(r,t),this.uk().setMuted(!1))}ql(t,n,i){}}function Ol(e,t){if(!(e&&t))throw Error("[vidstack] media not ready")}function Kd(e,t){if(!t?.supported)throw Error("[vidstack] no fullscreen support")}class AC{constructor(){this.qa=!1,this.Ha=!1,this.gb=!1,this.e=new $C}}const PC=new Set(["auto-play","auto-play-fail","can-load","sources-change","source-change","load-start","abort","error","loaded-metadata","loaded-data","can-play","play","play-fail","pause","playing","seeking","seeked","waiting"]);class OC extends os{constructor(t,n){super(),this.f=t,this.a=n,this.p=new Map,this.Kk=!1,this.tc=!1,this.Jb=!1,this.to=null,this.seeking=as(i=>{const{seeking:s,realCurrentTime:r,paused:o}=this.$state;s.set(!0),r.set(i.detail),this.F("media-seeking-request",i),o()&&(this.hb=i,this.zd())},150,{leading:!0}),this.zd=Uu(()=>{if(!this.hb)return;this.tc=!0;const{waiting:i,playing:s}=this.$state;i.set(!0),s.set(!1);const r=this.createEvent("waiting",{trigger:this.hb});this.p.set("waiting",r),this.dispatch(r),this.hb=void 0,this.tc=!1},300)}onAttach(t){t.setAttribute("aria-busy","true"),this.listen("fullscreen-change",this["fullscreen-change"].bind(this)),this.listen("fullscreen-error",this["fullscreen-error"].bind(this)),this.listen("orientation-change",this["orientation-change"].bind(this))}onConnect(t){D(this.nm.bind(this)),this.uh(),this.vh(),this.wh(),this.xh(),Ct(this.yh.bind(this))}onDestroy(){const{audioTracks:t,qualities:n,textTracks:i}=this.a;t[Nt.H](),n[Nt.H](),i[Nt.H](),this.so()}X(t){if(!this.scope)return;const n=t.type;Su(()=>this[t.type]?.(t)),PC.has(n)&&this.p.set(n,t),this.dispatch(t)}xh(){this.Jb&&(requestAnimationFrame(()=>{this.scope&&this.a.remote.play(new Gt("dom-connect"))}),this.Jb=!1)}yh(){this.Jb||(this.Jb=!this.$state.paused(),this.a.$provider()?.pause())}ib(){this.df(),this.Kk=!1,this.f.gb=!1,this.f.Ha=!1,this.tc=!1,this.hb=void 0,this.p.clear()}F(t,n){const i=this.f.e.td(t);i&&(n.request=i,n.triggers.add(i))}uh(){this.yd(),this.ef();const t=this.a.textTracks;nt(t,"add",this.yd.bind(this)),nt(t,"remove",this.yd.bind(this)),nt(t,"mode-change",this.ef.bind(this))}vh(){const t=this.a.qualities;nt(t,"add",this.pc.bind(this)),nt(t,"remove",this.pc.bind(this)),nt(t,"change",this.fb.bind(this)),nt(t,"auto-change",this.zh.bind(this)),nt(t,"readonly-change",this.Ah.bind(this))}wh(){const t=this.a.audioTracks;nt(t,"add",this.ff.bind(this)),nt(t,"remove",this.ff.bind(this)),nt(t,"change",this.Bh.bind(this))}yd(t){const{textTracks:n}=this.$state;n.set(this.a.textTracks.toArray()),this.dispatch("text-tracks-change",{detail:n(),trigger:t})}ef(t){t&&this.F("media-text-track-change-request",t);const n=this.a.textTracks.selected,{textTrack:i}=this.$state;i()!==n&&(i.set(n),this.dispatch("text-track-change",{detail:n,trigger:t}))}ff(t){const{audioTracks:n}=this.$state;n.set(this.a.audioTracks.toArray()),this.dispatch("audio-tracks-change",{detail:n(),trigger:t})}Bh(t){const{audioTrack:n}=this.$state;n.set(this.a.audioTracks.selected),t&&this.F("media-audio-track-change-request",t),this.dispatch("audio-track-change",{detail:n(),trigger:t})}pc(t){const{qualities:n}=this.$state;n.set(this.a.qualities.toArray()),this.dispatch("qualities-change",{detail:n(),trigger:t})}fb(t){const{quality:n}=this.$state;n.set(this.a.qualities.selected),t&&this.F("media-quality-change-request",t),this.dispatch("quality-change",{detail:n(),trigger:t})}zh(){const{qualities:t}=this.a,n=t.auto;this.$state.autoQuality.set(n),n||this.so()}uo(){this.so(),this.to=D(()=>{const{qualities:t}=this.a,{mediaWidth:n,mediaHeight:i}=this.$state,s=n(),r=i();if(s===0||r===0)return;let o=null,a=1/0;for(const l of t){const c=Math.abs(l.width-s)+Math.abs(l.height-r);c<a&&(a=c,o=l)}o&&t[Nt.pa](o,!0,new Gt("resize",{detail:{width:s,height:r}}))})}so(){this.to?.(),this.to=null}Ah(){this.$state.canSetQuality.set(!this.a.qualities.readonly)}nm(){const{canSetVolume:t,isGoogleCastConnected:n}=this.$state;if(n()){t.set(!1);return}w1().then(t.set)}"provider-change"(t){const n=this.a.$provider(),i=t.detail;n?.type!==i?.type&&(n?.destroy?.(),n?.scope?.dispose(),this.a.$provider.set(t.detail),n&&t.detail===null&&this.gf(t))}"provider-loader-change"(t){}"auto-play"(t){this.$state.autoPlayError.set(null)}"auto-play-fail"(t){this.$state.autoPlayError.set(t.detail),this.ib()}"can-load"(t){this.$state.canLoad.set(!0),this.p.set("can-load",t),this.a.textTracks[Pt.P](),this.F("media-start-loading",t)}"can-load-poster"(t){this.$state.canLoadPoster.set(!0),this.p.set("can-load-poster",t),this.F("media-poster-start-loading",t)}"media-type-change"(t){const n=this.p.get("source-change");n&&t.triggers.add(n);const i=this.$state.viewType();this.$state.mediaType.set(t.detail);const s=this.$state.providedViewType(),r=s==="unknown"?t.detail:s;i!==r&&setTimeout(()=>{requestAnimationFrame(()=>{this.scope&&(this.$state.inferredViewType.set(t.detail),this.dispatch("view-type-change",{detail:r,trigger:t}))})},0)}"stream-type-change"(t){const n=this.p.get("source-change");n&&t.triggers.add(n);const{streamType:i,inferredStreamType:s}=this.$state;s.set(t.detail),t.detail=i()}"rate-change"(t){const{storage:n}=this.a,{canPlay:i}=this.$state;this.$state.playbackRate.set(t.detail),this.F("media-rate-change-request",t),i()&&n?.setPlaybackRate?.(t.detail)}"remote-playback-change"(t){const{remotePlaybackState:n,remotePlaybackType:i}=this.$state,{type:s,state:r}=t.detail,o=r==="connected";i.set(s),n.set(r);const a=s==="airplay"?"media-airplay-request":"media-google-cast-request";if(o)this.F(a,t);else{const l=this.f.e.kl(a);l&&(t.request=l,t.triggers.add(l))}}"sources-change"(t){const n=this.$state.sources(),i=t.detail;this.$state.sources.set(i),this.vo(n,i,t)}vo(t,n,i){let{qualities:s}=this.a,r=!1,o=!1;for(const a of t){if(!bc(a))continue;if(!n.some(c=>c.src===a.src)){const c=s.getBySrc(a.src);c&&(s[Nt.Yb](c,i),o=!0)}}o&&!s.length&&(this.$state.savedState.set(null),s[Nt.H](i));for(const a of n){if(!bc(a)||s.getBySrc(a.src))continue;const l={id:a.id??a.height+"p",bitrate:null,codec:null,...a,selected:!1};s[Nt.oa](l,i),r=!0}r&&!s[$n.Za]&&(this.uo(),s[$n.Za]=this.uo.bind(this),s[$n.Ya](!0,i))}"source-change"(t){t.isQualityChange=t.originEvent?.type==="quality-change";const n=t.detail;this.gf(t,t.isQualityChange),this.p.set(t.type,t),this.$state.source.set(n),this.el?.setAttribute("aria-busy","true")}gf(t,n=!1){const{audioTracks:i,qualities:s}=this.a;if(!n){i[Nt.H](t),s[Nt.H](t),Bd(this.$state,n),this.ib();return}Bd(this.$state,n),this.ib()}abort(t){const n=this.p.get("source-change");n&&t.triggers.add(n);const i=this.p.get("can-load");i&&!t.triggers.hasType("can-load")&&t.triggers.add(i)}"load-start"(t){const n=this.p.get("source-change");n&&t.triggers.add(n)}error(t){this.$state.error.set(t.detail);const n=this.p.get("abort");n&&t.triggers.add(n)}"loaded-metadata"(t){const n=this.p.get("load-start");n&&t.triggers.add(n)}"loaded-data"(t){const n=this.p.get("load-start");n&&t.triggers.add(n)}"can-play"(t){const n=this.p.get("loaded-metadata");n&&t.triggers.add(n),this.hf(t.detail),this.el?.setAttribute("aria-busy","false")}"can-play-through"(t){this.hf(t.detail);const n=this.p.get("can-play");n&&t.triggers.add(n)}hf(t){const{seekable:n,buffered:i,intrinsicDuration:s,canPlay:r}=this.$state;r.set(!0),i.set(t.buffered),n.set(t.seekable);const o=fr(t.seekable)??1/0;s.set(o)}"duration-change"(t){const{live:n,intrinsicDuration:i,ended:s}=this.$state,r=t.detail;if(!n()){const o=Number.isNaN(r)?0:r;i.set(o),s()&&this.fp(t)}}progress(t){const{buffered:n,bufferedEnd:i,seekable:s,seekableEnd:r,live:o,intrinsicDuration:a}=this.$state,{buffered:l,seekable:c}=t.detail,h=fr(l)??1/0,u=l.length!==n().length,f=h>i(),g=fr(c)??1/0,p=c.length!==s().length,y=g>r();(u||f)&&n.set(l),(p||y)&&s.set(c),o()&&(a.set(g),this.dispatch("duration-change",{detail:g,trigger:t}))}play(t){const{paused:n,autoPlayError:i,ended:s,autoPlaying:r,playsInline:o,pointer:a,muted:l,viewType:c,live:h,userBehindLiveEdge:u}=this.$state;if(this.Gk(),!n()){t.stopImmediatePropagation();return}t.autoPlay=r();const f=this.p.get("waiting");f&&t.triggers.add(f),this.F("media-play-request",t),this.p.set("play",t),n.set(!1),i.set(null),t.autoPlay&&(this.X(this.createEvent("auto-play",{detail:{muted:l()},trigger:t})),r.set(!1)),(s()||this.f.gb)&&(this.f.gb=!1,s.set(!1),this.X(this.createEvent("replay",{trigger:t}))),!o()&&c()==="video"&&a()==="coarse"&&this.a.remote.enterFullscreen("prefer-media",t),h()&&!u()&&this.a.remote.seekToLiveEdge(t)}Gk(t){if(!W(this.a.$provider))return;const{ended:i,seekableStart:s,clipStartTime:r,clipEndTime:o,realCurrentTime:a,duration:l}=this.$state,c=a()<r()||o()>0&&a()>=o()||Math.abs(a()-l())<.1||i();return c&&this.dispatch("media-seek-request",{detail:(r()>0?0:s())+.1,trigger:t}),c}"play-fail"(t){const{muted:n,autoPlaying:i}=this.$state,s=this.p.get("play");s&&t.triggers.add(s),this.F("media-play-request",t);const{paused:r,playing:o}=this.$state;r.set(!0),o.set(!1),this.ib(),this.p.set("play-fail",t),t.autoPlay&&(this.X(this.createEvent("auto-play-fail",{detail:{muted:n(),error:t.detail},trigger:t})),i.set(!1))}playing(t){const n=this.p.get("play"),i=this.p.get("seeked");n?t.triggers.add(n):i&&t.triggers.add(i),setTimeout(()=>this.ib(),0);const{paused:s,playing:r,live:o,liveSyncPosition:a,seekableEnd:l,started:c,currentTime:h,seeking:u,ended:f}=this.$state;if(s.set(!1),r.set(!0),u.set(!1),f.set(!1),this.f.Ha){this.f.Ha=!1;return}if(o()&&!c()&&h()===0){const g=a()??l()-2;Number.isFinite(g)&&this.a.$provider().setCurrentTime(g)}this.started(t)}started(t){const{started:n}=this.$state;n()||(n.set(!0),this.X(this.createEvent("started",{trigger:t})))}pause(t){this.el?.isConnected||(this.Jb=!0),this.F("media-pause-request",t);const n=this.p.get("seeked");n&&t.triggers.add(n);const{paused:i,playing:s}=this.$state;i.set(!0),s.set(!1),this.Kk&&setTimeout(()=>{this.X(this.createEvent("end",{trigger:t})),this.Kk=!1},0),this.ib()}"time-update"(t){if(this.f.Ha){t.stopImmediatePropagation();return}const{realCurrentTime:n,played:i,waiting:s,clipEndTime:r}=this.$state,o=r(),a=t.detail;n.set(a.currentTime),i.set(a.played),s.set(!1);for(const l of this.a.textTracks)l[Pt.Ta](a.currentTime,t);o>0&&a.currentTime>=o&&(this.Kk=!0,this.dispatch("media-pause-request",{trigger:t})),this.Nk()}fp(t){const{duration:n,played:i}=this.$state,s=fc(i())??0;this.X(this.createEvent("time-update",{detail:{currentTime:n(),played:new $o(s,n())},trigger:t}))}Nk(){const{storage:t}=this.a,{canPlay:n,realCurrentTime:i}=this.$state;n()&&t?.setTime?.(i())}"audio-gain-change"(t){const{storage:n}=this.a,{canPlay:i,audioGain:s}=this.$state;s.set(t.detail),this.F("media-audio-gain-change-request",t),i()&&n?.setAudioGain?.(s())}"volume-change"(t){const{storage:n}=this.a,{volume:i,muted:s,canPlay:r}=this.$state,o=t.detail;i.set(o.volume),s.set(o.muted||o.volume===0),this.F("media-volume-change-request",t),this.F(o.muted?"media-mute-request":"media-unmute-request",t),r()&&(n?.setVolume?.(i()),n?.setMuted?.(s()))}seeked(t){const{seeking:n,currentTime:i,realCurrentTime:s,paused:r,seekableEnd:o,ended:a}=this.$state;if(this.f.qa)n.set(!0),t.stopImmediatePropagation();else if(n()){const l=this.p.get("waiting");l&&t.triggers.add(l);const c=this.p.get("seeking");c&&!t.triggers.has(c)&&t.triggers.add(c),r()&&this.df(),n.set(!1),s.set(t.detail),this.F("media-seek-request",t);const h=t?.originEvent;h?.isTrusted&&!/seek/.test(h.type)&&this.started(t)}Math.floor(i())!==Math.floor(o())?a.set(!1):this.end(t)}waiting(t){this.tc||this.f.qa||(t.stopImmediatePropagation(),this.hb=t,this.zd())}end(t){const{loop:n,ended:i}=this.$state;if(!(!n()&&i())){if(n()){setTimeout(()=>{requestAnimationFrame(()=>{this.dispatch("media-loop-request",{trigger:t})})},10);return}setTimeout(()=>this.Db(t),0)}}Db(t){const{storage:n}=this.a,{paused:i,seeking:s,ended:r,duration:o}=this.$state;this.fp(t),i()||this.dispatch("pause",{trigger:t}),s()&&this.dispatch("seeked",{detail:o(),trigger:t}),r.set(!0),this.ib(),n?.setTime?.(o(),!0),this.dispatch("ended",{trigger:t})}df(){this.zd.cancel(),this.$state.waiting.set(!1)}"fullscreen-change"(t){const n=t.detail;this.$state.fullscreen.set(n),this.F(n?"media-enter-fullscreen-request":"media-exit-fullscreen-request",t)}"fullscreen-error"(t){this.F("media-enter-fullscreen-request",t),this.F("media-exit-fullscreen-request",t)}"orientation-change"(t){const n=t.detail.lock;this.F(n?"media-orientation-lock-request":"media-orientation-unlock-request",t)}"picture-in-picture-change"(t){const n=t.detail;this.$state.pictureInPicture.set(n),this.F(n?"media-enter-pip-request":"media-exit-pip-request",t)}"picture-in-picture-error"(t){this.F("media-enter-pip-request",t),this.F("media-exit-pip-request",t)}"title-change"(t){t.trigger&&(t.stopImmediatePropagation(),this.$state.inferredTitle.set(t.detail))}"poster-change"(t){t.trigger&&(t.stopImmediatePropagation(),this.$state.inferredPoster.set(t.detail))}}class LC extends os{onSetup(){this.Ch(),D(this.Mo.bind(this)),D(this.Fh.bind(this)),D(this.Ek.bind(this)),D(this.Vc.bind(this)),D(this.Hh.bind(this)),D(this.pn.bind(this)),D(this.Jh.bind(this)),D(this.Kh.bind(this)),D(this.Ih.bind(this)),D(this.Gh.bind(this)),D(this.Vm.bind(this)),D(this.ld.bind(this)),D(this.Eh.bind(this)),D(this.uc.bind(this))}Ch(){const t={duration:"providedDuration",loop:"providedLoop",poster:"providedPoster",streamType:"providedStreamType",title:"providedTitle",viewType:"providedViewType"},n=new Set(["currentTime","paused","playbackRate","volume"]);for(const i of Object.keys(this.$props))n.has(i)||this.$state[t[i]??i]?.set(this.$props[i]());this.$state.muted.set(this.$props.muted()||this.$props.volume()===0)}Eh(){const{viewType:t,streamType:n,title:i,poster:s,loop:r}=this.$props,o=this.$state;o.providedPoster.set(s()),o.providedStreamType.set(n()),o.providedViewType.set(t()),o.providedTitle.set(i()),o.providedLoop.set(r())}Dh(){}Mo(){const{artist:t,artwork:n}=this.$props;this.$state.artist.set(t()),this.$state.artwork.set(n())}uc(){const{title:t}=this.$state;this.dispatch("title-change",{detail:t()})}Fh(){const t=this.$props.autoPlay()||this.$props.autoplay();this.$state.autoPlay.set(t),this.dispatch("auto-play-change",{detail:t})}Gh(){const t=this.$state.loop();this.dispatch("loop-change",{detail:t})}Vc(){const t=this.$props.controls();this.$state.controls.set(t)}ld(){const{poster:t}=this.$state;this.dispatch("poster-change",{detail:t()})}Hh(){const t=this.$props.crossOrigin()??this.$props.crossorigin(),n=t===!0?"":t;this.$state.crossOrigin.set(n)}pn(){const{providedDuration:t}=this.$state;t.set(this.$props.duration())}Vm(){const t=this.$props.playsInline()||this.$props.playsinline();this.$state.playsInline.set(t),this.dispatch("plays-inline-change",{detail:t})}Ek(){const{clipStartTime:t,clipEndTime:n}=this.$props;this.$state.clipStartTime.set(t()),this.$state.clipEndTime.set(n())}Jh(){this.dispatch("live-change",{detail:this.$state.live()})}Ih(){this.$state.liveEdgeTolerance.set(this.$props.liveEdgeTolerance()),this.$state.minLiveDVRWindow.set(this.$props.minLiveDVRWindow())}Kh(){this.dispatch("live-edge-change",{detail:this.$state.liveEdge()})}}class ra extends os{static{this.Nm=["play","pause","seekforward","seekbackward","seekto"]}constructor(){super()}onConnect(){D(this.Pm.bind(this)),D(this.Qm.bind(this));const t=this.Rm.bind(this);for(const n of ra.Nm)navigator.mediaSession.setActionHandler(n,t);Ct(this.ya.bind(this))}ya(){for(const t of ra.Nm)navigator.mediaSession.setActionHandler(t,null)}Pm(){const{title:t,artist:n,artwork:i,poster:s}=this.$state;navigator.mediaSession.metadata=new MediaMetadata({title:t(),artist:n(),artwork:i()??[{src:s()}]})}Qm(){const{canPlay:t,paused:n}=this.$state;navigator.mediaSession.playbackState=t()?n()?"paused":"playing":"none"}Rm(t){const n=new Gt("media-session-action",{detail:t});switch(t.action){case"play":this.dispatch("media-play-request",{trigger:n});break;case"pause":this.dispatch("media-pause-request",{trigger:n});break;case"seekto":case"seekforward":case"seekbackward":this.dispatch("media-seek-request",{detail:un(t.seekTime)?t.seekTime:this.$state.currentTime()+(t.seekOffset??10),trigger:n});break}}}let oa=mt(!1);nt(document,"pointerdown",()=>{oa.set(!1)}),nt(document,"keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||oa.set(!0)});class Sn extends bn{constructor(){super(...arguments),this.Kb=mt(!1)}onConnect(t){D(()=>{if(!oa()){this.Kb.set(!1),yo(t,!1),this.listen("pointerenter",this.Cd.bind(this)),this.listen("pointerleave",this.Dd.bind(this));return}const n=document.activeElement===t;this.Kb.set(n),yo(t,n),this.listen("focus",this.Lb.bind(this)),this.listen("blur",this.Nh.bind(this))})}focused(){return this.Kb()}Lb(){this.Kb.set(!0),yo(this.el,!0)}Nh(){this.Kb.set(!1),yo(this.el,!1)}Cd(){qd(this.el,!0)}Dd(){qd(this.el,!1)}}function yo(e,t){et(e,"data-focus",t),et(e,"data-hocus",t)}function qd(e,t){et(e,"data-hocus",t),et(e,"data-hover",t)}var IC=Object.defineProperty,DC=Object.getOwnPropertyDescriptor,jt=(e,t,n,i)=>{for(var s=i>1?void 0:i?DC(t,n):t,r=e.length-1,o;r>=0;r--)(o=e[r])&&(s=(i?o(t,n,s):o(s))||s);return i&&s&&IC(t,n,s),s};const Vt=class ko extends lt{constructor(){super(),this.canPlayQueue=new Gm,this.wc=!1,new LC;const t={player:this,qualities:new lC,audioTracks:new aC,storage:null,$provider:mt(null),$providerSetup:mt(!1),$props:this.$props,$state:this.$state};t.remote=this.remoteControl=new Z1(void 0),t.remote.setPlayer(this),t.textTracks=new oC,t.textTracks[Pt.al]=this.$state.crossOrigin,t.textRenderers=new sC(t),t.ariaKeys={},this.a=t,Ve(jm,t),this.orientation=new Na,new Sn,new bC(t);const n=new AC;this.ga=new OC(n,t),this.Y=new kC(this.ga,n,t),t.delegate=new CC(this.ga.X.bind(this.ga),t),new ra,new jd("load",this.startLoading.bind(this)),new jd("posterLoad",this.startLoadingPoster.bind(this))}static{this.props=TC}static{this.state=Um}get i(){return this.a.$provider()}get sn(){return this.$props}onSetup(){this.Ph(),D(this.Qh.bind(this)),D(this.Rh.bind(this)),D(this.Tc.bind(this)),D(this.Fd.bind(this)),D(this.jb.bind(this)),D(this.Vm.bind(this)),D(this.Sh.bind(this))}onAttach(t){t.setAttribute("data-media-player",""),Ft(t,"tabindex","0"),Ft(t,"role","region"),D(this.Tm.bind(this)),D(this.uc.bind(this)),D(this.lf.bind(this)),nt(t,"find-media-player",this.Th.bind(this))}onConnect(t){Pm&&et(t,"data-iphone","");const n=window.matchMedia("(pointer: coarse)");this.mf(n),n.onchange=this.mf.bind(this);const i=new ResizeObserver(Ys(this.O.bind(this)));i.observe(t),D(this.O.bind(this)),this.dispatch("media-player-connect",{detail:this,bubbles:!0,composed:!0}),Ct(()=>{i.disconnect(),n.onchange=null})}onDestroy(){this.a.player=null,this.canPlayQueue.H()}uc(){const t=this.$el,{title:n,live:i,viewType:s,providedTitle:r}=this.$state,o=i(),a=uT(s()),l=a!=="Unknown"?`${o?"Live ":""}${a}`:o?"Live":"Media",c=n();et(this.el,"aria-label",`${l} Player`+(c?` - ${c}`:"")),t?.hasAttribute("title")&&(this.wc=!0,t?.removeAttribute("title"))}lf(){const t=this.orientation.landscape?"landscape":"portrait";this.$state.orientation.set(t),et(this.el,"data-orientation",t),this.O()}Qh(){this.$state.canPlay()&&this.i?this.canPlayQueue.Bb():this.canPlayQueue.ra()}Ph(){if(ko[Pl]){this.setAttributes(ko[Pl]);return}const t={"data-load":function(){return this.$props.load()},"data-captions":function(){const i=this.$state.textTrack();return!!i&&Le(i)},"data-ios-controls":function(){return this.$state.iOSControls()},"data-controls":function(){return this.controls.showing},"data-buffering":function(){const{canLoad:i,canPlay:s,waiting:r}=this.$state;return i()&&(!s()||r())},"data-error":function(){const{error:i}=this.$state;return!!i()},"data-autoplay-error":function(){const{autoPlayError:i}=this.$state;return!!i()}},n={autoPlay:"autoplay",canAirPlay:"can-airplay",canPictureInPicture:"can-pip",pictureInPicture:"pip",playsInline:"playsinline",remotePlaybackState:"remote-state",remotePlaybackType:"remote-type",isAirPlayConnected:"airplay",isGoogleCastConnected:"google-cast"};for(const i of xC){const s="data-"+(n[i]??dm(i));t[s]=function(){return this.$state[i]()}}delete t.title,ko[Pl]=t,this.setAttributes(t)}Th(t){t.detail(this)}O(){if(!this.el)return;const t=this.el.clientWidth,n=this.el.clientHeight;this.$state.width.set(t),this.$state.height.set(n),He(this.el,"--player-width",t+"px"),He(this.el,"--player-height",n+"px")}mf(t){const n=t.matches?"coarse":"fine";et(this.el,"data-pointer",n),this.$state.pointer.set(n),this.O()}get provider(){return this.i}get controls(){return this.Y.Ib}set controls(t){this.sn.controls.set(t)}get title(){return W(this.$state.providedTitle)}set title(t){if(this.wc){this.wc=!1;return}this.$state.providedTitle.set(t)}get qualities(){return this.a.qualities}get audioTracks(){return this.a.audioTracks}get textTracks(){return this.a.textTracks}get textRenderers(){return this.a.textRenderers}get duration(){return this.$state.duration()}set duration(t){this.sn.duration.set(t)}get paused(){return W(this.$state.paused)}set paused(t){this.nf(t)}Tc(){this.nf(this.$props.paused())}nf(t){t?this.canPlayQueue.k("paused",()=>this.Y.ud()):this.canPlayQueue.k("paused",()=>this.Y.sc())}get muted(){return W(this.$state.muted)}set muted(t){this.sn.muted.set(t)}Rh(){this.Uh(this.$props.muted())}Uh(t){this.canPlayQueue.k("muted",()=>{this.i&&this.i.setMuted(t)})}get currentTime(){return W(this.$state.currentTime)}set currentTime(t){this.of(t)}jb(){this.of(this.$props.currentTime())}of(t){this.canPlayQueue.k("currentTime",()=>{const{currentTime:n,clipStartTime:i,seekableStart:s,seekableEnd:r}=this.$state;t!==W(n)&&W(()=>{if(!this.i)return;const o=t+i(),a=Math.floor(o)===Math.floor(r()),l=a?r():Math.min(Math.max(s()+.1,o),r()-.1);Number.isFinite(l)&&this.i.setCurrentTime(l)})})}get volume(){return W(this.$state.volume)}set volume(t){this.sn.volume.set(t)}Fd(){this.Vh(this.$props.volume())}Vh(t){const n=Hu(0,t,1);this.canPlayQueue.k("volume",()=>{this.i&&this.i.setVolume(n)})}get playbackRate(){return W(this.$state.playbackRate)}set playbackRate(t){this.pf(t)}Sh(){this.pf(this.$props.playbackRate())}pf(t){this.canPlayQueue.k("rate",()=>{this.i&&this.i.setPlaybackRate?.(t)})}Vm(){this.Wm(this.$props.playsInline())}Wm(t){this.canPlayQueue.k("playsinline",()=>{this.i&&this.i.setPlaysInline?.(t)})}Tm(){let t=this.$props.storage(),n=pt(t)?new nC:t;if(n?.onChange){const{source:i}=this.$state,s=pt(t)?t:this.el?.id,r=En(this.Um.bind(this));D(()=>n.onChange(i(),r(),s||void 0))}this.a.storage=n,this.a.textTracks.setStorage(n),Ct(()=>{n?.onDestroy?.(),this.a.storage=null,this.a.textTracks.setStorage(null)})}Um(){const{clipStartTime:t,clipEndTime:n}=this.$props,{source:i}=this.$state,s=i();return s.src?`${s.src}:${t()}:${n()}`:null}async play(t){return this.Y.sc(t)}async pause(t){return this.Y.ud(t)}async enterFullscreen(t,n){return this.Y._e(t,n)}async exitFullscreen(t,n){return this.Y.af(t,n)}enterPictureInPicture(t){return this.Y.xd(t)}exitPictureInPicture(t){return this.Y.wd(t)}seekToLiveEdge(t){this.Y.Ze(t)}startLoading(t){this.a.delegate.c("can-load",void 0,t)}startLoadingPoster(t){this.a.delegate.c("can-load-poster",void 0,t)}requestAirPlay(t){return this.Y.ol(t)}requestGoogleCast(t){return this.Y.ul(t)}setAudioGain(t,n){return this.Y.gp(t,n)}destroy(){this.a.remote.setPlayer(null),this.dispatch("destroy")}};jt([wt],Vt.prototype,"canPlayQueue",2);jt([wt],Vt.prototype,"remoteControl",2);jt([wt],Vt.prototype,"provider",1);jt([wt],Vt.prototype,"controls",1);jt([wt],Vt.prototype,"orientation",2);jt([wt],Vt.prototype,"title",1);jt([wt],Vt.prototype,"qualities",1);jt([wt],Vt.prototype,"audioTracks",1);jt([wt],Vt.prototype,"textTracks",1);jt([wt],Vt.prototype,"textRenderers",1);jt([wt],Vt.prototype,"duration",1);jt([wt],Vt.prototype,"paused",1);jt([wt],Vt.prototype,"muted",1);jt([wt],Vt.prototype,"currentTime",1);jt([wt],Vt.prototype,"volume",1);jt([wt],Vt.prototype,"playbackRate",1);jt([Zt],Vt.prototype,"play",1);jt([Zt],Vt.prototype,"pause",1);jt([Zt],Vt.prototype,"enterFullscreen",1);jt([Zt],Vt.prototype,"exitFullscreen",1);jt([Zt],Vt.prototype,"enterPictureInPicture",1);jt([Zt],Vt.prototype,"exitPictureInPicture",1);jt([Zt],Vt.prototype,"seekToLiveEdge",1);jt([Zt],Vt.prototype,"startLoading",1);jt([Zt],Vt.prototype,"startLoadingPoster",1);jt([Zt],Vt.prototype,"requestAirPlay",1);jt([Zt],Vt.prototype,"requestGoogleCast",1);jt([Zt],Vt.prototype,"setAudioGain",1);let RC=Vt;function MC(e,t){return fetch(e,t).then(n=>n.text()).then(n=>/type="static"/.test(n)?"on-demand":"live")}function Wm(e,t){return fetch(e,t).then(n=>n.text()).then(n=>{const i=NC(n);if(i)return Wm(/^https?:/.test(i)?i:new URL(i,e).href,t);const s=/EXT-X-PLAYLIST-TYPE:\s*VOD/.test(n)?"on-demand":"live";return s==="live"&&FC(n)>=10&&(/#EXT-X-DVR-ENABLED:\s*true/.test(n)||n.includes("#EXT-X-DISCONTINUITY"))?"live:dvr":s})}function NC(e){const t=e.match(/#EXT-X-STREAM-INF:[^\n]+(\n[^\n]+)*/g);return t?t[0].split(`
`)[1].trim():null}function FC(e){const t=e.split(`
`);for(const n of t)if(n.startsWith("#EXT-X-TARGETDURATION")){const i=parseFloat(n.split(":")[1]);if(!isNaN(i))return i}return-1}const yc=new Map;class BC{constructor(t,n,i,s=[]){this.xc=t,this.a=n,this.ha=i,this.Gd=!1;const r=new ju,o=new Ku,a=new Vu,l=new _C,c=new SC,h=new EC,u=[c,h];this.Hd=En(()=>{const g=n.$state.remotePlaybackLoader(),p=n.$props.preferNativeHLS()?[a,l,r,o,...u,...s]:[o,a,l,r,...u,...s];return g?[g,...p]:p});const{$state:f}=n;f.sources.set(Gd(n.$props.src()));for(const g of f.sources()){const p=this.Hd().find(x=>x.canPlay(g));if(!p)continue;const y=p.mediaType(g);this.a.$state.source.set(g),this.a.$state.mediaType.set(y),this.a.$state.inferredViewType.set(y),this.ha.set(p),this.Gd=!0}}get c(){return this.a.delegate.c}connect(){const t=this.ha();this.Gd&&(this.qf(this.a.$state.source(),t),this.rf(t),this.Gd=!1),D(this.Xh.bind(this)),D(this.Yh.bind(this)),D(this.Zh.bind(this)),D(this._h.bind(this)),D(this.Ok.bind(this))}Xh(){this.c("sources-change",[...Gd(this.a.$props.src()),...this.xc()])}Yh(){const{$state:t}=this.a,n=t.sources(),i=W(t.source),s=this.sf(i,n);if(n[0]?.src&&!s.src&&!s.type){const{crossOrigin:o}=t,a=pr(o()),l=new AbortController;return Promise.all(n.map(c=>pt(c.src)&&c.type==="?"?fetch(c.src,{method:"HEAD",credentials:a,signal:l.signal}).then(h=>(c.type=h.headers.get("content-type")||"??",yc.set(c.src,c.type),c)).catch(()=>c):c)).then(c=>{l.signal.aborted||(this.sf(W(t.source),c),Qn())}),()=>l.abort()}Qn()}sf(t,n){let i={src:"",type:""},s=null,r=new Gt("sources-change",{detail:{sources:n}}),o=this.Hd(),{started:a,paused:l,currentTime:c,quality:h,savedState:u}=this.a.$state;for(const f of n){const g=o.find(p=>p.canPlay(f));if(g){i=f,s=g;break}}if(bc(i)){const f=h(),g=n.find(p=>p.src===f?.src);W(a)?u.set({paused:W(l),currentTime:W(c)}):u.set(null),g&&(i=g,r=new Gt("quality-change",{detail:{quality:f}}))}return zd(t,i)||this.qf(i,s,r),s!==W(this.ha)&&this.rf(s,r),i}qf(t,n,i){this.c("source-change",t,i),this.c("media-type-change",n?.mediaType(t)||"unknown",i)}rf(t,n){this.a.$providerSetup.set(!1),this.c("provider-change",null,n),t&&W(()=>t.preconnect?.(this.a)),this.ha.set(t),this.c("provider-loader-change",t,n)}Zh(){const t=this.a.$provider();if(!(!t||W(this.a.$providerSetup))){if(this.a.$state.canLoad()){De(()=>t.setup(),t.scope),this.a.$providerSetup.set(!0);return}W(()=>t.preconnect?.())}}_h(){if(!this.a.$providerSetup())return;const t=this.a.$provider(),n=this.a.$state.source(),i=W(this.a.$state.crossOrigin),s=W(this.a.$props.preferNativeHLS);if(!zd(t?.currentSrc,n)){if(this.a.$state.canLoad()){const r=new AbortController;return zr(n)?(s||!Mu())&&Wm(n.src,{credentials:pr(i),signal:r.signal}).then(o=>{this.c("stream-type-change",o)}).catch(Jo):Nu(n)?MC(n.src,{credentials:pr(i),signal:r.signal}).then(o=>{this.c("stream-type-change",o)}).catch(Jo):this.c("stream-type-change","on-demand"),W(()=>{const o=W(this.a.$state.preload);return t?.loadSource(n,o).catch(a=>{})}),()=>r.abort()}try{pt(n.src)&&Yr(new URL(n.src).origin)}catch{}}}Ok(){const t=this.ha(),{providedPoster:n,source:i,canLoadPoster:s}=this.a.$state;if(!t||!t.loadPoster||!i()||!s()||n())return;const r=new AbortController,o=new Gt("source-change",{detail:i});return t.loadPoster(i(),this.a,r).then(a=>{this.c("poster-change",a||"",o)}).catch(()=>{this.c("poster-change","",o)}),()=>{r.abort()}}}function Gd(e){return(Oe(e)?e:[e]).map(t=>pt(t)?{src:t,type:Wd(t)}:{...t,type:Wd(t.src,t.type)}).sort(t=>t.type==="?"?1:-1)}function Wd(e,t){return pt(t)&&t.length?t:pt(e)&&yc.has(e)?yc.get(e):!t&&zr({src:e,type:""})?"application/x-mpegurl":!t&&Nu({src:e,type:""})?"application/dash+xml":!pt(e)||e.startsWith("blob:")?"video/object":e.includes("youtube")||e.includes("youtu.be")?"video/youtube":e.includes("vimeo")&&!e.includes("progressive_redirect")&&!e.includes(".m3u8")?"video/vimeo":"?"}function zd(e,t){return e?.src===t?.src&&e?.type===t?.type}class HC{constructor(t,n){this.yc=t,this.a=n,this.tf=[],D(this.$h.bind(this))}$h(){const t=this.yc();for(const n of this.tf)if(!t.some(i=>i.id===n.id)){const i=n.id&&this.a.textTracks.getById(n.id);i&&this.a.textTracks.remove(i)}for(const n of t){const i=n.id||sa.createId(n);this.a.textTracks.getById(i)||(n.id=i,this.a.textTracks.add(n))}this.tf=t}}var UC=Object.defineProperty,VC=Object.getOwnPropertyDescriptor,jC=(e,t,n,i)=>{for(var s=i>1?void 0:i?VC(t,n):t,r=e.length-1,o;r>=0;r--)(o=e[r])&&(s=(i?o(t,n,s):o(s))||s);return i&&s&&UC(t,n,s),s};class zm extends lt{constructor(){super(...arguments),this.xc=mt([]),this.yc=mt([]),this.ha=null,this.Id=-1}static{this.props={loaders:[]}}static{this.state=new Ii({loader:null})}onSetup(){this.a=yt(),this.uf=new BC(this.xc,this.a,this.$state.loader,this.$props.loaders())}onAttach(t){t.setAttribute("data-media-provider","")}onConnect(t){this.uf.connect(),new HC(this.yc,this.a);const n=new ResizeObserver(Ys(this.O.bind(this)));n.observe(t);const i=new MutationObserver(this.vf.bind(this));i.observe(t,{attributes:!0,childList:!0}),this.O(),this.vf(),Ct(()=>{n.disconnect(),i.disconnect()})}load(t){window.cancelAnimationFrame(this.Id),this.Id=requestAnimationFrame(()=>this.ai(t)),Ct(()=>{window.cancelAnimationFrame(this.Id)})}ai(t){if(!this.scope)return;const n=this.$state.loader(),{$provider:i}=this.a;this.ha===n&&n?.target===t&&W(i)||(this.wf(),this.ha=n,n&&(n.target=t||null),!(!n||!t)&&n.load(this.a).then(s=>{this.scope&&W(this.$state.loader)===n&&this.a.delegate.c("provider-change",s)}))}onDestroy(){this.ha=null,this.wf()}wf(){this.a.delegate.c("provider-change",null)}O(){if(!this.el)return;const{player:t,$state:n}=this.a,i=this.el.offsetWidth,s=this.el.offsetHeight;t&&(n.mediaWidth.set(i),n.mediaHeight.set(s),t.el&&(He(t.el,"--media-width",i+"px"),He(t.el,"--media-height",s+"px")))}vf(){const t=[],n=[],i=this.el.children;for(const s of i)if(!s.hasAttribute("data-vds")){if(s instanceof HTMLSourceElement){const r={id:s.id,src:s.src,type:s.type};for(const o of["id","src","width","height","bitrate","codec"]){const a=s.getAttribute(`data-${o}`);pt(a)&&(r[o]=/id|src|codec/.test(o)?a:Number(a))}t.push(r)}else if(s instanceof HTMLTrackElement){const r={src:s.src,kind:s.track.kind,language:s.srclang,label:s.label,default:s.default,type:s.getAttribute("data-type")};n.push({id:s.id||sa.createId(r),...r})}}this.xc.set(t),this.yc.set(n),Qn()}}jC([Zt],zm.prototype,"load",1);function Ll(e,t){const n=String(e),i=n.length;if(i<t){const r=t-i;return`${"0".repeat(r)}${e}`}return n}function Ym(e){const t=Math.trunc(e/3600),n=Math.trunc(e%3600/60),i=Math.trunc(e%60),s=Number((e-Math.trunc(e)).toPrecision(3));return{hours:t,minutes:n,seconds:i,fraction:s}}function Fa(e,{padHrs:t=null,padMins:n=null,showHrs:i=!1,showMs:s=!1}={}){const{hours:r,minutes:o,seconds:a,fraction:l}=Ym(e),c=t?Ll(r,2):r,h=n||Li(n)&&e>=3600?Ll(o,2):o,u=Ll(a,2),f=s&&l>0?`.${String(l).replace(/^0?\./,"")}`:"",g=`${h}:${u}${f}`;return r>0||i?`${c}:${g}`:g}function aa(e){const t=[],{hours:n,minutes:i,seconds:s}=Ym(e);return n>0&&t.push(`${n} hour`),i>0&&t.push(`${i} min`),(s>0||t.length===0)&&t.push(`${s} sec`),t.join(" ")}class KC extends lt{constructor(){super(...arguments),this._n=!1,this.Zn=-1,this.ao=-1}static{this.props={translations:null}}static{this.state=new Ii({label:null,busy:!1})}onSetup(){this.a=yt()}onAttach(t){t.style.display="contents"}onConnect(t){t.setAttribute("data-media-announcer",""),Ft(t,"role","status"),Ft(t,"aria-live","polite");const{busy:n}=this.$state;this.setAttributes({"aria-busy":()=>n()?"true":null}),this._n=!0,D(this.Tc.bind(this)),D(this.Fd.bind(this)),D(this.bo.bind(this)),D(this.co.bind(this)),D(this.eo.bind(this)),D(this.fo.bind(this)),D(this.go.bind(this)),Qn(),this._n=!1}Tc(){const{paused:t}=this.a.$state;this.Yn(t()?"Pause":"Play")}co(){const{fullscreen:t}=this.a.$state;this.Yn(t()?"Enter Fullscreen":"Exit Fullscreen")}eo(){const{pictureInPicture:t}=this.a.$state;this.Yn(t()?"Enter PiP":"Exit PiP")}bo(){const{textTrack:t}=this.a.$state;this.Yn(t()?"Closed-Captions On":"Closed-Captions Off")}Fd(){const{muted:t,volume:n,audioGain:i}=this.a.$state;this.Yn(t()||n()===0?"Mute":`${Math.round(n()*(i()??1)*100)}% ${this.$n("Volume")}`)}fo(){const{seeking:t,currentTime:n}=this.a.$state,i=t();this.Zn>0?(window.clearTimeout(this.ao),this.ao=window.setTimeout(()=>{const s=W(n),r=Math.abs(s-this.Zn);if(r>=1){const o=s>=this.Zn,a=aa(r);this.Yn(`${this.$n(o?"Seek Forward":"Seek Backward")} ${a}`)}this.Zn=-1,this.ao=-1},300)):i&&(this.Zn=W(n))}$n(t){const{translations:n}=this.$props;return n?.()?.[t||""]??t}go(){const{label:t,busy:n}=this.$state,i=this.$n(t());if(this._n)return;n.set(!0);const s=window.setTimeout(()=>void n.set(!1),150);return this.el&&et(this.el,"aria-label",i),pt(i)&&this.dispatch("change",{detail:i}),()=>window.clearTimeout(s)}Yn(t){const{label:n}=this.$state;n.set(t)}}class qC extends lt{static{this.props={hideDelay:2e3,hideOnMouseLeave:!1}}onSetup(){this.a=yt(),D(this.bi.bind(this))}onAttach(t){const{pictureInPicture:n,fullscreen:i}=this.a.$state;He(t,"pointer-events","none"),Ft(t,"role","group"),this.setAttributes({"data-visible":this.xf.bind(this),"data-fullscreen":i,"data-pip":n}),D(()=>{this.dispatch("change",{detail:this.xf()})}),D(this.ci.bind(this)),D(()=>{const s=i();for(const r of["top","right","bottom","left"])He(t,`padding-${r}`,s&&`env(safe-area-inset-${r})`)})}ci(){if(!this.el)return;const{nativeControls:t}=this.a.$state,n=t();et(this.el,"aria-hidden",n?"true":null),He(this.el,"display",n?"none":null)}bi(){const{controls:t}=this.a.player,{hideDelay:n,hideOnMouseLeave:i}=this.$props;t.defaultDelay=n()===2e3?this.a.$props.controlsDelay():n(),t.hideOnMouseLeave=i()}xf(){const{controlsVisible:t}=this.a.$state;return t()}}class Xm extends bn{constructor(t){super(),this.j=t,this.Ac=-1,this.Bc=-1,this.Ia=null,D(this.di.bind(this))}onDestroy(){this.Ia?.(),this.Ia=null}di(){const t=this.j.C();if(!t){this.hide();return}const n=this.show.bind(this),i=this.hide.bind(this);this.j.zc(t,n,i)}show(t){this.nn(),window.cancelAnimationFrame(this.Bc),this.Bc=-1,this.Ia?.(),this.Ia=null,this.Ac=window.setTimeout(()=>{this.Ac=-1;const n=this.j.u();n&&n.style.removeProperty("display"),W(()=>this.j.B(!0,t))},this.j.yf?.()??0)}hide(t){this.nn(),W(()=>this.j.B(!1,t)),this.Bc=requestAnimationFrame(()=>{this.nn(),this.Bc=-1;const n=this.j.u();if(n){const i=()=>{n.style.display="none",this.Ia=null};if(R1(n)){this.Ia?.();const r=nt(n,"animationend",i,{once:!0});this.Ia=r}else i()}})}nn(){window.clearTimeout(this.Ac),this.Ac=-1}}const Es=ci();let GC=0,WC=class extends lt{constructor(){super(),this.ca=`media-tooltip-${++GC}`,this.C=mt(null),this.u=mt(null),new Sn;const{showDelay:t}=this.$props;new Xm({C:this.C,u:this.u,yf:t,zc(n,i,s){nt(n,"touchstart",r=>r.preventDefault(),{passive:!1}),D(()=>{oa()&&nt(n,"focus",i),nt(n,"blur",s)}),nt(n,"mouseenter",i),nt(n,"mouseleave",s)},B:this.ei.bind(this)})}static{this.props={showDelay:700}}onAttach(t){t.style.setProperty("display","contents")}onSetup(){Ve(Es,{C:this.C,u:this.u,Jd:this.Jd.bind(this),Kd:this.Kd.bind(this),Ld:this.Ld.bind(this),Md:this.Md.bind(this)})}Jd(t){this.C.set(t);let n=t.getAttribute("data-media-tooltip");n&&this.el?.setAttribute(`data-media-${n}-tooltip`,""),et(t,"data-describedby",this.ca)}Kd(t){t.removeAttribute("data-describedby"),t.removeAttribute("aria-describedby"),this.C.set(null)}Ld(t){t.setAttribute("id",this.ca),t.style.display="none",Ft(t,"role","tooltip"),this.u.set(t)}Md(t){t.removeAttribute("id"),t.removeAttribute("role"),this.u.set(null)}ei(t){const n=this.C(),i=this.u();n&&et(n,"aria-describedby",t?this.ca:null);for(const s of[this.el,n,i])s&&et(s,"data-visible",t)}};class zC extends lt{static{this.props={placement:"top center",offset:0,alignOffset:0}}constructor(){super(),new Sn;const{placement:t}=this.$props;this.setAttributes({"data-placement":t})}onAttach(t){this.Ja(t),Object.assign(t.style,{position:"absolute",top:0,left:0,width:"max-content"})}onConnect(t){this.Ja(t);const n=Xt(Es);Ct(()=>n.Md(t)),Ct(si(()=>{this.connectScope&&D(this.Nd.bind(this))}))}Ja(t){Xt(Es).Ld(t)}Nd(){const{placement:t,offset:n,alignOffset:i}=this.$props;return Bm(this.el,this.fi(),t(),{offsetVarName:"media-tooltip",xOffset:i(),yOffset:n()})}fi(){return Xt(Es).C()}}class Re extends bn{constructor(t){super(),this.j=t,new Sn,t.kb&&new wC(t.kb)}static{this.props={disabled:!1}}onSetup(){const{disabled:t}=this.$props;this.setAttributes({"data-pressed":this.j.n,"aria-pressed":this.gi.bind(this),"aria-disabled":()=>t()?"true":null})}onAttach(t){Ft(t,"tabindex","0"),Ft(t,"role","button"),Ft(t,"type","button")}onConnect(t){Oi(t,this.hi.bind(this));for(const n of["click","touchstart"])this.listen(n,this.ii.bind(this))}gi(){return Zo(this.j.n())}ji(t){sT(this.j.n)&&this.j.n.set(n=>!n)}hi(t){if(this.$props.disabled()||this.el.hasAttribute("data-disabled")){t.preventDefault(),t.stopImmediatePropagation();return}t.preventDefault(),(this.j.v??this.ji).call(this,t)}ii(t){this.$props.disabled()&&(t.preventDefault(),t.stopImmediatePropagation())}}var YC=Object.defineProperty,XC=Object.getOwnPropertyDescriptor,QC=(e,t,n,i)=>{for(var s=i>1?void 0:i?XC(t,n):t,r=e.length-1,o;r>=0;r--)(o=e[r])&&(s=(i?o(t,n,s):o(s))||s);return i&&s&&YC(t,n,s),s};class Qm extends lt{constructor(){super(),this.zf=mt(!1),new Re({n:this.zf})}static{this.props={disabled:!1,defaultPressed:!1}}get pressed(){return this.zf()}}QC([wt],Qm.prototype,"pressed",1);function JC(e){return e?"true":"false"}function ke(e){return()=>JC(e())}class ZC extends lt{static{this.props=Re.props}constructor(){super(),new Re({n:this.n.bind(this),v:this.v.bind(this)})}onSetup(){this.a=yt();const{canAirPlay:t,isAirPlayConnected:n}=this.a.$state;this.setAttributes({"data-active":n,"data-supported":t,"data-state":this.ki.bind(this),"aria-hidden":ke(()=>!t())})}onAttach(t){t.setAttribute("data-media-tooltip","airplay"),Di(t,this.zl.bind(this))}v(t){this.a.remote.requestAirPlay(t)}n(){const{remotePlaybackType:t,remotePlaybackState:n}=this.a.$state;return t()==="airplay"&&n()!=="disconnected"}ki(){const{remotePlaybackType:t,remotePlaybackState:n}=this.a.$state;return t()==="airplay"&&n()}zl(){const{remotePlaybackState:t}=this.a.$state;return`AirPlay ${t()}`}}class t$ extends lt{static{this.props=Re.props}constructor(){super(),new Re({n:this.n.bind(this),v:this.v.bind(this)})}onSetup(){this.a=yt();const{canGoogleCast:t,isGoogleCastConnected:n}=this.a.$state;this.setAttributes({"data-active":n,"data-supported":t,"data-state":this.ki.bind(this),"aria-hidden":ke(()=>!t())})}onAttach(t){t.setAttribute("data-media-tooltip","google-cast"),Di(t,this.zl.bind(this))}v(t){this.a.remote.requestGoogleCast(t)}n(){const{remotePlaybackType:t,remotePlaybackState:n}=this.a.$state;return t()==="google-cast"&&n()!=="disconnected"}ki(){const{remotePlaybackType:t,remotePlaybackState:n}=this.a.$state;return t()==="google-cast"&&n()}zl(){const{remotePlaybackState:t}=this.a.$state;return`Google Cast ${t()}`}}let e$=class extends lt{static{this.props=Re.props}constructor(){super(),new Re({n:this.n.bind(this),kb:"togglePaused",v:this.v.bind(this)})}onSetup(){this.a=yt();const{paused:t,ended:n}=this.a.$state;this.setAttributes({"data-paused":t,"data-ended":n})}onAttach(t){t.setAttribute("data-media-tooltip","play"),Di(t,"Play")}v(t){const n=this.a.remote;this.n()?n.pause(t):n.play(t)}n(){const{paused:t}=this.a.$state;return!t()}};class n$ extends lt{static{this.props=Re.props}constructor(){super(),new Re({n:this.n.bind(this),kb:"toggleCaptions",v:this.v.bind(this)})}onSetup(){this.a=yt(),this.setAttributes({"data-active":this.n.bind(this),"data-supported":()=>!this.lb(),"aria-hidden":ke(this.lb.bind(this))})}onAttach(t){t.setAttribute("data-media-tooltip","caption"),Di(t,"Captions")}v(t){this.a.remote.toggleCaptions(t)}n(){const{textTrack:t}=this.a.$state,n=t();return!!n&&Le(n)}lb(){const{hasCaptions:t}=this.a.$state;return!t()}}class i$ extends lt{static{this.props={...Re.props,target:"prefer-media"}}constructor(){super(),new Re({n:this.n.bind(this),kb:"toggleFullscreen",v:this.v.bind(this)})}onSetup(){this.a=yt();const{fullscreen:t}=this.a.$state,n=this.Nb.bind(this);this.setAttributes({"data-active":t,"data-supported":n,"aria-hidden":ke(()=>!n())})}onAttach(t){t.setAttribute("data-media-tooltip","fullscreen"),Di(t,"Fullscreen")}v(t){const n=this.a.remote,i=this.$props.target();this.n()?n.exitFullscreen(i,t):n.enterFullscreen(i,t)}n(){const{fullscreen:t}=this.a.$state;return t()}Nb(){const{canFullscreen:t}=this.a.$state;return t()}}class s$ extends lt{static{this.props=Re.props}constructor(){super(),new Re({n:this.n.bind(this),kb:"toggleMuted",v:this.v.bind(this)})}onSetup(){this.a=yt(),this.setAttributes({"data-muted":this.n.bind(this),"data-state":this.ki.bind(this)})}onAttach(t){t.setAttribute("data-media-mute-button",""),t.setAttribute("data-media-tooltip","mute"),Di(t,"Mute")}v(t){const n=this.a.remote;this.n()?n.unmute(t):n.mute(t)}n(){const{muted:t,volume:n}=this.a.$state;return t()||n()===0}ki(){const{muted:t,volume:n}=this.a.$state,i=n();if(t()||i===0)return"muted";if(i>=.5)return"high";if(i<.5)return"low"}}class r$ extends lt{static{this.props=Re.props}constructor(){super(),new Re({n:this.n.bind(this),kb:"togglePictureInPicture",v:this.v.bind(this)})}onSetup(){this.a=yt();const{pictureInPicture:t}=this.a.$state,n=this.Nb.bind(this);this.setAttributes({"data-active":t,"data-supported":n,"aria-hidden":ke(()=>!n())})}onAttach(t){t.setAttribute("data-media-tooltip","pip"),Di(t,"PiP")}v(t){const n=this.a.remote;this.n()?n.exitPictureInPicture(t):n.enterPictureInPicture(t)}n(){const{pictureInPicture:t}=this.a.$state;return t()}Nb(){const{canPictureInPicture:t}=this.a.$state;return t()}}class o$ extends lt{static{this.props={disabled:!1,seconds:30}}constructor(){super(),new Sn}onSetup(){this.a=yt();const{seeking:t}=this.a.$state,{seconds:n}=this.$props,i=this.Nb.bind(this);this.setAttributes({seconds:n,"data-seeking":t,"data-supported":i,"aria-hidden":ke(()=>!i())})}onAttach(t){Ft(t,"tabindex","0"),Ft(t,"role","button"),Ft(t,"type","button"),t.setAttribute("data-media-tooltip","seek"),Di(t,this.zl.bind(this))}onConnect(t){Oi(t,this.v.bind(this))}Nb(){const{canSeek:t}=this.a.$state;return t()}zl(){const{seconds:t}=this.$props;return`Seek ${t()>0?"forward":"backward"} ${t()} seconds`}v(t){const{seconds:n,disabled:i}=this.$props;if(i())return;const{currentTime:s}=this.a.$state,r=s()+n();this.a.remote.seek(r,t)}}class a$ extends lt{static{this.props={disabled:!1}}constructor(){super(),new Sn}onSetup(){this.a=yt();const{disabled:t}=this.$props,{live:n,liveEdge:i}=this.a.$state,s=()=>!n();this.setAttributes({"data-edge":i,"data-hidden":s,"aria-disabled":ke(()=>t()||i()),"aria-hidden":ke(s)})}onAttach(t){Ft(t,"tabindex","0"),Ft(t,"role","button"),Ft(t,"type","button"),t.setAttribute("data-media-tooltip","live")}onConnect(t){Oi(t,this.v.bind(this))}v(t){const{disabled:n}=this.$props,{liveEdge:i}=this.a.$state;n()||i()||this.a.remote.seekToLiveEdge(t)}}const ls=new Ii({min:0,max:100,value:0,step:1,pointerValue:0,focused:!1,dragging:!1,pointing:!1,hidden:!1,get active(){return this.dragging||this.focused||this.pointing},get fillRate(){return Yd(this.min,this.max,this.value)},get fillPercent(){return this.fillRate*100},get pointerRate(){return Yd(this.min,this.max,this.pointerValue)},get pointerPercent(){return this.pointerRate*100}});function Yd(e,t,n){const i=t-e,s=n-e;return i>0?s/i:0}class Jm extends bn{constructor(t){super(),this.Ch=t}onConnect(t){this.x=new IntersectionObserver(n=>{this.Ch.callback?.(n,this.x)},this.Ch),this.x.observe(t),Ct(this.y.bind(this))}y(){this.x?.disconnect(),this.x=void 0}}const qu=ci(),gr=ci();function l$(e,t,n,i){return Hu(e,xe(n,Q1(i)),t)}function c$(e,t,n,i){const s=Hu(0,n,1),r=t-e,o=r*s,a=o/i,l=i*Math.round(a);return e+l}const Xd={Left:-1,ArrowLeft:-1,Up:1,ArrowUp:1,Right:1,ArrowRight:1,Down:-1,ArrowDown:-1};class u$ extends bn{constructor(t,n){super(),this.j=t,this.a=n,this.i=null,this.ua=null,this.mb=null,this.ti=as(i=>{this.va(this.Dc(i),i)},20,{leading:!0})}onSetup(){en(gr)&&(this.x=Xt(gr))}onConnect(){D(this.li.bind(this)),D(this.mi.bind(this)),this.j.ni&&D(this.xn.bind(this))}xn(){const{pointer:t}=this.a.$state;if(t()!=="coarse"||!this.j.ni()){this.i=null;return}this.i=this.a.player.el?.querySelector("media-provider,[data-media-provider]"),this.i&&(nt(this.i,"touchstart",this.oi.bind(this),{passive:!0}),nt(this.i,"touchmove",this.pi.bind(this),{passive:!1}))}oi(t){this.ua=t.touches[0]}pi(t){if(Li(this.ua)||Fu(t))return;const n=t.touches[0],i=n.clientX-this.ua.clientX,s=n.clientY-this.ua.clientY,r=this.$state.dragging();!r&&Math.abs(s)>5||r||(t.preventDefault(),Math.abs(i)>20&&(this.ua=n,this.mb=this.$state.value(),this.Od(this.mb,t)))}li(){const{hidden:t}=this.$props;this.listen("focus",this.Lb.bind(this)),this.listen("keydown",this.Ab.bind(this)),this.listen("keyup",this.zb.bind(this)),!(t()||this.j.K())&&(this.listen("pointerenter",this.Cd.bind(this)),this.listen("pointermove",this.qi.bind(this)),this.listen("pointerleave",this.Dd.bind(this)),this.listen("pointerdown",this.ri.bind(this)))}mi(){this.j.K()||!this.$state.dragging()||(nt(document,"pointerup",this.si.bind(this)),nt(document,"pointermove",this.ti.bind(this)),nt(document,"touchmove",this.ui.bind(this),{passive:!1}))}Lb(){this.va(this.$state.value())}Pd(t,n){const{value:i,min:s,max:r,dragging:o}=this.$state,a=Math.max(s(),Math.min(t,r()));i.set(a);const l=this.createEvent("value-change",{detail:a,trigger:n});if(this.dispatch(l),this.j.o?.(l),o()){const c=this.createEvent("drag-value-change",{detail:a,trigger:n});this.dispatch(c),this.j.nb?.(c)}}va(t,n){const{pointerValue:i,dragging:s}=this.$state;i.set(t),this.dispatch("pointer-value-change",{detail:t,trigger:n}),s()&&this.Pd(t,n)}Dc(t){let n,i=this.el.getBoundingClientRect(),{min:s,max:r}=this.$state;if(this.$props.orientation()==="vertical"){const{bottom:o,height:a}=i;n=(o-t.clientY)/a}else if(this.ua&&un(this.mb)){const{width:o}=this.i.getBoundingClientRect(),a=(t.clientX-this.ua.clientX)/o,l=r()-s(),c=l*Math.abs(a);n=(a<0?this.mb-c:this.mb+c)/l}else{const{left:o,width:a}=i;n=(t.clientX-o)/a}return Math.max(s(),Math.min(r(),this.j.Ob(c$(s(),r(),n,this.j.Ka()))))}Cd(t){this.$state.pointing.set(!0)}qi(t){const{dragging:n}=this.$state;n()||this.va(this.Dc(t),t)}Dd(t){this.$state.pointing.set(!1)}ri(t){if(t.button!==0)return;const n=this.Dc(t);this.Od(n,t),this.va(n,t)}Od(t,n){const{dragging:i}=this.$state;if(i())return;i.set(!0),this.a.remote.pauseControls(n);const s=this.createEvent("drag-start",{detail:t,trigger:n});this.dispatch(s),this.j.Qd?.(s),this.x?.onDragStart?.()}Af(t,n){const{dragging:i}=this.$state;if(!i())return;i.set(!1),this.a.remote.resumeControls(n);const s=this.createEvent("drag-end",{detail:t,trigger:n});this.dispatch(s),this.j.Ec?.(s),this.ua=null,this.mb=null,this.x?.onDragEnd?.()}Ab(t){const{key:n}=t,{min:i,max:s}=this.$state;let r;if(n==="Home"||n==="PageUp"?r=i():n==="End"||n==="PageDown"?r=s():!t.metaKey&&/^[0-9]$/.test(n)&&(r=(s()-i())/10*Number(n)),!Je(r)){this.va(r,t),this.Pd(r,t);return}const o=this.Bf(t);if(Je(o))return;const a=n===this.Rd;!this.$state.dragging()&&a&&this.Od(o,t),this.va(o,t),a||this.Pd(o,t),this.Rd=n}zb(t){this.Rd="";const{dragging:n,value:i}=this.$state;if(!n())return;const s=this.Bf(t)??i();this.va(s),this.Af(s,t)}Bf(t){const{key:n,shiftKey:i}=t;if(!Object.keys(Xd).includes(n))return;t.preventDefault(),t.stopPropagation();const{shiftKeyMultiplier:r}=this.$props,{value:o,min:a,max:l}=this.$state,c=this.j.Ka(),h=this.j.Pb(),u=i?h*r():h,f=Number(Xd[n]),g=u*f,p=((this.j.na?.()??o())+g)/c;return Math.max(a(),Math.min(l(),Number((c*p).toFixed(3))))}si(t){if(t.button!==0)return;const n=this.Dc(t);this.va(n,t),this.Af(n,t)}ui(t){t.preventDefault()}}const Rs=ci(()=>({}));class gn extends bn{constructor(t){super(),this.j=t,this.Co=mt(!0),this.Do=mt(!0),this.xi=Ys((n,i)=>{this.el?.style.setProperty("--slider-fill",n+"%"),this.el?.style.setProperty("--slider-pointer",i+"%")})}static{this.props={hidden:!1,disabled:!1,step:1,keyStep:1,orientation:"horizontal",shiftKeyMultiplier:5}}onSetup(){this.a=yt();const t=new Sn;t.attach(this),this.$state.focused=t.focused.bind(t),en(Rs)||Ve(Rs,{default:"value"}),Ve(qu,{ta:this.$props.orientation,Fc:this.j.K,Cf:mt(null)}),D(this.D.bind(this)),D(this.ro.bind(this)),D(this.Qb.bind(this)),this.vi(),new u$(this.j,this.a).attach(this),new Jm({callback:this.Eo.bind(this)}).attach(this)}onAttach(t){Ft(t,"role","slider"),Ft(t,"tabindex","0"),Ft(t,"autocomplete","off"),D(this.Df.bind(this))}onConnect(t){Ct(Rm(t,this.Co.set)),D(this.ob.bind(this))}Eo(t){this.Do.set(t[0].isIntersecting)}ob(){const{hidden:t}=this.$props;this.$state.hidden.set(t()||!this.Co()||!this.Do.bind(this))}D(){const{dragging:t,value:n,min:i,max:s}=this.$state;W(t)||n.set(l$(i(),s(),n(),this.j.Ka()))}ro(){this.$state.step.set(this.j.Ka())}Qb(){if(!this.j.K())return;const{dragging:t,pointing:n}=this.$state;t.set(!1),n.set(!1)}wi(){return Zo(this.j.K())}vi(){const{orientation:t}=this.$props,{dragging:n,active:i,pointing:s}=this.$state;this.setAttributes({"data-dragging":n,"data-pointing":s,"data-active":i,"aria-disabled":this.wi.bind(this),"aria-valuemin":this.j.Pn??this.$state.min,"aria-valuemax":this.j.Mn??this.$state.max,"aria-valuenow":this.j.ia,"aria-valuetext":this.j.ja,"aria-orientation":t})}Df(){const{fillPercent:t,pointerPercent:n}=this.$state;this.xi(xe(t(),3),xe(n(),3))}}class Xr extends lt{static{this.props={...gn.props,min:0,max:100,value:0}}static{this.state=ls}constructor(){super(),new gn({Ka:this.$props.step,Pb:this.$props.keyStep,Ob:Math.round,K:this.$props.disabled,ia:this.ia.bind(this),ja:this.ja.bind(this)})}onSetup(){D(this.D.bind(this)),D(this.yi.bind(this))}ia(){const{value:t}=this.$state;return Math.round(t())}ja(){const{value:t,max:n}=this.$state;return xe(t()/n()*100,2)+"%"}D(){const{value:t}=this.$props;this.$state.value.set(t())}yi(){const{min:t,max:n}=this.$props;this.$state.min.set(t()),this.$state.max.set(n())}}const Gn=new Map,vo=new Map;class Gu{constructor(t,n,i){this.$src=t,this.$crossOrigin=n,this.a=i,this.$images=mt([]),D(this.zi.bind(this))}static create(t,n){const i=yt();return new Gu(t,n,i)}zi(){const{canLoad:t}=this.a.$state;if(!t())return;const n=this.$src(),i=new AbortController;if(n){if(pt(n)&&Gn.has(n)){const s=Gn.get(n);if(Gn.delete(n),Gn.set(n,s),Gn.size>30){const r=Gn.keys().next().value;Gn.delete(r)}this.$images.set(Gn.get(n))}else if(pt(n)){const s=this.$crossOrigin(),r=n+"::"+s;if(!vo.has(r)){const o=new Promise(async(a,l)=>{try{const c=await fetch(n,{signal:i.signal,credentials:pr(s)});if(c.headers.get("content-type")==="application/json"){const u=await c.json();if(Oe(u))if(u[0]&&"text"in u[0])a(this.bl(u));else{for(let f=0;f<u.length;f++){const g=u[f];qn(zx(g),!1),qn("url"in g&&pt(g.url),!1),qn("startTime"in g&&un(g.startTime),!1)}a(u)}else a(this.cl(u));return}j(()=>import("./prod-xF6WKuRG.js").then(u=>u.d),[]).then(async({parseResponse:u})=>{try{const{cues:f}=await u(c);a(this.bl(f))}catch(f){l(f)}})}catch(c){l(c)}}).then(a=>(i.signal.aborted||Gn.set(r,a),a)).catch(a=>{i.signal.aborted||this.U(n,a)}).finally(()=>{pt(r)&&vo.delete(r)});vo.set(r,o)}vo.get(r)?.then(o=>{i.signal.aborted||this.$images.set(o||[])})}else if(Oe(n))try{this.$images.set(this.jl(n))}catch(s){this.U(n,s)}else try{this.$images.set(this.cl(n))}catch(s){this.U(n,s)}return()=>{i.abort(),this.$images.set([])}}}jl(t){const n=this.dl();return t.map((i,s)=>(qn(i.url&&pt(i.url),!1),qn("startTime"in i&&un(i.startTime),!1),{...i,url:pt(i.url)?this.gl(i.url,n):i.url}))}cl(t){qn(pt(t.url),!1),qn(Oe(t.tiles)&&t.tiles?.length,!1);const n=new URL(t.url),i=[],s="tile_width"in t?t.tile_width:t.tileWidth,r="tile_height"in t?t.tile_height:t.tileHeight;for(const o of t.tiles)i.push({url:n,startTime:"start"in o?o.start:o.startTime,width:s,height:r,coords:{x:o.x,y:o.y}});return i}bl(t){for(let s=0;s<t.length;s++){const r=t[s];qn("startTime"in r&&un(r.startTime),!1),qn("text"in r&&pt(r.text),!1)}const n=[],i=this.dl();for(const s of t){const[r,o]=s.text.split("#"),a=this.fl(o);n.push({url:this.gl(r,i),startTime:s.startTime,endTime:s.endTime,width:a?.w,height:a?.h,coords:a&&un(a.x)&&un(a.y)?{x:a.x,y:a.y}:void 0})}return n}dl(){let t=W(this.$src);return!pt(t)||!/^https?:/.test(t)?location.href:t}gl(t,n){return/^https?:/.test(t)?new URL(t):new URL(t,n)}fl(t){if(!t)return{};const[n,i]=t.split("="),s=i?.split(","),r={};if(!n||!s)return null;for(let o=0;o<n.length;o++){const a=+s[o];isNaN(a)||(r[n[o]]=a)}return r}U(t,n){}}class h$ extends lt{constructor(){super(...arguments),this.Td=[]}static{this.props={src:null,time:0,crossOrigin:null}}static{this.state=new Ii({src:"",img:null,thumbnails:[],activeThumbnail:null,crossOrigin:null,loading:!1,error:null,hidden:!1})}onSetup(){this.a=yt(),this.ha=Gu.create(this.$props.src,this.$state.crossOrigin),this.Hh(),this.setAttributes({"data-loading":this.Rb.bind(this),"data-error":this.wa.bind(this),"data-hidden":this.$state.hidden,"aria-hidden":ke(this.$state.hidden)})}onConnect(t){D(this.Ud.bind(this)),D(this.ob.bind(this)),D(this.Hh.bind(this)),D(this.Ea.bind(this)),D(this.il.bind(this)),D(this.Fi.bind(this))}Ud(){const t=this.$state.img();t&&(nt(t,"load",this.qd.bind(this)),nt(t,"error",this.U.bind(this)))}Hh(){const{crossOrigin:t}=this.$props,{crossOrigin:n}=this.$state,{crossOrigin:i}=this.a.$state,s=t()!==null?t():i();n.set(s===!0?"anonymous":s)}Ea(){const{src:t,loading:n,error:i}=this.$state;return t()&&(n.set(!0),i.set(null)),()=>{this.Ci(),n.set(!1),i.set(null)}}qd(){const{loading:t,error:n}=this.$state;this.Fi(),t.set(!1),n.set(null)}U(t){const{loading:n,error:i}=this.$state;n.set(!1),i.set(t)}Rb(){const{loading:t,hidden:n}=this.$state;return!n()&&t()}wa(){const{error:t}=this.$state;return!Li(t())}ob(){const{hidden:t}=this.$state,{duration:n}=this.a.$state,i=this.ha.$images();t.set(this.wa()||!Number.isFinite(n())||i.length===0)}Gf(){return this.$props.time()}il(){let t=this.ha.$images();if(!t.length)return;let n=this.Gf(),{src:i,activeThumbnail:s}=this.$state,r=-1,o=null;for(let a=t.length-1;a>=0;a--){const l=t[a];if(n>=l.startTime&&(!l.endTime||n<l.endTime)){r=a;break}}t[r]&&(o=t[r]),s.set(o),i.set(o?.url.href||"")}Fi(){if(!this.scope||this.$state.hidden())return;const t=this.el,n=this.$state.img(),i=this.$state.activeThumbnail();if(!n||!i||!t)return;let s=i.width??n.naturalWidth,r=i?.height??n.naturalHeight,{maxWidth:o,maxHeight:a,minWidth:l,minHeight:c,width:h,height:u}=getComputedStyle(this.el);l==="100%"&&(l=parseFloat(h)+""),c==="100%"&&(c=parseFloat(u)+"");let f=Math.max(parseInt(l)/s,parseInt(c)/r),g=Math.min(Math.max(parseInt(l),parseInt(o))/s,Math.max(parseInt(c),parseInt(a))/r),p=!isNaN(g)&&g<1?g:f>1?f:1;this.pb(t,"--thumbnail-width",`${s*p}px`),this.pb(t,"--thumbnail-height",`${r*p}px`),this.pb(n,"width",`${n.naturalWidth*p}px`),this.pb(n,"height",`${n.naturalHeight*p}px`),this.pb(n,"transform",i.coords?`translate(-${i.coords.x*p}px, -${i.coords.y*p}px)`:""),this.pb(n,"max-width","none")}pb(t,n,i){t.style.setProperty(n,i),this.Td.push(()=>t.style.removeProperty(n))}Ci(){for(const t of this.Td)t();this.Td=[]}}var d$=Object.defineProperty,f$=Object.getOwnPropertyDescriptor,p$=(e,t,n,i)=>{for(var s=i>1?void 0:i?f$(t,n):t,r=e.length-1,o;r>=0;r--)(o=e[r])&&(s=(i?o(t,n,s):o(s))||s);return i&&s&&d$(t,n,s),s};class Zm extends lt{static{this.props={src:null,crossOrigin:null}}static{this.state=new Ii({video:null,src:null,crossOrigin:null,canPlay:!1,error:null,hidden:!1})}get video(){return this.$state.video()}onSetup(){this.a=yt(),this.Q=zs(Xr.state),this.Hh(),this.setAttributes({"data-loading":this.Rb.bind(this),"data-hidden":this.$state.hidden,"data-error":this.wa.bind(this),"aria-hidden":ke(this.$state.hidden)})}onAttach(t){D(this.Gi.bind(this)),D(this.fd.bind(this)),D(this.Hh.bind(this)),D(this.ob.bind(this)),D(this.Hi.bind(this)),D(this.Ii.bind(this))}Gi(){const t=this.$state.video();t&&(t.readyState>=2&&this.hc(),nt(t,"canplay",this.hc.bind(this)),nt(t,"error",this.U.bind(this)))}fd(){const{src:t}=this.$state,{canLoad:n}=this.a.$state;t.set(n()?this.$props.src():null)}Hh(){const{crossOrigin:t}=this.$props,{crossOrigin:n}=this.$state,{crossOrigin:i}=this.a.$state,s=t()!==null?t():i();n.set(s===!0?"anonymous":s)}Rb(){const{canPlay:t,hidden:n}=this.$state;return!t()&&!n()}wa(){const{error:t}=this.$state;return!Li(t)}ob(){const{src:t,hidden:n}=this.$state,{canLoad:i,duration:s}=this.a.$state;n.set(i()&&(!t()||this.wa()||!Number.isFinite(s())))}Hi(){const{src:t,canPlay:n,error:i}=this.$state;t(),n.set(!1),i.set(null)}hc(t){const{canPlay:n,error:i}=this.$state;n.set(!0),i.set(null),this.dispatch("can-play",{trigger:t})}U(t){const{canPlay:n,error:i}=this.$state;n.set(!1),i.set(t),this.dispatch("error",{trigger:t})}Ii(){const{video:t,canPlay:n}=this.$state,{duration:i}=this.a.$state,{pointerRate:s}=this.Q,r=t();n()&&r&&Number.isFinite(i())&&Number.isFinite(s())&&(r.currentTime=s()*i())}}p$([wt],Zm.prototype,"video",1);var g$=Object.defineProperty,m$=Object.getOwnPropertyDescriptor,b$=(e,t,n,i)=>{for(var s=i>1?void 0:i?m$(t,n):t,r=e.length-1,o;r>=0;r--)(o=e[r])&&(s=(i?o(t,n,s):o(s))||s);return i&&s&&g$(t,n,s),s};class tb extends lt{static{this.props={type:"pointer",format:null,showHours:!1,showMs:!1,padHours:null,padMinutes:null,decimalPlaces:2}}onSetup(){this.Q=zs(Xr.state),this.Sb=Xt(Rs),this.Ji=En(this.getValueText.bind(this))}getValueText(){const{type:t,format:n,decimalPlaces:i,padHours:s,padMinutes:r,showHours:o,showMs:a}=this.$props,{value:l,pointerValue:c,min:h,max:u}=this.Q,f=n()??this.Sb.default,g=t()==="current"?l():c();if(f==="percent"){const p=u()-h(),y=g/p*100;return(this.Sb.percent??xe)(y,i())+"%"}else return f==="time"?(this.Sb.time??Fa)(g,{padHrs:s(),padMins:r(),showHrs:o(),showMs:a()}):(this.Sb.value?.(g)??g.toFixed(2))+""}}b$([Zt],tb.prototype,"getValueText",1);let y$=class extends lt{constructor(){super(...arguments),this.Hf=Ys(()=>{const{Fc:t,ta:n}=this.Q;if(t())return;const i=this.el,{offset:s,noClamp:r}=this.$props;i&&v$(i,{clamp:!r(),offset:s(),orientation:n()})})}static{this.props={offset:0,noClamp:!1}}onSetup(){this.Q=Xt(qu);const{active:t}=zs(Xr.state);this.setAttributes({"data-visible":t})}onAttach(t){Object.assign(t.style,{position:"absolute",top:0,left:0,width:"max-content"})}onConnect(t){const{Cf:n}=this.Q;n.set(t),Ct(()=>n.set(null)),D(this.Hf.bind(this));const i=new ResizeObserver(this.Hf.bind(this));i.observe(t),Ct(()=>i.disconnect())}};function v$(e,{clamp:t,offset:n,orientation:i}){const s=getComputedStyle(e),r=parseFloat(s.width),o=parseFloat(s.height),a={top:null,right:null,bottom:null,left:null};if(a[i==="horizontal"?"bottom":"left"]=`calc(100% + var(--media-slider-preview-offset, ${n}px))`,i==="horizontal"){const l=r/2;if(!t)a.left=`calc(var(--slider-pointer) - ${l}px)`;else{const c=`max(0px, calc(var(--slider-pointer) - ${l}px))`,h=`calc(100% - ${r}px)`;a.left=`min(${c}, ${h})`}}else{const l=o/2;if(!t)a.bottom=`calc(var(--slider-pointer) - ${l}px)`;else{const c=`max(${l}px, calc(var(--slider-pointer) - ${l}px))`,h=`calc(100% - ${o}px)`;a.bottom=`min(${c}, ${h})`}}Object.assign(e.style,a)}class w$ extends lt{constructor(){super(...arguments),this.If=as(this.ab.bind(this),25)}static{this.props={...gn.props,keyStep:5,shiftKeyMultiplier:2}}static{this.state=ls}onSetup(){this.a=yt();const{audioGain:t}=this.a.$state;Ve(Rs,{default:"percent",value(n){return(n*(t()??1)).toFixed(2)},percent(n){return Math.round(n*(t()??1))}}),new gn({Ka:this.$props.step,Pb:this.$props.keyStep,Ob:Math.round,K:this.K.bind(this),Mn:this.Mn.bind(this),ia:this.ia.bind(this),ja:this.ja.bind(this),nb:this.nb.bind(this),o:this.o.bind(this)}).attach(this),D(this.Fd.bind(this))}onAttach(t){t.setAttribute("data-media-volume-slider",""),Ft(t,"aria-label","Volume");const{canSetVolume:n}=this.a.$state;this.setAttributes({"data-supported":n,"aria-hidden":ke(()=>!n())})}ia(){const{value:t}=this.$state,{audioGain:n}=this.a.$state;return Math.round(t()*(n()??1))}ja(){const{value:t,max:n}=this.$state,{audioGain:i}=this.a.$state;return xe(t()/n()*(i()??1)*100,2)+"%"}Mn(){const{audioGain:t}=this.a.$state;return this.$state.max()*(t()??1)}K(){const{disabled:t}=this.$props,{canSetVolume:n}=this.a.$state;return t()||!n()}Fd(){const{muted:t,volume:n}=this.a.$state,i=t()?0:n()*100;this.$state.value.set(i),this.dispatch("value-change",{detail:i})}ab(t){if(!t.trigger)return;const n=xe(t.detail/100,3);this.a.remote.changeVolume(n,t)}o(t){this.If(t)}nb(t){this.If(t)}}class _$ extends lt{static{this.props={...gn.props,step:25,keyStep:25,shiftKeyMultiplier:2,min:0,max:300}}static{this.state=ls}onSetup(){this.a=yt(),Ve(Rs,{default:"percent",percent:(t,n)=>xe(this.$state.value(),n)+"%"}),new gn({Ka:this.$props.step,Pb:this.$props.keyStep,Ob:Math.round,K:this.K.bind(this),ia:this.ia.bind(this),ja:this.ja.bind(this),nb:this.nb.bind(this),o:this.o.bind(this)}).attach(this),D(this.yi.bind(this)),D(this.On.bind(this))}onAttach(t){t.setAttribute("data-media-audio-gain-slider",""),Ft(t,"aria-label","Audio Boost");const{canSetAudioGain:n}=this.a.$state;this.setAttributes({"data-supported":n,"aria-hidden":ke(()=>!n())})}ia(){const{value:t}=this.$state;return Math.round(t())}ja(){const{value:t}=this.$state;return t()+"%"}yi(){const{min:t,max:n}=this.$props;this.$state.min.set(t()),this.$state.max.set(n())}On(){const{audioGain:t}=this.a.$state,n=((t()??1)-1)*100;this.$state.value.set(n),this.dispatch("value-change",{detail:n})}K(){const{disabled:t}=this.$props,{canSetAudioGain:n}=this.a.$state;return t()||!n()}Nn(t){if(!t.trigger)return;const n=xe(1+t.detail/100,2);this.a.remote.changeAudioGain(n,t)}o(t){this.Nn(t)}nb(t){this.Nn(t)}}class E$ extends lt{constructor(){super(...arguments),this.ho=as(this.io.bind(this),25)}static{this.props={...gn.props,step:.25,keyStep:.25,shiftKeyMultiplier:2,min:0,max:2}}static{this.state=ls}onSetup(){this.a=yt(),new gn({Ka:this.$props.step,Pb:this.$props.keyStep,Ob:this.Ob,K:this.K.bind(this),ia:this.ia.bind(this),ja:this.ja.bind(this),nb:this.nb.bind(this),o:this.o.bind(this)}).attach(this),D(this.yi.bind(this)),D(this.Sh.bind(this))}onAttach(t){t.setAttribute("data-media-speed-slider",""),Ft(t,"aria-label","Speed");const{canSetPlaybackRate:n}=this.a.$state;this.setAttributes({"data-supported":n,"aria-hidden":ke(()=>!n())})}ia(){const{value:t}=this.$state;return t()}ja(){const{value:t}=this.$state;return t()+"x"}yi(){const{min:t,max:n}=this.$props;this.$state.min.set(t()),this.$state.max.set(n())}Sh(){const{playbackRate:t}=this.a.$state,n=t();this.$state.value.set(n),this.dispatch("value-change",{detail:n})}Ob(t){return xe(t,2)}K(){const{disabled:t}=this.$props,{canSetPlaybackRate:n}=this.a.$state;return t()||!n()}io(t){if(!t.trigger)return;const n=t.detail;this.a.remote.changePlaybackRate(n,t)}o(t){this.ho(t)}nb(t){this.ho(t)}}class S$ extends lt{constructor(){super(...arguments),this.Dj=En(()=>{const{qualities:t}=this.a.$state;return qm(t())}),this.jo=as(this.fb.bind(this),25)}static{this.props={...gn.props,step:1,keyStep:1,shiftKeyMultiplier:1}}static{this.state=ls}onSetup(){this.a=yt(),new gn({Ka:this.$props.step,Pb:this.$props.keyStep,Ob:Math.round,K:this.K.bind(this),ia:this.ia.bind(this),ja:this.ja.bind(this),nb:this.nb.bind(this),o:this.o.bind(this)}).attach(this),D(this.ko.bind(this)),D(this.lo.bind(this))}onAttach(t){t.setAttribute("data-media-quality-slider",""),Ft(t,"aria-label","Video Quality");const{qualities:n,canSetQuality:i}=this.a.$state,s=En(()=>i()&&n().length>0);this.setAttributes({"data-supported":s,"aria-hidden":ke(()=>!s())})}ia(){const{value:t}=this.$state;return t()}ja(){const{quality:t}=this.a.$state;if(!t())return"";const{height:n,bitrate:i}=t(),s=i&&i>0?`${(i/1e6).toFixed(2)} Mbps`:null;return n?`${n}p${s?` (${s})`:""}`:"Auto"}ko(){const t=this.Dj();this.$state.max.set(Math.max(0,t.length-1))}lo(){let{quality:t}=this.a.$state,n=this.Dj(),i=Math.max(0,n.indexOf(t()));this.$state.value.set(i),this.dispatch("value-change",{detail:i})}K(){const{disabled:t}=this.$props,{canSetQuality:n,qualities:i}=this.a.$state;return t()||i().length<=1||!n()}fb(t){if(!t.trigger)return;const{qualities:n}=this.a,i=W(this.Dj)[t.detail];this.a.remote.changeQuality(n.indexOf(i),t)}o(t){this.jo(t)}nb(t){this.jo(t)}}let eb=class extends lt{constructor(){super(),this.Jf=mt(null),this.Wd=!1;const{noSwipeGesture:t}=this.$props;new gn({ni:()=>!t(),na:this.na.bind(this),Ka:this.Ka.bind(this),Pb:this.Pb.bind(this),Ob:this.Ob,K:this.K.bind(this),ia:this.ia.bind(this),ja:this.ja.bind(this),Qd:this.Qd.bind(this),nb:this.nb.bind(this),Ec:this.Ec.bind(this),o:this.o.bind(this)})}static{this.props={...gn.props,step:.1,keyStep:5,shiftKeyMultiplier:2,pauseWhileDragging:!1,noSwipeGesture:!1,seekingRequestThrottle:100}}static{this.state=ls}onSetup(){this.a=yt(),Ve(Rs,{default:"time",value:this.Ki.bind(this),time:this.Li.bind(this)}),this.setAttributes({"data-chapters":this.Mi.bind(this)}),this.setStyles({"--slider-progress":this.Ni.bind(this)}),D(this.jb.bind(this)),D(this.Oi.bind(this))}onAttach(t){t.setAttribute("data-media-time-slider",""),Ft(t,"aria-label","Seek")}onConnect(t){D(this.Pi.bind(this)),Ma(this.a.textTracks,"chapters",this.Jf.set)}Ni(){const{bufferedEnd:t,duration:n}=this.a.$state;return xe(Math.min(t()/Math.max(n(),1),1)*100,3)+"%"}Mi(){const{duration:t}=this.a.$state;return this.Jf()?.cues.length&&Number.isFinite(t())&&t()>0}Oi(){this.Vd=as(this.qa.bind(this),this.$props.seekingRequestThrottle())}jb(){if(this.$state.hidden())return;const{value:t,dragging:n}=this.$state,i=this.na();W(n)||(t.set(i),this.dispatch("value-change",{detail:i}))}Pi(){const t=this.a.player.el,{Cf:n}=Xt(qu);t&&n()&&et(t,"data-preview",this.$state.active())}qa(t,n){this.a.remote.seeking(t,n)}Ri(t,n,i){this.Vd.cancel();const{live:s}=this.a.$state;if(s()&&n>=99){this.a.remote.seekToLiveEdge(i);return}this.a.remote.seek(t,i)}Qd(t){const{pauseWhileDragging:n}=this.$props;if(n()){const{paused:i}=this.a.$state;this.Wd=!i(),this.a.remote.pause(t)}}nb(t){this.Vd(this.Tb(t.detail),t)}Ec(t){const{seeking:n}=this.a.$state;W(n)||this.qa(this.Tb(t.detail),t);const i=t.detail;this.Ri(this.Tb(i),i,t);const{pauseWhileDragging:s}=this.$props;s()&&this.Wd&&(this.a.remote.play(t),this.Wd=!1)}o(t){const{dragging:n}=this.$state;n()||!t.trigger||this.Ec(t)}na(){const{currentTime:t}=this.a.$state;return this.Qi(t())}Ka(){const t=this.$props.step()/this.a.$state.duration()*100;return Number.isFinite(t)?t:1}Pb(){const t=this.$props.keyStep()/this.a.$state.duration()*100;return Number.isFinite(t)?t:1}Ob(t){return xe(t,3)}K(){const{disabled:t}=this.$props,{canSeek:n}=this.a.$state;return t()||!n()}ia(){const{value:t}=this.$state;return Math.round(t())}ja(){const t=this.Tb(this.$state.value()),{duration:n}=this.a.$state;return Number.isFinite(t)?`${aa(t)} out of ${aa(n())}`:"live"}Tb(t){const{duration:n}=this.a.$state;return xe(t/100*n(),5)}Qi(t){const{liveEdge:n,duration:i}=this.a.$state,s=Math.max(0,Math.min(1,n()?1:Math.min(t,i())/i()));return Number.isNaN(s)?0:Number.isFinite(s)?s*100:100}Ki(t){const n=this.Tb(t),{live:i,duration:s}=this.a.$state;return Number.isFinite(n)?(i()?n-s():n).toFixed(0):"LIVE"}Li(t,n){const i=this.Tb(t),{live:s,duration:r}=this.a.$state,o=s()?i-r():i;return Number.isFinite(i)?`${o<0?"-":""}${Fa(Math.abs(o),n)}`:"LIVE"}};var x$=Object.defineProperty,T$=Object.getOwnPropertyDescriptor,Ba=(e,t,n,i)=>{for(var s=i>1?void 0:i?T$(t,n):t,r=e.length-1,o;r>=0;r--)(o=e[r])&&(s=(i?o(t,n,s):o(s))||s);return i&&s&&x$(t,n,s),s};let Qr=class extends lt{constructor(){super(...arguments),this.La=null,this.R=[],this.Gc=mt(null),this._=mt([]),this.Ub=mt(-1),this.Hc=mt(-1),this.Zd=0,this.Xi=Ys(t=>{let n,i=this._(),{clipStartTime:s}=this.a.$state,r=s(),o=this.Hk(i);for(let a=this.Zd;a<this.R.length;a++)if(n=this.ae(i[a],t,r,o),this.R[a]?.style.setProperty("--chapter-progress",n+"%"),n<100){this.Zd=a;break}}),this.Yi=En(this.Zi.bind(this)),this.$i=Uu(()=>{const t=W(this.Gc);!this.scope||!t||!t.cues.length||(this._.set(this._i(t.cues)),this.Ub.set(0),this.Zd=0)},150,!0)}static{this.props={disabled:!1}}get cues(){return this._()}get activeCue(){return this._()[this.Ub()]||null}get activePointerCue(){return this._()[this.Hc()]||null}onSetup(){this.a=yt(),this.Xd=zs(eb.state)}onAttach(t){Ma(this.a.textTracks,"chapters",this.Kf.bind(this)),D(this.wo.bind(this))}onConnect(){Ct(()=>this.H.bind(this))}onDestroy(){this.Kf(null)}setRefs(t){if(this.R=t,this.Yd?.dispose(),this.R.length===1){const n=this.R[0];n.style.width="100%",n.style.setProperty("--chapter-fill","var(--slider-fill)"),n.style.setProperty("--chapter-progress","var(--slider-progress)")}else this.R.length>0&&De(()=>this.Si(),this.Yd=Qo())}Kf(t){W(this.Gc)!==t&&(this.H(),this.Gc.set(t))}H(){this.R=[],this._.set([]),this.Ub.set(-1),this.Hc.set(-1),this.Zd=0,this.Yd?.dispose()}Si(){this.R.length&&D(this.Fo.bind(this))}Fo(){const{hidden:t}=this.Xd;t()||(D(this.Ti.bind(this)),D(this.Ui.bind(this)),D(this.Vi.bind(this)),D(this.Wi.bind(this)))}Ti(){const t=this._();if(!t.length)return;let n,{clipStartTime:i,clipEndTime:s}=this.a.$state,r=i(),o=s()||t[t.length-1].endTime,a=o-r,l=100;for(let c=0;c<t.length;c++)if(n=t[c],this.R[c]){const h=c===t.length-1?l:xe((n.endTime-Math.max(r,n.startTime))/a*100,3);this.R[c].style.width=h+"%",l-=h}}Ui(){let{liveEdge:t,clipStartTime:n,duration:i}=this.a.$state,{fillPercent:s,value:r}=this.Xd,o=this._(),a=t(),l=W(this.Ub),c=o[l],h=a?this._.length-1:this.Lf(c&&c.startTime/i()*100<=W(r)?l:0,s());a||!c?this.$d(0,o.length,"100%"):h>l?this.$d(l,h,"100%"):h<l&&this.$d(h+1,l+1,"0%");const u=a?"100%":this.ae(o[h],s(),n(),this.Hk(o))+"%";this.Mf(this.R[h],u),this.Ub.set(h)}Vi(){let{pointing:t,pointerPercent:n}=this.Xd;if(!t()){this.Hc.set(-1);return}const i=this.Lf(0,n());this.Hc.set(i)}$d(t,n,i){for(let s=t;s<n;s++)this.Mf(this.R[s],i)}Mf(t,n){t&&t.style.setProperty("--chapter-fill",n)}Lf(t,n){let i=0,s=this._();if(n===0)return 0;if(n===100)return s.length-1;let{clipStartTime:r}=this.a.$state,o=r(),a=this.Hk(s);for(let l=t;l<s.length;l++)if(i=this.ae(s[l],n,o,a),i>=0&&i<100)return l;return 0}Wi(){this.Xi(this.Yi())}Zi(){const{bufferedEnd:t,duration:n}=this.a.$state;return xe(Math.min(t()/Math.max(n(),1),1),3)*100}Hk(t){const{clipEndTime:n}=this.a.$state,i=n();return i>0?i:t[t.length-1]?.endTime||0}ae(t,n,i,s){if(this._().length===0)return 0;const o=s-i,a=Math.max(0,t.startTime-i),l=Math.min(s,t.endTime)-i,c=a/o,h=c*100,u=Math.min(1,c+(l-a)/o)*100;return Math.max(0,xe(n>=u?100:(n-h)/(u-h)*100,3))}_i(t){let n=[],{clipStartTime:i,clipEndTime:s,duration:r}=this.a.$state,o=i(),a=s()||1/0;t=t.filter(h=>h.startTime<=a&&h.endTime>=o);const l=t[0];l&&l.startTime>o&&n.push(new window.VTTCue(o,l.startTime,""));for(let h=0;h<t.length-1;h++){const u=t[h],f=t[h+1];if(n.push(u),f){const g=f.startTime-u.endTime;g>0&&n.push(new window.VTTCue(u.endTime,u.endTime+g,""))}}const c=t[t.length-1];if(c){n.push(c);const h=r();h>=0&&h-c.endTime>1&&n.push(new window.VTTCue(c.endTime,r(),""))}return n}wo(){const{source:t}=this.a.$state;t(),this._d()}_d(){if(!this.scope)return;const{disabled:t}=this.$props;if(t()){this._.set([]),this.Ub.set(0),this.Zd=0;return}const n=this.Gc();if(n){const i=this.$i.bind(this);i(),Ct(nt(n,"add-cue",i)),Ct(nt(n,"remove-cue",i)),D(this.Fk.bind(this))}return this.La=this.aj(),this.La&&D(this.bj.bind(this)),()=>{this.La&&(this.La.textContent="",this.La=null)}}Fk(){this.a.$state.duration(),this.$i()}bj(){const t=this.activePointerCue||this.activeCue;this.La&&(this.La.textContent=t?.text||"")}cj(){let t=this.el;for(;t&&t.getAttribute("role")!=="slider";)t=t.parentElement;return t}aj(){const t=this.cj();return t?t.querySelector('[data-part="chapter-title"]'):null}};Ba([wt],Qr.prototype,"cues",1);Ba([wt],Qr.prototype,"activeCue",1);Ba([wt],Qr.prototype,"activePointerCue",1);Ba([Zt],Qr.prototype,"setRefs",1);const pe=ci();function C$(e,t){const n=zT(e,t);for(const{el:i,top:s,left:r}of n)i.scroll({top:s,left:r,behavior:t.behavior})}function $$(e,t={}){C$(e,{scrollMode:"if-needed",block:"center",inline:"center",...t})}const k$=["a[href]","[tabindex]","input","select","button"].map(e=>`${e}:not([aria-hidden='true'])`).join(","),A$=new Set(["Escape","Tab","ArrowUp","ArrowDown","Home","PageUp","End","PageDown","Enter"," "]);class P${constructor(t){this.j=t,this.ka=-1,this.xa=null,this.da=[]}get r(){return this.da}Nf(t){nt(t,"focus",this.Lb.bind(this)),this.xa=t,Ct(()=>{this.xa=null})}zc(){this.xa&&(this.ea(),nt(this.xa,"keyup",this.zb.bind(this)),nt(this.xa,"keydown",this.Ab.bind(this)),Ct(()=>{this.ka=-1,this.da=[]}))}ea(){this.ka=0,this.da=this.dj()}Of(t=this.Pf()){const n=this.da[t];n&&requestAnimationFrame(()=>{requestAnimationFrame(()=>{$$(n,{behavior:"smooth",boundary:i=>!i.hasAttribute("data-root")})})})}Ao(t=!0){const n=this.Pf();this.qb(n>=0?n:0,t)}qb(t,n=!0){this.ka=t,this.da[t]?(this.da[t].focus({preventScroll:!0}),n&&this.Of(t)):this.xa?.focus({preventScroll:!0})}Pf(){return this.da.findIndex(t=>document.activeElement===t||t.getAttribute("role")==="menuitemradio"&&t.getAttribute("aria-checked")==="true")}Lb(){this.ka>=0||(this.ea(),this.Ao())}kp(t){const n=t.target;if(tT(t)&&n instanceof Element){const i=n.getAttribute("role");return!/a|input|select|button/.test(n.localName)&&!i}return A$.has(t.key)}zb(t){this.kp(t)&&(t.stopPropagation(),t.preventDefault())}Ab(t){if(this.kp(t))switch(t.stopPropagation(),t.preventDefault(),t.key){case"Escape":this.j.fj(t);break;case"Tab":this.qb(this.be(t.shiftKey?-1:1));break;case"ArrowUp":this.qb(this.be(-1));break;case"ArrowDown":this.qb(this.be(1));break;case"Home":case"PageUp":this.qb(0);break;case"End":case"PageDown":this.qb(this.da.length-1);break}}be(t){let n=this.ka;do n=(n+t+this.da.length)%this.da.length;while(this.da[n]?.offsetParent===null);return n}dj(){if(!this.xa)return[];const t=this.xa.querySelectorAll(k$),n=[],i=s=>s.getAttribute("role")==="menu";for(const s of t)Ji(s)&&s.offsetParent!==null&&Mm(this.xa,s,i)&&n.push(s);return n}}var O$=Object.defineProperty,L$=Object.getOwnPropertyDescriptor,Jr=(e,t,n,i)=>{for(var s=i>1?void 0:i?L$(t,n):t,r=e.length-1,o;r>=0;r--)(o=e[r])&&(s=(i?o(t,n,s):o(s))||s);return i&&s&&O$(t,n,s),s};let I$=0;class Xs extends lt{constructor(){super(),this.L=mt(!1),this.Fc=mt(!1),this.C=mt(null),this.u=mt(null),this.Vb=new Set,this.Ic=null,this.Qn=!1,this.Qf=mt(!1),this.jp=new Set,this.xo=!1,this.rj=this.sj.bind(this),this.zo=!1,this.pj=this.tj.bind(this),this.qj=this.uj.bind(this),this.O=Ys(()=>{const n=W(this.u);if(!n)return;let i=0,s=getComputedStyle(n),r=[...n.children];for(const o of["paddingTop","paddingBottom","borderTopWidth","borderBottomWidth"])i+=parseFloat(s[o])||0;for(const o of r)if(Ji(o)&&o.style.display==="contents")r.push(...o.children);else if(o.nodeType===3)i+=parseFloat(getComputedStyle(o).fontSize);else if(Ji(o)){if(!Dm(o))continue;const a=getComputedStyle(o);i+=o.offsetHeight+(parseFloat(a.marginTop)||0)+(parseFloat(a.marginBottom)||0)}He(n,"--menu-height",i+"px")}),this.yo=!1;const{showDelay:t}=this.$props;this.Jc=new Xm({C:this.C,u:this.u,yf:t,zc:(n,i,s)=>{Oi(n,o=>{this.L()?s(o):i(o)});const r=this.gj();r&&Oi(r,o=>{o.stopPropagation(),s(o)})},B:this.hj.bind(this)})}static{this.props={showDelay:0}}get triggerElement(){return this.C()}get contentElement(){return this.u()}get isSubmenu(){return!!this.ee}onSetup(){this.a=yt();const t=++I$;this.ce=`media-menu-${t}`,this.de=`media-menu-button-${t}`,this.rb=new P$({fj:this.close.bind(this)}),en(pe)&&(this.ee=Xt(pe)),this.mo(),this.setAttributes({"data-open":this.L,"data-root":!this.isSubmenu,"data-submenu":this.isSubmenu,"data-disabled":this.K.bind(this)}),Ve(pe,{jj:this.C,u:this.u,L:this.L,Wb:mt(""),no:!!this.ee,Ma:this.Ma.bind(this),fe:this.fe.bind(this),ge:this.ge.bind(this),he:this.he.bind(this),ie:this.ie.bind(this),je:this.je.bind(this),lp:n=>{this.jp.add(n),Ct(()=>{this.jp.delete(n)})}})}onAttach(t){t.style.setProperty("display","contents")}onConnect(t){D(this.kj.bind(this)),this.isSubmenu&&this.ee?.je(this)}onDestroy(){this.C.set(null),this.u.set(null),this.Ic=null,this.jp.clear()}mo(){let t=-1,n=en(gr)?Xt(gr):null;Ve(gr,{onDragStart:()=>{n?.onDragStart?.(),window.clearTimeout(t),t=-1,this.Qn=!0},onDragEnd:()=>{n?.onDragEnd?.(),t=window.setTimeout(()=>{this.Qn=!1,t=-1},300)}})}kj(){const t=this.lj();this.isSubmenu||this.O(),this.Rf(t),t&&(D(()=>{const{height:n}=this.a.$state,i=this.u();i&&He(i,"--player-height",n()+"px")}),this.rb.zc(),this.listen("pointerup",this.mj.bind(this)),nt(window,"pointerup",this.nj.bind(this)))}fe(t){const n=t.el,i=this.isSubmenu,s=ke(this.K.bind(this));Ft(n,"tabindex",i?"-1":"0"),Ft(n,"role",i?"menuitem":"button"),et(n,"id",this.de),et(n,"aria-haspopup","menu"),et(n,"aria-expanded","false"),et(n,"data-root",!this.isSubmenu),et(n,"data-submenu",this.isSubmenu),D(()=>{et(n,"data-open",this.L()),et(n,"aria-disabled",s())}),this.C.set(n),Ct(()=>{this.C.set(null)})}ge(t){const n=t.el;n.style.setProperty("display","none"),et(n,"id",this.ce),Ft(n,"role","menu"),Ft(n,"tabindex","-1"),et(n,"data-root",!this.isSubmenu),et(n,"data-submenu",this.isSubmenu),this.u.set(n),Ct(()=>this.u.set(null)),D(()=>et(n,"data-open",this.L())),this.rb.Nf(n),this.Rf(!1);const s=this.Xm.bind(this);this.isSubmenu?this.ee?.lp(s):(t.listen("transitionstart",s),t.listen("transitionend",s),t.listen("animationend",this.O),t.listen("vds-menu-resize",this.O))}he(t){this.Ic=t}Rf(t){const n=W(this.u);n&&et(n,"aria-hidden",Zo(!t))}ie(t){this.Qf.set(t)}hj(t,n){if(this.xo=Ia(n),n?.stopPropagation(),this.L()===t)return;if(this.K()){t&&this.Jc.hide(n);return}this.el?.dispatchEvent(new Event("vds-menu-resize",{bubbles:!0,composed:!0}));const i=this.C(),s=this.u();if(i&&(et(i,"aria-controls",t&&this.ce),et(i,"aria-expanded",Zo(t))),s&&et(s,"aria-labelledby",t&&this.de),this.L.set(t),this.oj(n),Qn(),this.xo){t?s?.focus():i?.focus();for(const r of[this.el,s])r&&r.setAttribute("data-keyboard","")}else for(const r of[this.el,s])r&&r.removeAttribute("data-keyboard");if(this.dispatch(t?"open":"close",{trigger:n}),t)!this.isSubmenu&&this.a.activeMenu!==this&&(this.a.activeMenu?.close(n),this.a.activeMenu=this),this.Ic?.ke?.(n);else{if(this.isSubmenu)for(const r of this.Vb)r.close(n);else this.a.activeMenu=null;this.Ic?.Tj?.(n)}t&&requestAnimationFrame(this.Bo.bind(this))}Bo(){this.yo||this.zo||(this.rb.ea(),requestAnimationFrame(()=>{this.xo?this.rb.Ao():this.rb.Of()}))}lj(){return!this.K()&&this.L()}K(){return this.Fc()||this.Qf()}Ma(t){this.Fc.set(t)}mj(t){const n=this.u();this.Qn||n&&Dd(n,t)||t.stopPropagation()}nj(t){const n=this.u();this.Qn||n&&Dd(n,t)||this.close(t)}gj(){const t=this.el?.querySelector('[data-part="close-target"]');return this.el&&t&&Mm(this.el,t,n=>n.getAttribute("role")==="menu")?t:null}oj(t){this.isSubmenu||(this.L()?this.a.remote.pauseControls(t):this.a.remote.resumeControls(t))}je(t){this.Vb.add(t),nt(t,"open",this.pj),nt(t,"close",this.qj),Ct(this.rj)}sj(t){this.Vb.delete(t)}tj(t){this.zo=!0;const n=this.u();this.isSubmenu&&this.triggerElement?.setAttribute("aria-hidden","true");for(const i of this.Vb)if(i!==t.target)for(const s of[i.el,i.triggerElement])s?.setAttribute("aria-hidden","true");if(n){const i=t.target.el;for(const s of n.children)s.contains(i)?s.setAttribute("data-open",""):s!==i&&s.setAttribute("data-hidden","")}}uj(t){this.zo=!1;const n=this.u();this.isSubmenu&&this.triggerElement?.setAttribute("aria-hidden","false");for(const i of this.Vb)for(const s of[i.el,i.triggerElement])s?.setAttribute("aria-hidden","false");if(n)for(const i of n.children)i.removeAttribute("data-open"),i.removeAttribute("data-hidden")}Xm(t){const n=this.u();n&&t.propertyName==="height"&&(this.yo=t.type==="transitionstart",et(n,"data-transition",this.yo?"height":null),this.L()&&this.Bo());for(const i of this.jp)i(t)}open(t){W(this.L)||(this.Jc.show(t),Qn())}close(t){W(this.L)&&(this.Jc.hide(t),Qn())}}Jr([wt],Xs.prototype,"triggerElement",1);Jr([wt],Xs.prototype,"contentElement",1);Jr([wt],Xs.prototype,"isSubmenu",1);Jr([Zt],Xs.prototype,"open",1);Jr([Zt],Xs.prototype,"close",1);var D$=Object.defineProperty,R$=Object.getOwnPropertyDescriptor,M$=(e,t,n,i)=>{for(var s=i>1?void 0:i?R$(t,n):t,r=e.length-1,o;r>=0;r--)(o=e[r])&&(s=(i?o(t,n,s):o(s))||s);return i&&s&&D$(t,n,s),s};class Wu extends lt{constructor(){super(),this.zn=mt(null),new Sn}static{this.props={disabled:!1}}get expanded(){return this.l?.L()??!1}onSetup(){this.l=Xt(pe)}onAttach(t){this.l.fe(this),D(this.Qb.bind(this)),Ft(t,"type","button")}onConnect(t){D(this.An.bind(this)),this.vf();const n=new MutationObserver(this.vf.bind(this));n.observe(t,{attributeFilter:["data-part"],childList:!0,subtree:!0}),Ct(()=>n.disconnect()),Oi(t,i=>{this.dispatch("select",{trigger:i})})}Qb(){this.l.ie(this.$props.disabled())}An(){const t=this.zn();t&&D(()=>{const n=this.l.Wb();n&&(t.textContent=n)})}vf(){const t=this.el?.querySelector('[data-part="hint"]');this.zn.set(t??null)}}M$([wt],Wu.prototype,"expanded",1);class N$ extends lt{constructor(){super(...arguments),this.A=null}static{this.props={container:null,disabled:!1}}onSetup(){this.a=yt(),Ve(Ao,{Ja:this.vj.bind(this)})}onAttach(t){t.style.setProperty("display","contents")}onConnect(t){}onDestroy(){this.A?.remove(),this.A=null}vj(t){this.Tf(!1),this.A=t,si(()=>{si(()=>{this.connectScope&&D(this.Qb.bind(this))})})}Qb(){const{fullscreen:t}=this.a.$state,{disabled:n}=this.$props,i=n();this.Tf(i==="fullscreen"?!t():!i)}Tf(t){if(!this.A)return;let n=this.wj(this.$props.container());if(!n)return;const i=this.A.parentElement===n;et(this.A,"data-portal",t),t?i||(this.A.remove(),n.append(this.A)):i&&this.A.parentElement===n&&(this.A.remove(),this.el?.append(this.A))}wj(t){return Ji(t)?t:t?document.querySelector(t):document.body}}const Ao=ci();class F$ extends lt{static{this.props={placement:null,offset:0,alignOffset:0}}constructor(){super(),new Sn;const{placement:t}=this.$props;this.setAttributes({"data-placement":t})}onAttach(t){if(this.l=Xt(pe),this.l.ge(this),en(Ao)){const n=Xt(Ao);n&&(Ve(Ao,null),n.Ja(t),Ct(()=>n.Ja(null)))}}onConnect(t){D(this.Nd.bind(this))}Nd(){if(!this.el)return;const t=this.$props.placement();if(t){Object.assign(this.el.style,{position:"absolute",top:0,left:0,width:"max-content"});const{offset:n,alignOffset:i}=this.$props;return Bm(this.el,this.Cc(),t,{offsetVarName:"media-menu",xOffset:i(),yOffset:n()})}else this.el.removeAttribute("style"),this.el.style.display="none"}Cc(){return this.l.jj()}}const vc=ci();class cs extends bn{constructor(){super(...arguments),this.sb=new Set,this.la=mt(""),this.d=null,this.Aj=this.B.bind(this)}get xj(){return Array.from(this.sb).map(t=>t.la())}get value(){return this.la()}set value(t){this.B(t)}onSetup(){Ve(vc,{add:this.yj.bind(this),remove:this.zj.bind(this)})}onAttach(t){en(pe)||Ft(t,"role","radiogroup"),this.setAttributes({value:this.la})}onDestroy(){this.sb.clear()}yj(t){this.sb.has(t)||(this.sb.add(t),t.Kc=this.Aj,t.Xb(t.la()===this.la()))}zj(t){t.Kc=null,this.sb.delete(t)}B(t,n){const i=W(this.la);if(!t||t===i)return;const s=this.Uf(i),r=this.Uf(t);s?.Xb(!1,n),r?.Xb(!0,n),this.la.set(t),this.o?.(t,n)}Uf(t){for(const n of this.sb)if(t===W(n.la))return n;return null}}var B$=Object.defineProperty,H$=Object.getOwnPropertyDescriptor,nb=(e,t,n,i)=>{for(var s=i>1?void 0:i?H$(t,n):t,r=e.length-1,o;r>=0;r--)(o=e[r])&&(s=(i?o(t,n,s):o(s))||s);return i&&s&&B$(t,n,s),s};class zu extends lt{static{this.props={value:""}}get values(){return this.d.xj}get value(){return this.d.value}set value(t){this.d.value=t}constructor(){super(),this.d=new cs,this.d.o=this.o.bind(this)}onSetup(){D(this.D.bind(this))}D(){this.d.value=this.$props.value()}o(t,n){const i=this.createEvent("change",{detail:t,trigger:n});this.dispatch(i)}}nb([wt],zu.prototype,"values",1);nb([wt],zu.prototype,"value",1);var U$=Object.defineProperty,V$=Object.getOwnPropertyDescriptor,j$=(e,t,n,i)=>{for(var s=i>1?void 0:i?V$(t,n):t,r=e.length-1,o;r>=0;r--)(o=e[r])&&(s=(i?o(t,n,s):o(s))||s);return i&&s&&U$(t,n,s),s};class ib extends lt{constructor(){super(),this.Na=mt(!1),this.d={la:this.$props.value,Xb:this.Xb.bind(this),Kc:null},new Sn}static{this.props={value:""}}get checked(){return this.Na()}onSetup(){this.setAttributes({value:this.$props.value,"data-checked":this.Na,"aria-checked":ke(this.Na)})}onAttach(t){const n=en(pe);Ft(t,"tabindex",n?"-1":"0"),Ft(t,"role",n?"menuitemradio":"radio"),D(this.D.bind(this))}onConnect(t){this.Bj(),Oi(t,this.v.bind(this)),Ct(this.ya.bind(this))}ya(){De(()=>{Xt(vc).remove(this.d)},this.connectScope)}Bj(){Xt(vc).add(this.d)}D(){const{value:t}=this.$props,n=t();W(this.Na)&&this.d.Kc?.(n)}v(t){W(this.Na)||(this.B(!0,t),this.Cj(t),this.d.Kc?.(W(this.$props.value),t))}Xb(t,n){W(this.Na)!==t&&this.B(t,n)}B(t,n){this.Na.set(t),this.dispatch("change",{detail:t,trigger:n})}Cj(t){this.dispatch("select",{trigger:t})}}j$([wt],ib.prototype,"checked",1);var K$=Object.defineProperty,q$=Object.getOwnPropertyDescriptor,Yu=(e,t,n,i)=>{for(var s=i>1?void 0:i?q$(t,n):t,r=e.length-1,o;r>=0;r--)(o=e[r])&&(s=(i?o(t,n,s):o(s))||s);return i&&s&&K$(t,n,s),s};class Ha extends lt{constructor(){super(),this.z=mt(null),this.J=mt([]),this.d=new cs,this.d.o=this.o.bind(this)}static{this.props={thumbnails:null}}get value(){return this.d.value}get disabled(){return!this.J()?.length}onSetup(){this.a=yt(),en(pe)&&(this.l=Xt(pe));const{thumbnails:t}=this.$props;this.setAttributes({"data-thumbnails":()=>!!t()})}onAttach(t){this.l?.he({ke:this.ke.bind(this)})}getOptions(){const{clipStartTime:t,clipEndTime:n}=this.a.$state,i=t(),s=n()||1/0;return this.J().map((r,o)=>({cue:r,value:o.toString(),label:r.text,startTime:Fa(Math.max(0,r.startTime-i)),duration:aa(Math.min(s,r.endTime)-Math.max(i,r.startTime))}))}ke(){W(()=>this.jb())}onConnect(t){D(this.jb.bind(this)),D(this.ma.bind(this)),D(this.tk.bind(this)),Ma(this.a.textTracks,"chapters",this.z.set)}tk(){const t=this.z();if(!t)return;const n=this.$i.bind(this,t);return n(),nt(t,"add-cue",n),nt(t,"remove-cue",n),()=>{this.J.set([])}}$i(t){const{clipStartTime:n,clipEndTime:i}=this.a.$state,s=n(),r=i()||1/0;this.J.set([...t.cues].filter(o=>o.startTime<=r&&o.endTime>=s))}jb(){if(!this.l?.L())return;if(!this.z()){this.d.value="-1";return}const{realCurrentTime:n,clipStartTime:i,clipEndTime:s}=this.a.$state,r=i(),o=s()||1/0,a=n(),l=this.J().findIndex(c=>gc(c,a));this.d.value=l.toString(),l>=0&&si(()=>{if(!this.connectScope)return;const c=this.J()[l],h=this.el.querySelector("[aria-checked='true']"),u=Math.max(r,c.startTime),f=Math.min(o,c.endTime)-u,g=Math.max(0,a-u)/f*100;h&&He(h,"--progress",xe(g,3)+"%")})}ma(){this.l?.Ma(this.disabled)}o(t,n){if(this.disabled||!n)return;const i=+t,s=this.J(),{clipStartTime:r}=this.a.$state;un(i)&&s?.[i]&&(this.d.value=i.toString(),this.a.remote.seek(s[i].startTime-r(),n),this.dispatch("change",{detail:s[i],trigger:n}))}}Yu([wt],Ha.prototype,"value",1);Yu([wt],Ha.prototype,"disabled",1);Yu([Zt],Ha.prototype,"getOptions",1);var G$=Object.defineProperty,W$=Object.getOwnPropertyDescriptor,Xu=(e,t,n,i)=>{for(var s=i>1?void 0:i?W$(t,n):t,r=e.length-1,o;r>=0;r--)(o=e[r])&&(s=(i?o(t,n,s):o(s))||s);return i&&s&&G$(t,n,s),s};class Ua extends lt{static{this.props={emptyLabel:"Default"}}get value(){return this.d.value}get disabled(){const{audioTracks:t}=this.a.$state;return t().length<=1}constructor(){super(),this.d=new cs,this.d.o=this.o.bind(this)}onSetup(){this.a=yt(),en(pe)&&(this.l=Xt(pe))}onConnect(t){D(this.D.bind(this)),D(this.ma.bind(this)),D(this.Oa.bind(this))}getOptions(){const{audioTracks:t}=this.a.$state;return t().map(n=>({track:n,label:n.label,value:n.label.toLowerCase()}))}D(){this.d.value=this.na()}Oa(){const{emptyLabel:t}=this.$props,{audioTrack:n}=this.a.$state,i=n();this.l?.Wb.set(i?.label??t())}ma(){this.l?.Ma(this.disabled)}na(){const{audioTrack:t}=this.a.$state,n=t();return n?n.label.toLowerCase():""}o(t,n){if(this.disabled)return;const i=this.a.audioTracks.toArray().findIndex(s=>s.label.toLowerCase()===t);if(i>=0){const s=this.a.audioTracks[i];this.a.remote.changeAudioTrack(i,n),this.dispatch("change",{detail:s,trigger:n})}}}Xu([wt],Ua.prototype,"value",1);Xu([wt],Ua.prototype,"disabled",1);Xu([Zt],Ua.prototype,"getOptions",1);var z$=Object.defineProperty,Y$=Object.getOwnPropertyDescriptor,Qu=(e,t,n,i)=>{for(var s=i>1?void 0:i?Y$(t,n):t,r=e.length-1,o;r>=0;r--)(o=e[r])&&(s=(i?o(t,n,s):o(s))||s);return i&&s&&z$(t,n,s),s};const X$=[1,1.25,1.5,1.75,2,2.5,3,4];class Va extends lt{static{this.props={normalLabel:"Disabled",gains:X$}}get value(){return this.d.value}get disabled(){const{gains:t}=this.$props,{canSetAudioGain:n}=this.a.$state;return!n()||t().length===0}constructor(){super(),this.d=new cs,this.d.o=this.o.bind(this)}onSetup(){this.a=yt(),en(pe)&&(this.l=Xt(pe))}onConnect(t){D(this.D.bind(this)),D(this.Oa.bind(this)),D(this.ma.bind(this))}getOptions(){const{gains:t,normalLabel:n}=this.$props;return t().map(i=>({label:i===1||i===null?n:String(i*100)+"%",value:i.toString()}))}D(){this.d.value=this.na()}Oa(){const{normalLabel:t}=this.$props,{audioGain:n}=this.a.$state,i=n();this.l?.Wb.set(i===1||i==null?t():String(i*100)+"%")}ma(){this.l?.Ma(this.disabled)}na(){const{audioGain:t}=this.a.$state;return t()?.toString()??"1"}o(t,n){if(this.disabled)return;const i=+t;this.a.remote.changeAudioGain(i,n),this.dispatch("change",{detail:i,trigger:n})}}Qu([wt],Va.prototype,"value",1);Qu([wt],Va.prototype,"disabled",1);Qu([Zt],Va.prototype,"getOptions",1);var Q$=Object.defineProperty,J$=Object.getOwnPropertyDescriptor,Ju=(e,t,n,i)=>{for(var s=i>1?void 0:i?J$(t,n):t,r=e.length-1,o;r>=0;r--)(o=e[r])&&(s=(i?o(t,n,s):o(s))||s);return i&&s&&Q$(t,n,s),s};class ja extends lt{static{this.props={offLabel:"Off"}}get value(){return this.d.value}get disabled(){const{hasCaptions:t}=this.a.$state;return!t()}constructor(){super(),this.d=new cs,this.d.o=this.o.bind(this)}onSetup(){this.a=yt(),en(pe)&&(this.l=Xt(pe))}onConnect(t){super.onConnect?.(t),D(this.D.bind(this)),D(this.ma.bind(this)),D(this.Oa.bind(this))}getOptions(){const{offLabel:t}=this.$props,{textTracks:n}=this.a.$state;return[{value:"off",label:t},...n().filter(Le).map(i=>({track:i,label:i.label,value:this.xk(i)}))]}D(){this.d.value=this.na()}Oa(){const{offLabel:t}=this.$props,{textTrack:n}=this.a.$state,i=n();this.l?.Wb.set(i&&Le(i)&&i.mode==="showing"?i.label:t())}ma(){this.l?.Ma(this.disabled)}na(){const{textTrack:t}=this.a.$state,n=t();return n&&Le(n)&&n.mode==="showing"?this.xk(n):"off"}o(t,n){if(this.disabled)return;if(t==="off"){const s=this.a.textTracks.selected;if(s){const r=this.a.textTracks.indexOf(s);this.a.remote.changeTextTrackMode(r,"disabled",n),this.dispatch("change",{detail:null,trigger:n})}return}const i=this.a.textTracks.toArray().findIndex(s=>this.xk(s)===t);if(i>=0){const s=this.a.textTracks[i];this.a.remote.changeTextTrackMode(i,"showing",n),this.dispatch("change",{detail:s,trigger:n})}}xk(t){return t.id+":"+t.kind+"-"+t.label.toLowerCase()}}Ju([wt],ja.prototype,"value",1);Ju([wt],ja.prototype,"disabled",1);Ju([Zt],ja.prototype,"getOptions",1);var Z$=Object.defineProperty,tk=Object.getOwnPropertyDescriptor,Zu=(e,t,n,i)=>{for(var s=i>1?void 0:i?tk(t,n):t,r=e.length-1,o;r>=0;r--)(o=e[r])&&(s=(i?o(t,n,s):o(s))||s);return i&&s&&Z$(t,n,s),s};const ek=[.25,.5,.75,1,1.25,1.5,1.75,2];class Ka extends lt{static{this.props={normalLabel:"Normal",rates:ek}}get value(){return this.d.value}get disabled(){const{rates:t}=this.$props,{canSetPlaybackRate:n}=this.a.$state;return!n()||t().length===0}constructor(){super(),this.d=new cs,this.d.o=this.o.bind(this)}onSetup(){this.a=yt(),en(pe)&&(this.l=Xt(pe))}onConnect(t){D(this.D.bind(this)),D(this.Oa.bind(this)),D(this.ma.bind(this))}getOptions(){const{rates:t,normalLabel:n}=this.$props;return t().map(i=>({label:i===1?n:i+"",value:i.toString()}))}D(){this.d.value=this.na()}Oa(){const{normalLabel:t}=this.$props,{playbackRate:n}=this.a.$state,i=n();this.l?.Wb.set(i===1?t():i+"")}ma(){this.l?.Ma(this.disabled)}na(){const{playbackRate:t}=this.a.$state;return t().toString()}o(t,n){if(this.disabled)return;const i=+t;this.a.remote.changePlaybackRate(i,n),this.dispatch("change",{detail:i,trigger:n})}}Zu([wt],Ka.prototype,"value",1);Zu([wt],Ka.prototype,"disabled",1);Zu([Zt],Ka.prototype,"getOptions",1);var nk=Object.defineProperty,ik=Object.getOwnPropertyDescriptor,th=(e,t,n,i)=>{for(var s=i>1?void 0:i?ik(t,n):t,r=e.length-1,o;r>=0;r--)(o=e[r])&&(s=(i?o(t,n,s):o(s))||s);return i&&s&&nk(t,n,s),s};class qa extends lt{constructor(){super(),this.Dj=En(()=>{const{sort:t}=this.$props,{qualities:n}=this.a.$state;return qm(n(),t()==="descending")}),this.d=new cs,this.d.o=this.o.bind(this)}static{this.props={autoLabel:"Auto",hideBitrate:!1,sort:"descending"}}get value(){return this.d.value}get disabled(){const{canSetQuality:t,qualities:n}=this.a.$state;return!t()||n().length<=1}onSetup(){this.a=yt(),en(pe)&&(this.l=Xt(pe))}onConnect(t){D(this.D.bind(this)),D(this.ma.bind(this)),D(this.Oa.bind(this))}getOptions(){const{autoLabel:t,hideBitrate:n}=this.$props;return[{value:"auto",label:t},...this.Dj().map(i=>{const s=i.bitrate&&i.bitrate>=0?`${xe(i.bitrate/1e6,2)} Mbps`:null;return{quality:i,label:i.height+"p",value:this.le(i),bitrate:()=>n()?null:s}})]}D(){this.d.value=this.na()}Oa(){const{autoLabel:t}=this.$props,{autoQuality:n,quality:i}=this.a.$state,s=i()?i().height+"p":"";this.l?.Wb.set(n()?t()+(s?` (${s})`:""):s)}ma(){this.l?.Ma(this.disabled)}o(t,n){if(this.disabled)return;if(t==="auto"){this.a.remote.changeQuality(-1,n),this.dispatch("change",{detail:"auto",trigger:n});return}const{qualities:i}=this.a.$state,s=W(i).findIndex(r=>this.le(r)===t);if(s>=0){const r=W(i)[s];this.a.remote.changeQuality(s,n),this.dispatch("change",{detail:r,trigger:n})}}na(){const{quality:t,autoQuality:n}=this.a.$state;if(n())return"auto";const i=t();return i?this.le(i):"auto"}le(t){return t.height+"_"+t.bitrate}}th([wt],qa.prototype,"value",1);th([wt],qa.prototype,"disabled",1);th([Zt],qa.prototype,"getOptions",1);class sk extends lt{constructor(){super(...arguments),this.i=null,this.Pa=0,this.Vf=-1}static{this.props={disabled:!1,event:void 0,action:void 0}}onSetup(){this.a=yt();const{event:t,action:n}=this.$props;this.setAttributes({event:t,action:n})}onAttach(t){t.setAttribute("data-media-gesture",""),t.style.setProperty("pointer-events","none")}onConnect(t){this.i=this.a.player.el?.querySelector("[data-media-provider]"),D(this.Ej.bind(this))}Ej(){let t=this.$props.event(),n=this.$props.disabled();!this.i||!t||n||(/^dbl/.test(t)&&(t=t.split(/^dbl/)[1]),(t==="pointerup"||t==="pointerdown")&&this.a.$state.pointer()==="coarse"&&(t=t==="pointerup"?"touchend":"touchstart"),nt(this.i,t,this.Fj.bind(this),{passive:!1}))}Fj(t){if(this.$props.disabled()||Ed(t)&&(t.button!==0||this.a.activeMenu)||Co(t)&&this.a.activeMenu||Fu(t)||!this.Gj(t))return;if(t.MEDIA_GESTURE=!0,t.preventDefault(),!W(this.$props.event)?.startsWith("dbl"))this.Pa===0&&setTimeout(()=>{this.Pa===1&&this.Wf(t)},250);else if(this.Pa===1){queueMicrotask(()=>this.Wf(t)),clearTimeout(this.Vf),this.Pa=0;return}this.Pa===0&&(this.Vf=window.setTimeout(()=>{this.Pa=0},275)),this.Pa++}Wf(t){this.el.setAttribute("data-triggered",""),requestAnimationFrame(()=>{this.Hj()&&this.Ij(W(this.$props.action),t),requestAnimationFrame(()=>{this.el.removeAttribute("data-triggered")})})}Gj(t){if(!this.el)return!1;if(Ed(t)||Zx(t)||Co(t)){const n=Co(t)?t.changedTouches[0]??t.touches[0]:void 0,i=n?.clientX??t.clientX,s=n?.clientY??t.clientY,r=this.el.getBoundingClientRect(),o=s>=r.top&&s<=r.bottom&&i>=r.left&&i<=r.right;return t.type.includes("leave")?!o:o}return!0}Hj(){const t=this.a.player.el.querySelectorAll("[data-media-gesture][data-triggered]");return Array.from(t).sort((n,i)=>+getComputedStyle(i).zIndex-+getComputedStyle(n).zIndex)[0]===this.el}Ij(t,n){if(!t)return;const i=new Gt("will-trigger",{detail:t,cancelable:!0,trigger:n});if(this.dispatchEvent(i),i.defaultPrevented)return;const[s,r]=t.replace(/:([a-z])/,"-$1").split(":");t.includes(":fullscreen")?this.a.remote.toggleFullscreen("prefer-media",n):t.includes("seek:")?this.a.remote.seek(W(this.a.$state.currentTime)+(+r||0),n):this.a.remote[cT(s)](n),this.dispatch("trigger",{detail:t,trigger:n})}}class rk{constructor(t){this.S=t,this.priority=10,this.z=null,this.sa=fm()}attach(){}canRender(){return!0}detach(){this.sa.empty(),this.S.reset(),this.z=null}changeTrack(t){!t||this.z===t||(this.sa.empty(),t.readyState<2?(this.S.reset(),this.sa.add(nt(t,"load",()=>this.Xf(t),{once:!0}))):this.Xf(t),this.sa.add(nt(t,"add-cue",n=>{this.S.addCue(n.detail)}),nt(t,"remove-cue",n=>{this.S.removeCue(n.detail)})),this.z=t)}Xf(t){this.S.changeTrack({cues:[...t.cues],regions:[...t.regions]})}}let ok=class extends lt{constructor(){super(...arguments),this.Rn=-1}static{this.props={textDir:"ltr",exampleText:"Captions look like this."}}onSetup(){this.a=yt(),this.setAttributes({"aria-hidden":ke(this.lb.bind(this))})}onAttach(t){t.style.setProperty("pointer-events","none")}onConnect(t){const n=this.a.player;if(n&&nt(n,"vds-font-change",this.Wn.bind(this)),this.S){D(this.Yf.bind(this));return}j(()=>import("./prod-xF6WKuRG.js").then(i=>i.d),[]).then(i=>{this.connectScope&&De(()=>{this.W=i;const{CaptionsRenderer:s}=this.W;this.S=new s(t),this.Qa=new rk(this.S),D(this.Yf.bind(this))},this.connectScope)})}onDestroy(){this.Qa&&(this.Qa.detach(),this.a.textRenderers.remove(this.Qa)),this.S?.destroy()}lb(){const{textTrack:t,remotePlaybackState:n,iOSControls:i}=this.a.$state,s=t();return i()||n()==="connected"||!s||!Le(s)}Yf(){const{viewType:t}=this.a.$state;return t()==="audio"?this.Jj():this.Kj()}Jj(){return D(this._d.bind(this)),()=>{this.el.textContent=""}}_d(){if(this.lb())return;const{textTrack:t}=this.a.$state;this.Zf(),nt(t(),"cue-change",this.Zf.bind(this)),D(this.Lj.bind(this))}Zf(){this.el.textContent="",this.Rn>=0&&this.Sn();const{realCurrentTime:t,textTrack:n}=this.a.$state,{renderVTTCueString:i}=this.W,s=W(t),r=W(n).activeCues;for(const o of r){const a=this.Tn(),l=this.Un();l.innerHTML=i(o,s),a.append(l),this.el.append(l)}}Lj(){const{realCurrentTime:t}=this.a.$state,{updateTimedVTTCueNodes:n}=this.W;n(this.el,t())}Kj(){return D(this.Mj.bind(this)),D(this.Nj.bind(this)),this.a.textRenderers.add(this.Qa),()=>{this.el.textContent="",this.Qa.detach(),this.a.textRenderers.remove(this.Qa)}}Mj(){this.S.dir=this.$props.textDir()}Nj(){if(this.lb())return;const{realCurrentTime:t,textTrack:n}=this.a.$state;this.S.currentTime=t(),this.Rn>=0&&n()?.activeCues[0]&&this.Sn()}Wn(){if(this.Rn>=0){this.Vn();return}const{textTrack:t}=this.a.$state;t()?.activeCues[0]?this.S?.update(!0):this.Xn()}Xn(){const t=this.Tn();et(t,"data-example","");const n=this.Un();et(n,"data-example",""),n.textContent=this.$props.exampleText(),t?.append(n),this.el?.append(t),this.el?.setAttribute("data-example",""),this.Vn()}Vn(){window.clearTimeout(this.Rn),this.Rn=window.setTimeout(this.Sn.bind(this),2500)}Sn(){this.el?.removeAttribute("data-example"),this.el?.querySelector("[data-example]")&&(this.el.textContent=""),this.Rn=-1}Tn(){const t=document.createElement("div");return et(t,"data-part","cue-display"),t}Un(){const t=document.createElement("div");return et(t,"data-part","cue"),t}};class ak extends lt{constructor(){super(...arguments),this.wn=""}static{this.props={src:null,alt:null,crossOrigin:null}}static{this.state=new Ii({img:null,src:null,alt:null,crossOrigin:null,loading:!0,error:null,hidden:!1})}onSetup(){this.a=yt(),this.fd(),this.$k(),this.Hh(),this.ob()}onAttach(t){t.style.setProperty("pointer-events","none"),D(this.Ud.bind(this)),D(this.fd.bind(this)),D(this.$k.bind(this)),D(this.Hh.bind(this)),D(this.ob.bind(this));const{started:n}=this.a.$state;this.setAttributes({"data-visible":()=>!n()&&!this.$state.hidden(),"data-loading":this.Rb.bind(this),"data-error":this.wa.bind(this),"data-hidden":this.$state.hidden})}onConnect(t){D(this.Pk.bind(this)),D(this.Ea.bind(this))}wa(){const{error:t}=this.$state;return!Li(t())}Pk(){const{canLoadPoster:t,poster:n}=this.a.$state;!t()&&n()&&Yr(n(),"preconnect")}ob(){const{src:t}=this.$props,{poster:n,nativeControls:i}=this.a.$state;this.el&&et(this.el,"display",i()?"none":null),this.$state.hidden.set(this.wa()||!(t()||n())||i())}Rb(){const{loading:t,hidden:n}=this.$state;return!n()&&t()}Ud(){const t=this.$state.img();t&&(nt(t,"load",this.lc.bind(this)),nt(t,"error",this.U.bind(this)))}fd(){const{poster:t}=this.a.$props,{canLoadPoster:n,providedPoster:i,inferredPoster:s}=this.a.$state,r=this.$props.src()||"",o=r||t()||s();this.wn===i()&&i.set(r),this.$state.src.set(n()&&o.length?o:null),this.wn=r}$k(){const{src:t}=this.$props,{alt:n}=this.$state,{poster:i}=this.a.$state;n.set(t()||i()?this.$props.alt():null)}Hh(){const{crossOrigin:t}=this.$props,{crossOrigin:n}=this.$state,{crossOrigin:i,poster:s}=this.a.$state,r=t()!==null?t():i();n.set(/ytimg\.com|vimeo/.test(s()||"")?null:r===!0?"anonymous":r)}Ea(){const{loading:t,error:n}=this.$state,{canLoadPoster:i,poster:s}=this.a.$state;t.set(i()&&!!s()),n.set(null)}lc(){const{loading:t,error:n}=this.$state;t.set(!1),n.set(null)}U(t){const{loading:n,error:i}=this.$state;n.set(!1),i.set(t)}}class lk extends lt{constructor(){super(...arguments),this.cn=mt(null),this.Co=mt(!0),this.Do=mt(!0)}static{this.props={type:"current",showHours:!1,padHours:null,padMinutes:null,remainder:!1,toggle:!1,hidden:!1}}static{this.state=new Ii({timeText:"",hidden:!1})}onSetup(){this.a=yt(),this.ag();const{type:t}=this.$props;this.setAttributes({"data-type":t,"data-remainder":this.fn.bind(this)}),new Jm({callback:this.Eo.bind(this)}).attach(this)}onAttach(t){t.hasAttribute("role")||D(this.hn.bind(this)),D(this.ag.bind(this))}onConnect(t){Ct(Rm(t,this.Co.set)),D(this.ob.bind(this)),D(this.Go.bind(this))}Eo(t){this.Do.set(t[0].isIntersecting)}ob(){const{hidden:t}=this.$props;this.$state.hidden.set(t()||!this.Co()||!this.Do())}Go(){if(!this.$props.toggle()){this.cn.set(null);return}this.el&&Oi(this.el,this.gn.bind(this))}ag(){const{hidden:t,timeText:n}=this.$state,{duration:i}=this.a.$state;if(t())return;const{type:s,padHours:r,padMinutes:o,showHours:a}=this.$props,l=this.Oj(s()),c=i(),h=this.fn();if(!Number.isFinite(l+c)){n.set("LIVE");return}const u=h?Math.max(0,c-l):l,f=Fa(u,{padHrs:r(),padMins:o(),showHrs:a()});n.set((h?"-":"")+f)}hn(){if(!this.el)return;const{toggle:t}=this.$props;et(this.el,"role",t()?"timer":null),et(this.el,"tabindex",t()?0:null)}Oj(t){const{bufferedEnd:n,duration:i,currentTime:s}=this.a.$state;switch(t){case"buffered":return n();case"duration":return i();default:return s()}}fn(){return this.$props.remainder()&&this.cn()!==!1}gn(t){if(t.preventDefault(),this.cn()===null){this.cn.set(!this.$props.remainder());return}this.cn.set(n=>!n)}}class ck extends ut(HTMLElement,zm){constructor(){super(...arguments),this.A=null,this.Vj=null}static{this.tagName="media-provider"}onSetup(){this.a=yt(),this.setAttribute("keep-alive","")}onDestroy(){this.Vj?.remove(),this.Vj=null,this.A?.remove(),this.A=null}onConnect(){D(()=>{const t=this.$state.loader(),n=t?.name==="youtube",i=t?.name==="vimeo",s=n||i,r=t?.name==="google-cast",o=t?r?this.Sm():s?this.ek():t.mediaType()==="audio"?this.fk():this.Yj():null;if(this.A!==o){const a=this.A?.parentElement??this;this.A?.remove(),this.A=o,o&&a.prepend(o),s&&o&&D(()=>{const{nativeControls:l}=this.a.$state,c=l();c?(this.Vj?.remove(),this.Vj=null):(this.Vj=this.querySelector(".vds-blocker")??document.createElement("div"),this.Vj.classList.add("vds-blocker"),o.after(this.Vj)),et(o,"data-no-controls",!c)})}n?o?.classList.add("vds-youtube"):i&&o?.classList.add("vds-vimeo"),s||(this.Vj?.remove(),this.Vj=null),this.load(o)})}fk(){const t=this.A instanceof HTMLAudioElement?this.A:document.createElement("audio");et(t,"preload","none"),et(t,"aria-hidden","true");const{controls:n,crossOrigin:i}=this.a.$state;return D(()=>{et(t,"controls",n()),et(t,"crossorigin",i())}),t}Yj(){const t=this.A instanceof HTMLVideoElement?this.A:document.createElement("video"),{crossOrigin:n,poster:i,nativeControls:s}=this.a.$state,r=En(()=>s()?"true":null),o=En(()=>i()&&s()?i():null);return D(()=>{et(t,"controls",r()),et(t,"crossorigin",n()),et(t,"poster",o())}),t}ek(){const t=this.A instanceof HTMLIFrameElement?this.A:document.createElement("iframe"),{nativeControls:n}=this.a.$state;return D(()=>et(t,"tabindex",n()?null:-1)),t}Sm(){if(this.A?.classList.contains("vds-google-cast"))return this.A;const t=document.createElement("div");return t.classList.add("vds-google-cast"),j(()=>import("./vidstack-BcOhbc0p-UEWb2pYX.js"),__vite__mapDeps([17,3,4,5,6,7,8])).then(({insertContent:n})=>{n(t,this.a.$state)}),t}}class uk extends ut(HTMLElement,RC){static{this.tagName="media-player"}static{this.attrs={autoPlay:"autoplay",crossOrigin:"crossorigin",playsInline:"playsinline",preferNativeHLS:"prefer-native-hls",minLiveDVRWindow:"min-live-dvr-window"}}}ct(uk);ct(ck);class hk extends lt{onAttach(t){t.style.pointerEvents||He(t,"pointer-events","auto")}}class dk extends lt{constructor(){super(),new Sn}onConnect(t){Ct(si(()=>{if(!this.connectScope)return;this.Ja();const n=Xt(Es);Ct(()=>{const i=this.Cc();i&&n.Kd(i)})}))}Ja(){const t=this.Cc(),n=Xt(Es);t&&n.Jd(t)}Cc(){const t=this.el.firstElementChild;return t?.localName==="button"||t?.getAttribute("role")==="button"?t:this.el}}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Il;const la=window,Ms=la.trustedTypes,Qd=Ms?Ms.createPolicy("lit-html",{createHTML:e=>e}):void 0,wc="$lit$",wi=`lit$${(Math.random()+"").slice(9)}$`,sb="?"+wi,fk=`<${sb}>`,Zi=document,Ar=()=>Zi.createComment(""),Pr=e=>e===null||typeof e!="object"&&typeof e!="function",rb=Array.isArray,pk=e=>rb(e)||typeof e?.[Symbol.iterator]=="function",Dl=`[ 	
\f\r]`,sr=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Jd=/-->/g,Zd=/>/g,Fi=RegExp(`>|${Dl}(?:([^\\s"'>=/]+)(${Dl}*=${Dl}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),tf=/'/g,ef=/"/g,ob=/^(?:script|style|textarea|title)$/i,gk=e=>(t,...n)=>({_$litType$:e,strings:t,values:n}),mk=gk(1),Or=Symbol.for("lit-noChange"),Ee=Symbol.for("lit-nothing"),nf=new WeakMap,Hi=Zi.createTreeWalker(Zi,129,null,!1);function ab(e,t){if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return Qd!==void 0?Qd.createHTML(t):t}const bk=(e,t)=>{const n=e.length-1,i=[];let s,r=t===2?"<svg>":"",o=sr;for(let a=0;a<n;a++){const l=e[a];let c,h,u=-1,f=0;for(;f<l.length&&(o.lastIndex=f,h=o.exec(l),h!==null);)f=o.lastIndex,o===sr?h[1]==="!--"?o=Jd:h[1]!==void 0?o=Zd:h[2]!==void 0?(ob.test(h[2])&&(s=RegExp("</"+h[2],"g")),o=Fi):h[3]!==void 0&&(o=Fi):o===Fi?h[0]===">"?(o=s??sr,u=-1):h[1]===void 0?u=-2:(u=o.lastIndex-h[2].length,c=h[1],o=h[3]===void 0?Fi:h[3]==='"'?ef:tf):o===ef||o===tf?o=Fi:o===Jd||o===Zd?o=sr:(o=Fi,s=void 0);const g=o===Fi&&e[a+1].startsWith("/>")?" ":"";r+=o===sr?l+fk:u>=0?(i.push(c),l.slice(0,u)+wc+l.slice(u)+wi+g):l+wi+(u===-2?(i.push(void 0),a):g)}return[ab(e,r+(e[n]||"<?>")+(t===2?"</svg>":"")),i]};class Lr{constructor({strings:t,_$litType$:n},i){let s;this.parts=[];let r=0,o=0;const a=t.length-1,l=this.parts,[c,h]=bk(t,n);if(this.el=Lr.createElement(c,i),Hi.currentNode=this.el.content,n===2){const u=this.el.content,f=u.firstChild;f.remove(),u.append(...f.childNodes)}for(;(s=Hi.nextNode())!==null&&l.length<a;){if(s.nodeType===1){if(s.hasAttributes()){const u=[];for(const f of s.getAttributeNames())if(f.endsWith(wc)||f.startsWith(wi)){const g=h[o++];if(u.push(f),g!==void 0){const p=s.getAttribute(g.toLowerCase()+wc).split(wi),y=/([.?@])?(.*)/.exec(g);l.push({type:1,index:r,name:y[2],strings:p,ctor:y[1]==="."?vk:y[1]==="?"?_k:y[1]==="@"?Ek:Ga})}else l.push({type:6,index:r})}for(const f of u)s.removeAttribute(f)}if(ob.test(s.tagName)){const u=s.textContent.split(wi),f=u.length-1;if(f>0){s.textContent=Ms?Ms.emptyScript:"";for(let g=0;g<f;g++)s.append(u[g],Ar()),Hi.nextNode(),l.push({type:2,index:++r});s.append(u[f],Ar())}}}else if(s.nodeType===8)if(s.data===sb)l.push({type:2,index:r});else{let u=-1;for(;(u=s.data.indexOf(wi,u+1))!==-1;)l.push({type:7,index:r}),u+=wi.length-1}r++}}static createElement(t,n){const i=Zi.createElement("template");return i.innerHTML=t,i}}function Ns(e,t,n=e,i){var s,r,o,a;if(t===Or)return t;let l=i!==void 0?(s=n._$Co)===null||s===void 0?void 0:s[i]:n._$Cl;const c=Pr(t)?void 0:t._$litDirective$;return l?.constructor!==c&&((r=l?._$AO)===null||r===void 0||r.call(l,!1),c===void 0?l=void 0:(l=new c(e),l._$AT(e,n,i)),i!==void 0?((o=(a=n)._$Co)!==null&&o!==void 0?o:a._$Co=[])[i]=l:n._$Cl=l),l!==void 0&&(t=Ns(e,l._$AS(e,t.values),l,i)),t}class yk{constructor(t,n){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){var n;const{el:{content:i},parts:s}=this._$AD,r=((n=t?.creationScope)!==null&&n!==void 0?n:Zi).importNode(i,!0);Hi.currentNode=r;let o=Hi.nextNode(),a=0,l=0,c=s[0];for(;c!==void 0;){if(a===c.index){let h;c.type===2?h=new Zr(o,o.nextSibling,this,t):c.type===1?h=new c.ctor(o,c.name,c.strings,this,t):c.type===6&&(h=new Sk(o,this,t)),this._$AV.push(h),c=s[++l]}a!==c?.index&&(o=Hi.nextNode(),a++)}return Hi.currentNode=Zi,r}v(t){let n=0;for(const i of this._$AV)i!==void 0&&(i.strings!==void 0?(i._$AI(t,i,n),n+=i.strings.length-2):i._$AI(t[n])),n++}}class Zr{constructor(t,n,i,s){var r;this.type=2,this._$AH=Ee,this._$AN=void 0,this._$AA=t,this._$AB=n,this._$AM=i,this.options=s,this._$Cp=(r=s?.isConnected)===null||r===void 0||r}get _$AU(){var t,n;return(n=(t=this._$AM)===null||t===void 0?void 0:t._$AU)!==null&&n!==void 0?n:this._$Cp}get parentNode(){let t=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&t?.nodeType===11&&(t=n.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,n=this){t=Ns(this,t,n),Pr(t)?t===Ee||t==null||t===""?(this._$AH!==Ee&&this._$AR(),this._$AH=Ee):t!==this._$AH&&t!==Or&&this._(t):t._$litType$!==void 0?this.g(t):t.nodeType!==void 0?this.$(t):pk(t)?this.T(t):this._(t)}k(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}$(t){this._$AH!==t&&(this._$AR(),this._$AH=this.k(t))}_(t){this._$AH!==Ee&&Pr(this._$AH)?this._$AA.nextSibling.data=t:this.$(Zi.createTextNode(t)),this._$AH=t}g(t){var n;const{values:i,_$litType$:s}=t,r=typeof s=="number"?this._$AC(t):(s.el===void 0&&(s.el=Lr.createElement(ab(s.h,s.h[0]),this.options)),s);if(((n=this._$AH)===null||n===void 0?void 0:n._$AD)===r)this._$AH.v(i);else{const o=new yk(r,this),a=o.u(this.options);o.v(i),this.$(a),this._$AH=o}}_$AC(t){let n=nf.get(t.strings);return n===void 0&&nf.set(t.strings,n=new Lr(t)),n}T(t){rb(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let i,s=0;for(const r of t)s===n.length?n.push(i=new Zr(this.k(Ar()),this.k(Ar()),this,this.options)):i=n[s],i._$AI(r),s++;s<n.length&&(this._$AR(i&&i._$AB.nextSibling,s),n.length=s)}_$AR(t=this._$AA.nextSibling,n){var i;for((i=this._$AP)===null||i===void 0||i.call(this,!1,!0,n);t&&t!==this._$AB;){const s=t.nextSibling;t.remove(),t=s}}setConnected(t){var n;this._$AM===void 0&&(this._$Cp=t,(n=this._$AP)===null||n===void 0||n.call(this,t))}}class Ga{constructor(t,n,i,s,r){this.type=1,this._$AH=Ee,this._$AN=void 0,this.element=t,this.name=n,this._$AM=s,this.options=r,i.length>2||i[0]!==""||i[1]!==""?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=Ee}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,n=this,i,s){const r=this.strings;let o=!1;if(r===void 0)t=Ns(this,t,n,0),o=!Pr(t)||t!==this._$AH&&t!==Or,o&&(this._$AH=t);else{const a=t;let l,c;for(t=r[0],l=0;l<r.length-1;l++)c=Ns(this,a[i+l],n,l),c===Or&&(c=this._$AH[l]),o||(o=!Pr(c)||c!==this._$AH[l]),c===Ee?t=Ee:t!==Ee&&(t+=(c??"")+r[l+1]),this._$AH[l]=c}o&&!s&&this.j(t)}j(t){t===Ee?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}}class vk extends Ga{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===Ee?void 0:t}}const wk=Ms?Ms.emptyScript:"";class _k extends Ga{constructor(){super(...arguments),this.type=4}j(t){t&&t!==Ee?this.element.setAttribute(this.name,wk):this.element.removeAttribute(this.name)}}class Ek extends Ga{constructor(t,n,i,s,r){super(t,n,i,s,r),this.type=5}_$AI(t,n=this){var i;if((t=(i=Ns(this,t,n,0))!==null&&i!==void 0?i:Ee)===Or)return;const s=this._$AH,r=t===Ee&&s!==Ee||t.capture!==s.capture||t.once!==s.once||t.passive!==s.passive,o=t!==Ee&&(s===Ee||r);r&&this.element.removeEventListener(this.name,this,s),o&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var n,i;typeof this._$AH=="function"?this._$AH.call((i=(n=this.options)===null||n===void 0?void 0:n.host)!==null&&i!==void 0?i:this.element,t):this._$AH.handleEvent(t)}}class Sk{constructor(t,n,i){this.element=t,this.type=6,this._$AN=void 0,this._$AM=n,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(t){Ns(this,t)}}const sf=la.litHtmlPolyfillSupport;sf?.(Lr,Zr),((Il=la.litHtmlVersions)!==null&&Il!==void 0?Il:la.litHtmlVersions=[]).push("2.8.0");const xk=(e,t,n)=>{var i,s;const r=(i=n?.renderBefore)!==null&&i!==void 0?i:t;let o=r._$litPart$;if(o===void 0){const a=(s=n?.renderBefore)!==null&&s!==void 0?s:null;r._$litPart$=o=new Zr(t.insertBefore(Ar(),a),a,void 0,n??{})}return o._$AI(e),o};class Tk extends HTMLElement{constructor(){super(...arguments),this.rootPart=null}connectedCallback(){this.rootPart=xk(this.render(),this,{renderBefore:this.firstChild}),this.rootPart.setConnected(!0)}disconnectedCallback(){this.rootPart?.setConnected(!1),this.rootPart=null}}class Ck extends Wu{}const $k=Nm('<img loading="eager" decoding="async" aria-hidden="true">');class lb extends ut(HTMLElement,h$){constructor(){super(...arguments),this.Uj=this.gk()}static{this.tagName="media-thumbnail"}static{this.attrs={crossOrigin:"crossorigin"}}onSetup(){this.a=yt(),this.$state.img.set(this.Uj)}onConnect(){const{src:t,crossOrigin:n}=this.$state;this.Uj.parentNode!==this&&this.prepend(this.Uj),D(()=>{et(this.Uj,"src",t()),et(this.Uj,"crossorigin",n())})}gk(){return Fm($k)}}class kk extends ut(HTMLElement,lk){static{this.tagName="media-time"}onConnect(){D(()=>{this.textContent=this.$state.timeText()})}}class Ak extends ut(HTMLElement,ZC){static{this.tagName="media-airplay-button"}}class Pk extends ut(HTMLElement,n$){static{this.tagName="media-caption-button"}}class Ok extends ut(HTMLElement,i$){static{this.tagName="media-fullscreen-button"}}class Lk extends ut(HTMLElement,a$){static{this.tagName="media-live-button"}}class Ik extends ut(HTMLElement,s$){static{this.tagName="media-mute-button"}}class Dk extends ut(HTMLElement,r$){static{this.tagName="media-pip-button"}}class Rk extends ut(HTMLElement,e$){static{this.tagName="media-play-button"}}class Mk extends ut(HTMLElement,o$){static{this.tagName="media-seek-button"}}function Qs(e,t){si(()=>{if(!e.connectScope)return;const n=e.querySelector("template");n&&D(()=>{const i=e.getOptions();Bu(n,i.length,(s,r)=>{const{label:o,value:a}=i[r],l=s.querySelector('[data-part="label"]');s.setAttribute("value",a),l&&(pt(o)?l.textContent=o:D(()=>{l.textContent=o()})),t?.(s,i[r],r)})})})}class Nk extends ut(HTMLElement,Ua){static{this.tagName="media-audio-radio-group"}onConnect(){Qs(this)}}class Fk extends ut(HTMLElement,ja){static{this.tagName="media-captions-radio-group"}onConnect(){Qs(this)}}class Bk extends ut(HTMLElement,Xs){static{this.tagName="media-menu"}}class Hk extends ut(HTMLElement,Wu){static{this.tagName="media-menu-button"}}class Uk extends ut(HTMLElement,Ck){static{this.tagName="media-menu-item"}}class Vk extends ut(HTMLElement,F$){static{this.tagName="media-menu-items"}}class jk extends ut(HTMLElement,Ka){static{this.tagName="media-speed-radio-group"}onConnect(){Qs(this)}}class Kk extends ut(HTMLElement,qa){static{this.tagName="media-quality-radio-group"}onConnect(){Qs(this,(t,n)=>{const i=n.bitrate,s=t.querySelector('[data-part="bitrate"]');i&&s&&D(()=>{s.textContent=i()||""})})}}class qk extends lb{static{this.tagName="media-slider-thumbnail"}onSetup(){super.onSetup(),this.Q=zs(Xr.state)}onConnect(){super.onConnect(),D(this.ag.bind(this))}ag(){const{duration:t,clipStartTime:n}=this.a.$state;this.time=n()+this.Q.pointerRate()*t()}}class Gk extends ut(HTMLElement,tb){static{this.tagName="media-slider-value"}static{this.attrs={padMinutes:{converter:Cm}}}onConnect(){D(()=>{this.textContent=this.getValueText()})}}class Wk extends ut(HTMLElement,eb){static{this.tagName="media-time-slider"}}class zk extends ut(HTMLElement,y$){static{this.tagName="media-slider-preview"}}class Yk extends ut(HTMLElement,w$){static{this.tagName="media-volume-slider"}}class Xk extends ut(HTMLElement,ok){static{this.tagName="media-captions"}}class Qk extends ut(HTMLElement,sk){static{this.tagName="media-gesture"}}class Jk extends ut(HTMLElement,KC){static{this.tagName="media-announcer"}}class Zk extends ut(HTMLElement,qC){static{this.tagName="media-controls"}}class tA extends ut(HTMLElement,hk){static{this.tagName="media-controls-group"}}class eA extends lt{}class nA extends ut(HTMLElement,eA){static{this.tagName="media-title"}onSetup(){this.a=yt()}onConnect(){D(this.uc.bind(this))}uc(){const{title:t}=this.a.$state;this.textContent=t()}}class iA extends lt{static{this.props={defaultText:""}}}class sA extends ut(HTMLElement,iA){static{this.tagName="media-chapter-title"}onSetup(){this.a=yt(),this.Xj=mt("")}onConnect(){const t=this.a.textTracks;j1(t,"chapters",this.Xj.set),D(this.po.bind(this))}po(){const{defaultText:t}=this.$props;this.textContent=this.Xj()||t()}}let rA=class extends lt{static{this.props={size:96,trackWidth:8,fillPercent:50}}onConnect(t){si(()=>{if(!this.connectScope)return;const n=t.querySelector("svg"),i=n.firstElementChild,s=i.nextElementSibling;D(this.ea.bind(this,n,i,s))})}ea(t,n,i){const{size:s,trackWidth:r,fillPercent:o}=this.$props;et(t,"width",s()),et(t,"height",s()),et(n,"stroke-width",r()),et(i,"stroke-width",r()),et(i,"stroke-dashoffset",100-o())}};class oA extends ut(Tk,rA){static{this.tagName="media-spinner"}render(){return mk`
      <svg fill="none" viewBox="0 0 120 120" aria-hidden="true" data-part="root">
        <circle cx="60" cy="60" r="54" stroke="currentColor" data-part="track"></circle>
        <circle
          cx="60"
          cy="60"
          r="54"
          stroke="currentColor"
          pathLength="100"
          stroke-dasharray="100"
          data-part="track-fill"
        ></circle>
      </svg>
    `}}class aA extends lt{static{this.props={when:!1}}}class lA extends ut(HTMLElement,aA){static{this.tagName="media-layout"}onSetup(){this.a=yt()}onConnect(){D(this.Zm.bind(this))}Zm(){const t=this.firstElementChild,n=t?.localName==="template",i=this.$props.when();if(!(Yx(i)?i:En(()=>i(this.a.player.state))())){n?(this.textContent="",this.appendChild(t)):Ji(t)&&(t.style.display="none");return}n?this.append(t.content.cloneNode(!0)):Ji(t)&&(t.style.display="")}}class cA extends ut(HTMLElement,t$){static{this.tagName="media-google-cast-button"}}class uA extends ut(HTMLElement,Qm){static{this.tagName="media-toggle-button"}}class hA extends ut(HTMLElement,WC){static{this.tagName="media-tooltip"}}class dA extends ut(HTMLElement,dk){static{this.tagName="media-tooltip-trigger"}onConnect(){this.style.display="contents"}}class fA extends ut(HTMLElement,zC){static{this.tagName="media-tooltip-content"}}class pA extends ut(HTMLElement,N$){static{this.tagName="media-menu-portal"}static{this.attrs={disabled:{converter(t){return pt(t)?t:t!==null}}}}}class gA extends ut(HTMLElement,Ha){static{this.tagName="media-chapters-radio-group"}onConnect(){Qs(this,(t,n)=>{const{cue:i,startTime:s,duration:r}=n,o=t.querySelector(".vds-thumbnail,media-thumbnail"),a=t.querySelector('[data-part="start-time"]'),l=t.querySelector('[data-part="duration"]');a&&(a.textContent=s),l&&(l.textContent=r),o&&(o.setAttribute("time",i.startTime+""),D(()=>{const c=this.$props.thumbnails();"src"in o?o.src=c:pt(c)&&o.setAttribute("src",c)}))})}}class mA extends ut(HTMLElement,Va){static{this.tagName="media-audio-gain-radio-group"}onConnect(){Qs(this)}}class bA extends ut(HTMLElement,ib){static{this.tagName="media-radio"}}class yA extends ut(HTMLElement,zu){static{this.tagName="media-radio-group"}}class vA extends ut(HTMLElement,Xr){static{this.tagName="media-slider"}}const wA=Nm('<video muted playsinline preload="none" style="max-width: unset;"></video>');class _A extends ut(HTMLElement,Zm){constructor(){super(...arguments),this.m=this.Yj()}static{this.tagName="media-slider-video"}onSetup(){this.a=yt(),this.$state.video.set(this.m)}onConnect(){const{canLoad:t}=this.a.$state,{src:n,crossOrigin:i}=this.$state;this.m.parentNode!==this&&this.prepend(this.m),D(()=>{et(this.m,"crossorigin",i()),et(this.m,"preload",t()?"auto":"none"),et(this.m,"src",n())})}Yj(){return Fm(wA)}}class EA extends ut(HTMLElement,_$){static{this.tagName="media-audio-gain-slider"}}class SA extends ut(HTMLElement,E$){static{this.tagName="media-speed-slider"}}class xA extends ut(HTMLElement,S$){static{this.tagName="media-quality-slider"}}class TA extends ut(HTMLElement,Qr){constructor(){super(...arguments),this.$j=null}static{this.tagName="media-slider-chapters"}onConnect(){si(()=>{if(!this.connectScope)return;const t=this.querySelector("template");t&&(this.$j=t,D(this.jk.bind(this)))})}jk(){if(!this.$j)return;const t=Bu(this.$j,this.cues.length||1);this.setRefs(t)}}class CA extends lt{}class $A extends ut(HTMLElement,CA){constructor(){super(...arguments),this.$j=null}static{this.tagName="media-slider-steps"}onConnect(t){si(()=>{this.connectScope&&(this.$j=t.querySelector("template"),this.$j&&D(this._j.bind(this)))})}_j(){if(!this.$j)return;const{min:t,max:n,step:i}=zs(ls),s=(n()-t())/i();Bu(this.$j,Math.floor(s)+1)}}class kA extends ut(HTMLElement,ak){constructor(){super(...arguments),this.Uj=document.createElement("img")}static{this.tagName="media-poster"}static{this.attrs={crossOrigin:"crossorigin"}}onSetup(){this.$state.img.set(this.Uj)}onConnect(){const{src:t,alt:n,crossOrigin:i}=this.$state;this.Uj.parentNode!==this&&this.prepend(this.Uj),D(()=>{et(this.Uj,"alt",n()),et(this.Uj,"crossorigin",i()),et(this.Uj,"src",t()||"")}),D(()=>{const{loading:s,hidden:r}=this.$state;this.Uj.style.display=s()||r()?"none":""})}}ct(lA);ct(Zk);ct(tA);ct(kA);ct(Jk);ct(hA);ct(dA);ct(fA);ct(Rk);ct(Ik);ct(Pk);ct(Ok);ct(Dk);ct(Mk);ct(Ak);ct(cA);ct(uA);ct(vA);ct(EA);ct(Yk);ct(Wk);ct(SA);ct(xA);ct(TA);ct($A);ct(zk);ct(Gk);ct(qk);ct(_A);ct(Bk);ct(Hk);ct(pA);ct(Vk);ct(Uk);ct(Nk);ct(Fk);ct(jk);ct(mA);ct(Kk);ct(gA);ct(yA);ct(bA);ct(Qk);ct(lb);ct(Xk);ct(Lk);ct(kk);ct(nA);ct(sA);ct(oA);const rf={accessibility:()=>j(()=>import("./accessibility-DjiE92jU.js"),[]),"add-note":()=>j(()=>import("./add-note-CB3Hevy1.js"),[]),"add-playlist":()=>j(()=>import("./add-playlist-D_YmbdXa.js"),[]),"add-user":()=>j(()=>import("./add-user-uHvyAbP3.js"),[]),add:()=>j(()=>import("./add-Cmv-SCyN.js"),[]),airplay:()=>j(()=>import("./airplay-3m6E6Ypa.js"),[]),"arrow-collapse-in":()=>j(()=>import("./arrow-collapse-in-BPj9McHW.js"),[]),"arrow-collapse":()=>j(()=>import("./arrow-collapse-mz864Lnd.js"),[]),"arrow-down":()=>j(()=>import("./arrow-down-acJKCi-v.js"),[]),"arrow-expand-out":()=>j(()=>import("./arrow-expand-out-ChPptQRL.js"),[]),"arrow-expand":()=>j(()=>import("./arrow-expand-Cd3s76yi.js"),[]),"arrow-left":()=>j(()=>import("./arrow-left-CNFdBmQP.js"),[]),"arrow-right":()=>j(()=>import("./arrow-right-BAc6s4aX.js"),[]),"arrow-up":()=>j(()=>import("./arrow-up-CdTSqevr.js"),[]),bookmark:()=>j(()=>import("./bookmark-CcE10jmS.js"),[]),camera:()=>j(()=>import("./camera-BmcmKPFq.js"),[]),chapters:()=>j(()=>import("./chapters-BJzKhk5K.js"),[]),"chat-collapse":()=>j(()=>import("./chat-collapse-DcgzQkeA.js"),[]),chat:()=>j(()=>import("./chat-rJPjJpHY.js"),[]),check:()=>j(()=>import("./check-CI8oJXdf.js"),[]),"chevron-down":()=>j(()=>import("./chevron-down-tcut3DrG.js"),[]),"chevron-left":()=>j(()=>import("./chevron-left-DUiAr27P.js"),[]),"chevron-right":()=>j(()=>import("./chevron-right-BDmDOmk-.js"),[]),"chevron-up":()=>j(()=>import("./chevron-up-ChiUsEE6.js"),[]),chromecast:()=>j(()=>import("./chromecast-B1LA_ydy.js"),[]),clip:()=>j(()=>import("./clip-BKqni9nz.js"),[]),"closed-captions-on":()=>j(()=>import("./closed-captions-on-qxaMvU0J.js"),[]),"closed-captions":()=>j(()=>import("./closed-captions-TqOIQ9ix.js"),[]),comment:()=>j(()=>import("./comment-DXdlv8uD.js"),[]),computer:()=>j(()=>import("./computer-BVwv9sEX.js"),[]),device:()=>j(()=>import("./device-B-ZgnNBC.js"),[]),download:()=>j(()=>import("./download-wgEj5i5p.js"),[]),episodes:()=>j(()=>import("./episodes-BPmRrQQ5.js"),[]),eye:()=>j(()=>import("./eye-Bnmhlpa6.js"),[]),"fast-backward":()=>j(()=>import("./fast-backward-CBve8Rej.js"),[]),"fast-forward":()=>j(()=>import("./fast-forward-CtujfR1i.js"),[]),flag:()=>j(()=>import("./flag-CcBkd1JD.js"),[]),"fullscreen-arrow-exit":()=>j(()=>import("./fullscreen-arrow-exit-BQFX6f6r.js"),[]),"fullscreen-arrow":()=>j(()=>import("./fullscreen-arrow-CCu4TGbU.js"),[]),"fullscreen-exit":()=>j(()=>import("./fullscreen-exit-DcSh831g.js"),[]),fullscreen:()=>j(()=>import("./fullscreen-Dy0U0iji.js"),[]),heart:()=>j(()=>import("./heart-DdnFVPb9.js"),[]),info:()=>j(()=>import("./info-CyqTF302.js"),[]),language:()=>j(()=>import("./language-Tqe387h7.js"),[]),link:()=>j(()=>import("./link-wFIF7dHJ.js"),[]),"lock-closed":()=>j(()=>import("./lock-closed-B0lBkjkO.js"),[]),"lock-open":()=>j(()=>import("./lock-open-DW35Z8lA.js"),[]),"menu-horizontal":()=>j(()=>import("./menu-horizontal-BNjVaBVb.js"),[]),"menu-vertical":()=>j(()=>import("./menu-vertical-DbnZs8Qd.js"),[]),microphone:()=>j(()=>import("./microphone-Cl5y9FHz.js"),[]),mobile:()=>j(()=>import("./mobile-BiVvlyLO.js"),[]),moon:()=>j(()=>import("./moon-Bkm6LHzz.js"),[]),"music-off":()=>j(()=>import("./music-off-BC2v8AZw.js"),[]),music:()=>j(()=>import("./music-CrzOb980.js"),[]),mute:()=>j(()=>import("./mute-DdQsNfva.js"),[]),next:()=>j(()=>import("./next-CHFFTtD3.js"),[]),"no-eye":()=>j(()=>import("./no-eye-PCZgmut2.js"),[]),notification:()=>j(()=>import("./notification-BmkhcbPG.js"),[]),odometer:()=>j(()=>import("./odometer-sfPQitua.js"),[]),pause:()=>j(()=>import("./pause-PukjMdyY.js"),[]),"picture-in-picture-exit":()=>j(()=>import("./picture-in-picture-exit-RFWjj5NA.js"),[]),"picture-in-picture":()=>j(()=>import("./picture-in-picture-M6QVQ4w1.js"),[]),play:()=>j(()=>import("./play-B8m0QCe9.js"),[]),"playback-speed-circle":()=>j(()=>import("./playback-speed-circle-CDFS3zgo.js"),[]),playlist:()=>j(()=>import("./playlist-_nr-c6-Q.js"),[]),previous:()=>j(()=>import("./previous-D2Z3qoqi.js"),[]),"question-mark":()=>j(()=>import("./question-mark-C8NgGo0g.js"),[]),"queue-list":()=>j(()=>import("./queue-list-CdXMTaMT.js"),[]),"radio-button-selected":()=>j(()=>import("./radio-button-selected-DI2lon3H.js"),[]),"radio-button":()=>j(()=>import("./radio-button-BPDO0dMV.js"),[]),"repeat-on":()=>j(()=>import("./repeat-on-B8KoWzao.js"),[]),"repeat-square-on":()=>j(()=>import("./repeat-square-on-DzL9lYz9.js"),[]),"repeat-square":()=>j(()=>import("./repeat-square-DmDeZy47.js"),[]),repeat:()=>j(()=>import("./repeat-Ba3lv6oa.js"),[]),replay:()=>j(()=>import("./replay-BJDDLFpK.js"),[]),rotate:()=>j(()=>import("./rotate-BLEofAUp.js"),[]),search:()=>j(()=>import("./search-BCZ9Mwnd.js"),[]),"seek-backward-10":()=>j(()=>import("./seek-backward-10-giZQxmZK.js"),[]),"seek-backward-15":()=>j(()=>import("./seek-backward-15-B2PnZz_B.js"),[]),"seek-backward-30":()=>j(()=>import("./seek-backward-30-CxzCnLhk.js"),[]),"seek-backward":()=>j(()=>import("./seek-backward-CWcW2Vwr.js"),[]),"seek-forward-10":()=>j(()=>import("./seek-forward-10-BYBktBbw.js"),[]),"seek-forward-15":()=>j(()=>import("./seek-forward-15-BXe7ljrk.js"),[]),"seek-forward-30":()=>j(()=>import("./seek-forward-30-DUm4wcPl.js"),[]),"seek-forward":()=>j(()=>import("./seek-forward-B46dtu-v.js"),[]),send:()=>j(()=>import("./send-DeVbnYAw.js"),[]),"settings-menu":()=>j(()=>import("./settings-menu-5tQEZXBe.js"),[]),"settings-switch":()=>j(()=>import("./settings-switch-CJTPgUI2.js"),[]),settings:()=>j(()=>import("./settings-FBY7Wkg9.js"),[]),"share-arrow":()=>j(()=>import("./share-arrow-ByZgO3QG.js"),[]),share:()=>j(()=>import("./share-CSm-whZf.js"),[]),"shuffle-on":()=>j(()=>import("./shuffle-on-DVmEBPft.js"),[]),shuffle:()=>j(()=>import("./shuffle-ClSi1Fql.js"),[]),stop:()=>j(()=>import("./stop-D89B0duj.js"),[]),subtitles:()=>j(()=>import("./subtitles-CDBIGlDh.js"),[]),sun:()=>j(()=>import("./sun-B8T3nQ4V.js"),[]),"theatre-mode-exit":()=>j(()=>import("./theatre-mode-exit-BmBLN7-m.js"),[]),"theatre-mode":()=>j(()=>import("./theatre-mode-BMKyqdUC.js"),[]),"thumbs-down":()=>j(()=>import("./thumbs-down-D60oRObP.js"),[]),"thumbs-up":()=>j(()=>import("./thumbs-up-q6yMAapI.js"),[]),timer:()=>j(()=>import("./timer-DqnaNK2p.js"),[]),transcript:()=>j(()=>import("./transcript-Bw1LAr77.js"),[]),tv:()=>j(()=>import("./tv-NwWTAkv5.js"),[]),user:()=>j(()=>import("./user-DPeRjQiZ.js"),[]),"volume-high":()=>j(()=>import("./volume-high-C6Zvmyx2.js"),[]),"volume-low":()=>j(()=>import("./volume-low-CU89z9az.js"),[]),"x-mark":()=>j(()=>import("./x-mark-CJqJHIux.js"),[])};function AA(e){const t=document.createElement("template");return t.innerHTML=e,t.content}function PA(e){return e.cloneNode(!0).firstElementChild}const OA=AA('<svg width="100%" height="100%" viewBox="0 0 32 32" fill="none" aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg"></svg>');class of extends HTMLElement{constructor(){super(...arguments),this._svg=this._createSVG(),this._type=null}static{this.tagName="media-icon"}static get observedAttributes(){return["type"]}get type(){return this._type}set type(t){this._type!==t&&(t?this.setAttribute("type",t):this.removeAttribute("type"),this._onTypeChange(t))}attributeChangedCallback(t,n,i){if(t==="type"){const s=i||null;this._type!==s&&this._onTypeChange(s)}}connectedCallback(){this.classList.add("vds-icon"),this._svg.parentNode!==this&&this.prepend(this._svg)}_createSVG(){return PA(OA)}_loadIcon(){const t=this._type;t&&rf[t]?rf[t]().then(({default:n})=>{t===this._type&&this._onPathsChange(n)}):this._onPathsChange("")}_onTypeChange(t){this._type=t,this._loadIcon()}_onPathsChange(t){this._svg.innerHTML=t}}window.customElements.define(of.tagName,of);async function LA(e,t){const n=await fetch(e),i=IA(await n.text(),t),s=new Blob([i],{type:"text/plain"});return{srtUrl:URL.createObjectURL(s),srtText:i}}function IA(e,t){const n=e.match(/ttp:frameRate="(\d+)"/),i=e.match(/ttp:frameRateMultiplier="(\d+) (\d+)"/),s=n?parseInt(n[1],10):0,r=i?parseInt(i[1],10):1,o=i?parseInt(i[2],10):1;let a=s*r/o;a=t??a,Number.isInteger(a)||(a=parseFloat(a.toFixed(3)));const l=e.match(/ttp:frameRate="ttp:subFrameRate="(\d+)"/),c=l?parseInt(l[1],10):1,h=e.match(/ttp:tickRate="(\d+)"/),u=h?parseInt(h[1],10):1,f=a>0?a:`UNKNOWN
[WARN] TIMING MAY BE INCORRECT`;console.info(`[INFO] FRAMERATE IS ${f}`);let g="",p=0,y="",x="";const S=new RegExp("<p (.*?)>(.*?)</p>","g");let E;for(;(E=S.exec(e))!==null;){const[b,_,w]=E,T=_.trim().match(/[^\s]*="?[^"]*/g).map(A=>A.split("=")).reduce((A,[O,M])=>(A[O]=(M||"").replace(/^"/,""),A),{});if(!T.begin||!T.end){console.warn("[WARN] Some string was not parsed, start/end time attribute was missing!");continue}const C=af(T.begin,a,c,u),$=af(T.end,a,c,u),I=w.replace(/<\/br>/g,"").replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/<span>(.*?)<\/span>/g,"$1").replace(/(<br.*?>)+/g,`\r
`).replace(/<[^>]*\/>/g,"").replace(/<(\S*?) (.*?)>(.*?)<\/.*?>/g,DA);I.trim()!==""&&(x=`${C} --> ${$}`,y!==x?(y=x,p++,g!==""&&(g+=`\r
\r
`),g+=`${p}\r
${x}\r
`):g+=`\r
`,g+=I)}return g+=`\r
\r
`,`\uFEFF${g}`}function af(e,t,n,i){let s=e.match(/(\d*:\d*:\d*)(.*)$/);if(!s){s=e.match(/([0-9.]*)(.*)/);const o={h:3600,m:60,s:1,ms:.001,f:1/t,t:1/i};let a=parseFloat(s[1])*o[s[2]||""],l=Math.floor(a/3600).toString().padStart(2,"0"),c=Math.floor(a%3600/60).toString().padStart(2,"0"),h=Math.floor(a%60).toString().padStart(2,"0"),u=Math.round((a-Math.floor(a))*1e3).toString().padEnd(3,"0").slice(0,3);return`${l}:${c}:${h},${u}`}let r=s[2]||"";if(r.length===0)return`${s[1]},000`;if(r[0]==="."){let o=r.slice(1).padEnd(3,"0").slice(0,3);return`${s[1]},${o}`}if(r[0]===":"){let o=r.slice(1).split("."),a=parseInt(o[0]);o.length>1&&(a+=parseInt(o[1])/n);let l=Math.floor(a*1e3/t).toString().padEnd(3,"0").slice(0,3);return`${s[1]},${l}`}return`${s[1]},000`}function DA(e,t,n,i){if(t!=="span")return i;const s=n.replace(/\s*=\s*/g,"=").split(" ").filter(o=>o.trim()),r={};for(const o of s){let a;if(a=o.match(/tts:color="(.*?)"/)){r.color=a[1];continue}switch(o){case'tts:fontStyle="italic"':r.fontStyle="italic";break;case'tts:textDecoration="underline"':r.textDecoration="underline";break;case'tts:fontWeight="bold"':r.fontWeight="bold";break}}return r.color&&(i=`<font color="${r.color}">${i.trim()}</font>`),r.fontStyle&&(i=`<i>${i.trim()}</i>`),r.textDecoration&&(i=`<u>${i.trim()}</u>`),r.fontWeight&&(i=`<b>${i.trim()}</b>`),i}let lf=class{value;next=null;prev=null;constructor(t){this.value=t}};class cb{head=G(null);tail=G(null);current=G(null);_length=G(0);videoIdSet=new Set;get currentVideo(){return this.current[0]()?.value}get uniqueIds(){return Array.from(this.videoIdSet)}constructor(t=[]){t.forEach(n=>this.add(n))}[Symbol.iterator](){let t=this.head[0]()?.value;return{next:()=>{if(t){const n=t;return t=this.head[0]()?.next?.value,{value:n,done:!1}}else return{value:void 0,done:!0}}}}add(t){const n=Wn(t);if(console.log("adding",n),!n||this.videoIdSet.has(n))return;const i=new lf(t),s=this.tail[0]();return s?(console.log("tail",s),s.next=i,i.prev=s,this.tail[1](i)):(console.log("no tail",s),this.head[1](i),this.tail[1](i),this.current[0]()||this.current[1](i)),this.videoIdSet.add(n),this._length[1](this._length[0]()+1),i.value}list(){const t=[];let n=this.head[0]();for(;n;)t.push(n.value),n=n.next;return t}enqueueNext(t){const n=Wn(t);if(!n||this.videoIdSet.has(n))return;const i=this.current[0]();if(!i){this.add(t);return}const s=new lf(t),r=i.next;i.next=s,s.prev=i,s.next=r,r&&(r.prev=s),i===this.tail[0]()&&this.tail[1](s),this.videoIdSet.add(n),this._length[1](this._length[0]()+1)}next(){const t=this.current[0]();return t?.next?(this.current[1](t.next),t.next.value):null}peekNext(){return this.current[0]()?.next?.value||null}prev(){const t=this.current[0]();return t?.prev?(this.current[1](t.prev),t.prev.value):null}peekPrev(){return this.current[0]()?.prev?.value||null}length(){return this._length[0]()}has(t){return this.videoIdSet.has(t)}isEmpty(){return this._length[0]()===0}setCurrentVideo(t){let n=this.head[0]();for(;n;){if(Wn(n.value)===t)return this.current[1](n),!0;n=n.next}return!1}remove(t){let n=this.head[0]();for(;n;){if(Wn(n.value)===t)return n.prev&&(n.prev.next=n.next),n.next&&(n.next.prev=n.prev),n===this.head[0]()&&this.head[1](n.next),n===this.tail[0]()&&this.tail[1](n.prev),n===this.current[0]()&&this.current[1](n.next),this._length[1](this._length[0]()-1),!0;n=n.next}return this.videoIdSet.delete(t),!1}clear(){this.head[1](null),this.tail[1](null),this.current[1](null),this._length[1](0),this.videoIdSet.clear()}getTotalDuration(){let t=this.head[0](),n=0;for(;t;)n+=t.value.duration,t=t.next;return n}}const ub=ue(new cb);function bL(e){const t=new cb;return L(ub.Provider,{value:t,get children(){return e.children}})}function RA(){const e=ce(ub);if(!e)throw new Error("useQueue must be used within a QueueProvider");return e}const MA="_controls_1xob6_1",NA={controls:MA};var FA=it("<media-tooltip><media-tooltip-trigger></media-tooltip-trigger><media-tooltip-content>",!0,!1);function BA(e){const t=()=>e.placement.includes("bottom");return(()=>{var n=Z(FA),i=n.firstChild,s=i.nextSibling;return n._$owner=ne(),i._$owner=ne(),Q(i,()=>e.triggerSlot),s._$owner=ne(),Q(s,()=>e.contentSlot),ie(r=>{var o=e.class,a={"tooltip animate-out fade-out slide-out-to-bottom-2 data-[visible]:animate-in data-[visible]:fade-in data-[visible]:slide-in-from-bottom-4 z-10 rounded-sm bg-black/90 px-2 py-0.5 text-sm font-medium text-white":!0,"!top-12":t()},l=e.placement;return o!==r.e&&xc(n,r.e=o),r.t=vn(s,a,r.t),l!==r.a&&Bi(s,"placement",r.a=l),r},{e:void 0,t:void 0,a:void 0}),n})()}var HA=it('<media-play-button class="ring-primary relative inline-flex h-10 w-10 cursor-pointer items-center justify-center rounded-md outline-none ring-inset hover:bg-white/20 data-[focus]:ring-4"><media-icon class="media-paused:block hidden h-8 w-8"type=play></media-icon><media-icon class="media-paused:hidden h-8 w-8"type=pause>',!0,!1),UA=it('<span class="media-paused:block hidden">Play'),VA=it("<span class=media-paused:hidden>Pause");function jA(e){return L(BA,{get placement(){return e.tooltipPlacement},get triggerSlot(){return(()=>{var t=Z(HA),n=t.firstChild,i=n.nextSibling;return t._$owner=ne(),n._$owner=ne(),i._$owner=ne(),t})()},get contentSlot(){return[Z(UA),Z(VA)]}})}const KA="_captions_jw0nu_1",qA={captions:KA};var GA=it("<media-captions>",!0,!1);function WA(){return(()=>{var e=Z(GA);return e._$owner=ne(),ie(()=>xc(e,`${qA.captions} media-preview:opacity-0 media-controls:bottom-[85px] media-captions:opacity-100 absolute inset-0 bottom-2 z-10 select-none break-words opacity-0 transition-[opacity,bottom] duration-300`)),e})()}var zA=it('<media-gesture class="absolute inset-0 z-0 block h-full w-full"event=dblpointerup action=toggle:paused>',!0,!1),YA=it('<media-gesture class="absolute inset-0 z-0 block h-full w-full"event=pointerup action=toggle:controls>',!0,!1),XA=it('<media-gesture class="absolute left-0 top-0 z-10 block h-full w-1/5"event=dblpointerup action=seek:-10>',!0,!1),QA=it('<media-gesture class="absolute right-0 top-0 z-10 block h-full w-1/5"event=dblpointerup action=seek:10>',!0,!1);function JA(){return[(()=>{var e=Z(zA);return e._$owner=ne(),e})(),(()=>{var e=Z(YA);return e._$owner=ne(),e})(),(()=>{var e=Z(XA);return e._$owner=ne(),e})(),(()=>{var e=Z(QA);return e._$owner=ne(),e})()]}var ZA=it('<media-slider-chapters class="relative flex h-full w-full items-center rounded-[1px]"><template>',!0,!1),tP=it('<div class="last-child:mr-0 relative mr-0.5 flex h-full w-full items-center rounded-[1px]"><div class="ring-primary relative z-0 h-[5px] w-full rounded-sm bg-white/30 group-data-[focus]:ring-[3px]"><div class="bg-primary z-10 absolute h-full w-[var(--chapter-fill)] rounded-sm will-change-[width]"></div><div class="absolute z-0 h-full w-[var(--chapter-progress)] rounded-sm bg-white/50 will-change-[width]">');function eP(){return(()=>{var e=Z(ZA),t=e.firstChild;return e._$owner=ne(),Q(t,L(nP,{})),e})()}function nP(){return(()=>{var e=Z(tP);return e.style.setProperty("contain","layout style"),e})()}var iP=it('<media-slider-thumbnail class="block h-[var(--thumbnail-height)] max-h-[160px] min-h-[80px] w-[var(--thumbnail-width)] min-w-[120px] max-w-[180px] overflow-hidden border border-white bg-black">',!0,!1),sP=it('<media-slider-preview class="flex flex-col pointer-events-none items-center opacity-0 transition-opacity duration-200 data-[visible]:opacity-100"><!$><!/><!$><!/>',!0,!1);function rP(e){return(()=>{var t=Z(sP),n=t.firstChild,[i,s]=ht(n.nextSibling),r=i.nextSibling,[o,a]=ht(r.nextSibling);return t._$owner=ne(),Q(t,L(Et,{get when(){return e?.thumbnails},get children(){var l=Z(iP);return l._$owner=ne(),ie(()=>Bi(l,"src",e?.thumbnails)),l}}),i,s),Q(t,()=>e?.children,o,a),ie(()=>Bi(t,"noclamp",e?.noClamp)),t})()}var oP=it('<div class="absolute left-[var(--slider-fill)] top-1/2 z-20 h-[15px] w-[15px] -translate-x-1/2 -translate-y-1/2 rounded-full border border-[#cacaca] bg-white opacity-0 ring-white/40 transition-opacity group-data-[active]:opacity-100 group-data-[dragging]:ring-4 will-change-[left]">');function aP(){return Z(oP)}var lP=it('<div class="mt-2 text-sm"data-part=chapter-title>'),cP=it("<media-slider-value class=text-[13px] type=pointer format=time>",!0,!1),uP=it('<media-time-slider class="group relative mx-[7.5px] inline-flex h-1 mb-2 py-2 w-full cursor-pointer touch-none select-none items-center outline-none"><!$><!/><!$><!/><!$><!/>',!0,!1);function hP(e){return(()=>{var t=Z(uP),n=t.firstChild,[i,s]=ht(n.nextSibling),r=i.nextSibling,[o,a]=ht(r.nextSibling),l=o.nextSibling,[c,h]=ht(l.nextSibling);return t._$owner=ne(),Q(t,L(eP,{}),i,s),Q(t,L(aP,{}),o,a),Q(t,L(rP,{get thumbnails(){return e.thumbnails},get children(){return[Z(lP),(()=>{var u=Z(cP);return u._$owner=ne(),u})()]}}),c,h),t})()}var dP=it('<div><!$><!/><!$><!/><media-controls><div class=flex-1></div><media-controls-group class="flex w-full items-center px-2"></media-controls-group><media-controls-group class="-mt-0.5 flex w-full items-center px-2 pb-2">',!0,!1);function fP(e){return(()=>{var t=Z(dP),n=t.firstChild,[i,s]=ht(n.nextSibling),r=i.nextSibling,[o,a]=ht(r.nextSibling),l=o.nextSibling,c=l.firstChild,h=c.nextSibling,u=h.nextSibling;return Q(t,L(JA,{}),i,s),Q(t,L(WA,{}),o,a),l._$owner=ne(),h._$owner=ne(),Q(h,L(hP,{get thumbnails(){return e.thumbnails}})),u._$owner=ne(),Q(u,L(jA,{tooltipPlacement:"top start"})),ie(f=>{var g=e.classList,p=`${NA.controls} font-sans media-controls:opacity-100 invisible media-controls:visible  absolute inset-0 z-10 flex h-full w-full flex-col bg-gradient-to-t from-black/10 to-transparent opacity-0 transition-opacity`;return f.e=vn(t,g,f.e),p!==f.t&&xc(l,f.t=p),f},{e:void 0,t:void 0}),t})()}function hb(){try{return window.localStorage!==void 0&&localStorage,!0}catch{return!1}}function pP(e,t,n="localStorage"){if(!(typeof window>"u")&&hb())switch(n){case"localStorage":localStorage.setItem(e,JSON.stringify(t));break;case"sessionStorage":sessionStorage.setItem(e,JSON.stringify(t));break;default:throw new Error(`Invalid storage: ${n}`)}}function gP(e,t,n="string",i){if(typeof window>"u")return t;const s=new URLSearchParams(window.location.search).get(e),r=i==="localStorage"&&hb()?localStorage.getItem(e):sessionStorage.getItem(e),o=s!==null?s:r;if(o!==null)switch(n){case"boolean":switch(String(o).toLowerCase()){case"true":case"1":case"on":case"yes":return!0;default:return!1}case"string":return o;case"number":return Number(o);case"json":try{const a=JSON.parse(o);return typeof a=="string"?JSON.parse(a):a}catch(a){return console.error(a),t}default:throw new Error(`Invalid type: ${n}`)}else return t}const ms=Hs({autoplay:!1,pip:!1,muted:!1,volume:.5,speed:1,quality:"auto",theatreMode:!1,loop:!1,instance:{name:"Piped",api_url:"https://pipedapi.kavin.rocks",cache:!0,cdn:!0,last_checked:new Date().getTime(),locations:"",version:"0.0.0",registered:0,s3_enabled:!1,up_to_date:!1,image_proxy_url:"https://pipedproxy.kavin.rocks"}}),db=ue(ms),yL=e=>(Bs(()=>{ms[1](gP("preferences",ms[0],"json","localStorage"))}),tt(()=>{console.log(ms[0],"preferences changed"),pP("preferences",ms[0],"localStorage")}),L(db.Provider,{value:ms,get children(){return e.children}})),fb=()=>ce(db);var cf=it("<span>"),mP=it('<div><div class="w-2 h-2 bg-white rounded-full animate-bounce"></div><div class="w-2 h-2 bg-white rounded-full animate-bounce delay-150"></div><div class="w-2 h-2 bg-white rounded-full animate-bounce delay-300">');function Ir(e){const t=i=>({primary:{"bg-primary hover:bg-primary/90 shadow hover:shadow-3xl text-text1 border-transparent hover:border-primary/30 active:bg-primary/80":!0},subtle:{"bg-transparent hover:bg-bg3/80 hover:shadow-3xl text-text1 border-transparent ":!0},link:{"bg-transparent text-primary border-transparent hover:border-transparent":!0},danger:{"bg-red-600 hover:bg-red-600/90 shadow hover:shadow-3xl text-text1 border-transparent hover:border-red-600/30":!0},warning:{"bg-yellow-600 hover:bg-yellow-600/90 shadow hover:shadow-3xl text-text1 border-transparent hover:border-yellow-600/30":!0}})[i??"primary"],n=Tc();return L(Vr,{get as(){return e.as??"button"},get onClick(){return e.onClick??(()=>{e.href!==void 0&&n(e.href)})},get disabled(){return e.isDisabled},get classList(){return{"relative focus-visible:ring-4 focus-visible:ring-primary/50 focus-visible:outline-none disabled:opacity-50 disabled:cursor-not-allowed duration-300 py-1 px-3 text-sm rounded-full border-4  appearance-none ease-out cursor-pointer select-none focus:outline-none transition active:translate-y-[2px]":!0,"flex items-center justify-center":e.icon!==void 0&&e.label!==void 0,"!text-text1 !bg-bg2":e.isSelected===!0,...t(e.appearance),[e.class]:e.class!==void 0}},get children(){return[L(Et,{get when(){return e.icon!==void 0},get children(){var i=Z(cf);return Q(i,()=>e.icon),ie(()=>i.classList.toggle("invisible",!!e.isLoading)),i}}),L(Et,{get when(){return e.label!==void 0},get children(){var i=Z(cf);return Q(i,()=>e.label),ie(s=>{var r=e.icon!==void 0,o=!!e.isLoading;return r!==s.e&&i.classList.toggle("ml-2",s.e=r),o!==s.t&&i.classList.toggle("invisible",s.t=o),s},{e:void 0,t:void 0}),i}}),L(Et,{get when(){return e.isLoading},get children(){return L(bP,{class:"absolute h-full w-full top-0.5 left-0 flex items-center justify-center"})}})]}})}const bP=e=>(()=>{var t=Z(mP);return ie(n=>vn(t,{"flex space-x-1":!0,[e.class]:e.class!==void 0},n)),t})();var yP=it('<div><div class="flex items-center justify-between h-4">');function vP(){const[e,t]=ha(),n=Tc(),[i,s]=G(void 0),[r]=Cc();return fb(),tt(()=>{console.log(r.v,"searchParams.v"),r.v&&s(r.v)}),(()=>{var o=Z(yP),a=o.firstChild;return Q(a,L(Ir,{appearance:"subtle",class:"hover:bg-white/20 rounded-md p-0 h-10 w-10 flex items-center justify-center",get icon(){return L(Hb,{class:"text-white w-8 h-8 min-w-max"})},onClick:()=>{i()&&n(`/watch?v=${i()}`)}})),ie(()=>o.classList.toggle("hidden",!!(e.player.dismissed||!e.player.small))),o})()}var pb={exports:{}};/*! @preserve
 * numeral.js
 * version : 2.0.6
 * author : Adam Draper
 * license : MIT
 * http://adamwdraper.github.com/Numeral-js/
 */(function(e){(function(t,n){e.exports?e.exports=n():t.numeral=n()})(yn,function(){var t,n,i="2.0.6",s={},r={},o={currentLocale:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:!0},a={currentLocale:o.currentLocale,zeroFormat:o.zeroFormat,nullFormat:o.nullFormat,defaultFormat:o.defaultFormat,scalePercentBy100:o.scalePercentBy100};function l(c,h){this._input=c,this._value=h}return t=function(c){var h,u,f,g;if(t.isNumeral(c))h=c.value();else if(c===0||typeof c>"u")h=0;else if(c===null||n.isNaN(c))h=null;else if(typeof c=="string")if(a.zeroFormat&&c===a.zeroFormat)h=0;else if(a.nullFormat&&c===a.nullFormat||!c.replace(/[^0-9]+/g,"").length)h=null;else{for(u in s)if(g=typeof s[u].regexps.unformat=="function"?s[u].regexps.unformat():s[u].regexps.unformat,g&&c.match(g)){f=s[u].unformat;break}f=f||t._.stringToNumber,h=f(c)}else h=Number(c)||null;return new l(c,h)},t.version=i,t.isNumeral=function(c){return c instanceof l},t._=n={numberToFormat:function(c,h,u){var f=r[t.options.currentLocale],g=!1,p=!1,y=0,x="",S=1e12,E=1e9,b=1e6,_=1e3,w="",T=!1,C,$,I,A,O,M,B;if(c=c||0,$=Math.abs(c),t._.includes(h,"(")?(g=!0,h=h.replace(/[\(|\)]/g,"")):(t._.includes(h,"+")||t._.includes(h,"-"))&&(O=t._.includes(h,"+")?h.indexOf("+"):c<0?h.indexOf("-"):-1,h=h.replace(/[\+|\-]/g,"")),t._.includes(h,"a")&&(C=h.match(/a(k|m|b|t)?/),C=C?C[1]:!1,t._.includes(h," a")&&(x=" "),h=h.replace(new RegExp(x+"a[kmbt]?"),""),$>=S&&!C||C==="t"?(x+=f.abbreviations.trillion,c=c/S):$<S&&$>=E&&!C||C==="b"?(x+=f.abbreviations.billion,c=c/E):$<E&&$>=b&&!C||C==="m"?(x+=f.abbreviations.million,c=c/b):($<b&&$>=_&&!C||C==="k")&&(x+=f.abbreviations.thousand,c=c/_)),t._.includes(h,"[.]")&&(p=!0,h=h.replace("[.]",".")),I=c.toString().split(".")[0],A=h.split(".")[1],M=h.indexOf(","),y=(h.split(".")[0].split(",")[0].match(/0/g)||[]).length,A?(t._.includes(A,"[")?(A=A.replace("]",""),A=A.split("["),w=t._.toFixed(c,A[0].length+A[1].length,u,A[1].length)):w=t._.toFixed(c,A.length,u),I=w.split(".")[0],t._.includes(w,".")?w=f.delimiters.decimal+w.split(".")[1]:w="",p&&Number(w.slice(1))===0&&(w="")):I=t._.toFixed(c,0,u),x&&!C&&Number(I)>=1e3&&x!==f.abbreviations.trillion)switch(I=String(Number(I)/1e3),x){case f.abbreviations.thousand:x=f.abbreviations.million;break;case f.abbreviations.million:x=f.abbreviations.billion;break;case f.abbreviations.billion:x=f.abbreviations.trillion;break}if(t._.includes(I,"-")&&(I=I.slice(1),T=!0),I.length<y)for(var N=y-I.length;N>0;N--)I="0"+I;return M>-1&&(I=I.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+f.delimiters.thousands)),h.indexOf(".")===0&&(I=""),B=I+w+(x||""),g?B=(g&&T?"(":"")+B+(g&&T?")":""):O>=0?B=O===0?(T?"-":"+")+B:B+(T?"-":"+"):T&&(B="-"+B),B},stringToNumber:function(c){var h=r[a.currentLocale],u=c,f={thousand:3,million:6,billion:9,trillion:12},g,p,y;if(a.zeroFormat&&c===a.zeroFormat)p=0;else if(a.nullFormat&&c===a.nullFormat||!c.replace(/[^0-9]+/g,"").length)p=null;else{p=1,h.delimiters.decimal!=="."&&(c=c.replace(/\./g,"").replace(h.delimiters.decimal,"."));for(g in f)if(y=new RegExp("[^a-zA-Z]"+h.abbreviations[g]+"(?:\\)|(\\"+h.currency.symbol+")?(?:\\))?)?$"),u.match(y)){p*=Math.pow(10,f[g]);break}p*=(c.split("-").length+Math.min(c.split("(").length-1,c.split(")").length-1))%2?1:-1,c=c.replace(/[^0-9\.]+/g,""),p*=Number(c)}return p},isNaN:function(c){return typeof c=="number"&&isNaN(c)},includes:function(c,h){return c.indexOf(h)!==-1},insert:function(c,h,u){return c.slice(0,u)+h+c.slice(u)},reduce:function(c,h){if(this===null)throw new TypeError("Array.prototype.reduce called on null or undefined");if(typeof h!="function")throw new TypeError(h+" is not a function");var u=Object(c),f=u.length>>>0,g=0,p;if(arguments.length===3)p=arguments[2];else{for(;g<f&&!(g in u);)g++;if(g>=f)throw new TypeError("Reduce of empty array with no initial value");p=u[g++]}for(;g<f;g++)g in u&&(p=h(p,u[g],g,u));return p},multiplier:function(c){var h=c.toString().split(".");return h.length<2?1:Math.pow(10,h[1].length)},correctionFactor:function(){var c=Array.prototype.slice.call(arguments);return c.reduce(function(h,u){var f=n.multiplier(u);return h>f?h:f},1)},toFixed:function(c,h,u,f){var g=c.toString().split("."),p=h-(f||0),y,x,S,E;return g.length===2?y=Math.min(Math.max(g[1].length,p),h):y=p,S=Math.pow(10,y),E=(u(c+"e+"+y)/S).toFixed(y),f>h-y&&(x=new RegExp("\\.?0{1,"+(f-(h-y))+"}$"),E=E.replace(x,"")),E}},t.options=a,t.formats=s,t.locales=r,t.locale=function(c){return c&&(a.currentLocale=c.toLowerCase()),a.currentLocale},t.localeData=function(c){if(!c)return r[a.currentLocale];if(c=c.toLowerCase(),!r[c])throw new Error("Unknown locale : "+c);return r[c]},t.reset=function(){for(var c in o)a[c]=o[c]},t.zeroFormat=function(c){a.zeroFormat=typeof c=="string"?c:null},t.nullFormat=function(c){a.nullFormat=typeof c=="string"?c:null},t.defaultFormat=function(c){a.defaultFormat=typeof c=="string"?c:"0.0"},t.register=function(c,h,u){if(h=h.toLowerCase(),this[c+"s"][h])throw new TypeError(h+" "+c+" already registered.");return this[c+"s"][h]=u,u},t.validate=function(c,h){var u,f,g,p,y,x,S,E;if(typeof c!="string"&&(c+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",c)),c=c.trim(),c.match(/^\d+$/))return!0;if(c==="")return!1;try{S=t.localeData(h)}catch{S=t.localeData(t.locale())}return g=S.currency.symbol,y=S.abbreviations,u=S.delimiters.decimal,S.delimiters.thousands==="."?f="\\.":f=S.delimiters.thousands,E=c.match(/^[^\d]+/),E!==null&&(c=c.substr(1),E[0]!==g)||(E=c.match(/[^\d]+$/),E!==null&&(c=c.slice(0,-1),E[0]!==y.thousand&&E[0]!==y.million&&E[0]!==y.billion&&E[0]!==y.trillion))?!1:(x=new RegExp(f+"{2}"),c.match(/[^\d.,]/g)?!1:(p=c.split(u),p.length>2?!1:p.length<2?!!p[0].match(/^\d+.*\d$/)&&!p[0].match(x):p[0].length===1?!!p[0].match(/^\d+$/)&&!p[0].match(x)&&!!p[1].match(/^\d+$/):!!p[0].match(/^\d+.*\d$/)&&!p[0].match(x)&&!!p[1].match(/^\d+$/)))},t.fn=l.prototype={clone:function(){return t(this)},format:function(c,h){var u=this._value,f=c||a.defaultFormat,g,p,y;if(h=h||Math.round,u===0&&a.zeroFormat!==null)p=a.zeroFormat;else if(u===null&&a.nullFormat!==null)p=a.nullFormat;else{for(g in s)if(f.match(s[g].regexps.format)){y=s[g].format;break}y=y||t._.numberToFormat,p=y(u,f,h)}return p},value:function(){return this._value},input:function(){return this._input},set:function(c){return this._value=Number(c),this},add:function(c){var h=n.correctionFactor.call(null,this._value,c);function u(f,g,p,y){return f+Math.round(h*g)}return this._value=n.reduce([this._value,c],u,0)/h,this},subtract:function(c){var h=n.correctionFactor.call(null,this._value,c);function u(f,g,p,y){return f-Math.round(h*g)}return this._value=n.reduce([c],u,Math.round(this._value*h))/h,this},multiply:function(c){function h(u,f,g,p){var y=n.correctionFactor(u,f);return Math.round(u*y)*Math.round(f*y)/Math.round(y*y)}return this._value=n.reduce([this._value,c],h,1),this},divide:function(c){function h(u,f,g,p){var y=n.correctionFactor(u,f);return Math.round(u*y)/Math.round(f*y)}return this._value=n.reduce([this._value,c],h),this},difference:function(c){return Math.abs(t(this._value).subtract(c).value())}},t.register("locale","en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(c){var h=c%10;return~~(c%100/10)===1?"th":h===1?"st":h===2?"nd":h===3?"rd":"th"},currency:{symbol:"$"}}),function(){t.register("format","bps",{regexps:{format:/(BPS)/,unformat:/(BPS)/},format:function(c,h,u){var f=t._.includes(h," BPS")?" ":"",g;return c=c*1e4,h=h.replace(/\s?BPS/,""),g=t._.numberToFormat(c,h,u),t._.includes(g,")")?(g=g.split(""),g.splice(-1,0,f+"BPS"),g=g.join("")):g=g+f+"BPS",g},unformat:function(c){return+(t._.stringToNumber(c)*1e-4).toFixed(15)}})}(),function(){var c={base:1e3,suffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]},h={base:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},u=c.suffixes.concat(h.suffixes.filter(function(g){return c.suffixes.indexOf(g)<0})),f=u.join("|");f="("+f.replace("B","B(?!PS)")+")",t.register("format","bytes",{regexps:{format:/([0\s]i?b)/,unformat:new RegExp(f)},format:function(g,p,y){var x,S=t._.includes(p,"ib")?h:c,E=t._.includes(p," b")||t._.includes(p," ib")?" ":"",b,_,w;for(p=p.replace(/\s?i?b/,""),b=0;b<=S.suffixes.length;b++)if(_=Math.pow(S.base,b),w=Math.pow(S.base,b+1),g===null||g===0||g>=_&&g<w){E+=S.suffixes[b],_>0&&(g=g/_);break}return x=t._.numberToFormat(g,p,y),x+E},unformat:function(g){var p=t._.stringToNumber(g),y,x;if(p){for(y=c.suffixes.length-1;y>=0;y--){if(t._.includes(g,c.suffixes[y])){x=Math.pow(c.base,y);break}if(t._.includes(g,h.suffixes[y])){x=Math.pow(h.base,y);break}}p*=x||1}return p}})}(),function(){t.register("format","currency",{regexps:{format:/(\$)/},format:function(c,h,u){var f=t.locales[t.options.currentLocale],g={before:h.match(/^([\+|\-|\(|\s|\$]*)/)[0],after:h.match(/([\+|\-|\)|\s|\$]*)$/)[0]},p,y,x;for(h=h.replace(/\s?\$\s?/,""),p=t._.numberToFormat(c,h,u),c>=0?(g.before=g.before.replace(/[\-\(]/,""),g.after=g.after.replace(/[\-\)]/,"")):c<0&&!t._.includes(g.before,"-")&&!t._.includes(g.before,"(")&&(g.before="-"+g.before),x=0;x<g.before.length;x++)switch(y=g.before[x],y){case"$":p=t._.insert(p,f.currency.symbol,x);break;case" ":p=t._.insert(p," ",x+f.currency.symbol.length-1);break}for(x=g.after.length-1;x>=0;x--)switch(y=g.after[x],y){case"$":p=x===g.after.length-1?p+f.currency.symbol:t._.insert(p,f.currency.symbol,-(g.after.length-(1+x)));break;case" ":p=x===g.after.length-1?p+" ":t._.insert(p," ",-(g.after.length-(1+x)+f.currency.symbol.length-1));break}return p}})}(),function(){t.register("format","exponential",{regexps:{format:/(e\+|e-)/,unformat:/(e\+|e-)/},format:function(c,h,u){var f,g=typeof c=="number"&&!t._.isNaN(c)?c.toExponential():"0e+0",p=g.split("e");return h=h.replace(/e[\+|\-]{1}0/,""),f=t._.numberToFormat(Number(p[0]),h,u),f+"e"+p[1]},unformat:function(c){var h=t._.includes(c,"e+")?c.split("e+"):c.split("e-"),u=Number(h[0]),f=Number(h[1]);f=t._.includes(c,"e-")?f*=-1:f;function g(p,y,x,S){var E=t._.correctionFactor(p,y),b=p*E*(y*E)/(E*E);return b}return t._.reduce([u,Math.pow(10,f)],g,1)}})}(),function(){t.register("format","ordinal",{regexps:{format:/(o)/},format:function(c,h,u){var f=t.locales[t.options.currentLocale],g,p=t._.includes(h," o")?" ":"";return h=h.replace(/\s?o/,""),p+=f.ordinal(c),g=t._.numberToFormat(c,h,u),g+p}})}(),function(){t.register("format","percentage",{regexps:{format:/(%)/,unformat:/(%)/},format:function(c,h,u){var f=t._.includes(h," %")?" ":"",g;return t.options.scalePercentBy100&&(c=c*100),h=h.replace(/\s?\%/,""),g=t._.numberToFormat(c,h,u),t._.includes(g,")")?(g=g.split(""),g.splice(-1,0,f+"%"),g=g.join("")):g=g+f+"%",g},unformat:function(c){var h=t._.stringToNumber(c);return t.options.scalePercentBy100?h*.01:h}})}(),function(){t.register("format","time",{regexps:{format:/(:)/,unformat:/(:)/},format:function(c,h,u){var f=Math.floor(c/60/60),g=Math.floor((c-f*60*60)/60),p=Math.round(c-f*60*60-g*60);return f+":"+(g<10?"0"+g:g)+":"+(p<10?"0"+p:p)},unformat:function(c){var h=c.split(":"),u=0;return h.length===3?(u=u+Number(h[0])*60*60,u=u+Number(h[1])*60,u=u+Number(h[2])):h.length===2&&(u=u+Number(h[0])*60,u=u+Number(h[1])),Number(u)}})}(),t})})(pb);var wP=pb.exports;const _c=Tp(wP);var _P=(e,t)=>e.length>0?()=>e(Fs(t)):e;function EP(e,t){let n=0;const i=e.map((s,r)=>dt(()=>(n=r,s()),void 0,hw));return dt(()=>i.map(s=>s())[n],void 0,t)}function SP(e,t,n){let i=()=>t;const[s,r]=G(t),o=dt(_P(e,()=>i()),t);return[i=EP([s,o],n),a=>r(()=>typeof a=="function"?a(Fs(i)):a)]}var Rl=(e,t,n)=>{const i=n(e,t);return bt(()=>clearInterval(i))},xP=(e,t,n)=>{if(typeof t=="number"){Rl(e,t,n);return}let i=!1,s=performance.now(),r=0,o=!1;const a=()=>{Fs(e),s=performance.now(),i=n===setTimeout};tt(l=>{if(i)return;const c=t();if(c===!1)return l&&(r+=(performance.now()-s)/l),c;if(l===!1&&(s=performance.now()),o){if(l&&(r+=(performance.now()-s)/l),s=performance.now(),r>=1)r=0,a();else if(r>0){const[h,u]=G(void 0,{equals:!1});return h(),Rl(()=>{r=0,o=!1,u(),a()},(1-r)*c,setTimeout),c}}return o=!0,Rl(a,c,n),c})};function TP(e,t,n,i){const[s,r]=G(Fs(e.bind(void 0,n)),i),o=()=>r(e);return xP(o,t,setInterval),gf(o),s}var CP=1e3,Wa=6e4,Ec=36e5,$P=864e5,kP=6048e5,AP=2592e6,PP=31536e6,OP=[{max:6e4,value:CP,name:"second"},{max:276e4,value:Wa,name:"minute"},{max:72e6,value:Ec,name:"hour"},{max:5184e5,value:$P,name:"day"},{max:24192e5,value:kP,name:"week"},{max:28512e6,value:AP,name:"month"},{max:1/0,value:PP,name:"year"}],gb={justNow:"just now",past:e=>e.match(/\d/)?`${e} ago`:e,future:e=>e.match(/\d/)?`in ${e}`:e,month:(e,t)=>e===1?t?"last month":"next month":`${e} month${e>1?"s":""}`,year:(e,t)=>e===1?t?"last year":"next year":`${e} year${e>1?"s":""}`,day:(e,t)=>e===1?t?"yesterday":"tomorrow":`${e} day${e>1?"s":""}`,week:(e,t)=>e===1?t?"last week":"next week":`${e} week${e>1?"s":""}`,hour:e=>`${e} hour${e>1?"s":""}`,minute:e=>`${e} minute${e>1?"s":""}`,second:e=>`${e} second${e>1?"s":""}`},uf=e=>e instanceof Date?e:new Date(e),LP=(e,t)=>t.getTime()-e.getTime(),IP=e=>e.toISOString().slice(0,10);function DP(e,t){const n={...gb,...t},i=Math.abs(e);for(const o of OP)if(i<o.max)return r(o);return n.justNow;function s(o,a,l){const c=n[o];return typeof c=="function"?c(a,l):c.replace("{0}",a.toString())}function r(o){const a=Math.round(i/o.value),l=e<0,c=s(o.name,a,l);return s(l?"past":"future",c,l)}}var hf=e=>{const[t,n]=SP(()=>uf(V(e)));return[t,s=>n(r=>uf(Np(s,r)))]};function RP(e=Wa/2){const[t,n]=G(void 0,{equals:!1});return[TP(()=>(t(),new Date),e,void 0,{equals:(s,r)=>s.getTime()===r.getTime()}),n]}function MP(e,t){const[n]=hf(e),[i]=hf(t);return[dt(()=>LP(n(),i())),{from:n,to:i}]}function NP(e,t=n=>Math.abs(n)<=Ec?Wa/2:Ec/2){const n=typeof t=="function"?()=>t(r()):t,[i,s]=RP(n),[r,{to:o}]=MP(i,e);return[r,{update:s,target:o,now:i}]}function df(e,t={}){const{min:n=Wa,max:i=1/0,dateFormatter:s=IP,messages:r,relativeFormatter:o=(h,u,f)=>DP(f,r)}=t,[a,l]=NP(e,t.interval);return[dt(()=>{const h=Math.abs(a());return h<n?r?.justNow??gb.justNow:h>i?s(l.target()):o(l.now(),l.target(),a())}),{...l,difference:a}]}var FP=it('<div class="flex items-baseline justify-between mb-3"><!$><!/><!$><!/>'),BP=it('<div class="fixed inset-0 z-[999999] flex items-center justify-center">');function mb(e){return L(tS,{modal:!0,get open(){return e.isOpen},get onOpenChange(){return e.setIsOpen},get children(){return L(ZE,{get children(){return[L(JE,{class:` fixed 
    inset-0 
    z-50 
    bg-black/20
    animate-out
    fade-out
    data-[expanded]:animate-in
    data-[expanded]:fade-in
    `}),(()=>{var t=Z(BP);return Q(t,L(XE,{class:` z-50 
    max-w-[calc(100vw-16px)] 
    max-h-[80vh]
              my-auto
    overflow-hidden
    border 
    border-bg3
    rounded-md 
    p-4 
    bg-bg1
    shadow-md 
    animate-out
    fade-out
    ease-in
    data-[expanded]:animate-in
    data-[expanded]:fade-in
    data-[expanded]:duration-300
    data-[expanded]:ease-out
    `,get children(){return[(()=>{var n=Z(FP),i=n.firstChild,[s,r]=ht(i.nextSibling),o=s.nextSibling,[a,l]=ht(o.nextSibling);return Q(n,L(eS,{class:"text-xl font-semibold",get children(){return e.title}}),s,r),Q(n,L(zE,{class:"",get children(){return L(vf,{fill:"currentColor",class:"w-4 h-4"})}}),a,l),n})(),L(QE,{class:`text-base 
    max-h-[calc(100vh-50px)] overflow-y-auto`,get children(){return e.children}})]}})),t})()]}})}})}const HP=e=>L(vx,{get defaultValue(){return e.value},get value(){return e.value},get onChange(){return e.onChange},get placeholder(){return e.placeholder},optionValue:"value",optionTextValue:"label",optionDisabled:"disabled",gutter:0,get options(){return e.options},itemComponent:t=>L(QS,{class:"cursor-pointer w-full border-bg2 last:border-b-0 flex relative items-center px-7 py-2 rounded border-b hover:bg-bg2 focus-visible:ring-4 focus-visible:ring-primary focus-visible:outline-none data-[disabled]:text-gray-600 data-[disabled]:cursor-not-allowed ",get item(){return t.item},get children(){return[L(gx,{class:"max-w-xs truncate",get children(){return t.item.rawValue?.label}}),L(JS,{class:"inline-flex absolute left-0",get children(){return L($b,{fill:"currentColor",class:"h-4 w-4 mx-1 text-text1"})}})]}}),class:"relative",get children(){return[L(wx,{class:" p-1 outline-none bg-bg2 ring-1 ring-bg2 inline-flex items-center justify-between py-2 px-3 focus-visible:ring-2 focus-visible:ring-primary rounded-md",get children(){return[L(Ex,{children:t=>t.selectedOption()?.label}),L(px,{get children(){return L(kb,{fill:"currentColor",class:"h-3 w-3 text-text1 relative left-1"})}})]}}),L(bx,{get children(){return L(fx,{class:"bg-bg1 p-1 rounded-md z-[999999] ",get children(){return[L(Pg,{}),L(mx,{class:"overflow-y-auto max-h-[40vh] p-2 "})]}})}})]}});var UP=it(`<div class="flex items-center gap-2"><div class=text-text1>You don't have any playlists yet.`),VP=it("<div class=text-text1>Select a playlist to add this video to:"),jP=it('<div class=" w-full flex justify-center items-center mb-2">'),KP=it('<div class="flex flex-col gap-4">'),qP=it('<div class="flex items-center justify-center gap-4 my-2"><!$><!/><!$><!/>');const GP=e=>{const t=Ya(),n=()=>{const r=prompt("Playlist name");if(!r)return;const o=`conduit-${Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}`,a={name:r,relatedStreams:[],videos:0,uploader:"You",description:"",bannerUrl:"",uploaderAvatar:"",uploaderUrl:"",thumbnailUrl:"",nextpage:""};t.setStore("playlists",{[o]:a})},[i,s]=G({value:"",label:"",disabled:!1});return L(mb,{get isOpen(){return e.isOpen},get setIsOpen(){return e.setIsOpen},title:"Add to playlist",get children(){return[(()=>{var r=Z(KP);return Q(r,L(ua,{get children(){return[L(zn,{get when(){return Object.keys(t.store.playlists).length===0},get children(){return Z(UP)}}),L(zn,{get when(){return Object.keys(t.store.playlists).length>0},get children(){return[Z(VP),(()=>{var o=Z(jP);return Q(o,L(HP,{get options(){return Object.entries(t.store.playlists).map(([a,l])=>({value:a,label:l.name,disabled:l.relatedStreams?.some(c=>c.url===e.v.url)}))},get value(){return i()},onChange:s,placeholder:"Select a playlist..."})),o})()]}})]}})),r})(),(()=>{var r=Z(qP),o=r.firstChild,[a,l]=ht(o.nextSibling),c=a.nextSibling,[h,u]=ht(c.nextSibling);return Q(r,L(Ir,{appearance:"subtle",label:"Create a playlist",onClick:()=>n()}),a,l),Q(r,L(Ir,{onClick:()=>{console.log(e.v,i(),t.store.playlists[i().value]?.relatedStreams);try{const f=t.store.playlists[i().value],g=f?.relatedStreams.length||0;t.setStore("playlists",i().value,"relatedStreams",[...f.relatedStreams,{url:e.v.url,title:e.v.title,type:e.v.type,duration:e.v.duration,thumbnail:e.v.thumbnail,uploaderName:e.v.uploaderName,uploaderUrl:e.v.uploaderUrl,uploaderAvatar:e.v.uploaderAvatar,views:e.v.views,uploaded:e.v.uploaded,uploaderVerified:e.v.uploaderVerified,shortDescription:"",uploadedDate:e.v.uploadedDate,isShort:e.v.isShort,order:g,timeAdded:Date.now()}]),kn.success(`Added "${e.v.title.length>20?e.v.title.slice(0,20)+"...":e.v.title}" to playlist "${f.name}".`),e.setIsOpen(!1)}catch(f){kn.error("Failed to add to playlist. "+f.message),console.error(f)}},label:"Add",get isDisabled(){return!i().value},appearance:"primary"}),h,u),r})()]}})};var WP=it('<div class="flex items-center gap-2"><!$><!/><div class=text-text1>Add to playlist'),zP=it('<div class="flex items-center gap-2"><!$><!/><div class=text-text1>Watch later'),YP=it('<div class="flex items-center gap-2"><!$><!/><div class=text-text1>Mark as watched'),XP=it('<div class="flex items-center gap-2"><!$><!/><div class=text-text1>Remove from history'),QP=it('<div class="flex items-center gap-2"><!$><!/><div class=text-text1>Share'),JP=it('<img class="w-6 h-6 rounded-full">'),ZP=it('<span class="text-text2 max-w-xs truncate">'),tO=it('<div class="flex items-center gap-2"><!$><!/><!$><!/><div class=text-text1>'),eO=it('<div class="flex items-center gap-2"><!$><!/><div class=text-text1>Block'),nO=it('<div class="flex items-center gap-2"><!$><!/><div class=text-text1>Debug info'),iO=it('<pre class="break-all text-text1 max-w-full min-w-0 overflow-auto z-[9999999]">');function sO(e){const[t,n]=G(!1),[i,s]=G(!1),r=Ya(),[o,a]=G(!1),[l,c]=ha();return[L(dx,{get open(){return t()},onOpenChange:n,get children(){return[L(ux,{class:"p-1 outline-none focus-visible:ring-2 focus-visible:ring-primary rounded-md",get children(){return L(Ub,{fill:"currentColor",class:"text-text2 w-6 h-6 group-hover:text-text1"})}}),L(lx,{get children(){return L(hx,{class:`bg-bg1 border border-bg2 shadow p-2 rounded-md z-50
                -translate-y-4
                animate-in
                fade-in
                slide-in-from-top-10
                duration-200
                `,get children(){return[L(Pg,{}),L(gi,{onTouchStart:()=>{c("touchInProgress",!0)},onSelect:()=>{a(!0)},class:"cursor-pointer w-full border-bg3 flex relative items-center px-7 py-2 rounded border-b hover:bg-bg3 focus-visible:bg-bg3 focus-visible:ring-4 focus-visible:ring-highlight focus-visible:outline-none",get children(){var h=Z(WP),u=h.firstChild,[f,g]=ht(u.nextSibling);return f.nextSibling,Q(h,L(Ab,{class:""}),f,g),h}}),L(gi,{onTouchStart:()=>{c("touchInProgress",!0)},onSelect:()=>{try{r.setStore("watchLater",{[Wn(e.v)]:{title:e.v.title,url:e.v.url,duration:e.v.duration,uploaderName:e.v.uploaderName,uploaderUrl:e.v.uploaderUrl,uploaderAvatar:e.v.uploaderAvatar,views:e.v.views,uploaded:e.v.uploaded,thumbnail:e.v.thumbnail,uploaderVerified:e.v.uploaderVerified}}),kn.success(`Added "${e.v.title.length>20?e.v.title.slice(0,20)+"...":e.v.title}" to watch later.`)}catch(h){kn.error("Failed to add to watch later. "+h.message),console.error(h)}},class:"cursor-pointer w-full border-bg3 flex relative items-center px-7 py-2 rounded border-b hover:bg-bg3 focus-visible:bg-bg3 focus-visible:ring-4 focus-visible:ring-highlight focus-visible:outline-none",get children(){var h=Z(zP),u=h.firstChild,[f,g]=ht(u.nextSibling);return f.nextSibling,Q(h,L(Vb,{class:""}),f,g),h}}),L(Et,{get when(){return e.progress===void 0},get children(){return L(gi,{class:"cursor-pointer z-50 w-full border-bg3 flex relative items-center px-7 py-2 rounded border-b hover:bg-bg3 focus-visible:bg-bg3 focus-visible:ring-4 focus-visible:ring-highlight focus-visible:outline-none",onTouchStart:()=>{c("touchInProgress",!0)},as:"button",onSelect:()=>{if(!e.v)return;const h={[Wn(e.v)]:{title:e.v.title,url:e.v.url,duration:e.v.duration,uploaderName:e.v.uploaderName,uploaderUrl:e.v.uploaderUrl,uploaderAvatar:e.v.uploaderAvatar,views:e.v.views,uploaded:e.v.uploaded,thumbnail:e.v.thumbnail,uploaderVerified:e.v.uploaderVerified,currentTime:e.v.duration,watchedAt:Date.now()}};r.setStore("history",h),console.log("added to history")},get children(){var h=Z(YP),u=h.firstChild,[f,g]=ht(u.nextSibling);return f.nextSibling,Q(h,L(Pb,{fill:"currentColor"}),f,g),h}})}}),L(Et,{get when(){return e.progress!==void 0},get children(){return L(gi,{class:"cursor-pointer w-full border-bg3 flex relative items-center px-7 py-2 rounded border-b hover:bg-bg3 focus-visible:bg-bg3 focus-visible:ring-4 focus-visible:ring-highlight focus-visible:outline-none",onTouchStart:()=>{c("touchInProgress",!0)},onSelect:()=>{r.setStore("history",{[Wn(e.v)]:void 0})},get children(){var h=Z(XP),u=h.firstChild,[f,g]=ht(u.nextSibling);return f.nextSibling,Q(h,L(Ob,{fill:"currentColor"}),f,g),h}})}}),L(gi,{class:"cursor-pointer touch-action-none w-full border-bg3 flex relative items-center px-7 py-2 rounded border-b hover:bg-bg3 focus-visible:bg-bg3 focus-visible:ring-4 focus-visible:ring-highlight focus-visible:outline-none",onTouchStart:()=>{c("touchInProgress",!0)},onSelect:()=>{console.log("share event")},get children(){var h=Z(QP),u=h.firstChild,[f,g]=ht(u.nextSibling);return f.nextSibling,Q(h,L(Lb,{}),f,g),h}}),L(Et,{get when(){return e.v.uploaderName&&e.v.uploaderUrl},get children(){return L(ox,{class:"mt-2",get children(){return[L(ax,{class:"flex items-center gap-2",get children(){return[(()=>{var h=Z(JP);return ie(()=>on(h,"src",e.v.uploaderAvatar??"")),h})(),(()=>{var h=Z(ZP);return Q(h,()=>e.v.uploaderName),h})()]}}),L(gi,{class:"cursor-pointer w-full border-bg3 flex relative items-center px-7 py-2 rounded border- hover:bg-bg3 focus-visible:bg-bg3 focus-visible:ring-4 focus-visible:ring-highlight focus-visible:outline-none",onTouchStart:()=>{c("touchInProgress",!0)},onSelect:()=>{const h=e.v.uploaderUrl.split("/channel/")[1];r.store.subscriptions[h]?(r.setStore("subscriptions",h,void 0),kn.success(`Unsubscribed from ${e.v.uploaderName}.`)):(r.setStore("subscriptions",h,{subscribedAt:Date.now()}),kn.success(`Subscribed to ${e.v.uploaderName}.`))},get children(){var h=Z(tO),u=h.firstChild,[f,g]=ht(u.nextSibling),p=f.nextSibling,[y,x]=ht(p.nextSibling),S=y.nextSibling;return Q(h,L(Et,{get when(){return r.store.subscriptions[e.v.uploaderUrl.split("/channel/")[1]]},get children(){return L(Ib,{})}}),f,g),Q(h,L(Et,{get when(){return!r.store.subscriptions[e.v.uploaderUrl.split("/channel/")[1]]},get children(){return L(Db,{})}}),y,x),Q(S,()=>r.store.subscriptions[e.v.uploaderUrl.split("/channel/")[1]]?"Unsubscribe":"Subscribe"),h}}),L(gi,{class:"cursor-pointer w-full border-bg3 flex relative items-center px-7 py-2 rounded border-b hover:bg-bg3 focus-visible:bg-bg3 focus-visible:ring-4 focus-visible:ring-highlight focus-visible:outline-none",onTouchStart:()=>{c("touchInProgress",!0)},onSelect:()=>{if(!e.v.uploaderUrl.split("/channel/")[1]){kn.error("Failed to block channel. No channel ID found.");return}try{r.setStore("blocklist",e.v.uploaderUrl.split("/channel/")[1],{name:e.v.uploaderName}),kn.success(`Blocked ${e.v.uploaderName}.`)}catch(u){kn.error("Failed to block channel. "+u.message),console.error(u)}},get children(){var h=Z(eO),u=h.firstChild,[f,g]=ht(u.nextSibling);return f.nextSibling,Q(h,L(Rb,{}),f,g),h}})]}})}}),L(gi,{onTouchStart:()=>{c("touchInProgress",!0)},class:"cursor-pointer w-full border-bg3 flex relative items-center px-7 py-2 rounded  hover:bg-bg3 focus-visible:bg-bg3 focus-visible:ring-4 focus-visible:ring-highlight focus-visible:outline-none",onSelect:()=>s(!0),get children(){var h=Z(nO),u=h.firstChild,[f,g]=ht(u.nextSibling);return f.nextSibling,Q(h,L(Mb,{fill:"currentColor"}),f,g),h}})]}})}})]}}),L(mb,{get isOpen(){return i()},setIsOpen:s,title:"Debug info",get children(){var h=Z(iO);return Q(h,()=>JSON.stringify(e.v,null,2)),h}}),L(GP,{get isOpen(){return o()},setIsOpen:a,get v(){return e.v}})]}function rO(e){const t=()=>{switch(e.placement){case"top":return"tooltip animate-out fade-out slide-out-to-bottom-2 data-[expanded]:animate-in data-[expanded]:fade-in data-[expanded]:slide-in-from-bottom-4";case"bottom":return"tooltip animate-out fade-out slide-out-to-top-2 data-[expanded]:animate-in data-[expanded]:fade-in data-[expanded]:slide-in-from-top-4";case"left":return"tooltip animate-out fade-out slide-out-to-right-2 data-[expanded]:animate-in data-[expanded]:fade-in data-[expanded]:slide-in-from-right-4";case"right":return"tooltip animate-out fade-out slide-out-to-left-2 data-[expanded]:animate-in data-[expanded]:fade-in data-[expanded]:slide-in-from-left-4";case"top-end":return"tooltip animate-out fade-out slide-out-to-bottom-2 data-[expanded]:animate-in data-[expanded]:fade-in data-[expanded]:slide-in-from-bottom-4";case"left-end":return"tooltip animate-out fade-out slide-out-to-right-2 data-[expanded]:animate-in data-[expanded]:fade-in data-[expanded]:slide-in-from-right-4";case"right-end":return"tooltip animate-out fade-out slide-out-to-left-2 data-[expanded]:animate-in data-[expanded]:fade-in data-[expanded]:slide-in-from-left-4";case"bottom-end":return"tooltip animate-out fade-out slide-out-to-top-2 data-[expanded]:animate-in data-[expanded]:fade-in data-[expanded]:slide-in-from-top-4";case"top-start":return"tooltip animate-out fade-out slide-out-to-bottom-2 data-[expanded]:animate-in data-[expanded]:fade-in data-[expanded]:slide-in-from-bottom-4";case"left-start":return"tooltip animate-out fade-out slide-out-to-right-2 data-[expanded]:animate-in data-[expanded]:fade-in data-[expanded]:slide-in-from-right-4";case"right-start":return"tooltip animate-out fade-out slide-out-to-left-2 data-[expanded]:animate-in data-[expanded]:fade-in data-[expanded]:slide-in-from-left-4";case"bottom-start":return"tooltip animate-out fade-out slide-out-to-top-2 data-[expanded]:animate-in data-[expanded]:fade-in data-[expanded]:slide-in-from-top-4";default:return"tooltip animate-out fade-out slide-out-to-bottom-2 data-[expanded]:animate-in data-[expanded]:fade-in data-[expanded]:slide-in-from-bottom-4"}},[n,i]=G(e.open??!1);tt(()=>{r(e.open??!1)});let s=null;const r=l=>{if(!e.disabled){if(s&&clearTimeout(s),l===!1)return i(!1);s=setTimeout(()=>{i(l)},e.openDelay??0)}},[o,a]=G(!1);return L(Hx,{get placement(){return e.placement},get gutter(){return e.gutter??8},get open(){return n()},get onOpenChange(){return e.onOpenChange},get children(){return[L(Ux,{get as(){return e.as??"button"},get onFocus(){return e.onFocus},onFocusIn:async l=>{await iw(),!o()&&r(!0)},onFocusOut:()=>r(!1),onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),onPointerDown:()=>{a(!0),setTimeout(()=>a(!1),500)},get disabled(){return e.disabled},get class(){return e.class},get onClick(){return e.onClick},get children(){return e.triggerSlot}}),L(Nx,{get children(){return L(Mx,{get class(){return`${t()} z-[99999999] break-words max-w-xs rounded-sm bg-black/90 px-2 py-0.5 text-sm font-medium font-sans text-white`},get children(){return e.contentSlot}})}})]}})}var oO=it('<div><div></div><div><div><!$><!/><!$><!/></div><div class="flex flex-col justify-start min-w-[32px]">'),aO=it('<div class="flex flex-col gap-1"><div aria-hidden=true class="animate-pulse bg-bg2 w-full rounded-lg h-4 "></div><div aria-hidden=true class="animate-pulse bg-bg2 w-1/2 h-4 rounded-lg ">'),lO=it('<img width=2560 height=1440 alt=""loading=lazy>'),cO=it('<div class="relative h-0 w-0 "><div class="absolute flex items-center left-2 bottom-2 bg-bg1/90 rounded px-1 py-px border border-bg2 w-max h-max text-xs"><!$><!/><!$><!/>'),uO=it('<div class="absolute left-2 bottom-2 bg-bg1/90 rounded px-1 py-px border border-bg2 w-max h-max text-xs">Watched'),hO=it('<div class="relative h-0 w-12 place-self-end lg:w-16 "><div class="absolute bottom-2 right-2 bg-bg1/90 rounded px-1 py-px border border-bg2 text-xs"><!$><!/><!$><!/>'),dO=it('<div class="relative h-0 w-full"><div class="absolute bottom-0 h-1 bg-highlight">'),fO=it('<div><div class="animate-pulse bg-bg2 aspect-video h-full overflow-hidden max-w-fit w-full"><div class="w-96 h-full">'),pO=it('<img class="rounded-full w-6 h-6 aspect-square min-w-[24px] min-h-[24px]"alt="">'),gO=it('<div class="group mb-1 w-max">'),mO=it('<div class="peer w-fit truncate max-w-[10rem]">'),bO=it("<div class=w-fit> <!$><!/> views"),yO=it("<div class=mx-1>"),vO=it('<div class=""><!$><!/> '),wO=it('<div class="flex gap-1 text-text2 w-full sm:max-w-full "><!$><!/><div class="flex w-full flex-col text-xs "><!$><!/><div class="flex flex-wrap w-full"><!$><!/><!$><!/><!$><!/>'),_O=it('<div class="flex flex-col gap-2 pr-2 w-full "><div class="flex gap-2 text-text2"><div class="animate-pulse bg-bg2 w-8 h-8 aspect-square rounded-full"></div><div class="flex w-full flex-col gap-2 justify-center"><div class="animate-pulse bg-bg2 w-32 h-4 rounded-lg">');const EO=e=>{e=ft({layout:"sm:grid"},e);const t=Ya(),[n]=Cc(),i=()=>t.store.history[Wn(e.v)]?.watchedAt,[s,r]=G(void 0);tt(()=>{const[c]=df(i()??new Date,{interval:6e4,relativeFormatter:ow});r(c())});const[o]=e.v?df(e.v.uploaded,{interval:0}):[()=>""],a=()=>Wn(e.v),l=()=>a()?t.store.history[a()]:void 0;return(()=>{var c=Z(oO),h=c.firstChild,u=h.nextSibling,f=u.firstChild,g=f.firstChild,[p,y]=ht(g.nextSibling),x=p.nextSibling,[S,E]=ht(x.nextSibling),b=f.nextSibling;return Q(h,L(Et,{get when(){return e.v},get fallback(){return L(xO,{get layout(){return e.layout}})},get children(){return L(SO,{get url(){return`/watch?v=${a()}${n.fullscreen?`&fullscreen=${n.fullscreen}`:""}`},get src(){return e.v.thumbnail},get duration(){return e.v.duration},get watched(){return!!l()},get watchedAt(){return s()},get currentTime(){return l()?.currentTime}})}})),Q(f,L(Et,{get when(){return e.v},get fallback(){return Z(aO)},get children(){return L(rO,{as:"div",placement:"top",openDelay:1e3,get triggerSlot(){return L(Oo,{get href(){return`/watch?v=${a()}`},class:"rounded text-start two-line-ellipsis min-w-0 py-1 outline-none focus-visible:ring-2 focus-visible:ring-primary",get children(){return e.v.title}})},get contentSlot(){return e.v.title}})}}),p,y),Q(f,L(Et,{get when(){return e.v},get fallback(){return L(CO,{})},get children(){return L(TO,{get url(){return e.v.url},get title(){return e.v.title},get uploaderName(){return e.v.uploaderName},get uploaderUrl(){return e.v.uploaderUrl},get uploaderAvatar(){return e.v.uploaderAvatar},get views(){return e.v.views},get uploaded(){return o()},get uploadedDate(){return new Date(e.v.uploaded)},get live(){return e.v.uploaded===-1}})}}),S,E),Q(b,L(Et,{get when(){return e.v},get children(){return L(sO,{get v(){return e.v},get progress(){return l()?.currentTime}})}})),ie(_=>{var w={"flex flex-row gap-2 mx-1 items-start rounded-xl bg-bg1 p-2 ":!0,"min-w-full":e.layout==="list","sm:max-w-max  sm:flex-col sm:w-72 sm:gap-0 min-w-full sm:min-w-0":e.layout==="sm:grid","h-max max-h-max max-w-max flex-col w-full gap-2 sm:w-72":e.layout==="grid"},T={"aspect-video overflow-hidden rounded":!0,"max-h-96":e.layout==="list","max-h-44 min-w-min sm:max-h-full sm:w-full":e.layout==="sm:grid"},C={"flex w-full min-w-0 max-w-full justify-between h-full  sm:mt-2 max-h-20":!0,"max-w-[22rem]":e.layout==="grid"},$={"flex flex-col min-w-0 gap-2 pr-2 h-full w-full":!0,"max-w-[10rem] [@media(min-width:380px)]:max-w-[11rem] [@media(min-width:400px)]:max-w-full":e.layout==="sm:grid"||e.layout==="list","max-w-full":e.layout==="grid"};return _.e=vn(c,w,_.e),_.t=vn(h,T,_.t),_.a=vn(u,C,_.a),_.o=vn(f,$,_.o),_},{e:void 0,t:void 0,a:void 0,o:void 0}),c})()},SO=e=>{const[t,n]=G(e.src);return L(Oo,{get href(){return e.url},class:"relative w-[10rem] flex aspect-video sm:w-full flex-col overflow-hidden rounded sm:min-w-min text-text1 outline-none focus-visible:ring-2 focus-visible:ring-primary",get children(){return[(()=>{var i=Z(lO);return i.addEventListener("error",()=>{n("/img/error.png")}),ie(s=>{var r={"cursor-pointer w-full aspect-video max-w-md break-words ":!0,"saturate-[0.35] opacity-75":e.watched},o=t();return s.e=vn(i,r,s.e),o!==s.t&&on(i,"src",s.t=o),s},{e:void 0,t:void 0}),i})(),L(ua,{get children(){return[L(zn,{get when(){return e.watched&&e.watchedAt},get children(){var i=Z(cO),s=i.firstChild,r=s.firstChild,[o,a]=ht(r.nextSibling),l=o.nextSibling,[c,h]=ht(l.nextSibling);return Q(s,L(Nb,{title:"Watched",class:"inline-block h-3 w-3 mr-1"}),o,a),Q(s,()=>e.watchedAt,c,h),i}}),L(zn,{get when(){return e.watched&&!e.watchedAt},get children(){return Z(uO)}})]}}),(()=>{var i=Z(hO),s=i.firstChild,r=s.firstChild,[o,a]=ht(r.nextSibling),l=o.nextSibling,[c,h]=ht(l.nextSibling);return Q(s,L(Et,{get when(){return e.duration===-1},children:"Live"}),o,a),Q(s,L(Et,{get when(){return e.duration!==-1},get children(){return _c(e.duration).format("00:00:00").replace(/^0:/,"")}}),c,h),i})(),L(Et,{get when(){return e.currentTime},get children(){var i=Z(dO),s=i.firstChild;return ie(()=>`clamp(0%, ${e.currentTime/e.duration*100}%, 100%`!=null?s.style.setProperty("width",`clamp(0%, ${e.currentTime/e.duration*100}%, 100%`):s.style.removeProperty("width")),i}})]}})},xO=e=>(()=>{var t=Z(fO);return ie(n=>vn(t,{"relative flex aspect-video min-w-0 flex-col rounded-lg overflow-hidden":!0,"w-full":e.layout==="grid","w-[10rem] sm:w-full sm:max-w-[18rem]":e.layout==="sm:grid","w-[10rem]":e.layout==="list"},n)),t})(),TO=e=>{const t=()=>{let n="";return e.uploaderUrl.startsWith("UC")?n=`/channel/${e.uploaderUrl}`:e.uploaderUrl.startsWith("/")&&(n=e.uploaderUrl),n};return(()=>{var n=Z(wO),i=n.firstChild,[s,r]=ht(i.nextSibling),o=s.nextSibling,a=o.firstChild,[l,c]=ht(a.nextSibling),h=l.nextSibling,u=h.firstChild,[f,g]=ht(u.nextSibling),p=f.nextSibling,[y,x]=ht(p.nextSibling),S=y.nextSibling,[E,b]=ht(S.nextSibling);return Q(n,L(Et,{get when(){return e.uploaderAvatar},get children(){var _=Z(gO);return Q(_,L(Oo,{get href(){return t()},class:"flex max-w-max min-w-min items-center outline-none focus-visible:ring-2 focus-visible:ring-primary",get children(){var w=Z(pO);return ie(()=>on(w,"src",e.uploaderAvatar)),w}})),_}}),s,r),Q(o,L(Oo,{get href(){return t()},class:"outline-none focus-visible:ring-2 focus-visible:ring-primary",get children(){var _=Z(mO);return Q(_,()=>e.uploaderName),_}}),l,c),Q(h,L(Et,{get when(){return e.views},get children(){var _=Z(bO),w=_.firstChild,T=w.nextSibling,[C,$]=ht(T.nextSibling);return C.nextSibling,Q(_,()=>_c(e.views).format("0a").toUpperCase(),C,$),ie(()=>on(_,"title",`${_c(e.views).format("0,0")} views`)),_}}),f,g),Q(h,L(Et,{get when(){return!e.live},get children(){return Z(yO)}}),y,x),Q(h,L(Et,{get when(){return!e.live},get children(){var _=Z(vO),w=_.firstChild,[T,C]=ht(w.nextSibling);return T.nextSibling,Q(_,()=>e.uploaded,T,C),ie(()=>on(_,"title",e.uploadedDate.toLocaleString())),_}}),E,b),n})()},CO=()=>Z(_O);var $O=it('<div class="absolute z-50 top-0 right-0 w-full h-full opacity-100 pointer-events-auto bg-black/50"><div class="flex flex-col items-center justify-center w-full h-full gap-3"><div class="text-2xl font-bold text-white"><!$><!/> <!$><!/></div><div class="flex flex-col"><div class="text-lg text-white"></div><div class="text-lg text-white">Please try switching to a different instance or refresh the page.</div></div><div class="flex justify-center gap-2"><button class="px-4 py-2 text-lg text-white border border-white rounded-md">Close'),kO=it('<div class="absolute z-50 top-0 right-0 w-full h-full pointer-events-auto"><div class="flex flex-col items-center justify-center w-full h-full gap-3"><div class="text-2xl font-bold text-white">Playing next in <!$><!/> seconds</div><div class="flex flex-col"><div class="text-lg scale-75 sm:scale-100 text-white w-96 h-full my-2"></div></div><div class="flex justify-center gap-2"><!$><!/><!$><!/>'),AO=it('<media-player keep-alive id=player key-disabled tabindex=-1 autoplay src=https://files.vidstack.io/sprite-fight/720p.mp4 crossorigin playsinline><media-provider class="max-h-screen max-w-screen [&amp;>video]:max-h-screen [&amp;>video]:max-w-screen [&amp;>video]:h-full [&amp;>video]:w-full"><media-poster aria-hidden=true class="absolute inset-0 block h-full w-full rounded-md opacity-0 transition-opacity data-[visible]:opacity-100 [&amp;>img]:h-full [&amp;>img]:w-full [&amp;>img]:object-cover"></media-poster><!$><!/></media-provider><!$><!/><!$><!/><!$><!/><!$><!/>',!0,!1),PO=it("<track>");function vL(e){const t=xb();let n;Ya();const[i,s]=fb(),[r,o]=G(void 0);tt(()=>{t.query.v&&o(t.query.v)});const[a]=qb(),l=RA();G(void 0);const[c,h]=G([]),[u,f]=Hs({}),g=async()=>{},[p,y]=G(0),x=t.query.t,[S,E]=G(!1),b=m=>{if(vt([]),g(),!!n&&x){let v=0;if(/^[\d]*$/g.test(x))v=parseInt(x);else{const P=/([\d]*)h/gi.exec(x)?.[1],R=/([\d]*)m/gi.exec(x)?.[1],U=/([\d]*)s/gi.exec(x)?.[1];P&&(v+=parseInt(P)*60*60),R&&(v+=parseInt(R)*60),U&&(v+=parseInt(U))}y(v)}},[_,w]=G();tt(()=>{console.log(T(),$()),a()?Array.isArray(a().videos)?w(a().videos):w(a().relatedStreams):(w(l.list()),console.log(l,"queue 2 list"))}),tt(()=>{});const[T,C]=G(null),[$,I]=G(null);tt(()=>{});const[A,O]=Cc(),M=()=>{if(console.log("playing next",T()),!T())return;const m=new URL(window.location.origin+T().url);A.fullscreen&&m.searchParams.set("fullscreen",A.fullscreen),re(m.pathname+m.search.toString()),C(null)},B=()=>{},[N,K]=G(!1),Y=5,[X,kt]=G(Y);let J;function zt(){console.log("dismiss"),clearInterval(J),K(!1)}bt(()=>{zt()});const Qt=async m=>{console.log(m,"provider change");const v=m.detail;hC(v)&&(v.library=async()=>await j(()=>import("./hls-C2IVF0P1.js"),[]),console.log(v),v.config={maxBufferSize:60*1e3*1e3,maxBufferLength:30,maxMaxBufferLength:120,lowLatencyMode:!1,testBandwidth:!1,abrEwmaDefaultEstimate:1e6,startLevel:-1,minAutoBitrate:1e6,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrBandWidthFactor:.8,abrBandWidthUpFactor:.9,maxStarvationDelay:5,maxLoadingDelay:15})},[Ut,vt]=G([]),[z,Bt]=G({show:!1,dismissed:!1}),rt=m=>{m.detail.fatal&&(Bt(v=>({...v,show:!0})),n.provider.instance?.recoverMediaError(),Ut().length<10?vt(v=>[...v,{name:m.detail.error.name,code:m.detail.response?.code,details:m.detail.details,fatal:m.detail.fatal,message:m.detail.error.message}]):vt(v=>[...v.slice(1),{name:m.detail.error.name,code:m.detail.response?.code,details:m.detail.details,fatal:m.detail.fatal,message:m.detail.error.message}])),console.log(Ut())};tt(()=>{});const St=()=>{};Bs(()=>{document.addEventListener("visibilitychange",St),document.addEventListener("pagehide",St),document.addEventListener("keydown",Pe),window.addEventListener("beforeunload",St),window.addEventListener("unload",St),document.addEventListener("media-enter-fullscreen-request",m=>{m.preventDefault(),m.stopPropagation(),console.log("Full screen request intercepted. Element will not go full screen.")},{capture:!0}),bt(()=>{document.removeEventListener("keydown",Pe),document.removeEventListener("visibilitychange",St),document.removeEventListener("pagehide",St),document.removeEventListener("media-enter-fullscreen-request",m=>{m.preventDefault(),m.stopPropagation()})})}),tt(()=>{S()});const Ae=Tb(),re=Tc();tt(()=>{Ae()});let he;const Te=()=>{n&&(n.controls.show(),clearTimeout(he),he=setTimeout(()=>{n.controls.hide()},3e3))},Pe=m=>{if(document.activeElement?.tagName!=="INPUT")switch(m.key){case"f":console.log(`f key pressed, fullscreen: ${document.fullscreenElement}`),document.fullscreenElement?(document.exitFullscreen(),screen.orientation.unlock(),O({fullscreen:void 0},{replace:!0})):(document.documentElement.requestFullscreen(),screen.orientation.lock("landscape").catch(()=>{}),O({fullscreen:!0},{replace:!0}),document.body.scroll({top:0,left:0,behavior:"smooth"})),m.preventDefault();break;case"m":n.muted=!n.muted,m.preventDefault();break;case"j":n.currentTime=Math.max(n.currentTime-10,0),Te(),m.preventDefault();break;case"c":const v=n.textTracks.toArray().find(P=>P.id.startsWith("track-")&&(P.language==="en"||P.language==="en_US"||P.language==="en_GB"));if(v){console.log(v.id);const P=c().find(R=>R.id===v.id)?.metadata.url;console.log(P,"track url"),P&&LA(P,null).then(({srtUrl:R})=>{console.log(v.src,R,"track src"),f(v.id,{src:R}),console.log(u,"captions store track"),v.mode=v.mode==="showing"?"hidden":"showing"})}m.preventDefault();break;case"k":n.paused?(n.play(),setTimeout(()=>{n.controls.hide(0)},100)):(n.pause(),Te()),m.preventDefault();break;case" ":if(m.preventDefault(),console.log(document.activeElement?.tagName),document.activeElement?.tagName==="BUTTON"){document.activeElement.click();return}if(document.activeElement?.tagName.startsWith("MEDIA-"))return;n.paused?n.play():n.pause();break;case"ArrowUp":m.shiftKey&&(n.volume=Math.min(n.volume+.05,1),m.preventDefault());break;case"ArrowDown":m.shiftKey&&(n.volume=Math.max(n.volume-.05,0),m.preventDefault());break;case"ArrowLeft":if(m.altKey)return;m.shiftKey?q():n.currentTime=Math.max(n.currentTime-5,0),Te(),m.preventDefault();break;case"ArrowRight":if(m.altKey)return;m.shiftKey?ot():n.currentTime=n.currentTime+5,Te(),m.preventDefault();break;case"0":n.currentTime=0,m.preventDefault();break;case"N":m.shiftKey&&(M(),m.preventDefault());break;case"Escape":N()&&T()?(zt(),m.preventDefault()):z().show&&(Bt({show:!1,dismissed:!0}),m.preventDefault());break;case",":n.currentTime-=.04;break;case".":n.currentTime+=.04;break;case"R":m.shiftKey&&(e.onReload?.(),m.preventDefault());break}},[oe,be]=G([]);tt(()=>{});const F=()=>{if(!n||oe().length===0)return;const m=n.currentTime;let v=oe();for(const P of v)if(m>=P.start&&m<P.end&&!P.manuallyNavigated&&!P.autoSkipped){n.currentTime=P.end,P.autoSkipped=!0;break}be(v)},H=()=>{if(!n||oe().length===0)return;const m=n.currentTime;let v=oe();for(const P of v)if(m>=P.start&&m<P.end){P.manuallyNavigated=!0,P.autoSkipped=!1;break}else P.manuallyNavigated=!1,P.autoSkipped=!1;be(v)},q=()=>{},ot=()=>{},[k,d]=ha();return tt(()=>{t.pathname!=="/watch"?d("player","small",!0):(d("player","small",!1),k.player.dismissed&&d("player","dismissed",!1))}),(()=>{var m=Z(AO),v=m.firstChild,P=v.firstChild,R=P.nextSibling,[U,st]=ht(R.nextSibling),xt=v.nextSibling,[Kt,Tt]=ht(xt.nextSibling),_t=Kt.nextSibling,[ae,Un]=ht(_t.nextSibling),hi=ae.nextSibling,[di,fi]=ht(hi.nextSibling),pi=di.nextSibling,[wb,_b]=ht(pi.nextSibling),eh=n;return typeof eh=="function"?bf(eh,m):n=m,m.addEventListener("mouseleave",()=>{n?.controls.hide(0)}),m.$$mousemove=()=>{rw()||Te()},m.addEventListener("volume-change",Ht=>{console.log("volume change",Ht.detail),s("volume",Ht.detail.volume),s("muted",Ht.detail.muted)}),m.addEventListener("time-update",()=>{F()}),m.addEventListener("can-play",b),m.addEventListener("provider-change",Qt),m.addEventListener("hls-error",rt),m.addEventListener("ended",B),m.addEventListener("play",()=>{n.controls.hide(0),E(!0)}),m.addEventListener("seeked",()=>{H()}),m.addEventListener("pause",()=>{Te()}),m.addEventListener("hls-manifest-loaded",Ht=>{console.log(Ht.detail,"levels")}),m._$owner=ne(),v._$owner=ne(),P._$owner=ne(),Q(v,L(pf,{get each(){return Object.values(u)},children:Ht=>(()=>{var je=Z(PO);return ie(Wt=>{var Vn=Ht.id,xn=Ht.kind,Tn=u[Ht.id].src,us=Ht.srcLang,Ri=Ht.label,hs=Ht.dataType;return Vn!==Wt.e&&on(je,"id",Wt.e=Vn),xn!==Wt.t&&on(je,"kind",Wt.t=xn),Tn!==Wt.a&&on(je,"src",Wt.a=Tn),us!==Wt.o&&on(je,"srclang",Wt.o=us),Ri!==Wt.i&&on(je,"label",Wt.i=Ri),hs!==Wt.n&&on(je,"data-type",Wt.n=hs),Wt},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),je})()}),U,st),Q(m,L(Et,{get when(){return dt(()=>!!(Ut().length>0&&z().show))()&&!z().dismissed},get children(){var Ht=Z($O),je=Ht.firstChild,Wt=je.firstChild,Vn=Wt.firstChild,[xn,Tn]=ht(Vn.nextSibling),us=xn.nextSibling,Ri=us.nextSibling,[hs,Js]=ht(Ri.nextSibling),to=Wt.nextSibling,eo=to.firstChild,Xa=to.nextSibling,no=Xa.firstChild;return Q(Wt,()=>Ut()[Ut().length-1]?.name,xn,Tn),Q(Wt,()=>Ut()[Ut().length-1]?.details,hs,Js),Q(eo,()=>Ut()[Ut().length-1]?.message),no.$$click=()=>{Bt({show:!1,dismissed:!0})},no.$$keydown=Qa=>{Qa.key==="Escape"&&Bt({show:!1,dismissed:!0})},Po(),Ht}}),Kt,Tt),Q(m,L(Et,{get when(){return dt(()=>!!N())()&&T()},get children(){var Ht=Z(kO),je=Ht.firstChild,Wt=je.firstChild,Vn=Wt.firstChild,xn=Vn.nextSibling,[Tn,us]=ht(xn.nextSibling);Tn.nextSibling;var Ri=Wt.nextSibling,hs=Ri.firstChild,Js=Ri.nextSibling,to=Js.firstChild,[eo,Xa]=ht(to.nextSibling),no=eo.nextSibling,[Qa,Eb]=ht(no.nextSibling);return Q(Wt,X,Tn,us),Q(hs,L(EO,{layout:"sm:grid",get v(){return T()?.info??void 0}})),Q(Js,L(Ir,{onClick:()=>{zt(),M()},label:"Play now (Shift + N)"}),eo,Xa),Q(Js,L(Ir,{appearance:"subtle",class:"bg-bg1",onClick:()=>{zt()},label:"Dismiss (Esc)"}),Qa,Eb),Ht}}),ae,Un),Q(m,L(fP,{}),di,fi),Q(m,L(vP,{}),wb,_b),ie(Ht=>{var je={" z-[99999] aspect-video bg-black text-white font-sans overflow-hidden ring-primary data-[focus]:ring-4":!0,"!absolute inset-0 w-screen h-screen":!!A.fullscreen&&!k.player.small,"!sticky sm:!relative !top-0":!A.fullscreen,"!sticky sm:!sticky !top-10 !left-1 !w-56 sm:!w-72 lg:!w-96 ":k.player.small,"!hidden":k.player.dismissed},Wt=p(),Vn=i.speed,xn=i.muted,Tn=i.volume;return Ht.e=vn(m,je,Ht.e),Wt!==Ht.t&&Bi(m,"currentTime",Ht.t=Wt),Vn!==Ht.a&&Bi(m,"playbackrate",Ht.a=Vn),xn!==Ht.o&&Bi(m,"muted",Ht.o=xn),Tn!==Ht.i&&Bi(m,"volume",Ht.i=Tn),Ht},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),Po(),m})()}yf(["mousemove","keydown","click"]);var OO=it('<svg fill=none viewBox="0 0 120 120"aria-hidden=true><circle class=opacity-25 cx=60 cy=60 r=54 stroke=currentColor stroke-width=8></circle><circle class=opacity-75 cx=60 cy=60 r=54 stroke=currentColor stroke-width=10 pathLength=100>');const LO=e=>(()=>{var t=Z(OO),n=t.firstChild,i=n.nextSibling;return i.style.setProperty("stroke-dasharray","50"),i.style.setProperty("stroke-dashoffset","50"),ie(s=>vn(t,{"h-24 w-24 text-white duration-300 animate-spin":!0,[e.class]:!!e.class},s)),t})();var IO=it('<div class="flex item-center w-full justify-center align-bottom"><!$><!/><!$><!/><!$><!/><div><!$><!/><!$><!/><!$><!/></div><!$><!/>');function za(e){return L(Jg,{get toastId(){return e.toastId},classList:{"flex flex-col justify-between outline-none border-0 items-center gap-2 rounded p-3 bg-bg2 shadow ring-2 ring-inset ring-bg1 text-text1 data-[opened]:animate-in data-[opened]:fade-in data-[opened]:slide-in-from-right data-[closed]:animate-out data-[closed]:transition-[transform] data-[closed]:translate-x-[var(--kb-toast-swipe-end-x)] data-[closed]:fade-out-25 data-[swipe=cancel]:translate-x-0 data-[swipe=cancel]:transition-[transform] data-[swipe=move]:translate-x-[var(--kb-toast-swipe-move-x)] data-[swipe=end]:animate-out data-[swipe=end]:fade-out data-[swipe=end]:slide-out-to-right":!0},get children(){return[(()=>{var t=Z(IO),n=t.firstChild,[i,s]=ht(n.nextSibling),r=i.nextSibling,[o,a]=ht(r.nextSibling),l=o.nextSibling,[c,h]=ht(l.nextSibling),u=c.nextSibling,f=u.firstChild,[g,p]=ht(f.nextSibling),y=g.nextSibling,[x,S]=ht(y.nextSibling),E=x.nextSibling,[b,_]=ht(E.nextSibling),w=u.nextSibling,[T,C]=ht(w.nextSibling);return Q(t,L(Et,{get when(){return e.success},get children(){return L(Fb,{class:"h-5 w-5 text-green-600 mr-2 "})}}),i,s),Q(t,L(Et,{get when(){return e.error},get children(){return L(Bb,{class:"h-5 w-5 text-red-600 mr-2 "})}}),o,a),Q(t,L(Et,{get when(){return e.loading},get children(){return L(LO,{class:"w-5 h-5 mr-2"})}}),c,h),Q(u,L(Rx,{class:"",get children(){return e.title}}),g,p),Q(u,L(Cx,{class:"",get children(){return e.description}}),x,S),Q(u,()=>e.children,b,_),Q(t,L(Tx,{class:"ml-auto rounded",get children(){return L(vf,{class:"h-4 w-4"})}}),T,C),t})(),L(Ax,{class:"w-full h-1 bg-bg1",get children(){return L(kx,{class:"bg-primary h-full rounded w-[var(--kb-toast-progress-fill-width)] transition-[width]"})}})]}})}function DO(e){return js.show(t=>L(za,{get toastId(){return t.toastId},title:e}))}function RO(e){return js.show(t=>L(za,{get toastId(){return t.toastId},title:e,success:!0}))}function MO(e){return js.show(t=>L(za,{get toastId(){return t.toastId},title:e,error:!0}))}function NO(e,t){return js.promise(e,n=>L(za,{get toastId(){return n.toastId},get loading(){return n.state==="pending"},get success(){return n.state==="fulfilled"},get error(){return n.state==="rejected"},get children(){return L(ua,{get children(){return[L(zn,{get when(){return n.state==="pending"},get children(){return t.loading}}),L(zn,{get when(){return n.state==="fulfilled"},get children(){return t.success?.(n.data)}}),L(zn,{get when(){return n.state==="rejected"},get children(){return t.error?.(n.error)}})]}})}}))}function FO(e){return js.show(t=>L(Jg,{get toastId(){return t.toastId},get children(){return e()}}))}function BO(e){return js.dismiss(e)}const kn={show:DO,success:RO,error:MO,promise:NO,custom:FO,dismiss:BO},[HO]=Hs({playlists:{},history:{},subscriptions:{},preferences:{},watchLater:{},blocklist:{}}),Sc=new oi({guid:"test"}),[bb,yb]=nw(Sc,HO,!1),vb=ue({store:bb,setStore:yb}),wL=e=>{const[t,n]=G("localStorage"in globalThis?JSON.parse(localStorage.getItem("room")||"{}"):{});let i=null,s=null;const r=async()=>{if(!t().id){o("sync","providers","webrtc","disconnected");return}i&&(console.log("disconnecting"),i.disconnect()),o("sync","providers","webrtc","connecting"),i=new Y0(t().id,Sc,{signaling:["wss://signaling.fly.dev"],...t().password&&{password:t().password}}),console.log(i,"webrtc provider"),i.connect()};tt(async()=>{if(await r(),o("sync","providers","webrtc","disconnected"),!i)return;i.awareness.setLocalStateField("user",{name:t().name});let a=[];i.awareness.states.forEach((l,c)=>{console.log(l,c),a.push({id:c,name:l.user.name})}),o("sync","users",a),i?.awareness.on("change",({added:l,updated:c,removed:h})=>{let u=[];i.awareness.states.forEach((f,g)=>{console.log(f,g),u.push({id:g,name:f.user.name})}),o("sync","users",u),o("sync","lastSync",new Date().getTime()),o("sync","providers","webrtc",i.connected?"connected":"disconnected"),console.log("Awareness changed",l,c,h,u)})});const[,o]=ha();return tt(async()=>{if(!t().id){o("sync","providers","idb","disconnected");return}o("sync","providers","idb","disconnected"),s=new uw(t().id,Sc,!0),o("sync","providers","opfs","connecting");try{await s.sync(),o("sync","providers","opfs","connected")}catch(a){console.error("Error syncing with OPFSx",a),o("sync","providers","opfs","disconnected"),kn.error("Error syncing with OPFS")}bt(()=>{s?.destroy()})}),bt(()=>{i?.disconnect()}),L(vb.Provider,{value:{store:bb,setStore:yb},get children(){return e.children}})},Ya=()=>{const e=ce(vb);if(!e)throw new Error("No SyncedStoreProvider!");return e};export{LO as $,Go as A,Vr as B,ux as C,Ca as D,lx as E,hx as F,Pg as G,dx as H,fb as I,iw as J,pP as K,Ya as L,ox as M,gP as N,Ir as O,se as P,mb as Q,kn as R,yL as S,xx as T,qO as U,bL as V,wL as W,vL as X,Zc as Y,lw as Z,j as _,QO as a,un as a$,Hx as a0,Ux as a1,Nx as a2,Mx as a3,EO as a4,Ea as a5,Bp as a6,jw as a7,d_ as a8,f_ as a9,WE as aA,yg as aB,kw as aC,XO as aD,hf as aE,df as aF,rO as aG,YO as aH,g_ as aI,p_ as aJ,b_ as aK,gi as aL,ax as aM,De as aN,S1 as aO,pt as aP,Yr as aQ,W as aR,$n as aS,nt as aT,D as aU,Gt as aV,Pt as aW,sa as aX,Nt as aY,y1 as aZ,b1 as a_,i_ as aa,V as ab,Xp as ac,HP as ad,_c as ae,zO as af,WO as ag,QS as ah,gx as ai,JS as aj,wx as ak,Ex as al,px as am,bx as an,fx as ao,mx as ap,vx as aq,qb as ar,rw as as,Wn as at,du as au,Hw as av,Sa as aw,CE as ax,ee as ay,GE as az,is as b,g1 as b0,Je as b1,kl as b2,aL as b3,Jn as b4,dm as b5,Mu as b6,iL as b7,nL as b8,v1 as b9,Ct as ba,Qo as bb,et as bc,sL as bd,ZO as be,Am as bf,eL as bg,zr as bh,JO as bi,Q1 as bj,mt as bk,$o as bl,hc as bm,Oe as bn,zx as bo,Yx as bp,oL as bq,rL as br,L1 as bs,Fm as bt,Nm as bu,tL as bv,Su as bw,ru as c,nx as d,lu as e,cu as f,au as g,pu as h,me as i,de as j,Fe as k,Hr as l,Rt as m,ks as n,Hn as o,le as p,wu as q,Dt as r,Qg as s,Ue as t,Gs as u,eu as v,Os as w,gg as x,$x as y,It as z};
//# sourceMappingURL=syncStore-BssUQgBy.js.map
